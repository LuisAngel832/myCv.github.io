import{A as Bt,a as V,b as xe,c as _I,d as Of,e as R,f as II,g as Eu,h as EI,i as DI,j as TI,k as Ff,l as CI,m as da,n as Lf,o as Du,p as bI,q as SI,r as Vf,s as Oe,t as ui,u as bn,v as Tu,w as ha,x as AI,y as xI,z as Dr}from"./chunk-L7TVQH4Q.js";var Uf=null;var jf=1,RI=Symbol("SIGNAL");function Te(n){let e=Uf;return Uf=n,e}function MI(){return Uf}var Bf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function WR(n){if(!(Gf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===jf)){if(!n.producerMustRecompute(n)&&!qf(n)){n.dirty=!1,n.lastCleanEpoch=jf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=jf}}function $f(n){return n&&(n.nextProducerIndex=0),Te(n)}function NI(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Gf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Hf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function qf(n){Wf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(WR(t),r!==t.version))return!0}return!1}function zf(n){if(Wf(n),Gf(n))for(let e=0;e<n.producerNode.length;e++)Hf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Hf(n,e){if(KR(n),n.liveConsumerNode.length===1&&QR(n))for(let r=0;r<n.producerNode.length;r++)Hf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Wf(i),i.producerIndexOfThis[r]=e}}function Gf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Wf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function KR(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function QR(n){return n.producerNode!==void 0}function YR(){throw new Error}var ZR=YR;function PI(n){ZR=n}function te(n){return typeof n=="function"}function so(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Cu=so(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function li(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof Cu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{kI(o)}catch(s){e=e??[],s instanceof Cu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Cu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)kI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&li(t,e)}remove(e){let{_finalizers:t}=this;t&&li(t,e),e instanceof n&&e._removeParent(this)}};$e.EMPTY=(()=>{let n=new $e;return n.closed=!0,n})();var Kf=$e.EMPTY;function bu(n){return n instanceof $e||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function kI(n){te(n)?n():n.unsubscribe()}var ln={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ao={setTimeout(n,e,...t){let{delegate:r}=ao;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ao;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Su(n){ao.setTimeout(()=>{let{onUnhandledError:e}=ln;if(e)e(n);else throw n})}function fa(){}var OI=Qf("C",void 0,void 0);function FI(n){return Qf("E",void 0,n)}function LI(n){return Qf("N",n,void 0)}function Qf(n,e,t){return{kind:n,value:e,error:t}}var di=null;function co(n){if(ln.useDeprecatedSynchronousErrorHandling){let e=!di;if(e&&(di={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=di;if(di=null,t)throw r}}else n()}function VI(n){ln.useDeprecatedSynchronousErrorHandling&&di&&(di.errorThrown=!0,di.error=n)}var hi=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,bu(e)&&e.add(this)):this.destination=eM}static create(e,t,r){return new Zn(e,t,r)}next(e){this.isStopped?Zf(LI(e),this):this._next(e)}error(e){this.isStopped?Zf(FI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zf(OI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},JR=Function.prototype.bind;function Yf(n,e){return JR.call(n,e)}var Jf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Au(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Au(r)}else Au(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Au(t)}}},Zn=class extends hi{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ln.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Yf(e.next,o),error:e.error&&Yf(e.error,o),complete:e.complete&&Yf(e.complete,o)}):i=e}this.destination=new Jf(i)}};function Au(n){ln.useDeprecatedSynchronousErrorHandling?VI(n):Su(n)}function XR(n){throw n}function Zf(n,e){let{onStoppedNotification:t}=ln;t&&ao.setTimeout(()=>t(n,e))}var eM={closed:!0,next:fa,error:XR,complete:fa};var uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tt(n){return n}function Xf(...n){return ep(n)}function ep(n){return n.length===0?Tt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=nM(t)?t:new Zn(t,r,i);return co(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=jI(r),new r((i,o)=>{let s=new Zn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[uo](){return this}pipe(...t){return ep(t)(this)}toPromise(t){return t=jI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function jI(n){var e;return(e=n??ln.Promise)!==null&&e!==void 0?e:Promise}function tM(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function nM(n){return n&&n instanceof hi||tM(n)&&bu(n)}function tp(n){return te(n?.lift)}function ae(n){return e=>{if(tp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,e,t,r,i){return new np(n,e,t,r,i)}var np=class extends hi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function lo(){return ae((n,e)=>{let t=null;n._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ho=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,tp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let t=this.getSubject();e.add(this.source.subscribe(le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return lo()(this)}};var UI=so(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new xu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new UI}next(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Kf:(this.currentObservers=null,o.push(t),new $e(()=>{this.currentObservers=null,li(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new xu(e,t),n})(),xu=class extends He{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Kf}};var lt=class extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var pa={now(){return(pa.delegate||Date).now()},delegate:void 0};var Ru=class extends He{constructor(e=1/0,t=1/0,r=pa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Mu=class extends $e{constructor(e,t){super()}schedule(e,t=0){return this}};var ga={setInterval(n,e,...t){let{delegate:r}=ga;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ga;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var fo=class extends Mu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ga.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ga.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,li(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var po=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};po.now=pa.now;var go=class extends po{constructor(e,t=po.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ma=new go(fo);var Nu=class extends fo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Pu=class extends go{};var rp=new Pu(Nu);var Ct=new he(n=>n.complete());function BI(n){return n&&te(n.schedule)}function ip(n){return n[n.length-1]}function $I(n){return te(ip(n))?n.pop():void 0}function Sn(n){return BI(ip(n))?n.pop():void 0}function qI(n,e){return typeof ip(n)=="number"?n.pop():e}var ku=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ou(n){return te(n?.then)}function Fu(n){return te(n[uo])}function Lu(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Vu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function rM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ju=rM();function Uu(n){return te(n?.[ju])}function Bu(n){return EI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Eu(t.read());if(i)return yield Eu(void 0);yield yield Eu(r)}}finally{t.releaseLock()}})}function $u(n){return te(n?.getReader)}function Fe(n){if(n instanceof he)return n;if(n!=null){if(Fu(n))return iM(n);if(ku(n))return oM(n);if(Ou(n))return sM(n);if(Lu(n))return zI(n);if(Uu(n))return aM(n);if($u(n))return cM(n)}throw Vu(n)}function iM(n){return new he(e=>{let t=n[uo]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oM(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function sM(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Su)})}function aM(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function zI(n){return new he(e=>{uM(n,e).catch(t=>e.error(t))})}function cM(n){return zI(Bu(n))}function uM(n,e){var t,r,i,o;return II(this,void 0,void 0,function*(){try{for(t=DI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Jt(n,e=0){return ae((t,r)=>{t.subscribe(le(r,i=>Pt(r,n,()=>r.next(i),e),()=>Pt(r,n,()=>r.complete(),e),i=>Pt(r,n,()=>r.error(i),e)))})}function dn(n,e=0){return ae((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function HI(n,e){return Fe(n).pipe(dn(e),Jt(e))}function GI(n,e){return Fe(n).pipe(dn(e),Jt(e))}function WI(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function KI(n,e){return new he(t=>{let r;return Pt(t,e,()=>{r=n[ju](),Pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function qu(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{Pt(t,e,()=>{let r=n[Symbol.asyncIterator]();Pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function QI(n,e){return qu(Bu(n),e)}function YI(n,e){if(n!=null){if(Fu(n))return HI(n,e);if(ku(n))return WI(n,e);if(Ou(n))return GI(n,e);if(Lu(n))return qu(n,e);if(Uu(n))return KI(n,e);if($u(n))return QI(n,e)}throw Vu(n)}function _e(n,e){return e?YI(n,e):Fe(n)}function Y(...n){let e=Sn(n);return _e(n,e)}function mo(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function op(n){return!!n&&(n instanceof he||te(n.lift)&&te(n.subscribe))}var Jn=so(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function W(n,e){return ae((t,r)=>{let i=0;t.subscribe(le(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:lM}=Array;function dM(n,e){return lM(e)?n(...e):n(e)}function ZI(n){return W(e=>dM(n,e))}var{isArray:hM}=Array,{getPrototypeOf:fM,prototype:pM,keys:gM}=Object;function JI(n){if(n.length===1){let e=n[0];if(hM(e))return{args:e,keys:null};if(mM(e)){let t=gM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function mM(n){return n&&typeof n=="object"&&fM(n)===pM}function XI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ya(...n){let e=Sn(n),t=$I(n),{args:r,keys:i}=JI(n);if(r.length===0)return _e([],e);let o=new he(yM(r,e,i?s=>XI(i,s):Tt));return t?o.pipe(ZI(t)):o}function yM(n,e,t=Tt){return r=>{eE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)eE(e,()=>{let l=_e(n[c],e),h=!1;l.subscribe(le(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function eE(n,e,t){n?Pt(t,n,e):e()}function tE(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?C(M):c.push(M),C=M=>{o&&e.next(M),l++;let N=!1;Fe(t(M,h++)).subscribe(le(e,j=>{i?.(j),o?v(j):e.next(j)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let j=c.shift();s?Pt(e,s,()=>C(j)):C(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(le(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ze(n,e,t=1/0){return te(e)?Ze((r,i)=>W((o,s)=>e(r,o,i,s))(Fe(n(r,i))),t):(typeof e=="number"&&(t=e),ae((r,i)=>tE(r,i,n,t)))}function Tr(n=1/0){return Ze(Tt,n)}function nE(){return Tr(1)}function yo(...n){return nE()(_e(n,Sn(n)))}function zu(n){return new he(e=>{Fe(n()).subscribe(e)})}function sp(...n){let e=Sn(n),t=qI(n,1/0),r=n;return r.length?r.length===1?Fe(r[0]):Tr(t)(_e(r,e)):Ct}function it(n,e){return ae((t,r)=>{let i=0;t.subscribe(le(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Cr(n){return ae((e,t)=>{let r=null,i=!1,o;r=e.subscribe(le(t,void 0,void 0,s=>{o=Fe(n(s,Cr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function rE(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(le(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function br(n,e){return te(e)?Ze(n,e,1):Ze(n,1)}function Sr(n){return ae((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xn(n){return n<=0?()=>Ct:ae((e,t)=>{let r=0;e.subscribe(le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ap(n){return W(()=>n)}function cp(n,e=Tt){return n=n??vM,ae((t,r)=>{let i,o=!0;t.subscribe(le(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function vM(n,e){return n===e}function Hu(n=wM){return ae((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wM(){return new Jn}function vo(n){return ae((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function $t(n,e){let t=arguments.length>=2;return r=>r.pipe(n?it((i,o)=>n(i,o,r)):Tt,Xn(1),t?Sr(e):Hu(()=>new Jn))}function wo(n){return n<=0?()=>Ct:ae((e,t)=>{let r=[];e.subscribe(le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function up(n,e){let t=arguments.length>=2;return r=>r.pipe(n?it((i,o)=>n(i,o,r)):Tt,wo(1),t?Sr(e):Hu(()=>new Jn))}function va(){return ae((n,e)=>{let t,r=!1;n.subscribe(le(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function fi(n,e){return ae(rE(n,e,arguments.length>=2,!0))}function iE(n={}){let{connector:e=()=>new He,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=c=void 0,h=p=!1},C=()=>{let M=s;v(),M?.unsubscribe()};return ae((M,N)=>{l++,!p&&!h&&m();let j=c=c??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=lp(C,i))}),j.subscribe(N),!s&&l>0&&(s=new Zn({next:z=>j.next(z),error:z=>{p=!0,m(),a=lp(v,t,z),j.error(z)},complete:()=>{h=!0,m(),a=lp(v,r),j.complete()}}),Fe(M).subscribe(s))})(o)}}function lp(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Zn({next:()=>{r.unsubscribe(),n()}});return Fe(e(...t)).subscribe(r)}function Gu(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,iE({connector:()=>new Ru(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function pi(...n){let e=Sn(n);return ae((t,r)=>{(e?yo(n,t,e):yo(n,t)).subscribe(r)})}function Le(n,e){return ae((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(le(r,c=>{i?.unsubscribe();let l=0,h=o++;Fe(n(c,h)).subscribe(i=le(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Wu(n,e){return te(e)?Le(()=>n,e):Le(()=>n)}function dp(n){return ae((e,t)=>{Fe(n).subscribe(le(t,()=>t.complete(),fa)),!t.closed&&e.subscribe(t)})}function Ge(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?ae((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(le(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Tt}var $E="https://g.co/ng/security#xss",Z=class extends Error{constructor(e,t){super(Nl(e,t)),this.code=e}};function Nl(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Na(n){return{toString:n}.toString()}var Ku="__parameters__";function _M(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function qE(n,e,t){return Na(()=>{let r=_M(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Ku)?c[Ku]:Object.defineProperty(c,Ku,{value:[]})[Ku];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var rr=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function kt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(kt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function oE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var IM=Se({__forward_ref__:Se});function zE(n){return n.__forward_ref__=zE,n.toString=function(){return kt(this())},n}function en(n){return HE(n)?n():n}function HE(n){return typeof n=="function"&&n.hasOwnProperty(IM)&&n.__forward_ref__===zE}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function St(n){return{providers:n.providers||[],imports:n.imports||[]}}function Pl(n){return sE(n,WE)||sE(n,KE)}function GE(n){return Pl(n)!==null}function sE(n,e){return n.hasOwnProperty(e)?n[e]:null}function EM(n){let e=n&&(n[WE]||n[KE]);return e||null}function aE(n){return n&&(n.hasOwnProperty(cE)||n.hasOwnProperty(DM))?n[cE]:null}var WE=Se({\u0275prov:Se}),cE=Se({\u0275inj:Se}),KE=Se({ngInjectableDef:Se}),DM=Se({ngInjectorDef:Se}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function QE(n){return n&&!!n.\u0275providers}var TM=Se({\u0275cmp:Se}),CM=Se({\u0275dir:Se}),bM=Se({\u0275pipe:Se}),SM=Se({\u0275mod:Se}),rl=Se({\u0275fac:Se}),Ia=Se({__NG_ELEMENT_ID__:Se}),uE=Se({__NG_ENV_ID__:Se});function Da(n){return typeof n=="string"?n:n==null?"":String(n)}function AM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Da(n)}function xM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Z(-200,n)}function sg(n,e){throw new Z(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),Ep;function YE(){return Ep}function Xt(n){let e=Ep;return Ep=n,e}function ZE(n,e,t){let r=Pl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;sg(n,"Injector")}var RM={},Ta=RM,Dp="__NG_DI_FLAG__",il="ngTempTokenPath",MM="ngTokenPath",NM=/\n/gm,PM="\u0275",lE="__source",To;function kM(){return To}function Ar(n){let e=To;return To=n,e}function OM(n,e=ue.Default){if(To===void 0)throw new Z(-203,!1);return To===null?ZE(n,void 0,e):To.get(n,e&ue.Optional?null:void 0,e)}function O(n,e=ue.Default){return(YE()||OM)(en(n),e)}function F(n,e=ue.Default){return O(n,kl(e))}function kl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Tp(n){let e=[];for(let t=0;t<n.length;t++){let r=en(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],c=FM(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function JE(n,e){return n[Dp]=e,n.prototype[Dp]=e,n}function FM(n){return n[Dp]}function LM(n,e,t,r){let i=n[il];throw e[lE]&&i.unshift(e[lE]),n.message=VM(`
`+n.message,i,t,r),n[MM]=i,n[il]=null,n}function VM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==PM?n.slice(2):n;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):kt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(NM,`
  `)}`}var ko=JE(qE("Optional"),8);var ag=JE(qE("SkipSelf"),4);function bo(n,e){let t=n.hasOwnProperty(rl);return t?n[rl]:null}function cg(n,e){n.forEach(t=>Array.isArray(t)?cg(t,e):e(t))}function XE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ol(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Ca={},fn=[],mi=new H(""),eD=new H("",-1),tD=new H(""),sl=class{get(e,t=Ta){if(t===Ta){let r=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw r.name="NullInjectorError",r}return t}},nD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(nD||{}),Rn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Rn||{}),Mr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Mr||{});function jM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Cp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];BM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function UM(n){return n===3||n===4||n===6}function BM(n){return n.charCodeAt(0)===64}function ug(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?dE(n,t,i,null,e[++r]):dE(n,t,i,null,null))}}return n}function dE(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var rD="ng-template";function $M(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(lg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function lg(n){return n.type===4&&n.value!==rD}function qM(n,e,t){let r=n.type===4&&!t?rD:n.value;return e===r}function zM(n,e,t){let r=4,i=n.attrs,o=i!==null?WM(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!hn(r)&&!hn(c))return!1;if(s&&hn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!qM(n,c,t)||c===""&&e.length===1){if(hn(r))return!1;s=!0}}else if(r&8){if(i===null||!$M(n,i,c,t)){if(hn(r))return!1;s=!0}}else{let l=e[++a],h=HM(c,i,lg(n),t);if(h===-1){if(hn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(hn(r))return!1;s=!0}}}}return hn(r)||s}function hn(n){return(n&1)===0}function HM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return KM(e,n)}function GM(n,e,t=!1){for(let r=0;r<e.length;r++)if(zM(n,e[r],t))return!0;return!1}function WM(n){for(let e=0;e<n.length;e++){let t=n[e];if(UM(t))return e}return n.length}function KM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function hE(n,e){return n?":not("+e.trim()+")":e}function QM(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hn(s)&&(e+=hE(o,i),i=""),r=s,o=o||!hn(r);t++}return i!==""&&(e+=hE(o,i)),e}function YM(n){return n.map(QM).join(",")}function ZM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!hn(i))break;i=o}r++}return{attrs:e,classes:t}}function at(n){return Na(()=>{let e=cD(n),t=xe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Rn.Emulated,styles:n.styles||fn,_:null,schemas:n.schemas||null,tView:null,id:""});uD(t);let r=n.dependencies;return t.directiveDefs=pE(r,!1),t.pipeDefs=pE(r,!0),t.id=eN(t),t})}function JM(n){return Nr(n)||iD(n)}function XM(n){return n!==null}function At(n){return Na(()=>({type:n.type,bootstrap:n.bootstrap||fn,declarations:n.declarations||fn,imports:n.imports||fn,exports:n.exports||fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function fE(n,e){if(n==null)return Ca;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Mr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Mr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Pa(n){return Na(()=>{let e=cD(n);return uD(e),e})}function Nr(n){return n[TM]||null}function iD(n){return n[CM]||null}function oD(n){return n[bM]||null}function sD(n){let e=Nr(n)||iD(n)||oD(n);return e!==null?e.standalone:!1}function aD(n,e){let t=n[SM]||null;if(!t&&e===!0)throw new Error(`Type ${kt(n)} does not have '\u0275mod' property.`);return t}function cD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ca,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||fn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fE(n.inputs,e),outputs:fE(n.outputs),debugInfo:null}}function uD(n){n.features?.forEach(e=>e(n))}function pE(n,e){if(!n)return null;let t=e?oD:JM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(XM)}function eN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ka(n){return{\u0275providers:n}}function tN(...n){return{\u0275providers:lD(!0,n),\u0275fromNgModule:!0}}function lD(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return cg(e,s=>{let a=s;bp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&dD(i,o),t}function dD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];dg(i,o=>{e(o,r)})}}function bp(n,e,t,r){if(n=en(n),!n)return!1;let i=null,o=aE(n),s=!o&&Nr(n);if(!o&&!s){let c=n.ngModule;if(o=aE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)bp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{cg(o.imports,h=>{bp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&dD(l,e)}if(!a){let l=bo(i)||(()=>new i);e({provide:i,useFactory:l,deps:fn},i),e({provide:tD,useValue:i,multi:!0},i),e({provide:mi,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;dg(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function dg(n,e){for(let t of n)QE(t)&&(t=t.\u0275providers),Array.isArray(t)?dg(t,e):e(t)}var nN=Se({provide:String,useValue:Se});function hD(n){return n!==null&&typeof n=="object"&&nN in n}function rN(n){return!!(n&&n.useExisting)}function iN(n){return!!(n&&n.useFactory)}function Sp(n){return typeof n=="function"}var Ol=new H(""),Xu={},oN={},hp;function hg(){return hp===void 0&&(hp=new sl),hp}var zt=class{},ba=class extends zt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xp(e,s=>this.processProvider(s)),this.records.set(eD,_o(void 0,this)),i.has("environment")&&this.records.set(zt,_o(void 0,this));let o=this.records.get(Ol);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(tD,fn,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ar(this),r=Xt(void 0),i;try{return e()}finally{Ar(t),Xt(r)}}get(e,t=Ta,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(uE))return e[uE](this);r=kl(r);let i,o=Ar(this),s=Xt(void 0);try{if(!(r&ue.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=dN(e)&&Pl(e);l&&this.injectableDefInScope(l)?c=_o(Ap(e),Xu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ue.Self?hg():this.parent;return t=r&ue.Optional&&t===Ta?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[il]=a[il]||[]).unshift(kt(e)),o)throw a;return LM(a,e,"R3InjectorError",this.source)}else throw a}finally{Xt(s),Ar(o)}}resolveInjectorInitializers(){let e=Te(null),t=Ar(this),r=Xt(void 0),i;try{let o=this.get(mi,fn,ue.Self);for(let s of o)s()}finally{Ar(t),Xt(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(e){e=en(e);let t=Sp(e)?e:en(e&&e.provide),r=aN(e);if(!Sp(e)&&e.multi===!0){let i=this.records.get(t);i||(i=_o(void 0,Xu,!0),i.factory=()=>Tp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===Xu&&(t.value=oN,t.value=t.factory()),typeof t.value=="object"&&t.value&&lN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=en(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ap(n){let e=Pl(n),t=e!==null?e.factory:bo(n);if(t!==null)return t;if(n instanceof H)throw new Z(204,!1);if(n instanceof Function)return sN(n);throw new Z(204,!1)}function sN(n){if(n.length>0)throw new Z(204,!1);let t=EM(n);return t!==null?()=>t.factory(n):()=>new n}function aN(n){if(hD(n))return _o(void 0,n.useValue);{let e=cN(n);return _o(e,Xu)}}function cN(n,e,t){let r;if(Sp(n)){let i=en(n);return bo(i)||Ap(i)}else if(hD(n))r=()=>en(n.useValue);else if(iN(n))r=()=>n.useFactory(...Tp(n.deps||[]));else if(rN(n))r=()=>O(en(n.useExisting));else{let i=en(n&&(n.useClass||n.provide));if(uN(n))r=()=>new i(...Tp(n.deps));else return bo(i)||Ap(i)}return r}function _o(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uN(n){return!!n.deps}function lN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function dN(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function xp(n,e){for(let t of n)Array.isArray(t)?xp(t,e):t&&QE(t)?xp(t.\u0275providers,e):e(t)}function gn(n,e){n instanceof ba&&n.assertNotDestroyed();let t,r=Ar(n),i=Xt(void 0);try{return e()}finally{Ar(r),Xt(i)}}function fD(){return YE()!==void 0||kM()!=null}function hN(n){if(!fD())throw new Z(-203,!1)}function fN(n){let e=rr.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function pN(n){return typeof n=="function"}var Ht=0,de=1,ne=2,vt=3,pn=4,mn=5,Mn=6,gE=7,er=8,So=9,Nn=10,ot=11,Sa=12,mE=13,Oo=14,nn=15,Ao=16,Io=17,xo=18,Fl=19,pD=20,Rr=21,fp=22,tn=23,Ot=25,gD=1,Aa=6,tr=7,al=8,cl=9,qt=10,ul=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ul||{});function xn(n){return Array.isArray(n)&&typeof n[gD]=="object"}function kn(n){return Array.isArray(n)&&n[gD]===!0}function mD(n){return(n.flags&4)!==0}function Oa(n){return n.componentOffset>-1}function yD(n){return(n.flags&1)===1}function Fa(n){return!!n.template}function ll(n){return(n[ne]&512)!==0}var Rp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function vD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ll(){return wD}function wD(n){return n.type.prototype.ngOnChanges&&(n.setInput=mN),gN}Ll.ngInherit=!0;function gN(){let n=ID(this),e=n?.current;if(e){let t=n.previous;if(t===Ca)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function mN(n,e,t,r,i){let o=this.declaredInputs[r],s=ID(n)||yN(n,{previous:Ca,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Rp(l&&l.currentValue,t,c===Ca),vD(n,e,i,t)}var _D="__ngSimpleChanges__";function ID(n){return n[_D]||null}function yN(n,e){return n[_D]=e}var yE=null;var xr=function(n,e,t){yE?.(n,e,t)},vN="svg",wN="math";function Pn(n){for(;Array.isArray(n);)n=n[Ht];return n}function _N(n,e){return Pn(e[n])}function yn(n,e){return Pn(e[n.index])}function ED(n,e){return n.data[e]}function Fo(n,e){let t=e[n];return xn(t)?t:t[Ht]}function fg(n){return(n[ne]&128)===128}function IN(n){return kn(n[vt])}function dl(n,e){return e==null?null:n[e]}function DD(n){n[Io]=0}function TD(n){n[ne]&1024||(n[ne]|=1024,fg(n)&&jl(n))}function EN(n,e){for(;n>0;)e=e[Oo],n--;return e}function Vl(n){return!!(n[ne]&9216||n[tn]?.dirty)}function Mp(n){n[Nn].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Vl(n)&&jl(n)}function jl(n){n[Nn].changeDetectionScheduler?.notify(0);let e=yi(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!fg(e)));)e=yi(e)}function CD(n,e){if((n[ne]&256)===256)throw new Z(911,!1);n[Rr]===null&&(n[Rr]=[]),n[Rr].push(e)}function DN(n,e){if(n[Rr]===null)return;let t=n[Rr].indexOf(e);t!==-1&&n[Rr].splice(t,1)}function yi(n){let e=n[vt];return kn(e)?e[vt]:e}var ge={lFrame:OD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var bD=!1;function TN(){return ge.lFrame.elementDepthCount}function CN(){ge.lFrame.elementDepthCount++}function bN(){ge.lFrame.elementDepthCount--}function SD(){return ge.bindingsEnabled}function La(){return ge.skipHydrationRootTNode!==null}function SN(n){return ge.skipHydrationRootTNode===n}function AN(n){ge.skipHydrationRootTNode=n}function xN(){ge.skipHydrationRootTNode=null}function st(){return ge.lFrame.lView}function Lo(){return ge.lFrame.tView}function On(){let n=AD();for(;n!==null&&n.type===64;)n=n.parent;return n}function AD(){return ge.lFrame.currentTNode}function RN(){let n=ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Va(n,e){let t=ge.lFrame;t.currentTNode=n,t.isParent=e}function xD(){return ge.lFrame.isParent}function MN(){ge.lFrame.isParent=!1}function RD(){return bD}function vE(n){bD=n}function NN(){return ge.lFrame.bindingIndex}function PN(n){return ge.lFrame.bindingIndex=n}function MD(){return ge.lFrame.bindingIndex++}function kN(n){let e=ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ON(){return ge.lFrame.inI18n}function FN(n,e){let t=ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,Np(e)}function LN(){return ge.lFrame.currentDirectiveIndex}function Np(n){ge.lFrame.currentDirectiveIndex=n}function ND(n){ge.lFrame.currentQueryIndex=n}function VN(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[mn]:null}function PD(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=VN(o),i===null||(o=o[Oo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ge.lFrame=kD();return r.currentTNode=e,r.lView=n,!0}function pg(n){let e=kD(),t=n[de];ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function kD(){let n=ge.lFrame,e=n===null?null:n.child;return e===null?OD(n):e}function OD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function FD(){let n=ge.lFrame;return ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var LD=FD;function gg(){let n=FD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jN(n){return(ge.lFrame.contextLView=EN(n,ge.lFrame.contextLView))[er]}function Ul(){return ge.lFrame.selectedIndex}function vi(n){ge.lFrame.selectedIndex=n}function UN(){let n=ge.lFrame;return ED(n.tView,n.selectedIndex)}function VD(){return ge.lFrame.currentNamespace}var jD=!0;function mg(){return jD}function Or(n){jD=n}function BN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=wD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function yg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function el(n,e,t){UD(n,e,3,t)}function tl(n,e,t,r){(n[ne]&3)===t&&UD(n,e,t,r)}function pp(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function UD(n,e,t,r){let i=r!==void 0?n[Io]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Io]+=65536),(a<o||o==-1)&&($N(n,t,e,c),n[Io]=(n[Io]&4294901760)+c+2),c++}function wE(n,e){xr(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),xr(5,n,e)}}function $N(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[Io]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,wE(a,o)):wE(a,o)}var Co=-1,xa=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function qN(n){return n instanceof xa}function zN(n){return(n.flags&8)!==0}function HN(n){return(n.flags&16)!==0}var gp={},Pp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=kl(r);let i=this.injector.get(e,gp,r);return i!==gp||t===gp?i:this.parentInjector.get(e,t,r)}};function BD(n){return n!==Co}function hl(n){return n&32767}function GN(n){return n>>16}function fl(n,e){let t=GN(n),r=e;for(;t>0;)r=r[Oo],t--;return r}var kp=!0;function _E(n){let e=kp;return kp=n,e}var WN=256,$D=WN-1,qD=5,KN=0,An={};function QN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ia)&&(r=t[Ia]),r==null&&(r=t[Ia]=KN++);let i=r&$D,o=1<<i;e.data[n+(i>>qD)]|=o}function zD(n,e){let t=HD(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,mp(r.data,n),mp(e,null),mp(r.blueprint,null));let i=vg(n,e),o=n.injectorIndex;if(BD(i)){let s=hl(i),a=fl(i,e),c=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function mp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function HD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function vg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=YD(i),r===null)return Co;if(t++,i=i[Oo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Co}function YN(n,e,t){QN(n,e,t)}function GD(n,e,t){if(t&ue.Optional||n!==void 0)return n;sg(e,"NodeInjector")}function WD(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),!(t&(ue.Self|ue.Host))){let i=n[So],o=Xt(void 0);try{return i?i.get(e,r,t&ue.Optional):ZE(e,r,t&ue.Optional)}finally{Xt(o)}}return GD(r,e,t)}function KD(n,e,t,r=ue.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ue.Self)){let s=tP(n,e,t,r,An);if(s!==An)return s}let o=QD(n,e,t,r,An);if(o!==An)return o}return WD(e,t,r,i)}function QD(n,e,t,r,i){let o=XN(t);if(typeof o=="function"){if(!PD(e,n,r))return r&ue.Host?GD(i,t,r):WD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))sg(t);else return s}finally{LD()}}else if(typeof o=="number"){let s=null,a=HD(n,e),c=Co,l=r&ue.Host?e[nn][mn]:null;for((a===-1||r&ue.SkipSelf)&&(c=a===-1?vg(n,e):e[a+8],c===Co||!EE(r,!1)?a=-1:(s=e[de],a=hl(c),e=fl(c,e)));a!==-1;){let h=e[de];if(IE(o,a,h.data)){let p=ZN(a,e,t,s,r,l);if(p!==An)return p}c=e[a+8],c!==Co&&EE(r,e[de].data[a+8]===l)&&IE(o,a,e)?(s=h,a=hl(c),e=fl(c,e)):a=-1}}return i}function ZN(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],c=r==null?Oa(a)&&kp:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,h=JN(a,s,t,c,l);return h!==null?Ra(e,s,h,a):An}function JN(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let C=s[v];if(v<c&&t===C||v>=c&&C.type===t)return v}if(i){let v=s[c];if(v&&Fa(v)&&v.type===t)return c}return null}function Ra(n,e,t,r){let i=n[t],o=e.data;if(qN(i)){let s=i;s.resolving&&xM(AM(o[t]));let a=_E(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Xt(s.injectImpl):null,h=PD(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&BN(t,o[t],e)}finally{l!==null&&Xt(l),_E(a),s.resolving=!1,LD()}}return i}function XN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ia)?n[Ia]:void 0;return typeof e=="number"?e>=0?e&$D:eP:e}function IE(n,e,t){let r=1<<n;return!!(t[e+(n>>qD)]&r)}function EE(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var gi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return KD(this._tNode,this._lView,e,kl(r),t)}};function eP(){return new gi(On(),st())}function wg(n){return Na(()=>{let e=n.prototype.constructor,t=e[rl]||Op(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[rl]||Op(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Op(n){return HE(n)?()=>{let e=Op(en(n));return e&&e()}:bo(n)}function tP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=QD(o,s,t,r|ue.Self,An);if(a!==An)return a;let c=o.parent;if(!c){let l=s[pD];if(l){let h=l.get(t,An,r);if(h!==An)return h}c=YD(s),s=s[Oo]}o=c}return i}function YD(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[mn]:null}function DE(n,e=null,t=null,r){let i=ZD(n,e,t,r);return i.resolveInjectorInitializers(),i}function ZD(n,e=null,t=null,r,i=new Set){let o=[t||fn,tN(n)];return r=r||(typeof n=="object"?void 0:kt(n)),new ba(o,e||hg(),r||null,i)}var Gt=class n{static{this.THROW_IF_NOT_FOUND=Ta}static{this.NULL=new sl}static create(e,t){if(Array.isArray(e))return DE({name:""},t,e,"");{let r=e.name??"";return DE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=q({token:n,providedIn:"any",factory:()=>O(eD)})}static{this.__NG_ELEMENT_ID__=-1}};var nP=new H("");nP.__NG_ELEMENT_ID__=n=>{let e=On();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new Z(204,!1)};var rP="ngOriginalError";function yp(n){return n[rP]}var JD=!0,_g=(()=>{class n{static{this.__NG_ELEMENT_ID__=iP}static{this.__NG_ENV_ID__=t=>t}}return n})(),Fp=class extends _g{constructor(e){super(),this._lView=e}onDestroy(e){return CD(this._lView,e),()=>DN(this._lView,e)}};function iP(){return new Fp(st())}var Ii=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new lt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Lp=class extends He{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,fD()&&(this.destroyRef=F(_g,{optional:!0})??void 0,this.pendingTasks=F(Ii,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},bt=Lp;function pl(...n){}function XD(n){let e,t;function r(){n=pl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function TE(n){return queueMicrotask(()=>n()),()=>{n=pl}}var Ig="isAngularZone",gl=Ig+"_ID",oP=0,pe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bt(!1),this.onMicrotaskEmpty=new bt(!1),this.onStable=new bt(!1),this.onError=new bt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=JD}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,cP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ig)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,sP,pl,pl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},sP={};function Eg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function aP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){XD(()=>{n.callbackScheduled=!1,Vp(n),n.isCheckStableRunning=!0,Eg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Vp(n)}function cP(n){let e=()=>{aP(n)},t=oP++;n._inner=n._inner.fork({name:"angular",properties:{[Ig]:!0,[gl]:t,[gl+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(uP(c))return r.invokeTask(o,s,a,c);try{return CE(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),bE(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return CE(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!lP(c)&&e(),bE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Vp(n),Eg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Vp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function CE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bE(n){n._nesting--,Eg(n)}var ml=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bt,this.onMicrotaskEmpty=new bt,this.onStable=new bt,this.onError=new bt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function uP(n){return eT(n,"__ignore_ng_zone__")}function lP(n){return eT(n,"__scheduler_tick__")}function eT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function dP(n="zone.js",e){return n==="noop"?new ml:n==="zone.js"?new pe(e):n}var nr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&yp(e);for(;t&&yp(t);)t=yp(t);return t||null}},hP=new H("",{providedIn:"root",factory:()=>{let n=F(pe),e=F(nr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function fP(){return Bl(On(),st())}function Bl(n,e){return new $l(yn(n,e))}var $l=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=fP}}return n})();var pP="ngSkipHydration",gP="ngskiphydration";function tT(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===gP)return!0}return!1}function nT(n){return n.hasAttribute(pP)}function yl(n){return(n.flags&128)===128}function mP(n){if(yl(n))return!0;let e=n.parent;for(;e;){if(yl(n)||tT(e))return!0;e=e.parent}return!1}var rT=new Map,yP=0;function vP(){return yP++}function wP(n){rT.set(n[Fl],n)}function jp(n){rT.delete(n[Fl])}var SE="__ngContext__";function wi(n,e){xn(e)?(n[SE]=e[Fl],wP(e)):n[SE]=e}function iT(n){return sT(n[Sa])}function oT(n){return sT(n[pn])}function sT(n){for(;n!==null&&!kn(n);)n=n[pn];return n}var Up;function aT(n){Up=n}function ql(){if(Up!==void 0)return Up;if(typeof document<"u")return document;throw new Z(210,!1)}var ja=new H("",{providedIn:"root",factory:()=>_P}),_P="ng",Dg=new H(""),dt=new H("",{providedIn:"platform",factory:()=>"unknown"});var Tg=new H("",{providedIn:"root",factory:()=>ql().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function IP(){let n=new Vo;return F(dt)==="browser"&&(n.store=EP(ql(),F(ja))),n}var Vo=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=q({token:n,providedIn:"root",factory:IP})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function EP(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var cT="h",uT="b",Bp=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Bp||{}),DP="e",TP="t",Cg="c",lT="x",vl="r",CP="i",bP="n",dT="d";var SP="__nghData__",hT=SP,vp="ngh",AP="nghm",fT=()=>null;function xP(n,e,t=!1){let r=n.getAttribute(vp);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let h=e.get(Vo,null,{optional:!0});h!==null&&(c=h.get(hT,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,zl(l,0,n.nextSibling)),a?n.setAttribute(vp,a):n.removeAttribute(vp),l}function RP(){fT=xP}function bg(n,e,t=!1){return fT(n,e,t)}function MP(n){let e=n._lView;return e[de].type===2?null:(ll(e)&&(e=e[Ot]),e)}function NP(n){return n.textContent?.replace(/\s/gm,"")}function PP(n){let e=ql(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=NP(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function zl(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function $p(n,e){return n.segmentHeads?.[e]??null}function kP(n,e){let t=n.data,r=t[DP]?.[e]??null;return r===null&&t[Cg]?.[e]&&(r=Sg(n,e)),r}function pT(n,e){return n.data[Cg]?.[e]??null}function Sg(n,e){let t=pT(n,e)??[],r=0;for(let i of t)r+=i[vl]*(i[lT]??1);return r}function OP(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[dT];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Ua(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[dT];n.disconnectedNodes=t?new Set(t):null}return!!OP(n)?.has(e)}var Qu=new H(""),gT=!1,mT=new H("",{providedIn:"root",factory:()=>gT});var wl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$E})`}};function Ag(n){return n instanceof wl?n.changingThisBreaksApplicationSecurity:n}function yT(n,e){let t=FP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${$E})`)}return t===e}function FP(n){return n instanceof wl&&n.getTypeName()||null}var LP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function vT(n){return n=String(n),n.match(LP)?n:"unsafe:"+n}var xg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(xg||{});function wT(n){let e=VP();return e?e.sanitize(xg.URL,n)||"":yT(n,"URL")?Ag(n):vT(Da(n))}function VP(){let n=st();return n&&n[Nn].sanitizer}var jP=/^>|^->|<!--|-->|--!>|<!-$/g,UP=/(<|>)/g,BP="\u200B$1\u200B";function $P(n){return n.replace(jP,e=>e.replace(UP,BP))}function qP(n){return n.ownerDocument.body}function _T(n){return n instanceof Function?n():n}function wa(n){return(n??F(Gt)).get(dt)==="browser"}var Ei=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ei||{}),zP;function Rg(n,e){return zP(n,e)}function Eo(n,e,t,r,i){if(r!=null){let o,s=!1;kn(r)?o=r:xn(r)&&(s=!0,r=r[Ht]);let a=Pn(r);n===0&&t!==null?i==null?bT(e,t,a):_l(e,t,a,i||null,!0):n===1&&t!==null?_l(e,t,a,i||null,!0):n===2?kg(e,a,s):n===3&&e.destroyNode(a),o!=null&&ok(e,n,o,t,i)}}function IT(n,e){return n.createText(e)}function HP(n,e,t){n.setValue(e,t)}function ET(n,e){return n.createComment($P(e))}function Mg(n,e,t){return n.createElement(e,t)}function GP(n,e){DT(n,e),e[Ht]=null,e[mn]=null}function WP(n,e,t,r,i,o){r[Ht]=i,r[mn]=e,Hl(n,r,t,1,i,o)}function DT(n,e){e[Nn].changeDetectionScheduler?.notify(9),Hl(n,e,e[ot],2,null,null)}function KP(n){let e=n[Sa];if(!e)return wp(n[de],n);for(;e;){let t=null;if(xn(e))t=e[Sa];else{let r=e[qt];r&&(t=r)}if(!t){for(;e&&!e[pn]&&e!==n;)xn(e)&&wp(e[de],e),e=e[vt];e===null&&(e=n),xn(e)&&wp(e[de],e),t=e&&e[pn]}e=t}}function QP(n,e,t,r){let i=qt+r,o=t.length;r>0&&(t[i-1][pn]=e),r<o-qt?(e[pn]=t[i],XE(t,qt+r,e)):(t.push(e),e[pn]=null),e[vt]=t;let s=e[Ao];s!==null&&t!==s&&TT(s,e);let a=e[xo];a!==null&&a.insertView(n),Mp(e),e[ne]|=128}function TT(n,e){let t=n[cl],r=e[vt];if(xn(r))n[ne]|=ul.HasTransplantedViews;else{let i=r[vt][nn];e[nn]!==i&&(n[ne]|=ul.HasTransplantedViews)}t===null?n[cl]=[e]:t.push(e)}function Ng(n,e){let t=n[cl],r=t.indexOf(e);t.splice(r,1)}function qp(n,e){if(n.length<=qt)return;let t=qt+e,r=n[t];if(r){let i=r[Ao];i!==null&&i!==n&&Ng(i,r),e>0&&(n[t-1][pn]=r[pn]);let o=ol(n,qt+e);GP(r[de],r);let s=o[xo];s!==null&&s.detachView(o[de]),r[vt]=null,r[pn]=null,r[ne]&=-129}return r}function CT(n,e){if(!(e[ne]&256)){let t=e[ot];t.destroyNode&&Hl(n,e,t,3,null,null),KP(e)}}function wp(n,e){if(e[ne]&256)return;let t=Te(null);try{e[ne]&=-129,e[ne]|=256,e[tn]&&zf(e[tn]),ZP(n,e),YP(n,e),e[de].type===1&&e[ot].destroy();let r=e[Ao];if(r!==null&&kn(e[vt])){r!==e[vt]&&Ng(r,e);let i=e[xo];i!==null&&i.detachView(n)}jp(e)}finally{Te(t)}}function YP(n,e){let t=n.cleanup,r=e[gE];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[gE]=null);let i=e[Rr];if(i!==null){e[Rr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function ZP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof xa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];xr(4,a,c);try{c.call(a)}finally{xr(5,a,c)}}else{xr(4,i,o);try{o.call(i)}finally{xr(5,i,o)}}}}}function JP(n,e,t){return XP(n,e.parent,t)}function XP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ht];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Rn.None||o===Rn.Emulated)return null}return yn(r,t)}}function _l(n,e,t,r,i){n.insertBefore(e,t,r,i)}function bT(n,e,t){n.appendChild(e,t)}function AE(n,e,t,r,i){r!==null?_l(n,e,t,r,i):bT(n,e,t)}function ST(n,e){return n.parentNode(e)}function ek(n,e){return n.nextSibling(e)}function tk(n,e,t){return rk(n,e,t)}function nk(n,e,t){return n.type&40?yn(n,t):null}var rk=nk,xE;function Pg(n,e,t,r){let i=JP(n,r,e),o=e[ot],s=r.parent||e[mn],a=tk(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)AE(o,i,t[c],a,!1);else AE(o,i,t,a,!1);xE!==void 0&&xE(o,r,e,t,i)}function _a(n,e){if(e!==null){let t=e.type;if(t&3)return yn(e,n);if(t&4)return zp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return _a(n,r);{let i=n[e.index];return kn(i)?zp(-1,i):Pn(i)}}else{if(t&128)return _a(n,e.next);if(t&32)return Rg(e,n)()||Pn(n[e.index]);{let r=AT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=yi(n[nn]);return _a(i,r)}else return _a(n,e.next)}}}return null}function AT(n,e){if(e!==null){let r=n[nn][mn],i=e.projection;return r.projection[i]}return null}function zp(n,e){let t=qt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return _a(r,i)}return e[tr]}function kg(n,e,t){n.removeChild(null,e,t)}function xT(n){n.textContent=""}function Og(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&wi(Pn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Og(n,e,t.child,r,i,o,!1),Eo(e,n,i,a,o);else if(c&32){let l=Rg(t,r),h;for(;h=l();)Eo(e,n,i,h,o);Eo(e,n,i,a,o)}else c&16?ik(n,e,r,t,i,o):Eo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Hl(n,e,t,r,i,o){Og(t,r,n.firstChild,e,i,o,!1)}function ik(n,e,t,r,i,o){let s=t[nn],c=s[mn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Eo(e,n,i,h,o)}else{let l=c,h=s[vt];yl(r)&&(l.flags|=128),Og(n,e,l,h,i,o,!0)}}function ok(n,e,t,r,i){let o=t[tr],s=Pn(t);o!==s&&Eo(e,n,r,o,i);for(let a=qt;a<t.length;a++){let c=t[a];Hl(c[de],c,n,e,r,o)}}function sk(n,e,t){n.setAttribute(e,"style",t)}function RT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function MT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Cp(n,e,r),i!==null&&RT(n,e,i),o!==null&&sk(n,e,o)}var jo={};function Ie(n=1){NT(Lo(),st(),Ul()+n,!1)}function NT(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&el(e,o,t)}else{let o=n.preOrderHooks;o!==null&&tl(e,o,0,t)}vi(t)}function qe(n,e=ue.Default){let t=st();if(t===null)return O(n,e);let r=On();return KD(r,t,en(n),e)}function PT(){let n="invalid";throw new Error(n)}function kT(n,e,t,r,i,o){let s=Te(null);try{let a=null;i&Mr.SignalBased&&(a=e[r][RI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Mr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):vD(e,a,r,o)}finally{Te(s)}}function ak(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)vi(~i);else{let o=i,s=t[++r],a=t[++r];FN(s,o);let c=e[o];a(2,c)}}}finally{vi(-1)}}function Gl(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Ht]=i,p[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),DD(p),p[vt]=p[Oo]=n,p[er]=t,p[Nn]=s||n&&n[Nn],p[ot]=a||n&&n[ot],p[So]=c||n&&n[So]||null,p[mn]=o,p[Fl]=vP(),p[Mn]=h,p[pD]=l,p[nn]=e.type==2?n[nn]:p,p}function Wl(n,e,t,r,i){let o=n.data[e];if(o===null)o=ck(n,e,t,r,i),ON()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=RN();o.injectorIndex=s===null?-1:s.injectorIndex}return Va(o,!0),o}function ck(n,e,t,r,i){let o=AD(),s=xD(),a=s?o:o&&o.parent,c=n.data[e]=pk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function OT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function FT(n,e,t,r,i){let o=Ul(),s=r&2;try{vi(-1),s&&e.length>Ot&&NT(n,e,Ot,!1),xr(s?2:0,i),t(r,i)}finally{vi(o),xr(s?3:1,i)}}function LT(n,e,t){if(mD(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Te(r)}}}function VT(n,e,t){SD()&&(Ik(n,e,t,yn(t,e)),(t.flags&64)===64&&zT(n,e,t))}function jT(n,e,t=yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function UT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Fg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Fg(n,e,t,r,i,o,s,a,c,l,h){let p=Ot+r,m=p+i,v=uk(p,m),C=typeof l=="function"?l():l;return v[de]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:C,incompleteFirstPass:!1,ssrId:h}}function uk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:jo);return t}function lk(n,e,t,r){let o=r.get(mT,gT)||t===Rn.ShadowDom,s=n.selectRootElement(e,o);return dk(s),s}function dk(n){BT(n)}var BT=()=>null;function hk(n){nT(n)?xT(n):PP(n)}function fk(){BT=hk}function pk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return La()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function RE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Mr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?ME(r,t,l,a,c):ME(r,t,l,a)}return r}function ME(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function gk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,C=m?m.outputs:null;c=RE(0,p.inputs,h,c,v),l=RE(1,p.outputs,h,l,C);let M=c!==null&&s!==null&&!lg(e)?Rk(c,h,s):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function mk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function yk(n,e,t,r,i,o,s,a){let c=yn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Lg(n,t,h,r,i),Oa(e)&&vk(t,e.index)):e.type&3?(r=mk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function vk(n,e){let t=Fo(e,n);t[ne]&16||(t[ne]|=64)}function $T(n,e,t,r){if(SD()){let i=r===null?null:{"":-1},o=Dk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&qT(n,e,t,s,i,a),i&&Tk(t,r,i)}t.mergedAttrs=ug(t.mergedAttrs,t.attrs)}function qT(n,e,t,r,i,o){for(let l=0;l<r.length;l++)YN(zD(t,e),n,r[l].type);bk(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=OT(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=ug(t.mergedAttrs,h.hostAttrs),Sk(n,t,e,c,h),Ck(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}gk(n,t,o)}function wk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;_k(s)!=a&&s.push(a),s.push(t,r,o)}}function _k(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Ik(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Oa(t)&&Ak(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||zD(t,e),wi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=Ra(e,n,a,t);if(wi(l,e),s!==null&&xk(e,a-i,l,c,t,s),Fa(c)){let h=Fo(t.index,e);h[er]=Ra(e,n,a,t)}}}function zT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=LN();try{vi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Np(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Ek(c,l)}}finally{vi(-1),Np(s)}}function Ek(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Dk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(GM(e,s.selectors,!1))if(r||(r=[]),Fa(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Hp(n,e,c)}else r.unshift(s),Hp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Hp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Tk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Z(-301,!1);r.push(e[i],o)}}}function Ck(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Fa(e)&&(t[""]=n)}}function bk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Sk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=bo(i.type,!0)),s=new xa(o,Fa(i),qe);n.blueprint[r]=s,t[r]=s,wk(n,e,r,OT(n,t,i.hostVars,jo),i)}function Ak(n,e,t){let r=yn(e,n),i=UT(t),o=n[Nn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Kl(n,Gl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function xk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];kT(r,t,c,l,h,p)}}function Rk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function HT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function GT(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ND(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function Kl(n,e){return n[Sa]?n[mE][pn]=e:n[Sa]=e,n[mE]=e,e}function Gp(n,e,t){ND(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function Mk(n,e){let t=n[So],r=t?t.get(nr,null):null;r&&r.handleError(e)}function Lg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];kT(h,l,r,a,c,i)}}function WT(n,e,t){let r=_N(e,n);HP(n[ot],r,t)}function Nk(n,e){let t=Fo(e,n),r=t[de];Pk(r,t);let i=t[Ht];i!==null&&t[Mn]===null&&(t[Mn]=bg(i,t[So])),Vg(r,t,t[er])}function Pk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Vg(n,e,t){pg(e);try{let r=n.viewQuery;r!==null&&Gp(1,r,t);let i=n.template;i!==null&&FT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xo]?.finishViewCreation(n),n.staticContentQueries&&GT(n,e),n.staticViewQueries&&Gp(2,n.viewQuery,t);let o=n.components;o!==null&&kk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,gg()}}function kk(n,e){for(let t=0;t<e.length;t++)Nk(n,e[t])}function Ok(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[ne]&4096?4096:16,c=Gl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Ao]=l;let h=n[xo];return h!==null&&(c[xo]=h.createEmbeddedView(o)),Vg(o,c,t),c}finally{Te(i)}}function NE(n,e){return!e||e.firstChild===null||yl(n)}function Fk(n,e,t,r=!0){let i=e[de];if(QP(i,e,n,t),r){let s=zp(t,n),a=e[ot],c=ST(a,n[tr]);c!==null&&WP(i,n[mn],a,e,c,s)}let o=e[Mn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Il(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Pn(o)),kn(o)&&Lk(o,r);let s=t.type;if(s&8)Il(n,e,t.child,r);else if(s&32){let a=Rg(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=AT(e,t);if(Array.isArray(a))r.push(...a);else{let c=yi(e[nn]);Il(c[de],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Lk(n,e){for(let t=qt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&Il(r[de],r,i,e)}n[tr]!==n[Ht]&&e.push(n[tr])}var KT=[];function Vk(n){return n[tn]??jk(n)}function jk(n){let e=KT.pop()??Object.create(Bk);return e.lView=n,e}function Uk(n){n.lView[tn]!==n&&(n.lView=null,KT.push(n))}var Bk=xe(V({},Bf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{jl(n.lView)},consumerOnSignalRead(){this.lView[tn]=this}});function $k(n){let e=n[tn]??Object.create(qk);return e.lView=n,e}var qk=xe(V({},Bf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=yi(n.lView);for(;e&&!QT(e[de]);)e=yi(e);e&&TD(e)},consumerOnSignalRead(){this.lView[tn]=this}});function QT(n){return n.type!==2}var zk=100;function YT(n,e=!0,t=0){let r=n[Nn],i=r.rendererFactory,o=!1;o||i.begin?.();try{Hk(n,t)}catch(s){throw e&&Mk(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function Hk(n,e){let t=RD();try{vE(!0),Wp(n,e);let r=0;for(;Vl(n);){if(r===zk)throw new Z(103,!1);r++,Wp(n,1)}}finally{vE(t)}}function Gk(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Nn].inlineEffectRunner?.flush(),pg(e);let a=!0,c=null,l=null;o||(QT(n)?(l=Vk(e),c=$f(l)):MI()===null?(a=!1,l=$k(e),c=$f(l)):e[tn]&&(zf(e[tn]),e[tn]=null));try{DD(e),PN(n.bindingStartIndex),t!==null&&FT(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&el(e,v,null)}else{let v=n.preOrderHooks;v!==null&&tl(e,v,0,null),pp(e,0)}if(s||Wk(e),ZT(e,0),n.contentQueries!==null&&GT(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&el(e,v)}else{let v=n.contentHooks;v!==null&&tl(e,v,1),pp(e,1)}ak(n,e);let p=n.components;p!==null&&XT(e,p,0);let m=n.viewQuery;if(m!==null&&Gp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&el(e,v)}else{let v=n.viewHooks;v!==null&&tl(e,v,2),pp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[fp]){for(let v of e[fp])v();e[fp]=null}o||(e[ne]&=-73)}catch(h){throw o||jl(e),h}finally{l!==null&&(NI(l,c),a&&Uk(l)),gg()}}function ZT(n,e){for(let t=iT(n);t!==null;t=oT(t))for(let r=qt;r<t.length;r++){let i=t[r];JT(i,e)}}function Wk(n){for(let e=iT(n);e!==null;e=oT(e)){if(!(e[ne]&ul.HasTransplantedViews))continue;let t=e[cl];for(let r=0;r<t.length;r++){let i=t[r];TD(i)}}}function Kk(n,e,t){let r=Fo(e,n);JT(r,t)}function JT(n,e){fg(n)&&Wp(n,e)}function Wp(n,e){let r=n[de],i=n[ne],o=n[tn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&qf(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)Gk(r,n,r.template,n[er]);else if(i&8192){ZT(n,1);let a=r.components;a!==null&&XT(n,a,1)}}function XT(n,e,t){for(let r=0;r<e.length;r++)Kk(n,e[r],t)}function e0(n,e){let t=RD()?64:1088;for(n[Nn].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=yi(n);if(ll(n)&&!r)return n;n=r}return null}var _i=class{get rootNodes(){let e=this._lView,t=e[de];return Il(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[er]}set context(e){this._lView[er]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(kn(e)){let t=e[al],r=t?t.indexOf(this):-1;r>-1&&(qp(e,r),ol(t,r))}this._attachedToViewContainer=!1}CT(this._lView[de],this._lView)}onDestroy(e){CD(this._lView,e)}markForCheck(){e0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Mp(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,YT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ll(this._lView),t=this._lView[Ao];t!==null&&!e&&Ng(t,this._lView),DT(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=ll(this._lView),r=this._lView[Ao];r!==null&&!t&&TT(r,this._lView),Mp(this._lView)}},Ql=(()=>{class n{static{this.__NG_ELEMENT_ID__=Zk}}return n})(),Qk=Ql,Yk=class extends Qk{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Ok(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new _i(i)}};function Zk(){return Jk(On(),st())}function Jk(n,e){return n.type&4?new Yk(e,n,Bl(n,e)):null}var Xk=new RegExp(`^(\\d+)*(${uT}|${cT})*(.*)`);function e1(n){let e=n.match(Xk),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,l,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(l,p)}return[s,...a]}function t1(n){return!n.prev&&n.parent?.type===8}function _p(n){return n.index-Ot}function n1(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Yl(n,e,t,r){let i=_p(r),o=n1(n,i);if(o===void 0){let s=n.data[bP];if(s?.[i])o=i1(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(t1(r)){let l=_p(r.parent);o=$p(n,l)}else{let l=yn(c,t);if(a)o=l.firstChild;else{let h=_p(c),p=$p(n,h);if(c.type===2&&p){let v=Sg(n,h)+1;o=Zl(v,p)}else o=l.nextSibling}}}}return o}function Zl(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function r1(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case Bp.FirstChild:t=t.firstChild;break;case Bp.NextSibling:t=t.nextSibling;break}}return t}function i1(n,e){let[t,...r]=e1(n),i;if(t===cT)i=e[nn][Ht];else if(t===uT)i=qP(e[nn][Ht]);else{let o=Number(t);i=Pn(e[o+Ot])}return r1(i,r)}var o1=!1;function s1(n){o1=n}function a1(n){let e=n[Mn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[ot];for(let o of r.values())c1(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function c1(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Ot);i&&kg(n,i,!1)}}function t0(n){let e=n[Aa]??[],r=n[vt][ot];for(let i of e)u1(i,r);n[Aa]=fn}function u1(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[vl];for(;t<i;){let o=r.nextSibling;kg(e,r,!1),r=o,t++}}}function n0(n){t0(n);let e=n[Ht];xn(e)&&El(e);for(let t=qt;t<n.length;t++)El(n[t])}function El(n){a1(n);let e=n[de];for(let t=Ot;t<e.bindingStartIndex;t++)if(kn(n[t])){let r=n[t];n0(r)}else xn(n[t])&&El(n[t])}function l1(n){let e=n._views;for(let t of e){let r=MP(t);r!==null&&r[Ht]!==null&&(xn(r)?El(r):n0(r))}}function d1(n,e){let t=[];for(let r of e)for(let i=0;i<(r[lT]??1);i++){let o={data:r,firstChild:null};r[vl]>0&&(o.firstChild=n,n=Zl(r[vl],n)),t.push(o)}return[n,t]}var r0=()=>null;function h1(n,e){let t=n[Aa];return!e||t===null||t.length===0?null:t[0].data[CP]===e?t.shift():(t0(n),null)}function f1(){r0=h1}function PE(n,e){return r0(n,e)}var Ro=class{},jg=new H("",{providedIn:"root",factory:()=>!1});var i0=new H(""),o0=new H(""),Kp=class{},Dl=class{};function p1(n){let e=Error(`No component factory found for ${kt(n)}.`);return e[g1]=n,e}var g1="ngComponent";var Qp=class{resolveComponentFactory(e){throw p1(e)}},Mo=class{static{this.NULL=new Qp}},No=class{};var m1=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>null})}}return n})();function Yp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=oE(i,a);else if(o==2){let c=a,l=e[++s];r=oE(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Tl=class extends Mo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Nr(e);return new Po(t,this.ngModule)}};function kE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Mr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Mr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function y1(n){let e=n.toLowerCase();return e==="svg"?vN:e==="math"?wN:null}var Po=class extends Dl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=kE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return kE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Te(null);try{i=i||this.ngModule;let s=i instanceof zt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Pp(e,s):e,c=a.get(No,null);if(c===null)throw new Z(407,!1);let l=a.get(m1,null),h=a.get(Ro,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",C=r?lk(m,r,this.componentDef.encapsulation,a):Mg(m,v,y1(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let N=null;C!==null&&(N=bg(C,a,!0));let j=Fg(0,null,null,1,0,null,null,null,null,null,null),z=Gl(null,j,null,M,null,null,p,m,a,null,N);pg(z);let L,Q,ee=null;try{let X=this.componentDef,I,y=null;X.findHostDirectiveDefs?(I=[],y=new Map,X.findHostDirectiveDefs(X,I,y),I.push(X)):I=[X];let _=v1(z,C);ee=w1(_,C,X,I,z,p,m),Q=ED(j,Ot),C&&E1(m,X,C,r),t!==void 0&&D1(Q,this.ngContentSelectors,t),L=I1(ee,X,I,y,z,[T1]),Vg(j,z,null)}catch(X){throw ee!==null&&jp(ee),jp(z),X}finally{gg()}return new Zp(this.componentType,L,Bl(Q,z),z,Q)}finally{Te(o)}}},Zp=class extends Kp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new _i(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Lg(o[de],o,i,e,t),this.previousInputValues.set(e,t);let s=Fo(this._tNode.index,o);e0(s,1)}}get injector(){return new gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function v1(n,e){let t=n[de],r=Ot;return n[r]=e,Wl(t,r,2,"#host",null)}function w1(n,e,t,r,i,o,s){let a=i[de];_1(r,n,e,s);let c=null;e!==null&&(c=bg(e,i[So]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Gl(i,UT(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&Hp(a,n,r.length-1),Kl(i,p),i[n.index]=p}function _1(n,e,t,r){for(let i of n)e.mergedAttrs=ug(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Yp(e,e.mergedAttrs,!0),t!==null&&MT(r,t,e))}function I1(n,e,t,r,i,o){let s=On(),a=i[de],c=yn(s,i);qT(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Ra(i,a,p,s);wi(m,i)}zT(a,i,s),c&&wi(c,i);let l=Ra(i,a,s.directiveStart+s.componentOffset,s);if(n[er]=i[er]=l,o!==null)for(let h of o)h(l,e);return LT(a,s,i),l}function E1(n,e,t,r){if(r)Cp(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=ZM(e.selectors[0]);i&&Cp(n,t,i),o&&o.length>0&&RT(n,t,o.join(" "))}}function D1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function T1(){let n=On();yg(st()[de],n)}var Uo=(()=>{class n{static{this.__NG_ELEMENT_ID__=C1}}return n})();function C1(){let n=On();return S1(n,st())}var b1=Uo,s0=class extends b1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Bl(this._hostTNode,this._hostLView)}get injector(){return new gi(this._hostTNode,this._hostLView)}get parentInjector(){let e=vg(this._hostTNode,this._hostLView);if(BD(e)){let t=fl(e,this._hostLView),r=hl(e),i=t[de].data[r+8];return new gi(i,t)}else return new gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=OE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-qt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=PE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,NE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!pN(e),a;if(s)a=t;else{let C=t||{};a=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}let c=s?e:new Po(Nr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let M=(s?l:this.parentInjector).get(zt,null);M&&(o=M)}let h=Nr(c.componentType??{}),p=PE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,o);return this.insertImpl(v.hostView,a,NE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(IN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[vt],l=new s0(c,c[mn],c[vt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Fk(s,i,o,r),e.attachToViewContainerRef(),XE(Ip(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=OE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=qp(this._lContainer,t);r&&(ol(Ip(this._lContainer),t),CT(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=qp(this._lContainer,t);return r&&ol(Ip(this._lContainer),t)!=null?new _i(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function OE(n){return n[al]}function Ip(n){return n[al]||(n[al]=[])}function S1(n,e){let t,r=e[n.index];return kn(r)?t=r:(t=HT(r,e,null,n),e[n.index]=t,Kl(e,t)),a0(t,e,n,r),new s0(t,n,e)}function A1(n,e){let t=n[ot],r=t.createComment(""),i=yn(e,n),o=ST(t,i);return _l(t,o,r,ek(t,i),!1),r}var a0=c0,Ug=()=>!1;function x1(n,e,t){return Ug(n,e,t)}function c0(n,e,t,r){if(n[tr])return;let i;t.type&8?i=Pn(r):i=A1(e,t),n[tr]=i}function R1(n,e,t){if(n[tr]&&n[Aa])return!0;let r=t[Mn],i=e.index-Ot;if(!r||mP(e)||Ua(r,i))return!1;let s=$p(r,i),a=r.data[Cg]?.[i],[c,l]=d1(s,a);return n[tr]=c,n[Aa]=l,!0}function M1(n,e,t,r){Ug(n,t,e)||c0(n,e,t,r)}function N1(){a0=M1,Ug=R1}var FE=new Set;function Bo(n){FE.has(n)||(FE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function P1(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(L1))}return o}return Cl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>V1(o));e.push(c)}),O1(),Promise.all(e).then(()=>{})}var Cl=new Map,k1=new Set;function O1(){let n=Cl;return Cl=new Map,n}function F1(){return Cl.size===0}function L1(n){return typeof n=="string"?n:n.text()}function V1(n){k1.delete(n)}var Pr=class{},Ma=class{};var bl=class extends Pr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tl(this);let o=aD(e);this._bootstrapComponents=_T(o.bootstrap),this._r3Injector=ZD(e,t,[{provide:Pr,useValue:this},{provide:Mo,useValue:this.componentFactoryResolver},...r],kt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Sl=class extends Ma{constructor(e){super(),this.moduleType=e}create(e){return new bl(this.moduleType,e,[])}};function j1(n,e,t){return new bl(n,e,t,!1)}var Jp=class extends Pr{constructor(e){super(),this.componentFactoryResolver=new Tl(this),this.instance=null;let t=new ba([...e.providers,{provide:Pr,useValue:this},{provide:Mo,useValue:this.componentFactoryResolver}],e.parent||hg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Jl(n,e,t=null){return new Jp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function u0(n){return B1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function U1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function B1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Al(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function $1(n,e,t,r){let i=Al(n,e,t);return Al(n,e+1,r)||i}function Ba(n){return(n.flags&32)===32}function q1(n,e,t,r,i,o,s,a,c){let l=e.consts,h=Wl(e,n,4,s||null,a||null);$T(e,t,h,dl(l,c)),yg(e,h);let p=h.tView=Fg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function z1(n,e,t,r,i,o,s,a,c,l){let h=t+Ot,p=e.firstCreatePass?q1(h,e,n,r,i,o,s,a,c):e.data[h];Va(p,!1);let m=l0(e,n,p,t);mg()&&Pg(e,n,m,p),wi(m,n);let v=HT(m,n,m,p);return n[h]=v,Kl(n,v),x1(v,p,n),yD(p)&&VT(e,n,p),c!=null&&jT(n,p,l),p}function Wt(n,e,t,r,i,o,s,a){let c=st(),l=Lo(),h=dl(l.consts,o);return z1(c,l,n,e,t,r,i,h,s,a),Wt}var l0=d0;function d0(n,e,t,r){return Or(!0),e[ot].createComment("")}function H1(n,e,t,r){let i=e[Mn],o=!i||La()||Ba(t)||Ua(i,r);if(Or(o),o)return d0(n,e,t,r);let s=i.data[TP]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=Yl(i,n,e,t);zl(i,r,a);let c=Sg(i,r);return Zl(c,a)}function G1(){l0=H1}var Do=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Do||{}),h0=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Xp=class n{constructor(){this.ngZone=F(pe),this.scheduler=F(Ro),this.errorHandler=F(nr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Do.EarlyRead,Do.Write,Do.MixedReadWrite,Do.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}},eg=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Bg(n,e){!e?.injector&&hN(Bg);let t=e?.injector??F(Gt);return wa(t)?(Bo("NgAfterNextRender"),K1(n,t,e,!0)):Q1}function W1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function K1(n,e,t,r){let i=e.get(h0);i.impl??=e.get(Xp);let o=t?.phase??Do.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(_g):null,a=new eg(i.impl,W1(n,o),r,s);return i.impl.register(a),a}var Q1={destroy(){}};function Y1(n,e,t,r){return Al(n,MD(),t)?e+Da(t)+r:jo}function Z1(n,e,t,r,i,o){let s=NN(),a=$1(n,s,t,i);return kN(2),a?e+Da(t)+r+Da(i)+o:jo}function Ft(n,e,t){let r=st(),i=MD();if(Al(r,i,e)){let o=Lo(),s=UN();yk(o,s,r,n,e,r[ot],t,!1)}return Ft}function LE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Lg(n,t,o[s],s,r)}function J1(n,e,t,r,i,o){let s=e.consts,a=dl(s,i),c=Wl(e,n,2,r,a);return $T(e,t,c,dl(s,o)),c.attrs!==null&&Yp(c,c.attrs,!1),c.mergedAttrs!==null&&Yp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ce(n,e,t,r){let i=st(),o=Lo(),s=Ot+n,a=i[ot],c=o.firstCreatePass?J1(s,o,i,e,t,r):o.data[s],l=f0(o,i,c,a,e,n);i[s]=l;let h=yD(c);return Va(c,!0),MT(a,l,c),!Ba(c)&&mg()&&Pg(o,i,l,c),TN()===0&&wi(l,i),CN(),h&&(VT(o,i,c),LT(o,c,i)),r!==null&&jT(i,c),ce}function oe(){let n=On();xD()?MN():(n=n.parent,Va(n,!1));let e=n;SN(e)&&xN(),bN();let t=Lo();return t.firstCreatePass&&(yg(t,n),mD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&zN(e)&&LE(t,e,st(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&HN(e)&&LE(t,e,st(),e.stylesWithoutHost,!1),oe}function Ve(n,e,t,r){return ce(n,e,t,r),oe(),Ve}var f0=(n,e,t,r,i,o)=>(Or(!0),Mg(r,i,VD()));function X1(n,e,t,r,i,o){let s=e[Mn],a=!s||La()||Ba(t)||Ua(s,o);if(Or(a),a)return Mg(r,i,VD());let c=Yl(s,n,e,t);return pT(s,o)&&zl(s,o,c.nextSibling),s&&(tT(t)||nT(c))&&Oa(t)&&(AN(t),xT(c)),c}function eO(){f0=X1}var tO=(n,e,t,r)=>(Or(!0),ET(e[ot],""));function nO(n,e,t,r){let i,o=e[Mn],s=!o||La()||Ua(o,r)||Ba(t);if(Or(s),s)return ET(e[ot],"");let a=Yl(o,n,e,t),c=kP(o,r);return zl(o,r,a),i=Zl(c,a),i}function rO(){tO=nO}var xl="en-US";var iO=xl;function oO(n){typeof n=="string"&&(iO=n.toLowerCase().replace(/_/g,"-"))}function p0(n=1){return jN(n)}function Ee(n,e=""){let t=st(),r=Lo(),i=n+Ot,o=r.firstCreatePass?Wl(r,i,1,e,null):r.data[i],s=g0(r,t,o,e,n);t[i]=s,mg()&&Pg(r,t,s,o),Va(o,!1)}var g0=(n,e,t,r,i)=>(Or(!0),IT(e[ot],r));function sO(n,e,t,r,i){let o=e[Mn],s=!o||La()||Ba(t)||Ua(o,i);return Or(s),s?IT(e[ot],r):Yl(o,n,e,t)}function aO(){g0=sO}function wt(n){return rn("",n,""),wt}function rn(n,e,t){let r=st(),i=Y1(r,n,e,t);return i!==jo&&WT(r,Ul(),i),rn}function $g(n,e,t,r,i){let o=st(),s=Z1(o,n,e,t,r,i);return s!==jo&&WT(o,Ul(),s),$g}var cO=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=lD(!1,t.type),i=r.length>0?Jl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(O(zt))})}}return n})();function m0(n){Bo("NgStandalone"),n.getStandaloneInjector=e=>e.get(cO).getOrCreateStandaloneInjector(n)}var Yu=null;function uO(n){Yu!==null&&(n.defaultEncapsulation!==Yu.defaultEncapsulation||n.preserveWhitespaces!==Yu.preserveWhitespaces)||(Yu=n)}var kr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},y0=new kr("18.2.13");var Xl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var qg=new H(""),$a=new H(""),ed=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,zg||(lO(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(pe),O(td),O($a))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),td=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return zg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function lO(n){zg=n}var zg;function qa(n){return!!n&&typeof n.then=="function"}function v0(n){return!!n&&typeof n.subscribe=="function"}var nd=new H(""),w0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=F(nd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(qa(o))t.push(o);else if(v0(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$o=new H("");function dO(){PI(()=>{throw new Z(600,!1)})}function hO(n){return n.isBoundToModule}var fO=10;function pO(n,e,t){try{let r=t();return qa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function _0(n,e){return Array.isArray(e)?e.reduce(_0,n):V(V({},n),e)}var vn=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(hP),this.afterRenderManager=F(h0),this.zonelessEnabled=F(jg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new He,this.afterTick=new He,this.componentTypes=[],this.components=[],this.isStable=F(Ii).hasPendingTasks.pipe(W(t=>!t)),this._injector=F(zt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Dl;if(!this._injector.get(w0).done){let m=!i&&sD(t),v=!1;throw new Z(405,v)}let s;i?s=t:s=this._injector.get(Mo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=hO(s)?void 0:this._injector.get(Pr),c=r||s.selector,l=s.create(Gt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(qg,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),nl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Z(101,!1);let t=Te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(No,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<fO;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)gO(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Vl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;nl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get($o,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>nl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Zu;function rd(n){Zu??=new WeakMap;let e=Zu.get(n);if(e)return e;let t=n.isStable.pipe($t(r=>r)).toPromise().then(()=>{});return Zu.set(n,t),n.onDestroy(()=>Zu?.delete(n)),t}function gO(n,e,t,r){if(!t&&!Vl(n))return;YT(n,e,t&&!r?0:1)}var tg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},id=(()=>{class n{compileModuleSync(t){return new Sl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=aD(t),o=_T(i.declarations).reduce((s,a)=>{let c=Nr(a);return c&&s.push(new Po(c)),s},[]);return new tg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mO=new H("");function yO(n,e,t){let r=new Sl(t);return Promise.resolve(r)}function VE(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var vO=(()=>{class n{constructor(){this.zone=F(pe),this.changeDetectionScheduler=F(Ro),this.applicationRef=F(vn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wO({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(xe(V({},I0()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:mi,multi:!0,useFactory:()=>{let r=F(vO,{optional:!0});return()=>r.initialize()}},{provide:mi,multi:!0,useFactory:()=>{let r=F(_O);return()=>{r.initialize()}}},e===!0?{provide:i0,useValue:!0}:[],{provide:o0,useValue:t??JD}]}function I0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var _O=(()=>{class n{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=F(pe),this.pendingTasks=F(Ii)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var IO=(()=>{class n{constructor(){this.appRef=F(vn),this.taskService=F(Ii),this.ngZone=F(pe),this.zonelessEnabled=F(jg),this.disableScheduling=F(i0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $e,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(gl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(o0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ml||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?TE:XD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(gl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,TE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function EO(){return typeof $localize<"u"&&$localize.locale||xl}var Hg=new H("",{providedIn:"root",factory:()=>F(Hg,ue.Optional|ue.SkipSelf)||EO()});var Rl=new H("");function Ju(n){return!n.moduleRef}function DO(n){let e=Ju(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{Ju(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(nr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Ju(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Rl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Rl);s.add(o),n.moduleRef.onDestroy(()=>{nl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return pO(r,t,()=>{let o=e.get(w0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Hg,xl);if(oO(s||xl),Ju(n)){let a=e.get(vn);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return TO(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function TO(n,e){let t=n.injector.get(vn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Z(-403,!1);e.push(n)}var E0=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>dP(r?.ngZone,xe(V({},I0({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[wO({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Ro,useExisting:IO}],c=j1(t.moduleType,this.injector,a);return DO({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=_0({},r);return yO(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Z(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Rl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Gt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ea=null,D0=new H("");function CO(n){if(Ea&&!Ea.get(D0,!1))throw new Z(400,!1);dO(),Ea=n;let e=n.get(E0);return AO(n),e}function Gg(n,e,t=[]){let r=`Platform: ${e}`,i=new H(r);return(o=[])=>{let s=T0();if(!s||s.injector.get(D0,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):CO(bO(a,r))}return SO(i)}}function bO(n=[],e){return Gt.create({name:e,providers:[{provide:Ol,useValue:"platform"},{provide:Rl,useValue:new Set([()=>Ea=null])},...n]})}function SO(n){let e=T0();if(!e)throw new Z(401,!1);return e}function T0(){return Ea?.get(E0)??null}function AO(n){n.get(Dg,null)?.forEach(t=>t())}function Wg(){return!1}var za=(()=>{class n{static{this.__NG_ELEMENT_ID__=xO}}return n})();function xO(n){return RO(On(),st(),(n&16)===16)}function RO(n,e,t){if(Oa(n)&&!t){let r=Fo(n.index,e);return new _i(r,r)}else if(n.type&175){let r=e[nn];return new _i(r,e)}return null}var ng=class{constructor(){}supports(e){return u0(e)}create(e){return new rg(e)}},MO=(n,e)=>e,rg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||MO}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<jE(r,i,o)?t:r,a=jE(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,C=v+m;h<=C&&C<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!u0(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,U1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new ig(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ml),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ml),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ig=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},og=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ml=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new og,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function jE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function UE(){return new Kg([new ng])}var Kg=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:UE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||UE()),deps:[[n,new ag,new ko]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();var C0=Gg(null,"core",[]),b0=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(vn))}}static{this.\u0275mod=At({type:n})}static{this.\u0275inj=St({})}}return n})();var BE=!1;function NO(){BE||(BE=!0,RP(),eO(),aO(),rO(),G1(),N1(),f1(),fk())}function PO(n,e){return rd(n)}function S0(){return ka([{provide:Qu,useFactory:()=>{let n=!0;return wa()&&(n=!!F(Vo,{optional:!0})?.get(hT,null)),n&&Bo("NgHydration"),n}},{provide:mi,useValue:()=>{s1(!1),wa()&&F(Qu)&&(kO(),NO())},multi:!0},{provide:mT,useFactory:()=>wa()&&F(Qu)},{provide:$o,useFactory:()=>{if(wa()&&F(Qu)){let n=F(vn),e=F(Gt);return()=>{PO(n,e).then(()=>{l1(n)})}}return()=>{}},multi:!0}])}function kO(){let n=ql(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===AP){e=t;break}if(!e)throw new Z(-507,!1)}function A0(n){let e=Nr(n);if(!e)return null;let t=new Po(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var k0=null;function Di(){return k0}function O0(n){k0??=n}var od=class{};var xt=new H(""),Xg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(VO),providedIn:"platform"})}}return n})(),F0=new H(""),VO=(()=>{class n extends Xg{constructor(){super(),this._doc=F(xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Di().getBaseHref(this._doc)}onPopState(t){let r=Di().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Di().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function em(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function x0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ir(n){return n&&n[0]!=="?"?"?"+n:n}var Ti=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(tm),providedIn:"root"})}}return n})(),L0=new H(""),tm=(()=>{class n extends Ti{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return em(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ir(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ir(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ir(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Xg),O(L0,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),V0=(()=>{class n extends Ti{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=em(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ir(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ir(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Xg),O(L0,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),qo=(()=>{class n{constructor(t){this._subject=new bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=BO(x0(R0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ir(r))}normalize(t){return n.stripTrailingSlash(UO(this._basePath,R0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ir(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ir(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=ir}static{this.joinWithSlash=em}static{this.stripTrailingSlash=x0}static{this.\u0275fac=function(r){return new(r||n)(O(Ti))}}static{this.\u0275prov=q({token:n,factory:()=>jO(),providedIn:"root"})}}return n})();function jO(){return new qo(O(Ti))}function UO(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function R0(n){return n.replace(/\/index.html$/,"")}function BO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function nm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Qg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Fn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Qg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),M0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);M0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(qe(Uo),qe(Ql),qe(Kg))}}static{this.\u0275dir=Pa({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function M0(n,e){n.context.$implicit=e.item}var j0=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Yg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){N0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){N0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(qe(Uo),qe(Ql))}}static{this.\u0275dir=Pa({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Yg=class{constructor(){this.$implicit=null,this.ngIf=null}};function N0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${kt(e)}'.`)}var U0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=At({type:n})}static{this.\u0275inj=St({})}}return n})(),rm="browser",$O="server";function qO(n){return n===rm}function or(n){return n===$O}var B0=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>qO(F(dt))?new Zg(F(xt),window):new Jg})}}return n})(),Zg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=zO(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function zO(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Jg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},sd=class{};var cd=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Q0=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Q0||{}),im=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new cd,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var ud=class n extends im{constructor(e={}){super(e),this.type=Q0.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var HO=new H("");var GO=new H(""),$0="b",q0="h",z0="s",H0="st",G0="u",W0="rt",ad=new H(""),WO=["GET","HEAD"];function KO(n,e){let v=F(ad),{isCacheActive:t}=v,r=_I(v,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!WO.includes(o)||!r.includeRequestsWithAuthHeaders&&QO(n)||r.filter?.(n)===!1)return e(n);let s=F(Vo),a=F(GO,{optional:!0}),c=or(F(dt));if(a&&!c)throw new Z(2803,!1);let l=c&&a?XO(n.url,a):n.url,h=ZO(n,l),p=s.get(h,null),m=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(m=i.includeHeaders),p){let{[$0]:C,[W0]:M,[q0]:N,[z0]:j,[H0]:z,[G0]:L}=p,Q=C;switch(M){case"arraybuffer":Q=new TextEncoder().encode(C).buffer;break;case"blob":Q=new Blob([C]);break}let ee=new cd(N);return Y(new ud({body:Q,headers:ee,status:j,statusText:z,url:L}))}return e(n).pipe(Ge(C=>{C instanceof ud&&c&&s.set(h,{[$0]:C.body,[q0]:YO(C.headers,m),[z0]:C.status,[H0]:C.statusText,[G0]:l,[W0]:n.responseType})}))}function QO(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function YO(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function K0(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function ZO(n,e){let{params:t,method:r,responseType:i}=n,o=K0(t),s=n.serializeBody();s instanceof URLSearchParams?s=K0(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=JO(a);return c}function JO(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Y0(n){return[{provide:ad,useFactory:()=>(Bo("NgHttpTransferCache"),V({isCacheActive:!0},n))},{provide:HO,useValue:KO,multi:!0,deps:[Vo,ad]},{provide:$o,multi:!0,useFactory:()=>{let e=F(vn),t=F(ad);return()=>{rd(e).then(()=>{t.isCacheActive=!1})}}}]}function XO(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var am=class extends od{constructor(){super(...arguments),this.supportsDOMEvents=!0}},cm=class n extends am{static makeCurrent(){O0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=eF();return t==null?null:tF(t)}resetBaseElement(){Ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nm(document.cookie,e)}},Ha=null;function eF(){return Ha=Ha||document.querySelector("base"),Ha?Ha.getAttribute("href"):null}function tF(n){return new URL(n,document.baseURI).pathname}var um=class{addToWindow(e){rr.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Z(5103,!1);return o},rr.getAllAngularTestabilities=()=>e.getAllTestabilities(),rr.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=rr.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};rr.frameworkStabilizers||(rr.frameworkStabilizers=[]),rr.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Di().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},nF=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),lm=new H(""),eC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(lm),O(pe))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),ld=class{constructor(e){this._doc=e}},om="ng-app-id",tC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=or(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${om}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(om),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(om,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(xt),O(ja),O(Tg,8),O(dt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),sm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fm=/%COMP%/g,nC="%COMP%",rF=`_nghost-${nC}`,iF=`_ngcontent-${nC}`,oF=!0,sF=new H("",{providedIn:"root",factory:()=>oF});function aF(n){return iF.replace(fm,n)}function cF(n){return rF.replace(fm,n)}function rC(n,e){return e.map(t=>t.replace(fm,n))}var Z0=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=or(a),this.defaultRenderer=new Ga(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Rn.ShadowDom&&(r=xe(V({},r),{encapsulation:Rn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof dd?i.applyToHost(t):i instanceof Wa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Rn.Emulated:o=new dd(c,l,r,this.appId,h,s,a,p);break;case Rn.ShadowDom:return new dm(c,l,t,r,s,a,this.nonce,p);default:o=new Wa(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(eC),O(tC),O(ja),O(sF),O(xt),O(dt),O(pe),O(Tg))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Ga=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(sm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(J0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(J0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=sm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=sm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ei.DashCase|Ei.Important)?e.style.setProperty(t,r,i&Ei.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ei.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Di().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function J0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var dm=class extends Ga{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=rC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Wa=class extends Ga{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?rC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},dd=class extends Wa{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=aF(l),this.hostAttr=cF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},uF=(()=>{class n extends ld{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(xt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),X0=["alt","control","meta","shift"],lF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},hF=(()=>{class n extends ld{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Di().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),X0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=lF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),X0.forEach(s=>{if(s!==i){let a=dF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(xt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function fF(){cm.makeCurrent()}function pF(){return new nr}function gF(){return aT(document),document}var mF=[{provide:dt,useValue:rm},{provide:Dg,useValue:fF,multi:!0},{provide:xt,useFactory:gF,deps:[]}],iC=Gg(C0,"browser",mF),yF=new H(""),vF=[{provide:$a,useClass:um,deps:[]},{provide:qg,useClass:ed,deps:[pe,td,$a]},{provide:ed,useClass:ed,deps:[pe,td,$a]}],wF=[{provide:Ol,useValue:"root"},{provide:nr,useFactory:pF,deps:[]},{provide:lm,useClass:uF,multi:!0,deps:[xt,pe,dt]},{provide:lm,useClass:hF,multi:!0,deps:[xt]},Z0,tC,eC,{provide:No,useExisting:Z0},{provide:sd,useClass:nF,deps:[]},[]],oC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ja,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(yF,12))}}static{this.\u0275mod=At({type:n})}static{this.\u0275inj=St({providers:[...wF,...vF],imports:[U0,b0]})}}return n})();var sC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(xt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var hm=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(hm||{});function aC(...n){let e=[],t=new Set,r=t.has(hm.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return ka([[],S0(),t.has(hm.NoHttpTransferCache)||r?[]:Y0({}),e])}var se="primary",cc=Symbol("RouteTitle"),vm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Yo(n){return new vm(n)}function _F(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function IF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ln(n[t],e[t]))return!1;return!0}function Ln(n,e){let t=n?wm(n):void 0,r=e?wm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!wC(n[i],e[i]))return!1;return!0}function wm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function _C(n){return n.length>0?n[n.length-1]:null}function Lr(n){return op(n)?n:qa(n)?_e(Promise.resolve(n)):Y(n)}var EF={exact:EC,subset:DC},IC={exact:DF,subset:TF,ignored:()=>!0};function uC(n,e,t){return EF[t.paths](n.root,e.root,t.matrixParams)&&IC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function DF(n,e){return Ln(n,e)}function EC(n,e,t){if(!bi(n.segments,e.segments)||!pd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!EC(n.children[r],e.children[r],t))return!1;return!0}function TF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wC(n[t],e[t]))}function DC(n,e,t){return TC(n,e,e.segments,t)}function TC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!bi(i,t)||e.hasChildren()||!pd(i,t,r))}else if(n.segments.length===t.length){if(!bi(n.segments,t)||!pd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!DC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!bi(n.segments,i)||!pd(n.segments,i,r)||!n.children[se]?!1:TC(n.children[se],e,o,r)}}function pd(n,e,t){return e.every((r,i)=>IC[t](n[i].parameters,r.parameters))}var ar=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Yo(this.queryParams),this._queryParamMap}toString(){return SF.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gd(this)}},Ci=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Yo(this.parameters),this._parameterMap}toString(){return bC(this)}};function CF(n,e){return bi(n,e)&&n.every((t,r)=>Ln(t.parameters,e[r].parameters))}function bi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function bF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==se&&(t=t.concat(e(i,r)))}),t}var uc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new Zo,providedIn:"root"})}}return n})(),Zo=class{parse(e){let t=new Im(e);return new ar(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ka(e.root,!0)}`,r=RF(e.queryParams),i=typeof e.fragment=="string"?`#${AF(e.fragment)}`:"";return`${t}${r}${i}`}},SF=new Zo;function gd(n){return n.segments.map(e=>bC(e)).join("/")}function Ka(n,e){if(!n.hasChildren())return gd(n);if(e){let t=n.children[se]?Ka(n.children[se],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==se&&r.push(`${i}:${Ka(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=bF(n,(r,i)=>i===se?[Ka(n.children[se],!1)]:[`${i}:${Ka(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[se]!=null?`${gd(n)}/${t[0]}`:`${gd(n)}/(${t.join("//")})`}}function CC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hd(n){return CC(n).replace(/%3B/gi,";")}function AF(n){return encodeURI(n)}function _m(n){return CC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function md(n){return decodeURIComponent(n)}function lC(n){return md(n.replace(/\+/g,"%20"))}function bC(n){return`${_m(n.path)}${xF(n.parameters)}`}function xF(n){return Object.entries(n).map(([e,t])=>`;${_m(e)}=${_m(t)}`).join("")}function RF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${hd(t)}=${hd(i)}`).join("&"):`${hd(t)}=${hd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var MF=/^[^\/()?;#]+/;function pm(n){let e=n.match(MF);return e?e[0]:""}var NF=/^[^\/()?;=#]+/;function PF(n){let e=n.match(NF);return e?e[0]:""}var kF=/^[^=?&#]+/;function OF(n){let e=n.match(kF);return e?e[0]:""}var FF=/^[^&#]+/;function LF(n){let e=n.match(FF);return e?e[0]:""}var Im=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[se]=new De(e,t)),r}parseSegment(){let e=pm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new Ci(md(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=PF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=pm(this.remaining);i&&(r=i,this.capture(r))}e[md(t)]=md(r)}parseQueryParam(e){let t=OF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=LF(this.remaining);s&&(r=s,this.capture(r))}let i=lC(t),o=lC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=pm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=se);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[se]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function SC(n){return n.segments.length>0?new De([],{[se]:n}):n}function AC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=AC(i);if(r===se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return VF(t)}function VF(n){if(n.numberOfChildren===1&&n.children[se]){let e=n.children[se];return new De(n.segments.concat(e.segments),e.children)}return n}function ec(n){return n instanceof ar}function jF(n,e,t=null,r=null){let i=xC(n);return RC(i,e,t,r)}function xC(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=SC(r);return e??i}function RC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return gm(i,i,i,t,r);let o=UF(e);if(o.toRoot())return gm(i,i,new De([],{}),t,r);let s=BF(o,i,n),a=s.processChildren?Za(s.segmentGroup,s.index,o.commands):NC(s.segmentGroup,s.index,o.commands);return gm(i,s.segmentGroup,a,t,r)}function yd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function tc(n){return typeof n=="object"&&n!=null&&n.outlets}function gm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=MC(n,e,t);let a=SC(AC(s));return new ar(a,o,i)}function MC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=MC(o,e,t)}),new De(n.segments,r)}var vd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yd(r[0]))throw new Z(4003,!1);let i=r.find(tc);if(i&&i!==_C(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function UF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new vd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new vd(t,e,r)}var Wo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function BF(n,e,t){if(n.isAbsolute)return new Wo(e,!0,0);if(!t)return new Wo(e,!1,NaN);if(t.parent===null)return new Wo(t,!0,0);let r=yd(n.commands[0])?0:1,i=t.segments.length-1+r;return $F(t,i,n.numberOfDoubleDots)}function $F(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Wo(r,!1,i-o)}function qF(n){return tc(n[0])?n[0].outlets:{[se]:n}}function NC(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return Za(n,e,t);let r=zF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[se]=new De(n.segments.slice(r.pathIndex),n.children),Za(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?Em(n,e,t):r.match?Za(n,0,i):Em(n,e,t)}function Za(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=qF(t),i={};if(Object.keys(r).some(o=>o!==se)&&n.children[se]&&n.numberOfChildren===1&&n.children[se].segments.length===0){let o=Za(n.children[se],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=NC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function zF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(tc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!hC(c,l,s))return o;r+=2}else{if(!hC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Em(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(tc(o)){let c=HF(o.outlets);return new De(r,c)}if(i===0&&yd(t[0])){let c=n.segments[e];r.push(new Ci(c.path,dC(t[0]))),i++;continue}let s=tc(o)?o.outlets[se]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&yd(a)?(r.push(new Ci(s,dC(a))),i+=2):(r.push(new Ci(s,{})),i++)}return new De(r,{})}function HF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Em(new De([],{}),0,r))}),e}function dC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function hC(n,e,t){return n==t.path&&Ln(e,t.parameters)}var Ja="imperative",ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ct||{}),on=class{constructor(e,t){this.id=e,this.url=t}},Jo=class extends on{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},cr=class extends on{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qt||{}),wd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(wd||{}),sr=class extends on{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fr=class extends on{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationSkipped}},nc=class extends on{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_d=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dm=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tm=class extends on{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Cm=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bm=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sm=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Am=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xm=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rm=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mm=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nm=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Id=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ct.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},rc=class{},Xo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function GF(n,e){return n.providers&&!n._injector&&(n._injector=Jl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wn(n){return n.outlet||se}function WF(n,e){let t=n.filter(r=>wn(r)===e);return t.push(...n.filter(r=>wn(r)!==e)),t}function lc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Pm=class{get injector(){return lc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new dc(this.rootInjector),this.attachRef=null}},dc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Pm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ed=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=km(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=km(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Om(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Om(e,this._root).map(t=>t.value)}};function km(n,e){if(n===e.value)return e;for(let t of e.children){let r=km(n,t);if(r)return r}return null}function Om(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Om(n,t);if(r.length)return r.unshift(e),r}return[]}var Kt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Go(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Dd=class extends Ed{constructor(e,t){super(e),this.snapshot=t,zm(this,e)}toString(){return this.snapshot.toString()}};function PC(n){let e=KF(n),t=new lt([new Ci("",{})]),r=new lt({}),i=new lt({}),o=new lt({}),s=new lt(""),a=new es(t,r,o,s,i,se,n,e.root);return a.snapshot=e.root,new Dd(new Kt(a,[]),e)}function KF(n){let e={},t={},r={},i="",o=new Ko([],e,r,i,t,se,n,null,{});return new Cd("",new Kt(o,[]))}var es=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(W(l=>l[cc]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(e=>Yo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(e=>Yo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Td(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&OC(i)&&(r.resolve[cc]=i.title),r}var Ko=class{get title(){return this.data?.[cc]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Cd=class extends Ed{constructor(e,t){super(t),this.url=e,zm(this,t)}toString(){return kC(this._root)}};function zm(n,e){e.value._routerState=n,e.children.forEach(t=>zm(n,t))}function kC(n){let e=n.children.length>0?` { ${n.children.map(kC).join(", ")} } `:"";return`${n.value}${e}`}function mm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ln(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ln(e.params,t.params)||n.paramsSubject.next(t.params),IF(e.url,t.url)||n.urlSubject.next(t.url),Ln(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Fm(n,e){let t=Ln(n.params,e.params)&&CF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Fm(n.parent,e.parent))}function OC(n){return typeof n.title=="string"||n.title===null}var QF=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=se,this.activateEvents=new bt,this.deactivateEvents=new bt,this.attachEvents=new bt,this.detachEvents=new bt,this.parentContexts=F(dc),this.location=F(Uo),this.changeDetector=F(za),this.inputBinder=F(Rd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Lm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Pa({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ll]})}}return n})(),Lm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===es?this.route:e===dc?this.childContexts:this.parent.get(e,t)}},Rd=new H(""),fC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ya([r.queryParams,r.params,r.data]).pipe(Le(([o,s,a],c)=>(a=V(V(V({},o),s),a),c===0?Y(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=A0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function YF(n,e,t){let r=ic(n,e._root,t?t._root:void 0);return new Dd(r,e)}function ic(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=ZF(n,e,t);return new Kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ic(n,a)),s}}let r=JF(e.value),i=e.children.map(o=>ic(n,o));return new Kt(r,i)}}function ZF(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ic(n,r,i);return ic(n,r)})}function JF(n){return new es(new lt(n.url),new lt(n.params),new lt(n.queryParams),new lt(n.fragment),new lt(n.data),n.outlet,n.component,n)}var oc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},FC="ngNavigationCancelingError";function bd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ec(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=LC(!1,Qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function LC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[FC]=!0,t.cancellationCode=e,t}function XF(n){return VC(n)&&ec(n.url)}function VC(n){return!!n&&n[FC]}var eL=(n,e,t,r)=>W(i=>(new Vm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Vm=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),mm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Go(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Go(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Go(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Go(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Nm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Rm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(mm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),mm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Sd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qo=class{constructor(e,t){this.component=e,this.route=t}};function tL(n,e,t){let r=n._root,i=e?e._root:null;return Qa(r,i,t,[r.value])}function nL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ns(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!GE(n)?n:e.get(n):r}function Qa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Go(e);return n.children.forEach(s=>{rL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Xa(a,t.getContext(s),i)),i}function rL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=iL(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Sd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Qa(n,e,a?a.children:null,r,i):Qa(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qo(a.outlet.component,s))}else s&&Xa(e,a,i),i.canActivateChecks.push(new Sd(r)),o.component?Qa(n,null,a?a.children:null,r,i):Qa(n,null,t,r,i);return i}function iL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!bi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bi(n.url,e.url)||!Ln(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fm(n,e)||!Ln(n.queryParams,e.queryParams);case"paramsChange":default:return!Fm(n,e)}}function Xa(n,e,t){let r=Go(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Xa(s,e.children.getContext(o),t):Xa(s,null,t):Xa(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Qo(e.outlet.component,i)):t.canDeactivateChecks.push(new Qo(null,i)):t.canDeactivateChecks.push(new Qo(null,i))}function hc(n){return typeof n=="function"}function oL(n){return typeof n=="boolean"}function sL(n){return n&&hc(n.canLoad)}function aL(n){return n&&hc(n.canActivate)}function cL(n){return n&&hc(n.canActivateChild)}function uL(n){return n&&hc(n.canDeactivate)}function lL(n){return n&&hc(n.canMatch)}function jC(n){return n instanceof Jn||n?.name==="EmptyError"}var fd=Symbol("INITIAL_VALUE");function ts(){return Le(n=>ya(n.map(e=>e.pipe(Xn(1),pi(fd)))).pipe(W(e=>{for(let t of e)if(t!==!0){if(t===fd)return fd;if(t===!1||dL(t))return t}return!0}),it(e=>e!==fd),Xn(1)))}function dL(n){return ec(n)||n instanceof oc}function hL(n,e){return Ze(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Y(xe(V({},t),{guardsResult:!0})):fL(s,r,i,n).pipe(Ze(a=>a&&oL(a)?pL(r,o,n,e):Y(a)),W(a=>xe(V({},t),{guardsResult:a})))})}function fL(n,e,t,r){return _e(n).pipe(Ze(i=>wL(i.component,i.route,t,e,r)),$t(i=>i!==!0,!0))}function pL(n,e,t,r){return _e(e).pipe(br(i=>yo(mL(i.route.parent,r),gL(i.route,r),vL(n,i.path,t),yL(n,i.route,t))),$t(i=>i!==!0,!0))}function gL(n,e){return n!==null&&e&&e(new Mm(n)),Y(!0)}function mL(n,e){return n!==null&&e&&e(new xm(n)),Y(!0)}function yL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>zu(()=>{let s=lc(e)??t,a=ns(o,s),c=aL(a)?a.canActivate(e,n):gn(s,()=>a(e,n));return Lr(c).pipe($t())}));return Y(i).pipe(ts())}function vL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>nL(s)).filter(s=>s!==null).map(s=>zu(()=>{let a=s.guards.map(c=>{let l=lc(s.node)??t,h=ns(c,l),p=cL(h)?h.canActivateChild(r,n):gn(l,()=>h(r,n));return Lr(p).pipe($t())});return Y(a).pipe(ts())}));return Y(o).pipe(ts())}function wL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let c=lc(e)??i,l=ns(a,c),h=uL(l)?l.canDeactivate(n,e,t,r):gn(c,()=>l(n,e,t,r));return Lr(h).pipe($t())});return Y(s).pipe(ts())}function _L(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=ns(s,n),c=sL(a)?a.canLoad(e,t):gn(n,()=>a(e,t));return Lr(c)});return Y(o).pipe(ts(),UC(r))}function UC(n){return Xf(Ge(e=>{if(typeof e!="boolean")throw bd(n,e)}),W(e=>e===!0))}function IL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=ns(s,n),c=lL(a)?a.canMatch(e,t):gn(n,()=>a(e,t));return Lr(c)});return Y(o).pipe(ts(),UC(r))}var sc=class{constructor(e){this.segmentGroup=e||null}},ac=class extends Error{constructor(e){super(),this.urlTree=e}};function Ho(n){return mo(new sc(n))}function EL(n){return mo(new Z(4e3,!1))}function DL(n){return mo(LC(!1,Qt.GuardRejected))}var jm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[se])return EL(`${e.redirectTo}`);i=i.children[se]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:C,title:M}=i,N=gn(o,()=>a({params:v,data:C,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(N instanceof ar)throw new ac(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new ac(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ar(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Um={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TL(n,e,t,r,i){let o=BC(n,e,t);return o.matched?(r=GF(e,r),IL(r,e,t,i).pipe(W(s=>s===!0?o:V({},Um)))):Y(o)}function BC(n,e,t){if(e.path==="**")return CL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},Um):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||_F)(t,n,e);if(!i)return V({},Um);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function CL(n){return{matched:!0,parameters:n.length>0?_C(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function pC(n,e,t,r){return t.length>0&&AL(n,t,r)?{segmentGroup:new De(e,SL(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&xL(n,t,r)?{segmentGroup:new De(n.segments,bL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function bL(n,e,t,r){let i={};for(let o of t)if(Md(n,e,o)&&!r[wn(o)]){let s=new De([],{});i[wn(o)]=s}return V(V({},r),i)}function SL(n,e){let t={};t[se]=e;for(let r of n)if(r.path===""&&wn(r)!==se){let i=new De([],{});t[wn(r)]=i}return t}function AL(n,e,t){return t.some(r=>Md(n,e,r)&&wn(r)!==se)}function xL(n,e,t){return t.some(r=>Md(n,e,r))}function Md(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function RL(n,e,t){return e.length===0&&!n.children[t]}var Bm=class{};function ML(n,e,t,r,i,o,s="emptyOnly"){return new $m(n,e,t,r,i,s,o).recognize()}var NL=31,$m=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new jm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=pC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(({children:t,rootSnapshot:r})=>{let i=new Kt(r,t),o=new Cd("",i),s=jF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ko([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,se,t).pipe(W(r=>({children:r,rootSnapshot:t})),Cr(r=>{if(r instanceof ac)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof sc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(W(s=>s instanceof Kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return _e(o).pipe(br(s=>{let a=r.children[s],c=WF(t,s);return this.processSegmentGroup(e,c,a,s,i)}),fi((s,a)=>(s.push(...a),s)),Sr(null),up(),Ze(s=>{if(s===null)return Ho(r);let a=$C(s);return PL(a),Y(a)}))}processSegment(e,t,r,i,o,s,a){return _e(t).pipe(br(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Cr(l=>{if(l instanceof sc)return Y(null);throw l}))),$t(c=>!!c),Cr(c=>{if(jC(c))return RL(r,i,o)?Y(new Bm):Ho(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return wn(r)!==s&&(s===se||!Md(i,o,r))?Ho(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Ho(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=BC(t,i,o);if(!c)return Ho(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>NL&&(this.allowRedirects=!1));let v=new Ko(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,gC(i),wn(i),i.component??i._loadedComponent??null,i,mC(i)),C=Td(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(C.params),v.data=Object.freeze(C.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Ze(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=TL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Le(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Le(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,C=new Ko(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,gC(r),wn(r),r.component??r._loadedComponent??null,r,mC(r)),M=Td(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(M.params),C.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:j}=pC(t,m,v,l);if(j.length===0&&N.hasChildren())return this.processChildren(h,l,N,C).pipe(W(L=>new Kt(C,L)));if(l.length===0&&j.length===0)return Y(new Kt(C,[]));let z=wn(r)===o;return this.processSegment(h,l,N,j,z?se:o,!0,C).pipe(W(L=>new Kt(C,L instanceof Kt?[L]:[])))}))):Ho(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):_L(e,t,r,this.urlSerializer).pipe(Ze(i=>i?this.configLoader.loadChildren(e,t).pipe(Ge(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):DL(t))):Y({routes:[],injector:e})}};function PL(n){n.sort((e,t)=>e.value.outlet===se?-1:t.value.outlet===se?1:e.value.outlet.localeCompare(t.value.outlet))}function kL(n){let e=n.value.routeConfig;return e&&e.path===""}function $C(n){let e=[],t=new Set;for(let r of n){if(!kL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=$C(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!t.has(r))}function gC(n){return n.data||{}}function mC(n){return n.resolve||{}}function OL(n,e,t,r,i,o){return Ze(s=>ML(n,e,t,r,s.extractedUrl,i,o).pipe(W(({state:a,tree:c})=>xe(V({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function FL(n,e){return Ze(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of qC(c))s.add(l);let a=0;return _e(s).pipe(br(c=>o.has(c)?LL(c,r,n,e):(c.data=Td(c,c.parent,n).resolve,Y(void 0))),Ge(()=>a++),wo(1),Ze(c=>a===s.size?Y(t):Ct))})}function qC(n){let e=n.children.map(t=>qC(t)).flat();return[n,...e]}function LL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!OC(i)&&(o[cc]=i.title),VL(o,n,e,r).pipe(W(s=>(n._resolvedData=s,n.data=Td(n,n.parent,t).resolve,null)))}function VL(n,e,t,r){let i=wm(n);if(i.length===0)return Y({});let o={};return _e(i).pipe(Ze(s=>jL(n[s],e,t,r).pipe($t(),Ge(a=>{if(a instanceof oc)throw bd(new Zo,a);o[s]=a}))),wo(1),ap(o),Cr(s=>jC(s)?Ct:mo(s)))}function jL(n,e,t,r){let i=lc(e)??r,o=ns(n,i),s=o.resolve?o.resolve(e,t):gn(i,()=>o(e,t));return Lr(s)}function ym(n){return Le(e=>{let t=n(e);return t?_e(t).pipe(W(()=>e)):Y(e)})}var zC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===se);return r}getResolvedTitleForRoute(t){return t.data[cc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(UL),providedIn:"root"})}}return n})(),UL=(()=>{class n extends zC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(sC))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fc=new H("",{providedIn:"root",factory:()=>({})}),BL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["ng-component"]],standalone:!0,features:[m0],decls:1,vars:0,template:function(r,i){r&1&&Ve(0,"router-outlet")},dependencies:[QF],encapsulation:2})}}return n})();function Hm(n){let e=n.children&&n.children.map(Hm),t=e?xe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==se&&(t.component=BL),t}var Ad=new H(""),Gm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(id)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Lr(t.loadComponent()).pipe(W(HC),Ge(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),vo(()=>{this.componentLoaders.delete(t)})),i=new ho(r,()=>new He).pipe(lo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=$L(r,this.compiler,t,this.onLoadEndListener).pipe(vo(()=>{this.childrenLoaders.delete(r)})),s=new ho(o,()=>new He).pipe(lo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $L(n,e,t,r){return Lr(n.loadChildren()).pipe(W(HC),Ze(i=>i instanceof Ma||Array.isArray(i)?Y(i):_e(e.compileModuleAsync(i))),W(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ad,[],{optional:!0,self:!0}).flat()),{routes:s.map(Hm),injector:o}}))}function qL(n){return n&&typeof n=="object"&&"default"in n}function HC(n){return qL(n)?n.default:n}var Wm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(zL),providedIn:"root"})}}return n})(),zL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GC=new H(""),WC=new H("");function HL(n,e,t){let r=n.get(WC),i=n.get(xt);return n.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),GL(n))),{onViewTransitionCreated:c}=r;return c&&gn(n,()=>c({transition:a,from:e,to:t})),s})}function GL(n){return new Promise(e=>{Bg({read:()=>setTimeout(e)},{injector:n})})}var WL=new H(""),Km=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new He,this.transitionAbortSubject=new He,this.configLoader=F(Gm),this.environmentInjector=F(zt),this.urlSerializer=F(uc),this.rootContexts=F(dc),this.location=F(qo),this.inputBindingEnabled=F(Rd,{optional:!0})!==null,this.titleStrategy=F(zC),this.options=F(fc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(Wm),this.createViewTransition=F(GC,{optional:!0}),this.navigationErrorHandler=F(WL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Sm(i)),r=i=>this.events.next(new Am(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(xe(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new lt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ja,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(it(o=>o.id!==0),W(o=>xe(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Le(o=>{let s=!1,a=!1;return Y(o).pipe(Le(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Qt.SupersededByNewNavigation),Ct;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?xe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Fr(c.id,this.urlSerializer.serialize(c.rawUrl),p,wd.IgnoredSameUrlNavigation)),c.resolve(!1),Ct}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Y(c).pipe(Le(p=>{let m=this.transitions?.getValue();return this.events.next(new Jo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Ct:Promise.resolve(p)}),OL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=xe(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new _d(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:C,extras:M}=c,N=new Jo(p,this.urlSerializer.serialize(m),v,C);this.events.next(N);let j=PC(this.rootComponentType).snapshot;return this.currentTransition=o=xe(V({},c),{targetSnapshot:j,urlAfterRedirects:m,extras:xe(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Y(o)}else{let p="";return this.events.next(new Fr(c.id,this.urlSerializer.serialize(c.extractedUrl),p,wd.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ct}}),Ge(c=>{let l=new Dm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),W(c=>(this.currentTransition=o=xe(V({},c),{guards:tL(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),hL(this.environmentInjector,c=>this.events.next(c)),Ge(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw bd(this.urlSerializer,c.guardsResult);let l=new Tm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),it(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Qt.GuardRejected),!1)),ym(c=>{if(c.guards.canActivateChecks.length)return Y(c).pipe(Ge(l=>{let h=new Cm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Le(l=>{let h=!1;return Y(l).pipe(FL(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Qt.NoDataFromResolver)}}))}),Ge(l=>{let h=new bm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),ym(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ge(m=>{h.component=m}),W(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ya(l(c.targetSnapshot.root)).pipe(Sr(null),Xn(1))}),ym(()=>this.afterPreactivation()),Le(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?_e(h).pipe(W(()=>o)):Y(o)}),W(c=>{let l=YF(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=xe(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ge(()=>{this.events.next(new rc)}),eL(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Xn(1),Ge({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new cr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),dp(this.transitionAbortSubject.pipe(Ge(c=>{throw c}))),vo(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Cr(c=>{if(a=!0,VC(c))this.events.next(new sr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),XF(c)?this.events.next(new Xo(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new nc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=gn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof oc){let{message:p,cancellationCode:m}=bd(this.urlSerializer,h);this.events.next(new sr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Xo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Ct}))}))}cancelNavigationTransition(t,r,i){let o=new sr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KL(n){return n!==Ja}var QL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(YL),providedIn:"root"})}}return n})(),qm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},YL=(()=>{class n extends qm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wg(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),KC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(ZL),providedIn:"root"})}}return n})(),ZL=(()=>{class n extends KC{constructor(){super(...arguments),this.location=F(qo),this.urlSerializer=F(uc),this.options=F(fc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(Wm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ar,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=PC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Jo)this.stateMemento=this.createStateMemento();else if(t instanceof Fr)this.rawUrlTree=r.initialUrl;else if(t instanceof _d){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof rc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof sr&&(t.code===Qt.GuardRejected||t.code===Qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof nc?this.restoreHistory(r,!0):t instanceof cr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof ar?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wg(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ya=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ya||{});function QC(n,e){n.events.pipe(it(t=>t instanceof cr||t instanceof sr||t instanceof nc||t instanceof Fr),W(t=>t instanceof cr||t instanceof Fr?Ya.COMPLETE:(t instanceof sr?t.code===Qt.Redirect||t.code===Qt.SupersededByNewNavigation:!1)?Ya.REDIRECTING:Ya.FAILED),it(t=>t!==Ya.REDIRECTING),Xn(1)).subscribe(()=>{e()})}function JL(n){throw n}var XL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Si=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(Xl),this.stateManager=F(KC),this.options=F(fc,{optional:!0})||{},this.pendingTasks=F(Ii),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(Km),this.urlSerializer=F(uc),this.location=F(qo),this.urlHandlingStrategy=F(Wm),this._events=new He,this.errorHandler=this.options.errorHandler||JL,this.navigated=!1,this.routeReuseStrategy=F(QL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(Ad,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(Rd,{optional:!0}),this.eventsSubscription=new $e,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof sr&&r.code!==Qt.Redirect&&r.code!==Qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof cr)this.navigated=!0;else if(r instanceof Xo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||KL(i.source)},s);this.scheduleNavigation(a,Ja,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}nV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ja,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Hm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=xC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return RC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ec(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ja,null,r)}navigate(t,r={skipLocationChange:!1}){return tV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},XL):r===!1?i=V({},eV):i=r,ec(t))return uC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return uC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return QC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}function nV(n){return!(n instanceof rc)&&!(n instanceof Xo)}var xd=class{};var rV=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(it(t=>t instanceof cr),br(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Jl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return _e(i).pipe(Tr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Y(null);let o=i.pipe(Ze(s=>s===null?Y(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return _e([o,s]).pipe(Tr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(Si),O(id),O(zt),O(xd),O(Gm))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),YC=new H(""),iV=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Jo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof cr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Fr&&t.code===wd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Id&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Id(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){PT()}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function oV(n){return n.routerState.root}function pc(n,e){return{\u0275kind:n,\u0275providers:e}}function sV(){let n=F(Gt);return e=>{let t=n.get(vn);if(e!==t.components[0])return;let r=n.get(Si),i=n.get(ZC);n.get(Qm)===1&&r.initialNavigation(),n.get(JC,null,ue.Optional)?.setUpPreloading(),n.get(YC,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ZC=new H("",{factory:()=>new He}),Qm=new H("",{providedIn:"root",factory:()=>1});function aV(){return pc(2,[{provide:Qm,useValue:0},{provide:nd,multi:!0,deps:[Gt],useFactory:e=>{let t=e.get(F0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Si),o=e.get(ZC);QC(i,()=>{r(!0)}),e.get(Km).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))}}])}function cV(){return pc(3,[{provide:nd,multi:!0,useFactory:()=>{let e=F(Si);return()=>{e.setUpLocationChangeListener()}}},{provide:Qm,useValue:2}])}var JC=new H("");function uV(n){return pc(0,[{provide:JC,useExisting:rV},{provide:xd,useExisting:n}])}function lV(){return pc(8,[fC,{provide:Rd,useExisting:fC}])}function dV(n){let e=[{provide:GC,useValue:HL},{provide:WC,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return pc(9,e)}var yC=new H("ROUTER_FORROOT_GUARD"),hV=[qo,{provide:uc,useClass:Zo},Si,dc,{provide:es,useFactory:oV,deps:[Si]},Gm,[]],Ym=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[hV,[],{provide:Ad,multi:!0,useValue:t},{provide:yC,useFactory:mV,deps:[[Si,new ko,new ag]]},{provide:fc,useValue:r||{}},r?.useHash?pV():gV(),fV(),r?.preloadingStrategy?uV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?yV(r):[],r?.bindToComponentInputs?lV().\u0275providers:[],r?.enableViewTransitions?dV().\u0275providers:[],vV()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ad,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(yC,8))}}static{this.\u0275mod=At({type:n})}static{this.\u0275inj=St({})}}return n})();function fV(){return{provide:YC,useFactory:()=>{let n=F(B0),e=F(pe),t=F(fc),r=F(Km),i=F(uc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iV(i,r,n,e,t)}}}function pV(){return{provide:Ti,useClass:V0}}function gV(){return{provide:Ti,useClass:tm}}function mV(n){return"guarded"}function yV(n){return[n.initialNavigation==="disabled"?cV().\u0275providers:[],n.initialNavigation==="enabledBlocking"?aV().\u0275providers:[]]}var vC=new H("");function vV(){return[{provide:vC,useFactory:sV},{provide:$o,multi:!0,useExisting:vC}]}var wV=[],XC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=At({type:n})}static{this.\u0275inj=St({imports:[Ym.forRoot(wV),Ym]})}}return n})();var Nd=class{constructor(){this.name="",this.email="",this.location="",this.goalLife="",this.phoneNumber="",this.photoUrl="",this.socialNetwork=""}};var _V="firebase",IV="10.14.1";Dr(_V,IV,"app");var gc=new kr("ANGULARFIRE2_VERSION");var EV=(n,e)=>{let t=e?[e]:xI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ai=class{constructor(){return EV(DV)}},DV="app-check";function Zm(){}var Pd=class{zone;delegate;constructor(e,t=rp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Jm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zm,{},Zm,Zm)),t.pipe(Ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},kd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Pd(Zone.current)),this.insideAngular=t.run(()=>new Pd(Zone.current,ma)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(pe))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TV(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Lt(n){return CV(TV())(n)}function CV(n){return function(t){return t=t.lift(new Jm(n.ngZone)),t.pipe(dn(n.outsideAngular),Jt(n.insideAngular))}}var AV=new Map,xV={activated:!1,tokenObservers:[]},RV={initialized:!1,enabled:!1};function _n(n){return AV.get(n)||Object.assign({},xV)}function ob(){return RV}var MV="https://content-firebaseappcheck.googleapis.com/v1";var NV="exchangeDebugToken",tb={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},C3=24*60*60*1e3;var ey=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new Ff,this.pending.promise.catch(t=>{}),yield PV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ff,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function PV(n){return new Promise(e=>{setTimeout(e,n)})}var kV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vr=new SI("appCheck","AppCheck",kV);function sb(n){if(!_n(n).activated)throw Vr.create("use-before-activation",{appName:n.name})}function ab(r,i){return R(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw Vr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw Vr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(v){throw Vr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function cb(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${MV}/projects/${t}/apps/${r}:${NV}?key=${i}`,body:{debug_token:e}}}var OV="firebase-app-check-database",FV=1,ty="firebase-app-check-store";var Od=null;function LV(){return Od||(Od=new Promise((n,e)=>{try{let t=indexedDB.open(OV,FV);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Vr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ty,{keyPath:"compositeKey"})}}}catch(t){e(Vr.create("storage-open",{originalErrorMessage:t?.message}))}}),Od)}function VV(n,e){return jV(UV(n),e)}function jV(n,e){return R(this,null,function*(){let r=(yield LV()).transaction(ty,"readwrite"),o=r.objectStore(ty).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Vr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function UV(n){return`${n.options.appId}-${n.name}`}var ny=new Tu("@firebase/app-check");function Xm(n,e){return Du()?VV(n,e).catch(t=>{ny.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ub(){return ob().enabled}function lb(){return R(this,null,function*(){let n=ob();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var BV={error:"UNKNOWN_ERROR"};function $V(n){return TI.encodeString(JSON.stringify(n),!1)}function ry(n,e=!1){return R(this,null,function*(){let t=n.app;sb(t);let r=_n(t),i=r.token,o;if(i&&!mc(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(mc(c)?i=c:yield Xm(t,void 0))}if(!e&&i&&mc(i))return{token:i.token};let s=!1;if(ub()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ab(cb(t,yield lb()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Xm(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield _n(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?ny.warn(c.message):ny.error(c),o=c}let a;return i?o?mc(i)?a={token:i.token,internalError:o}:a=rb(o):(a={token:i.token},r.token=i,yield Xm(t,i)):a=rb(o),s&&GV(t,a),a})}function qV(n){return R(this,null,function*(){let e=n.app;sb(e);let{provider:t}=_n(e);if(ub()){let r=yield lb(),{token:i}=yield ab(cb(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function zV(n,e,t,r){let{app:i}=n,o=_n(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&mc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),nb(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>nb(n))}function db(n,e){let t=_n(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function nb(n){let{app:e}=n,t=_n(e),r=t.tokenRefresher;r||(r=HV(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function HV(n){let{app:e}=n;return new ey(()=>R(this,null,function*(){let t=_n(e),r;if(t.token?r=yield ry(n,!0):r=yield ry(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=_n(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},tb.RETRIAL_MIN_WAIT,tb.RETRIAL_MAX_WAIT)}function GV(n,e){let t=_n(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function mc(n){return n.expireTimeMillis-Date.now()>0}function rb(n){return{token:$V(BV),error:n}}var iy=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=_n(this.app);for(let t of e)db(this.app,t.next);return Promise.resolve()}};function WV(n,e){return new iy(n,e)}function KV(n){return{getToken:e=>ry(n,e),getLimitedUseToken:()=>qV(n),addTokenListener:e=>zV(n,"INTERNAL",e),removeTokenListener:e=>db(n.app,e)}}var QV="@firebase/app-check",YV="0.8.8";var ZV="app-check",ib="app-check-internal";function JV(){ha(new ui(ZV,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return WV(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ib).initialize()})),ha(new ui(ib,n=>{let e=n.getProvider("app-check").getImmediate();return KV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Dr(QV,YV)}JV();var XV=["localhost","0.0.0.0","127.0.0.1"],L3=typeof window<"u"&&XV.includes(window.location.hostname);var e2="firebase",t2="10.14.1";Bt.registerVersion(e2,t2,"app-compat");var n2=["ngOnDestroy"],pb=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(n2.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Fd=class{constructor(e){return e}},rs=new H("angularfire2.app.options"),is=new H("angularfire2.app.name");function yc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Bt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Bt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;r2("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Fd(s)}var r2=(n,...e)=>{Wg()&&typeof console<"u"&&console[n](...e)},i2={provide:Fd,useFactory:yc,deps:[rs,pe,[new ko,is]]},gb=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:rs,useValue:t},{provide:is,useValue:r}]}}constructor(t){Bt.registerVersion("angularfire",gc.full,"core"),Bt.registerVersion("angularfire",gc.full,"app-compat"),Bt.registerVersion("angular",y0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(dt))};static \u0275mod=At({type:n});static \u0275inj=St({providers:[i2]})}return n})();function Ld(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return o2(i,s)||(fb("error",`${e} was already initialized on the ${t} Firebase App with different settings.${s2?" You may need to reload as Firebase is not HMR aware.":""}`),fb("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function o2(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var s2=typeof module<"u"&&!!module.hot,fb=(n,...e)=>{Wg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var oy=new H("angularfire2.auth.use-emulator"),sy=new H("angularfire2.auth.settings"),ay=new H("angularfire2.auth.tenant-id"),cy=new H("angularfire2.auth.langugage-code"),uy=new H("angularfire2.auth.use-device-language"),ly=new H("angularfire.auth.persistence"),dy=(n,e,t,r,i,o,s,a)=>Ld(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),mb=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,v){let C=new He,M=Y(void 0).pipe(Jt(s.outsideAngular),Le(()=>o.runOutsideAngular(()=>import("./chunk-IDFRXQP6.js"))),W(()=>yc(t,o,r)),W(N=>dy(N,o,a,l,h,p,c,m)),Gu({bufferSize:1,refCount:!1}));if(or(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Y(null);else{M.pipe($t()).subscribe();let N=M.pipe(Le(L=>L.getRedirectResult().then(Q=>Q,()=>null)),Lt,Gu({bufferSize:1,refCount:!1})),j=M.pipe(Le(L=>new he(Q=>({unsubscribe:o.runOutsideAngular(()=>L.onAuthStateChanged(ee=>Q.next(ee),ee=>Q.error(ee),()=>Q.complete()))})))),z=M.pipe(Le(L=>new he(Q=>({unsubscribe:o.runOutsideAngular(()=>L.onIdTokenChanged(ee=>Q.next(ee),ee=>Q.error(ee),()=>Q.complete()))}))));this.authState=N.pipe(Wu(j),dn(s.outsideAngular),Jt(s.insideAngular)),this.user=N.pipe(Wu(z),dn(s.outsideAngular),Jt(s.insideAngular)),this.idToken=this.user.pipe(Le(L=>L?_e(L.getIdToken()):Y(null))),this.idTokenResult=this.user.pipe(Le(L=>L?_e(L.getIdTokenResult()):Y(null))),this.credential=sp(N,C,this.authState.pipe(it(L=>!L))).pipe(W(L=>L?.user?L:null),dn(s.outsideAngular),Jt(s.insideAngular))}return pb(this,M,o,{spy:{apply:(N,j,z)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&z.then(L=>C.next(L))}}})}static \u0275fac=function(r){return new(r||n)(O(rs),O(is,8),O(dt),O(pe),O(kd),O(oy,8),O(sy,8),O(ay,8),O(cy,8),O(uy,8),O(ly,8),O(Ai,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vb={};var jr,hy;(function(){var n;function e(I,y){function _(){}_.prototype=y.prototype,I.D=y.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(E,D,b){for(var w=Array(arguments.length-2),Kn=2;Kn<arguments.length;Kn++)w[Kn-2]=arguments[Kn];return y.prototype[D].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(D=0;16>D;++D)E[D]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=I.g[0],_=I.g[1],D=I.g[2];var b=I.g[3],w=y+(b^_&(D^b))+E[0]+3614090360&4294967295;y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[1]+3905402710&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[2]+606105819&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[3]+3250441966&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(b^_&(D^b))+E[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[5]+1200080426&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[6]+2821735955&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[7]+4249261313&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(b^_&(D^b))+E[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[9]+2336552879&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[10]+4294925233&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[11]+2304563134&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(b^_&(D^b))+E[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[13]+4254626195&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[14]+2792965006&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[15]+1236535329&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(D^b&(_^D))+E[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[6]+3225465664&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[11]+643717713&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[0]+3921069994&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^b&(_^D))+E[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[10]+38016083&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[15]+3634488961&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[4]+3889429448&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^b&(_^D))+E[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[14]+3275163606&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[3]+4107603335&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[8]+1163531501&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^b&(_^D))+E[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[2]+4243563512&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[7]+1735328473&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[12]+2368359562&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(_^D^b)+E[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[8]+2272392833&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[11]+1839030562&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[14]+4259657740&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^b)+E[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[4]+1272893353&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[7]+4139469664&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[10]+3200236656&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^b)+E[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[0]+3936430074&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[3]+3572445317&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[6]+76029189&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^b)+E[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[12]+3873151461&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[15]+530742520&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[2]+3299628645&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(D^(_|~b))+E[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[7]+1126891415&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[14]+2878612391&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[5]+4237533241&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~b))+E[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[3]+2399980690&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[10]+4293915773&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[1]+2240044497&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~b))+E[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[15]+4264355552&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[6]+2734768916&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[13]+1309151649&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~b))+E[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[11]+3174756917&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[2]+718787259&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var _=y-this.blockSize,E=this.B,D=this.h,b=0;b<y;){if(D==0)for(;b<=_;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<y;)if(E[D++]=I.charCodeAt(b++),D==this.blockSize){i(this,E),D=0;break}}else for(;b<y;)if(E[D++]=I[b++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var _=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=_&255,_/=256;for(this.u(I),I=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)I[_++]=this.g[y]>>>E&255;return I};function o(I,y){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=y(I)}function s(I,y){this.h=y;for(var _=[],E=!0,D=I.length-1;0<=D;D--){var b=I[D]|0;E&&b==y||(_[D]=b,E=!1)}this.g=_}var a={};function c(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],_=1,E=0;I>=_;E++)y[E]=I/_|0,_*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var b=Math.min(8,I.length-D),w=parseInt(I.substring(D,D+b),y);8>b?(b=l(Math.pow(y,b)),E=E.j(b).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var p=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var I=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(M(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),_=this,E="";;){var D=Q(_,y).g;_=j(_,D.j(y));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=D,C(_))return b+E;for(;6>b.length;)b="0"+b;E=b+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=j(this,I),M(I)?-1:C(I)?0:1};function N(I){for(var y=I.g.length,_=[],E=0;E<y;E++)_[E]=~I.g[E];return new s(_,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0,D=0;D<=y;D++){var b=E+(this.i(D)&65535)+(I.i(D)&65535),w=(b>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=w>>>16,b&=65535,w&=65535,_[D]=w<<16|b}return new s(_,_[_.length-1]&-2147483648?-1:0)};function j(I,y){return I.add(N(y))}n.j=function(I){if(C(this)||C(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var b=this.i(E)>>>16,w=this.i(E)&65535,Kn=I.i(D)>>>16,Gs=I.i(D)&65535;_[2*E+2*D]+=w*Gs,z(_,2*E+2*D),_[2*E+2*D+1]+=b*Gs,z(_,2*E+2*D+1),_[2*E+2*D+1]+=w*Kn,z(_,2*E+2*D+1),_[2*E+2*D+2]+=b*Kn,z(_,2*E+2*D+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new s(_,0)};function z(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function L(I,y){this.g=I,this.h=y}function Q(I,y){if(C(y))throw Error("division by zero");if(C(I))return new L(p,p);if(M(I))return y=Q(N(I),y),new L(N(y.g),N(y.h));if(M(y))return y=Q(I,N(y)),new L(N(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(I);)_=ee(_),E=ee(E);var D=X(_,1),b=X(E,1);for(E=X(E,2),_=X(_,2);!C(E);){var w=b.add(E);0>=w.l(I)&&(D=D.add(_),b=w),E=X(E,1),_=X(_,1)}return y=j(I,D.j(y)),new L(D,y)}for(D=p;0<=I.l(y);){for(_=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),b=l(_),w=b.j(y);M(w)||0<w.l(I);)_-=E,b=l(_),w=b.j(y);C(b)&&(b=m),D=D.add(b),I=j(I,w)}return new L(D,I)}n.A=function(I){return Q(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&I.i(E);return new s(_,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|I.i(E);return new s(_,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^I.i(E);return new s(_,this.h^I.h)};function ee(I){for(var y=I.g.length+1,_=[],E=0;E<y;E++)_[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(_,I.h)}function X(I,y){var _=y>>5;y%=32;for(var E=I.g.length-_,D=[],b=0;b<E;b++)D[b]=0<y?I.i(b+_)>>>y|I.i(b+_+1)<<32-y:I.i(b+_);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hy=vb.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,jr=vb.Integer=s}).apply(typeof yb<"u"?yb:typeof self<"u"?self:typeof window<"u"?window:{});var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ur={};var fy,c2,os,py,vc,jd,gy,my,yy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vd=="object"&&Vd];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var T=u[g];if(!(T in f))break e;f=f[T]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,T={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),u.apply(d,T)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function C(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,T,A){for(var U=Array(arguments.length-2),be=2;be<arguments.length;be++)U[be-2]=arguments[be];return d.prototype[T].apply(g,U)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let T=u.length||0,A=g.length||0;u.length=T+A;for(let U=0;U<A;U++)u[T+U]=g[U]}else u.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(u){return/^[\s\xa0]*$/.test(u)}function L(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Q(u){return Q[" "](u),u}Q[" "]=function(){};var ee=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function X(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)u[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function b(u){a.setTimeout(()=>{throw u},0)}function w(){var u=lf;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Kn{constructor(){this.h=this.g=null}add(d,f){let g=Gs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Gs=new j(()=>new fR,u=>u.reset());class fR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ws,Ks=!1,lf=new Kn,w_=()=>{let u=a.Promise.resolve(void 0);Ws=()=>{u.then(pR)}};var pR=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){b(f)}var d=Gs;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Ks=!1};function wr(){this.s=this.s,this.C=this.C}wr.prototype.s=!1,wr.prototype.ma=function(){this.s||(this.s=!0,this.N())},wr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var gR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Qs(u,d){if(pt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ee){e:{try{Q(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:mR[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Qs.aa.h.call(this)}}C(Qs,pt);var mR={2:"touch",3:"pen",4:"mouse"};Qs.prototype.h=function(){Qs.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ys="closure_listenable_"+(1e6*Math.random()|0),yR=0;function vR(u,d,f,g,T){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++yR,this.da=this.fa=!1}function ou(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function su(u){this.src=u,this.g={},this.h=0}su.prototype.add=function(u,d,f,g,T){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var U=hf(u,d,g,T);return-1<U?(d=u[U],f||(d.fa=!1)):(d=new vR(d,this.src,A,!!g,T),d.fa=f,u.push(d)),d};function df(u,d){var f=d.type;if(f in u.g){var g=u.g[f],T=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=T)&&Array.prototype.splice.call(g,T,1),A&&(ou(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function hf(u,d,f,g){for(var T=0;T<u.length;++T){var A=u[T];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return T}return-1}var ff="closure_lm_"+(1e6*Math.random()|0),pf={};function __(u,d,f,g,T){if(g&&g.once)return E_(u,d,f,g,T);if(Array.isArray(d)){for(var A=0;A<d.length;A++)__(u,d[A],f,g,T);return null}return f=vf(f),u&&u[Ys]?u.K(d,f,l(g)?!!g.capture:!!g,T):I_(u,d,f,!1,g,T)}function I_(u,d,f,g,T,A){if(!d)throw Error("Invalid event type");var U=l(T)?!!T.capture:!!T,be=mf(u);if(be||(u[ff]=be=new su(u)),f=be.add(d,f,g,U,A),f.proxy)return f;if(g=wR(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)gR||(T=U),T===void 0&&(T=!1),u.addEventListener(d.toString(),g,T);else if(u.attachEvent)u.attachEvent(T_(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function wR(){function u(f){return d.call(u.src,u.listener,f)}let d=_R;return u}function E_(u,d,f,g,T){if(Array.isArray(d)){for(var A=0;A<d.length;A++)E_(u,d[A],f,g,T);return null}return f=vf(f),u&&u[Ys]?u.L(d,f,l(g)?!!g.capture:!!g,T):I_(u,d,f,!0,g,T)}function D_(u,d,f,g,T){if(Array.isArray(d))for(var A=0;A<d.length;A++)D_(u,d[A],f,g,T);else g=l(g)?!!g.capture:!!g,f=vf(f),u&&u[Ys]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=hf(A,f,g,T),-1<f&&(ou(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=mf(u))&&(d=u.g[d.toString()],u=-1,d&&(u=hf(d,f,g,T)),(f=-1<u?d[u]:null)&&gf(f))}function gf(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Ys])df(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(T_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=mf(d))?(df(f,u),f.h==0&&(f.src=null,d[ff]=null)):ou(u)}}}function T_(u){return u in pf?pf[u]:pf[u]="on"+u}function _R(u,d){if(u.da)u=!0;else{d=new Qs(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&gf(u),u=f.call(g,d)}return u}function mf(u){return u=u[ff],u instanceof su?u:null}var yf="__closure_events_fn_"+(1e9*Math.random()>>>0);function vf(u){return typeof u=="function"?u:(u[yf]||(u[yf]=function(d){return u.handleEvent(d)}),u[yf])}function gt(){wr.call(this),this.i=new su(this),this.M=this,this.F=null}C(gt,wr),gt.prototype[Ys]=!0,gt.prototype.removeEventListener=function(u,d,f,g){D_(this,u,d,f,g)};function Et(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new pt(d,u);else if(d instanceof pt)d.target=d.target||u;else{var T=d;d=new pt(g,u),E(d,T)}if(T=!0,f)for(var A=f.length-1;0<=A;A--){var U=d.g=f[A];T=au(U,g,!0,d)&&T}if(U=d.g=u,T=au(U,g,!0,d)&&T,T=au(U,g,!1,d)&&T,f)for(A=0;A<f.length;A++)U=d.g=f[A],T=au(U,g,!1,d)&&T}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)ou(f[g]);delete u.g[d],u.h--}}this.F=null},gt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},gt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function au(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,A=0;A<d.length;++A){var U=d[A];if(U&&!U.da&&U.capture==f){var be=U.listener,ut=U.ha||U.src;U.fa&&df(u.i,U),T=be.call(ut,g)!==!1&&T}}return T&&!g.defaultPrevented}function C_(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function b_(u){u.g=C_(()=>{u.g=null,u.i&&(u.i=!1,b_(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class IR extends wr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:b_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zs(u){wr.call(this),this.h=u,this.g={}}C(Zs,wr);var S_=[];function A_(u){X(u.g,function(d,f){this.g.hasOwnProperty(f)&&gf(d)},u),u.g={}}Zs.prototype.N=function(){Zs.aa.N.call(this),A_(this)},Zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wf=a.JSON.stringify,ER=a.JSON.parse,DR=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function _f(){}_f.prototype.h=null;function x_(u){return u.h||(u.h=u.i())}function R_(){}var Js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function If(){pt.call(this,"d")}C(If,pt);function Ef(){pt.call(this,"c")}C(Ef,pt);var oi={},M_=null;function cu(){return M_=M_||new gt}oi.La="serverreachability";function N_(u){pt.call(this,oi.La,u)}C(N_,pt);function Xs(u){let d=cu();Et(d,new N_(d))}oi.STAT_EVENT="statevent";function P_(u,d){pt.call(this,oi.STAT_EVENT,u),this.stat=d}C(P_,pt);function Dt(u){let d=cu();Et(d,new P_(d,u))}oi.Ma="timingevent";function k_(u,d){pt.call(this,oi.Ma,u),this.size=d}C(k_,pt);function ea(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function ta(){this.g=!0}ta.prototype.xa=function(){this.g=!1};function TR(u,d,f,g,T,A){u.info(function(){if(u.g)if(A)for(var U="",be=A.split("&"),ut=0;ut<be.length;ut++){var we=be[ut].split("=");if(1<we.length){var mt=we[0];we=we[1];var yt=mt.split("_");U=2<=yt.length&&yt[1]=="type"?U+(mt+"="+we+"&"):U+(mt+"=redacted&")}}else U=null;else U=A;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+U})}function CR(u,d,f,g,T,A,U){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+A+" "+U})}function no(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+SR(u,f)+(g?" "+g:"")})}function bR(u,d){u.info(function(){return"TIMEOUT: "+d})}ta.prototype.info=function(){};function SR(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var U=1;U<T.length;U++)T[U]=""}}}}return wf(f)}catch{return d}}var uu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},O_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Df;function lu(){}C(lu,_f),lu.prototype.g=function(){return new XMLHttpRequest},lu.prototype.i=function(){return{}},Df=new lu;function _r(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new F_}function F_(){this.i=null,this.g="",this.h=!1}var L_={},Tf={};function Cf(u,d,f){u.L=1,u.v=pu(Qn(d)),u.m=f,u.P=!0,V_(u,null)}function V_(u,d){u.F=Date.now(),du(u),u.A=Qn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),J_(f.i,"t",g),u.C=0,f=u.j.J,u.h=new F_,u.g=mI(u.j,f?d:null,!u.m),0<u.O&&(u.M=new IR(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var T="readystatechange";Array.isArray(T)||(T&&(S_[0]=T.toString()),T=S_);for(var A=0;A<T.length;A++){var U=__(f,T[A],g||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Xs(),TR(u.i,u.u,u.A,u.l,u.R,u.m)}_r.prototype.ca=function(u){u=u.target;let d=this.M;d&&Yn(u)==3?d.j():this.Y(u)},_r.prototype.Y=function(u){try{if(u==this.g)e:{let yt=Yn(this.g);var d=this.g.Ba();let oo=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||oI(this.g)))){this.J||yt!=4||d==7||(d==8||0>=oo?Xs(3):Xs(2)),bf(this);var f=this.g.Z();this.X=f;t:if(j_(this)){var g=oI(this.g);u="";var T=g.length,A=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),na(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==T-1)});g.length=0,this.h.g+=u,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,CR(this.i,this.u,this.A,this.l,this.R,yt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ut=this.g;if((be=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(be)){var we=be;break t}}we=null}if(f=we)no(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sf(this,f);else{this.o=!1,this.s=3,Dt(12),si(this),na(this);break e}}if(this.P){f=!0;let un;for(;!this.J&&this.C<U.length;)if(un=AR(this,U),un==Tf){yt==4&&(this.s=4,Dt(14),f=!1),no(this.i,this.l,null,"[Incomplete Response]");break}else if(un==L_){this.s=4,Dt(15),no(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else no(this.i,this.l,un,null),Sf(this,un);if(j_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||U.length!=0||this.h.h||(this.s=1,Dt(16),f=!1),this.o=this.o&&f,!f)no(this.i,this.l,U,"[Invalid Chunked Response]"),si(this),na(this);else if(0<U.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Pf(mt),mt.M=!0,Dt(11))}}else no(this.i,this.l,U,null),Sf(this,U);yt==4&&si(this),this.o&&!this.J&&(yt==4?hI(this.j,this):(this.o=!1,du(this)))}else HR(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),si(this),na(this)}}}catch{}finally{}};function j_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function AR(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Tf:(f=Number(d.substring(f,g)),isNaN(f)?L_:(g+=1,g+f>d.length?Tf:(d=d.slice(g,g+f),u.C=g+f,d)))}_r.prototype.cancel=function(){this.J=!0,si(this)};function du(u){u.S=Date.now()+u.I,U_(u,u.I)}function U_(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ea(m(u.ba,u),d)}function bf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}_r.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(bR(this.i,this.A),this.L!=2&&(Xs(),Dt(17)),si(this),this.s=2,na(this)):U_(this,this.S-u)};function na(u){u.j.G==0||u.J||hI(u.j,u)}function si(u){bf(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,A_(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Sf(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Af(f.h,u))){if(!u.K&&Af(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)wu(f),yu(f);else break e;Nf(f),Dt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=ea(m(f.Za,f),6e3));if(1>=q_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ci(f,11)}else if((u.K||f.g==u)&&wu(f),!z(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let we=T[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let mt=we[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));let yt=we[4];yt!=null&&(f.Aa=yt,f.j.info("SVER="+f.Aa));let oo=we[5];oo!=null&&typeof oo=="number"&&0<oo&&(g=1.5*oo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let un=u.g;if(un){let Iu=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Iu){var A=g.h;A.g||Iu.indexOf("spdy")==-1&&Iu.indexOf("quic")==-1&&Iu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(xf(A,A.h),A.h=null))}if(g.D){let kf=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;kf&&(g.ya=kf,Me(g.I,g.D,kf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var U=u;if(g.qa=gI(g,g.J?g.ia:null,g.W),U.K){z_(g.h,U);var be=U,ut=g.L;ut&&(be.I=ut),be.B&&(bf(be),du(be)),g.g=U}else lI(g);0<f.i.length&&vu(f)}else we[0]!="stop"&&we[0]!="close"||ci(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?ci(f,7):Mf(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}Xs(4)}catch{}}var xR=class{constructor(u,d){this.g=u,this.map=d}};function B_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function q_(u){return u.h?1:u.g?u.g.size:0}function Af(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function xf(u,d){u.g?u.g.add(d):u.h=d}function z_(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}B_.prototype.cancel=function(){if(this.i=H_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function H_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function RR(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function MR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function G_(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=MR(u),g=RR(u),T=g.length,A=0;A<T;A++)d.call(void 0,g[A],f&&f[A],u)}var W_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NR(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),T=null;if(0<=g){var A=u[f].substring(0,g);T=u[f].substring(g+1)}else A=u[f];d(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function ai(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ai){this.h=u.h,hu(this,u.j),this.o=u.o,this.g=u.g,fu(this,u.s),this.l=u.l;var d=u.i,f=new oa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),K_(this,f),this.m=u.m}else u&&(d=String(u).match(W_))?(this.h=!1,hu(this,d[1]||"",!0),this.o=ra(d[2]||""),this.g=ra(d[3]||"",!0),fu(this,d[4]),this.l=ra(d[5]||"",!0),K_(this,d[6]||"",!0),this.m=ra(d[7]||"")):(this.h=!1,this.i=new oa(null,this.h))}ai.prototype.toString=function(){var u=[],d=this.j;d&&u.push(ia(d,Q_,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(ia(d,Q_,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(ia(f,f.charAt(0)=="/"?OR:kR,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",ia(f,LR)),u.join("")};function Qn(u){return new ai(u)}function hu(u,d,f){u.j=f?ra(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function fu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function K_(u,d,f){d instanceof oa?(u.i=d,VR(u.i,u.h)):(f||(d=ia(d,FR)),u.i=new oa(d,u.h))}function Me(u,d,f){u.i.set(d,f)}function pu(u){return Me(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ra(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ia(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,PR),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function PR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Q_=/[#\/\?@]/g,kR=/[#\?:]/g,OR=/[#\?]/g,FR=/[#\?@]/g,LR=/#/g;function oa(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Ir(u){u.g||(u.g=new Map,u.h=0,u.i&&NR(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=oa.prototype,n.add=function(u,d){Ir(this),this.i=null,u=ro(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function Y_(u,d){Ir(u),d=ro(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Z_(u,d){return Ir(u),d=ro(u,d),u.g.has(d)}n.forEach=function(u,d){Ir(this),this.g.forEach(function(f,g){f.forEach(function(T){u.call(d,T,g,this)},this)},this)},n.na=function(){Ir(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=u[g];for(let A=0;A<T.length;A++)f.push(d[g])}return f},n.V=function(u){Ir(this);let d=[];if(typeof u=="string")Z_(this,u)&&(d=d.concat(this.g.get(ro(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return Ir(this),this.i=null,u=ro(this,u),Z_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function J_(u,d,f){Y_(u,d),0<f.length&&(u.i=null,u.g.set(ro(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var T=A;U[g]!==""&&(T+="="+encodeURIComponent(String(U[g]))),u.push(T)}}return this.i=u.join("&")};function ro(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function VR(u,d){d&&!u.j&&(Ir(u),u.i=null,u.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(Y_(this,g),J_(this,T,f))},u)),u.j=d}function jR(u,d){let f=new ta;if(a.Image){let g=new Image;g.onload=v(Er,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(Er,f,"TestLoadImage: error",!1,d,g),g.onabort=v(Er,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(Er,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function UR(u,d){let f=new ta,g=new AbortController,T=setTimeout(()=>{g.abort(),Er(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(T),A.ok?Er(f,"TestPingServer: ok",!0,d):Er(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Er(f,"TestPingServer: error",!1,d)})}function Er(u,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function BR(){this.g=new DR}function $R(u,d,f){let g=f||"";try{G_(u,function(T,A){let U=T;l(T)&&(U=wf(T)),d.push(g+A+"="+encodeURIComponent(U))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function sa(u){this.l=u.Ub||null,this.j=u.eb||!1}C(sa,_f),sa.prototype.g=function(){return new gu(this.l,this.j)},sa.prototype.i=function(u){return function(){return u}}({});function gu(u,d){gt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(gu,gt),n=gu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ca(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,aa(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;X_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function X_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?aa(this):ca(this),this.readyState==3&&X_(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,aa(this))},n.Qa=function(u){this.g&&(this.response=u,aa(this))},n.ga=function(){this.g&&aa(this)};function aa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ca(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function ca(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function eI(u){let d="";return X(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Rf(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=eI(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Me(u,d,f))}function Be(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Be,gt);var qR=/^https?$/i,zR=["POST","PUT"];n=Be.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Df.g(),this.v=this.o?x_(this.o):x_(Df),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){tI(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),T=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zR,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,U]of f)this.g.setRequestHeader(A,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{iI(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){tI(this,A)}};function tI(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,nI(u),mu(u)}function nI(u){u.A||(u.A=!0,Et(u,"complete"),Et(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Et(this,"complete"),Et(this,"abort"),mu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mu(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rI(this):this.bb())},n.bb=function(){rI(this)};function rI(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Yn(u)!=4||u.Z()!=2)){if(u.u&&Yn(u)==4)C_(u.Ea,0,u);else if(Et(u,"readystatechange"),Yn(u)==4){u.h=!1;try{let U=u.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=U===0){var T=String(u.D).match(W_)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!qR.test(T?T.toLowerCase():"")}f=g}if(f)Et(u,"complete"),Et(u,"success");else{u.m=6;try{var A=2<Yn(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",nI(u)}}finally{mu(u)}}}}function mu(u,d){if(u.g){iI(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Et(u,"ready");try{f.onreadystatechange=g}catch{}}}function iI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Yn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),ER(d)}};function oI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function HR(u){let d={};u=(u.g&&2<=Yn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(z(u[g]))continue;var f=D(u[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[T]||[];d[T]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function sI(u){this.Aa=0,this.i=[],this.j=new ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,u),this.cb=ua("retryDelaySeedMs",1e4,u),this.Wa=ua("forwardChannelMaxRetries",2,u),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new B_(u&&u.concurrentRequestLimit),this.Da=new BR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=sI.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){Dt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=gI(this,null,this.W),vu(this)};function Mf(u){if(aI(u),u.G==3){var d=u.U++,f=Qn(u.I);if(Me(f,"SID",u.K),Me(f,"RID",d),Me(f,"TYPE","terminate"),la(u,f),d=new _r(u,u.j,d),d.L=2,d.v=pu(Qn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=mI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),du(d)}pI(u)}function yu(u){u.g&&(Pf(u),u.g.cancel(),u.g=null)}function aI(u){yu(u),u.u&&(a.clearTimeout(u.u),u.u=null),wu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function vu(u){if(!$_(u.h)&&!u.s){u.s=!0;var d=u.Ga;Ws||w_(),Ks||(Ws(),Ks=!0),lf.add(d,u),u.B=0}}function GR(u,d){return q_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ea(m(u.Ga,u,d),fI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let T=new _r(this,this.j,u),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=uI(this,T,d),f=Qn(this.I),Me(f,"RID",u),Me(f,"CVER",22),this.D&&Me(f,"X-HTTP-Session-Id",this.D),la(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(eI(A)))+"&"+d:this.m&&Rf(f,this.m,A)),xf(this.h,T),this.Ua&&Me(f,"TYPE","init"),this.P?(Me(f,"$req",d),Me(f,"SID","null"),T.T=!0,Cf(T,f,null)):Cf(T,f,d),this.G=2}}else this.G==3&&(u?cI(this,u):this.i.length==0||$_(this.h)||cI(this))};function cI(u,d){var f;d?f=d.l:f=u.U++;let g=Qn(u.I);Me(g,"SID",u.K),Me(g,"RID",f),Me(g,"AID",u.T),la(u,g),u.m&&u.o&&Rf(g,u.m,u.o),f=new _r(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=uI(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),xf(u.h,f),Cf(f,g,d)}function la(u,d){u.H&&X(u.H,function(f,g){Me(d,g,f)}),u.l&&G_({},function(f,g){Me(d,g,f)})}function uI(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var T=u.i;let A=-1;for(;;){let U=["count="+f];A==-1?0<f?(A=T[0].g,U.push("ofs="+A)):A=0:U.push("ofs="+A);let be=!0;for(let ut=0;ut<f;ut++){let we=T[ut].g,mt=T[ut].map;if(we-=A,0>we)A=Math.max(0,T[ut].g-100),be=!1;else try{$R(mt,U,"req"+we+"_")}catch{g&&g(mt)}}if(be){g=U.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function lI(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Ws||w_(),Ks||(Ws(),Ks=!0),lf.add(d,u),u.v=0}}function Nf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ea(m(u.Fa,u),fI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,dI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ea(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),yu(this),dI(this))};function Pf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function dI(u){u.g=new _r(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Qn(u.qa);Me(d,"RID","rpc"),Me(d,"SID",u.K),Me(d,"AID",u.T),Me(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Me(d,"TO",u.ja),Me(d,"TYPE","xmlhttp"),la(u,d),u.m&&u.o&&Rf(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=pu(Qn(d)),f.m=null,f.P=!0,V_(f,u)}n.Za=function(){this.C!=null&&(this.C=null,yu(this),Nf(this),Dt(19))};function wu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function hI(u,d){var f=null;if(u.g==d){wu(u),Pf(u),u.g=null;var g=2}else if(Af(u.h,d))f=d.D,z_(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=u.B;g=cu(),Et(g,new k_(g,f)),vu(u)}else lI(u);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&GR(u,d)||g==2&&Nf(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),T){case 1:ci(u,5);break;case 4:ci(u,10);break;case 3:ci(u,6);break;default:ci(u,2)}}}function fI(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ci(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let T=!g;g=new ai(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hu(g,"https"),pu(g),T?jR(g.toString(),f):UR(g.toString(),f)}else Dt(2);u.G=0,u.l&&u.l.sa(d),pI(u),aI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function pI(u){if(u.G=0,u.ka=[],u.l){let d=H_(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function gI(u,d,f){var g=f instanceof ai?Qn(f):new ai(f);if(g.g!="")d&&(g.g=d+"."+g.g),fu(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var A=new ai(null);g&&hu(A,g),d&&(A.g=d),T&&fu(A,T),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Me(g,f,d),Me(g,"VER",u.la),la(u,g),g}function mI(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Be(new sa({eb:f})):new Be(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yI(){}n=yI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _u(){}_u.prototype.g=function(u,d){return new Ut(u,d)};function Ut(u,d){gt.call(this),this.g=new sI(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!z(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new io(this)}C(Ut,gt),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Mf(this.g)},Ut.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=wf(u),u=f);d.i.push(new xR(d.Ya++,u)),d.G==3&&vu(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Mf(this.g),delete this.g,Ut.aa.N.call(this)};function vI(u){If.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}C(vI,If);function wI(){Ef.call(this),this.status=1}C(wI,Ef);function io(u){this.g=u}C(io,yI),io.prototype.ua=function(){Et(this.g,"a")},io.prototype.ta=function(u){Et(this.g,new vI(u))},io.prototype.sa=function(u){Et(this.g,new wI)},io.prototype.ra=function(){Et(this.g,"b")},_u.prototype.createWebChannel=_u.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,yy=ur.createWebChannelTransport=function(){return new _u},my=ur.getStatEventTarget=function(){return cu()},gy=ur.Event=oi,jd=ur.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uu.NO_ERROR=0,uu.TIMEOUT=8,uu.HTTP_ERROR=6,vc=ur.ErrorCode=uu,O_.COMPLETE="complete",py=ur.EventType=O_,R_.EventType=Js,Js.OPEN="a",Js.CLOSE="b",Js.ERROR="c",Js.MESSAGE="d",gt.prototype.listen=gt.prototype.K,os=ur.WebChannel=R_,c2=ur.FetchXmlHttpFactory=sa,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,fy=ur.XhrIo=Be}).apply(typeof Vd<"u"?Vd:typeof self<"u"?self:typeof window<"u"?window:{});var wb="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Fs="10.14.0";var Gr=new Tu("@firebase/firestore");function ls(){return Gr.logLevel}function ES(n){Gr.setLogLevel(n)}function k(n,...e){if(Gr.logLevel<=bn.DEBUG){let t=e.map(Ew);Gr.debug(`Firestore (${Fs}): ${n}`,...t)}}function We(n,...e){if(Gr.logLevel<=bn.ERROR){let t=e.map(Ew);Gr.error(`Firestore (${Fs}): ${n}`,...t)}}function In(n,...e){if(Gr.logLevel<=bn.WARN){let t=e.map(Ew);Gr.warn(`Firestore (${Fs}): ${n}`,...t)}}function Ew(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function G(n="Unexpected state"){let e=`FIRESTORE (${Fs}) INTERNAL ASSERTION FAILED: `+n;throw We(e),new Error(e)}function K(n,e){n||G()}function DS(n,e){n||G()}function B(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends bI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Qd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},Ty=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Cy=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new nt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>R(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Qd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new et(e)}},by=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Sy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new by(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ay=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new Ay(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function u2(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Yd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=u2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function ws(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function TS(n){return n+"\0"}var je=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new je(0,0))}static max(){return new n(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(),r===void 0?r=e.length-t:r>e.length-t&&G(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ye=class n extends Zd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},l2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ke=class n extends Zd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return l2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ye.fromString(e))}static fromName(e){return new n(ye.fromString(e).popFirst(5))}static empty(){return new n(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ye(e.slice()))}};var _s=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Ry(n){return n.fields.find(e=>e.kind===2)}function Ri(n){return n.fields.filter(e=>e.kind!==2)}_s.UNKNOWN_ID=-1;var ms=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Rc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,an.min())}};function CS(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new je(t+1,0):new je(t,r));return new an(i,$.empty(),e)}function bS(n){return new an(n.readTime,n.key,-1)}var an=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),$.empty(),-1)}static max(){return new n(J.max(),$.empty(),-1)}};function Dw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var SS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ni(n){return R(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==SS)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Xd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new nt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Fi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Tw(r.target.error);this.V.reject(new Fi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Fi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Ny(t)}},Wr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(da())===12.2&&We("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Mi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Du())return!1;if(n.v())return!0;let e=da(),t=n.S(e),r=0<t&&t<10,i=AS(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Fi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Fi(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Xd.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function AS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var My=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Mi(this.B.delete())}},Fi=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ri(n){return n.name==="IndexedDbTransactionError"}var Ny=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mi(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Mi(this.store.add(e))}get(e){return Mi(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Mi(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Mi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Tw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new My(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Mi(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Tw(r.target.error);t(i)}})}var _b=!1;function Tw(n){let e=Wr.S(da());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _b||(_b=!0,setTimeout(()=>{throw r},0)),r}}return n}var Py=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){ri(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ni(t)}yield this.X(6e4)}))}},ky=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=bS(o);Dw(s,r)>0&&(r=s)}),new an(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Yt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Zc(n){return n==null}function Mc(n){return n===0&&1/n==-1/0}function xS(n){return typeof n=="number"&&Number.isInteger(n)&&!Mc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Rt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ib(e)),e=d2(n.get(t),e);return Ib(e)}function d2(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function Ib(n){return n+""}function Vn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),ye.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&G(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:G()}o=s+2}return new ye(r)}var Eb=["userId","batchId"];function zd(n,e){return[n,Rt(e)]}function RS(n,e,t){return[n,Rt(e),t]}var h2={},f2=["prefixPath","collectionGroup","readTime","documentId"],p2=["prefixPath","collectionGroup","documentId"],g2=["collectionGroup","readTime","prefixPath","documentId"],m2=["canonicalId","targetId"],y2=["targetId","path"],v2=["path","targetId"],w2=["collectionId","parent"],_2=["indexId","uid"],I2=["uid","sequenceNumber"],E2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],D2=["indexId","uid","orderedDocumentKey"],T2=["userId","collectionPath","documentId"],C2=["userId","collectionPath","largestBatchId"],b2=["userId","collectionGroup","largestBatchId"],MS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],S2=[...MS,"documentOverlays"],NS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PS=NS,Cw=[...PS,"indexConfiguration","indexState","indexEntries"],A2=Cw,x2=[...Cw,"globals"];var Nc=class extends Jd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function rt(n,e){let t=B(n);return Wr.F(t._e,e)}function Db(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ki(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gs(this.root,e,this.comparator,!1)}getReverseIterator(){return new gs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gs(this.root,e,this.comparator,!0)}},gs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Un=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eh(this.data.getIterator())}getIteratorFrom(e){return new eh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},eh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ss(n){return n.hasNext()?n.getNext():void 0}var Zt=class n{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ae(Ke.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ws(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var th=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function OS(){return typeof atob<"u"}var Ye=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new th("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ye.EMPTY_BYTE_STRING=new Ye("");var R2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(n){if(K(!!n),typeof n=="string"){let e=0,t=R2.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Kr(n){return typeof n=="string"?Ye.fromBase64String(n):Ye.fromUint8Array(n)}function Gh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function bw(n){let e=n.mapValue.fields.__previous_value__;return Gh(e)?bw(e):e}function Pc(n){let e=hr(n.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}var Oy=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Qr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hd={nullValue:"NULL_VALUE"};function Li(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gh(n)?4:FS(n)?9007199254740991:Wh(n)?10:11:G()}function qn(n,e){if(n===e)return!0;let t=Li(n);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pc(n).isEqual(Pc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=hr(i.timestampValue),a=hr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Kr(i.bytesValue).isEqual(Kr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?Mc(s)===Mc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ws(n.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Db(s)!==Db(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!qn(s[c],a[c])))return!1;return!0}(n,e);default:return G()}}function kc(n,e){return(n.values||[]).find(t=>qn(t,e))!==void 0}function Yr(n,e){if(n===e)return 0;let t=Li(n),r=Li(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ke(o.integerValue||o.doubleValue),c=ke(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Tb(n.timestampValue,e.timestampValue);case 4:return Tb(Pc(n),Pc(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Kr(o),c=Kr(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=re(a[l],c[l]);if(h!==0)return h}return re(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(ke(o.latitude),ke(s.latitude));return a!==0?a:re(ke(o.longitude),ke(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Cb(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=re(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:Cb(v,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===zr.mapValue&&s===zr.mapValue)return 0;if(o===zr.mapValue)return 1;if(s===zr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=re(c[p],h[p]);if(m!==0)return m;let v=Yr(a[c[p]],l[h[p]]);if(v!==0)return v}return re(c.length,h.length)}(n.mapValue,e.mapValue);default:throw G()}}function Tb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=hr(n),r=hr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function Cb(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Yr(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function Is(n){return Fy(n)}function Fy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=hr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Kr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Fy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Fy(t.fields[s])}`;return i+"}"}(n.mapValue):G()}function Vi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ly(n){return!!n&&"integerValue"in n}function Oc(n){return!!n&&"arrayValue"in n}function bb(n){return!!n&&"nullValue"in n}function Sb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gd(n){return!!n&&"mapValue"in n}function Wh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Cc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ki(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var LS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function M2(n){return"nullValue"in n?Hd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vi(Qr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Wh(n)?LS:{mapValue:{}}:G()}function N2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vi(Qr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?LS:"mapValue"in n?Wh(n)?{mapValue:{}}:zr:G()}function Ab(n,e){let t=Yr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xb(n,e){let t=Yr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var It=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(t)}setAll(e){let t=Ke.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Cc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Gd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ki(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Cc(this.value))}};function VS(n){let e=[];return Ki(n.fields,(t,r)=>{let i=new Ke([t]);if(Gd(r)){let o=VS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Zt(e)}var tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),It.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),It.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),It.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var zn=class{constructor(e,t){this.position=e,this.inclusive=t}};function Rb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Yr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qn(n.position[t],e.position[t]))return!1;return!0}var ji=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function P2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var nh=class{},fe=class n extends nh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Uy(e,t,r):t==="array-contains"?new qy(e,r):t==="in"?new rh(e,r):t==="not-in"?new zy(e,r):t==="array-contains-any"?new Hy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new By(e,r):new $y(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Yr(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(Yr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ce=class n extends nh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Es(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Es(n){return n.op==="and"}function Vy(n){return n.op==="or"}function Sw(n){return jS(n)&&Es(n)}function jS(n){for(let e of n.filters)if(e instanceof Ce)return!1;return!0}function jy(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+Is(n.value);if(Sw(n))return n.filters.map(e=>jy(e)).join(",");{let e=n.filters.map(t=>jy(t)).join(",");return`${n.op}(${e})`}}function US(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&qn(r.value,i.value)}(n,e):n instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&US(s,i.filters[a]),!0):!1}(n,e):void G()}function BS(n,e){let t=n.filters.concat(e);return Ce.create(t,n.op)}function $S(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${Is(t.value)}`}(n):n instanceof Ce?function(t){return t.op.toString()+" {"+t.getFilters().map($S).join(" ,")+"}"}(n):"Filter"}var Uy=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},By=class extends fe{constructor(e,t){super(e,"in",t),this.keys=qS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},$y=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=qS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function qS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var qy=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Oc(t)&&kc(t.arrayValue,this.value)}},rh=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&kc(this.value.arrayValue,t)}},zy=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!kc(this.value.arrayValue,t)}},Hy=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Oc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kc(this.value.arrayValue,r))}};var Gy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Wy(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Gy(n,e,t,r,i,o,s)}function Ui(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Zc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Is(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Is(r)).join(",")),e.ue=t}return e.ue}function Jc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!P2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!US(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mb(n.startAt,e.startAt)&&Mb(n.endAt,e.endAt)}function ih(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function oh(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function Nb(n,e,t){let r=Hd,i=!0;for(let o of oh(n,e)){let s=Hd,a=!0;switch(o.op){case"<":case"<=":s=M2(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Hd}Ab({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Ab({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function Pb(n,e,t){let r=zr,i=!0;for(let o of oh(n,e)){let s=zr,a=!0;switch(o.op){case">=":case">":s=N2(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=zr}xb({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];xb({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var En=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function zS(n,e,t,r,i,o,s,a){return new En(n,e,t,r,i,o,s,a)}function Ls(n){return new En(n)}function kb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Aw(n){return n.collectionGroup!==null}function ys(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ae(Ke.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ji(o,r))}),t.has(Ke.keyField().canonicalString())||e.ce.push(new ji(Ke.keyField(),r))}return e.ce}function Mt(n){let e=B(n);return e.le||(e.le=k2(e,ys(n))),e.le}function k2(n,e){if(n.limitType==="F")return Wy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ji(i.field,o)});let t=n.endAt?new zn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new zn(n.startAt.position,n.startAt.inclusive):null;return Wy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ky(n,e){let t=n.filters.concat([e]);return new En(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sh(n,e,t){return new En(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xc(n,e){return Jc(Mt(n),Mt(e))&&n.limitType===e.limitType}function HS(n){return`${Ui(Mt(n))}|lt:${n.limitType}`}function ds(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$S(i)).join(", ")}]`),Zc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Is(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Is(i)).join(",")),`Target(${r})`}(Mt(n))}; limitType=${n.limitType})`}function eu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ys(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=Rb(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,ys(r),i)||r.endAt&&!function(s,a,c){let l=Rb(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,ys(r),i))}(n,e)}function GS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WS(n){return(e,t)=>{let r=!1;for(let i of ys(n)){let o=O2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function O2(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Yr(c,l):G()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}var Hn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ki(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return kS(this.inner)}size(){return this.innerSize}};var F2=new Ne($.comparator);function Vt(){return F2}var KS=new Ne($.comparator);function Dc(...n){let e=KS;for(let t of n)e=e.insert(t.key,t);return e}function QS(n){let e=KS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function jn(){return bc()}function YS(){return bc()}function bc(){return new Hn(n=>n.toString(),(n,e)=>n.isEqual(e))}var L2=new Ne($.comparator),V2=new Ae($.comparator);function ie(...n){let e=V2;for(let t of n)e=e.add(t);return e}var j2=new Ae(re);function xw(){return j2}function Rw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(e)?"-0":e}}function ZS(n){return{integerValue:""+n}}function JS(n,e){return xS(e)?ZS(e):Rw(n,e)}var Ds=class{constructor(){this._=void 0}};function U2(n,e,t){return n instanceof Zr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Gh(o)&&(o=bw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof fr?eA(n,e):n instanceof pr?tA(n,e):function(i,o){let s=XS(i,o),a=Ob(s)+Ob(i.Pe);return Ly(s)&&Ly(i.Pe)?ZS(a):Rw(i.serializer,a)}(n,e)}function B2(n,e,t){return n instanceof fr?eA(n,e):n instanceof pr?tA(n,e):t}function XS(n,e){return n instanceof Jr?function(r){return Ly(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Zr=class extends Ds{},fr=class extends Ds{constructor(e){super(),this.elements=e}};function eA(n,e){let t=nA(e);for(let r of n.elements)t.some(i=>qn(i,r))||t.push(r);return{arrayValue:{values:t}}}var pr=class extends Ds{constructor(e){super(),this.elements=e}};function tA(n,e){let t=nA(e);for(let r of n.elements)t=t.filter(i=>!qn(i,r));return{arrayValue:{values:t}}}var Jr=class extends Ds{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Ob(n){return ke(n.integerValue||n.doubleValue)}function nA(n){return Oc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Bi=class{constructor(e,t){this.field=e,this.transform=t}};function $2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof fr&&i instanceof fr||r instanceof pr&&i instanceof pr?ws(r.elements,i.elements,qn):r instanceof Jr&&i instanceof Jr?qn(r.Pe,i.Pe):r instanceof Zr&&i instanceof Zr}(n.transform,e.transform)}var Qy=class{constructor(e,t){this.version=e,this.transformResults=t}},ze=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Wd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ts=class{};function rA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ei(n.key,ze.none()):new Xr(n.key,n.data,ze.none());{let t=n.data,r=It.empty(),i=new Ae(Ke.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Dn(n.key,r,new Zt(i.toArray()),ze.none())}}function q2(n,e,t){n instanceof Xr?function(i,o,s){let a=i.value.clone(),c=Lb(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Dn?function(i,o,s){if(!Wd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Lb(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(iA(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Sc(n,e,t,r){return n instanceof Xr?function(o,s,a,c){if(!Wd(o.precondition,s))return a;let l=o.value.clone(),h=Vb(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Dn?function(o,s,a,c){if(!Wd(o.precondition,s))return a;let l=Vb(o.fieldTransforms,c,s),h=s.data;return h.setAll(iA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Wd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function z2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=XS(r.transform,i||null);o!=null&&(t===null&&(t=It.empty()),t.set(r.field,o))}return t||null}function Fb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ws(r,i,(o,s)=>$2(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Xr=class extends Ts{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Dn=class extends Ts{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function iA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Lb(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,B2(s,a,t[i]))}return r}function Vb(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,U2(o,s,e))}return r}var ei=class extends Ts{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Fc=class extends Ts{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Lc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&q2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Sc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=YS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=rA(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&ws(this.mutations,e.mutations,(t,r)=>Fb(t,r))&&ws(this.baseMutations,e.baseMutations,(t,r)=>Fb(t,r))}},Yy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return L2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Vc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Zy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,me;function oA(n){switch(n){default:return G();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function sA(n){if(n===void 0)return We("GRPC error has no .code"),x.UNKNOWN;switch(n){case Je.OK:return x.OK;case Je.CANCELLED:return x.CANCELLED;case Je.UNKNOWN:return x.UNKNOWN;case Je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Je.INTERNAL:return x.INTERNAL;case Je.UNAVAILABLE:return x.UNAVAILABLE;case Je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Je.NOT_FOUND:return x.NOT_FOUND;case Je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Je.ABORTED:return x.ABORTED;case Je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Je.DATA_LOSS:return x.DATA_LOSS;default:return G()}}(me=Je||(Je={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var jb=null;function aA(){return new TextEncoder}var H2=new jr([4294967295,4294967295],0);function Ub(n){let e=aA().encode(n),t=new hy;return t.update(e),new Uint8Array(t.digest())}function Bb(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jr([t,r],0),new jr([i,o],0)]}var Jy=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Oi(`Invalid padding: ${t}`);if(r<0)throw new Oi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Oi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=jr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(jr.fromNumber(r)));return i.compare(H2)===1&&(i=new jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Ub(e),[r,i]=Bb(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=Ub(e),[r,i]=Bb(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Oi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var jc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new Ne(re),Vt(),ie())}},Uc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var vs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},ah=class{constructor(e,t){this.targetId=e,this.me=t}},ch=class{constructor(e,t,r=Ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},uh=class{constructor(){this.fe=0,this.ge=qb(),this.pe=Ye.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G()}}),new Uc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=qb()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Xy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vt(),this.qe=$b(),this.Qe=new Ne(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(ih(o))if(r===0){let s=new $(o.path);this.Ue(t,s,tt.newNoDocument(s,J.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}jb?.et(function(h,p,m,v,C){var M,N,j,z,L,Q;let ee={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},X=p.unchangedNames;return X&&(ee.bloomFilter={applied:C===0,hashCount:(M=X?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(z=(j=(N=X?.bits)===null||N===void 0?void 0:N.bitmap)===null||j===void 0?void 0:j.length)!==null&&z!==void 0?z:0,padding:(Q=(L=X?.bits)===null||L===void 0?void 0:L.padding)!==null&&Q!==void 0?Q:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ee}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Kr(r).toUint8Array()}catch(c){if(c instanceof th)return In("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Jy(s,i,o)}catch(c){return In(c instanceof Oi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&ih(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,tt.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new jc(e,t,this.Qe,this.ke,r);return this.ke=Vt(),this.qe=$b(),this.Qe=new Ne(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new uh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ae(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function $b(){return new Ne($.comparator)}function qb(){return new Ne($.comparator)}var G2={asc:"ASCENDING",desc:"DESCENDING"},W2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K2={and:"AND",or:"OR"},ev=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function tv(n,e){return n.useProto3Json||Zc(e)?e:{value:e}}function Cs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Q2(n,e){return Cs(n,e.toTimestamp())}function Qe(n){return K(!!n),J.fromTimestamp(function(t){let r=hr(t);return new je(r.seconds,r.nanos)}(n))}function Mw(n,e){return nv(n,e).canonicalString()}function nv(n,e){let t=function(i){return new ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function uA(n){let e=ye.fromString(n);return K(wA(e)),e}function Bc(n,e){return Mw(n.databaseId,e.path)}function Bn(n,e){let t=uA(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(hA(t))}function lA(n,e){return Mw(n.databaseId,e)}function dA(n){let e=uA(n);return e.length===4?ye.emptyPath():hA(e)}function rv(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hA(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function zb(n,e,t){return{name:Bc(n,e),fields:t.value.mapValue.fields}}function fA(n,e,t){let r=Bn(n,e.name),i=Qe(e.updateTime),o=e.createTime?Qe(e.createTime):J.min(),s=new It({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Y2(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=Bn(r,i.found.name),s=Qe(i.found.updateTime),a=i.found.createTime?Qe(i.found.createTime):J.min(),c=new It({mapValue:{fields:i.found.fields}});return tt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=Bn(r,i.missing),s=Qe(i.readTime);return tt.newNoDocument(o,s)}(n,e):G()}function Z2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Ye.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ye.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:sA(l.code);return new P(h,l.message||"")}(s);t=new ch(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Bn(n,r.document.name),o=Qe(r.document.updateTime),s=r.document.createTime?Qe(r.document.createTime):J.min(),a=new It({mapValue:{fields:r.document.fields}}),c=tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new vs(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Bn(n,r.document),o=r.readTime?Qe(r.readTime):J.min(),s=tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new vs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Bn(n,r.document),o=r.removedTargetIds||[];t=new vs([],o,i,null)}else{if(!("filter"in e))return G();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Zy(i,o),a=r.targetId;t=new ah(a,s)}}return t}function $c(n,e){let t;if(e instanceof Xr)t={update:zb(n,e.key,e.value)};else if(e instanceof ei)t={delete:Bc(n,e.key)};else if(e instanceof Dn)t={update:zb(n,e.key,e.data),updateMask:rj(e.fieldMask)};else{if(!(e instanceof Fc))return G();t={verify:Bc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Zr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw G()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Q2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G()}(n,e.precondition)),t}function iv(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?ze.updateTime(Qe(o.updateTime)):o.exists!==void 0?ze.exists(o.exists):ze.none()}(e.currentDocument):ze.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),c=new Zr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new fr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new pr(h)}else"increment"in a?c=new Jr(s,a.increment):G();let l=Ke.fromServerFormat(a.fieldPath);return new Bi(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Bn(n,e.update.name),o=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Zt(l.map(h=>Ke.fromServerFormat(h)))}(e.updateMask);return new Dn(i,o,s,t,r)}return new Xr(i,o,t,r)}if(e.delete){let i=Bn(n,e.delete);return new ei(i,t)}if(e.verify){let i=Bn(n,e.verify);return new Fc(i,t)}return G()}function J2(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Qe(i.updateTime):Qe(o);return s.isEqual(J.min())&&(s=Qe(o)),new Qy(s,i.transformResults||[])}(t,e))):[]}function pA(n,e){return{documents:[lA(n,e.path)]}}function gA(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lA(n,i);let o=function(l){if(l.length!==0)return vA(Ce.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:hs(m.field),direction:ej(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=tv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function mA(n){let e=dA(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=yA(p);return m instanceof Ce&&Sw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(C){return new ji(fs(C.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Zc(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new zn(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new zn(v,m)}(t.endAt)),zS(e,i,s,o,a,"F",c,l)}function X2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=fs(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=fs(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=fs(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=fs(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(fs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ce.create(t.compositeFilter.filters.map(r=>yA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(t.compositeFilter.op))}(n):G()}function ej(n){return G2[n]}function tj(n){return W2[n]}function nj(n){return K2[n]}function hs(n){return{fieldPath:n.canonicalString()}}function fs(n){return Ke.fromServerFormat(n.fieldPath)}function vA(n){return n instanceof fe?function(t){if(t.op==="=="){if(Sb(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NAN"}};if(bb(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sb(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NOT_NAN"}};if(bb(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hs(t.field),op:tj(t.op),value:t.value}}}(n):n instanceof Ce?function(t){let r=t.getFilters().map(i=>vA(i));return r.length===1?r[0]:{compositeFilter:{op:nj(t.op),filters:r}}}(n):G()}function rj(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var bs=class n{constructor(e,t,r,i,o=J.min(),s=J.min(),a=Ye.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var lh=class{constructor(e){this.ct=e}};function ij(n,e){let t;if(e.document)t=fA(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=qi(e.noDocument.readTime);t=tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return G();{let r=$.fromSegments(e.unknownDocument.path),i=qi(e.unknownDocument.version);t=tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new je(i[0],i[1]);return J.fromTimestamp(o)}(e.readTime)),t}function Hb(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Bc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Cs(o,s.version.toTimestamp()),createTime:Cs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:$i(e.version)};else{if(!e.isUnknownDocument())return G();r.unknownDocument={path:t.path.toArray(),version:$i(e.version)}}return r}function dh(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function $i(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qi(n){let e=new je(n.seconds,n.nanoseconds);return J.fromTimestamp(e)}function Ni(n,e){let t=(e.baseMutations||[]).map(o=>iv(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>iv(n.ct,o)),i=je.fromMillis(e.localWriteTimeMs);return new Lc(e.batchId,i,t,r)}function Tc(n){let e=qi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?qi(n.lastLimboFreeSnapshotVersion):J.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),Mt(Ls(dA(o.documents[0])))}(n.query):function(o){return Mt(mA(o))}(n.query),new bs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ye.fromBase64String(n.resumeToken))}function _A(n,e){let t=$i(e.snapshotVersion),r=$i(e.lastLimboFreeSnapshotVersion),i;i=ih(e.target)?pA(n.ct,e.target):gA(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ui(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Nw(n){let e=mA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sh(e,e.limit,"L"):e}function vy(n,e){return new Vc(e.largestBatchId,iv(n.ct,e.overlayMutation))}function Gb(n,e){let t=e.path.lastSegment();return[n,Rt(e.path.popLast()),t]}function Wb(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:$i(r.readTime),documentKey:Rt(r.documentKey.path),largestBatchId:r.largestBatchId}}var ov=class{getBundleMetadata(e,t){return Kb(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:qi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return Kb(e).put(function(i){return{bundleId:i.id,createTime:$i(Qe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Qb(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Nw(o.bundledQuery),readTime:qi(o.readTime)}}(r)})}saveNamedQuery(e,t){return Qb(e).put(function(i){return{name:i.name,readTime:$i(Qe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function Kb(n){return rt(n,"bundles")}function Qb(n){return rt(n,"namedQueries")}var hh=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return wc(e).get(Gb(this.userId,t)).next(r=>r?vy(this.serializer,r):null)}getOverlays(e,t){let r=jn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Vc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Rt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(wc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=jn(),o=Rt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return wc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=vy(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=jn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wc(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=vy(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return wc(e).put(function(i,o,s){let[a,c,l]=Gb(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:$c(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function wc(n){return rt(n,"documentOverlays")}var sv=class{Pt(e){return rt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ye.fromUint8Array(r):Ye.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var lr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Mc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=hr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Kr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?FS(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Wh(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):G()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ke(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};lr.vt=new lr;function oj(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Yb(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=oj(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var av=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=Yb(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=Yb(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},cv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},uv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Pi=class{constructor(){this.jt=new av,this.Ht=new cv(this.jt),this.Jt=new uv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ki=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Ur(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Zb(n.arrayValue,e.arrayValue),t!==0?t:(t=Zb(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function Zb(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var fh=class{constructor(e){this.Xt=new Ae((t,r)=>Ke.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Ry(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ri(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(Ke.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ms(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ms(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ms(r.field,r.dir==="asc"?0:1)));return new _s(_s.UNKNOWN_ID,this.collectionId,t,Rc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function IA(n){var e,t;if(K(n instanceof fe||n instanceof Ce),n instanceof fe){if(n instanceof rh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return Ce.create(i,"or")}return n}let r=n.filters.map(i=>IA(i));return Ce.create(r,n.op)}function sj(n){if(n.getFilters().length===0)return[];let e=hv(IA(n));return K(EA(e)),lv(e)||dv(e)?[e]:e.getFilters()}function lv(n){return n instanceof fe}function dv(n){return n instanceof Ce&&Sw(n)}function EA(n){return lv(n)||dv(n)||function(t){if(t instanceof Ce&&Vy(t)){for(let r of t.getFilters())if(!lv(r)&&!dv(r))return!1;return!0}return!1}(n)}function hv(n){if(K(n instanceof fe||n instanceof Ce),n instanceof fe)return n;if(n.filters.length===1)return hv(n.filters[0]);let e=n.filters.map(r=>hv(r)),t=Ce.create(e,n.op);return t=ph(t),EA(t)?t:(K(t instanceof Ce),K(Es(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>Pw(r,i)))}function Pw(n,e){let t;return K(n instanceof fe||n instanceof Ce),K(e instanceof fe||e instanceof Ce),t=n instanceof fe?e instanceof fe?function(i,o){return Ce.create([i,o],"and")}(n,e):Jb(n,e):e instanceof fe?Jb(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),Es(i)&&Es(o))return BS(i,o.getFilters());let s=Vy(i)?i:o,a=Vy(i)?o:i,c=s.filters.map(l=>Pw(l,a));return Ce.create(c,"or")}(n,e),ph(t)}function Jb(n,e){if(Es(e))return BS(e,n.getFilters());{let t=e.filters.map(r=>Pw(n,r));return Ce.create(t,"or")}}function ph(n){if(K(n instanceof fe||n instanceof Ce),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return ph(e[0]);if(jS(n))return n;let t=e.map(i=>ph(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof Ce&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ce.create(r,n.op)}var fv=class{constructor(){this.un=new qc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(an.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(an.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},qc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ae(ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(ye.comparator)).toArray()}};var Ud=new Uint8Array(0),pv=class{constructor(e,t){this.databaseId=t,this.cn=new qc,this.ln=new Hn(r=>Ui(r),(r,i)=>Jc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Rt(i)};return Xb(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[TS(t),""],!1,!0);return Xb(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Vn(s.parent))}return r})}addFieldIndex(e,t){let r=_c(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=cs(e);return o.next(a=>{s.put(Wb(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=_c(e),i=cs(e),o=as(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=_c(e),r=as(e),i=cs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new fh(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=as(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(c)} to execute ${Ui(t)}`);let h=function(L,Q){let ee=Ry(Q);if(ee===void 0)return null;for(let X of oh(L,ee.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,c),p=function(L,Q){let ee=new Map;for(let X of Ri(Q))for(let I of oh(L,X.fieldPath))switch(I.op){case"==":case"in":ee.set(X.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(X.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,c),m=function(L,Q){let ee=[],X=!0;for(let I of Ri(Q)){let y=I.kind===0?Nb(L,I.fieldPath,L.startAt):Pb(L,I.fieldPath,L.startAt);ee.push(y.value),X&&(X=y.inclusive)}return new zn(ee,X)}(l,c),v=function(L,Q){let ee=[],X=!0;for(let I of Ri(Q)){let y=I.kind===0?Pb(L,I.fieldPath,L.endAt):Nb(L,I.fieldPath,L.endAt);ee.push(y.value),X&&(X=y.inclusive)}return new zn(ee,X)}(l,c),C=this.In(c,l,m),M=this.In(c,l,v),N=this.Tn(c,l,p),j=this.En(c.indexId,h,C,m.inclusive,M,v.inclusive,N);return S.forEach(j,z=>r.G(z,t.limit).next(L=>{L.forEach(Q=>{let ee=$.fromSegments(Q.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=sj(Ce.create(e.filters,"and")).map(r=>Wy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):Ud,v=this.An(e,m,r[p%l],i),C=this.Rn(e,m,o[p%l],s),M=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,C,M))}return h}An(e,t,r,i){let o=new ki(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new ki(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new fh(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ae(Ke.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Pi;for(let i of Ri(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);lr.vt.It(o,s)}return r.zt()}dn(e){let t=new Pi;return lr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Pi;return lr.vt.It(Vi(this.databaseId,t),r.Yt(function(o){let s=Ri(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Pi);let o=0;for(let s of Ri(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&Oc(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);lr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Pi;c.seed(a.zt()),lr.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=_c(e),i=cs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new Rc(p.sequenceNumber,new an(qi(p.readTime),new $(Vn(p.documentKey)),p.largestBatchId)):Rc.empty(),v=h.fields.map(([C,M])=>new ms(Ke.fromServerFormat(C),M));return new _s(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=_c(e),o=cs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(Wb(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return as(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return as(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=as(e),o=new Ae(Ur);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new ki(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ae(Ur),i=this.Vn(t,e);if(i==null)return r;let o=Ry(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Oc(s))for(let a of s.arrayValue.values||[])r=r.add(new ki(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ki(t.indexId,e.key,Ud,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let v=c.getIterator(),C=l.getIterator(),M=ss(v),N=ss(C);for(;M||N;){let j=!1,z=!1;if(M&&N){let L=h(M,N);L<0?z=!0:L>0&&(j=!0)}else M!=null?z=!0:j=!0;j?(p(N),N=ss(C)):z?(m(M),M=ss(v)):(M=ss(v),N=ss(C))}}(i,o,Ur,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return cs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Ur(s,a)).filter((s,a,c)=>!a||Ur(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ur(s,e),c=Ur(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Ud,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Ud,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return Ur(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(eS)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||G())).next(eS)}};function Xb(n){return rt(n,"collectionParents")}function as(n){return rt(n,"indexEntries")}function _c(n){return rt(n,"indexConfiguration")}function cs(n){return rt(n,"indexState")}function eS(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Dw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new an(e.readTime,e.documentKey,t)}var tS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function DA(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=RS(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function gh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw G();e=n.noDocument}return JSON.stringify(e).length}sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(41943040,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);var mh=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=ps(e),s=Br(e);return s.add({}).next(a=>{K(typeof a=="number");let c=new Lc(a,t,r,i),l=function(v,C,M){let N=M.baseMutations.map(z=>$c(v.ct,z)),j=M.mutations.map(z=>$c(v.ct,z));return{userId:C,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:j}}(this.serializer,this.userId,c),h=[],p=new Ae((m,v)=>re(m.canonicalString(),v.canonicalString()));for(let m of i){let v=RS(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,h2))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Br(e).get(t).next(r=>r?(K(r.userId===this.userId),Ni(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Br(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Ni(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Br(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ni(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=zd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ps(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=Vn(h);if(l===this.userId&&t.path.isEqual(m))return Br(e).get(p).next(v=>{if(!v)throw G();K(v.userId===this.userId),o.push(Ni(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(re),i=[];return t.forEach(o=>{let s=zd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ps(e).J({range:a},(l,h,p)=>{let[m,v,C]=l,M=Vn(v);m===this.userId&&o.path.isEqual(M)?r=r.add(C):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=zd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ae(re);return ps(e).J({range:s},(c,l,h)=>{let[p,m,v]=c,C=Vn(m);p===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Br(e).get(o).next(s=>{if(s===null)throw G();K(s.userId===this.userId),r.push(Ni(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return DA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ps(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Vn(o[1]);i.push(c)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return TA(e,this.userId,t)}Nn(e){return CA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function TA(n,e,t){let r=zd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ps(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Br(n){return rt(n,"mutations")}function ps(n){return rt(n,"documentMutations")}function CA(n){return rt(n,"mutationQueues")}var Ss=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var gv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Ss(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>J.fromTimestamp(new je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>us(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return us(e).J((s,a)=>{let c=Tc(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return us(e).J((r,i)=>{let o=Tc(i);t(o)})}qn(e){return nS(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return nS(e).put("targetGlobalKey",t)}Kn(e,t){return us(e).put(_A(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Ui(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return us(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Tc(a);Jc(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=$r(e);return t.forEach(s=>{let a=Rt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=$r(e);return S.forEach(t,o=>{let s=Rt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=$r(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=$r(e),o=ie();return i.J({range:r,H:!0},(s,a,c)=>{let l=Vn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Rt(t.path),i=IDBKeyRange.bound([r],[TS(r)],!1,!0),o=0;return $r(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return us(e).get(t).next(r=>r?Tc(r):null)}};function us(n){return rt(n,"targets")}function nS(n){return rt(n,"targetGlobal")}function $r(n){return rt(n,"targetDocuments")}function rS([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var mv=class{constructor(e){this.Un=e,this.buffer=new Ae(rS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();rS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},yv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ri(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ni(t)}yield this.Hn(3e5)}))}},vv=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Yt.oe);let r=new mv(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(tS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ls()<=bn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function aj(n,e){return new vv(n,e)}var wv=class{constructor(e,t){this.db=e,this.garbageCollector=aj(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Bd(e,r)}removeReference(e,t,r){return Bd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Bd(e,t)}nr(e,t){return function(i,o){let s=!1;return CA(i).Y(a=>TA(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,J.min()),$r(e).delete(function(p){return[0,Rt(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Bd(e,t)}tr(e,t){let r=$r(e),i,o=Yt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Yt.oe&&t(new $(Vn(i)),o),o=l,i=c):o=Yt.oe}).next(()=>{o!==Yt.oe&&t(new $(Vn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Bd(n,e){return $r(n).put(function(r,i){return{targetId:0,path:Rt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var yh=class{constructor(){this.changes=new Hn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var _v=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xi(e).put(r)}removeEntry(e,t,r){return xi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],dh(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=tt.newInvalidDocument(t);return xi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ic(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:tt.newInvalidDocument(t)};return xi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ic(t))},(i,o)=>{r={document:this.ir(t,o),size:gh(o)}}).next(()=>r)}getEntries(e,t){let r=Vt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Vt(),i=new Ne($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,gh(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ae(sS);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Ic(i.first()),Ic(i.last())),s=i.getIterator(),a=s.getNext();return xi(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&sS(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Ic(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),dh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xi(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Vt();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(eu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Vt(),s=oS(t,r),a=oS(t,an.max());return xi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Iv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return iS(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return iS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=ij(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return tt.newInvalidDocument(e)}};function bA(n){return new _v(n)}var Iv=class extends yh{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Hn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ae((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=Hb(this.cr.serializer,s);i=i.add(o.path.popLast());let l=gh(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=Hb(this.cr.serializer,s.convertToNoDocument(J.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function iS(n){return rt(n,"remoteDocumentGlobal")}function xi(n){return rt(n,"remoteDocumentsV14")}function Ic(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oS(n,e){let t=e.documentKey.path.toArray();return[n,dh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var Ev=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var vh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Sc(r.mutation,i,Zt.empty(),je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=jn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Dc();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=jn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Vt(),s=bc(),a=function(){return bc()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Dn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Sc(h.mutation,l,h.mutation.getFieldMask(),je.now())):s.set(l.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Ev(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=bc(),i=new Ne((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Zt.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ie()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=YS();h.forEach(m=>{if(!o.has(m)){let v=rA(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Aw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(jn()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ie())).next(h=>({batchId:a,changes:QS(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Dc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new En(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,tt.newInvalidDocument(h)))});let a=Dc();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&Sc(h.mutation,l,Zt.empty(),je.now()),eu(t,l)&&(a=a.insert(c,l))}),a})}};var Dv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qe(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Nw(i.bundledQuery),readTime:Qe(i.readTime)}}(t)),S.resolve()}};var Tv=class{constructor(){this.overlays=new Ne($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=jn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=jn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=jn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=jn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Vc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Cv=class{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var zc=class{constructor(){this.Tr=new Ae(Xe.Er),this.dr=new Ae(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Xe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ye([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ye([])),r=new Xe(t,e),i=new Xe(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||$.comparator(e.key,t.key)}};var bv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ae(Xe.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Lc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(re);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new $(o),0),a=new Ae(re);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Xe(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Sv=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(e,t){let r=Vt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vt(),s=t.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Dw(bS(h),r)<=0||(i.has(h.key)||eu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){G()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Av(this)}getSize(e){return S.resolve(this.size)}},Av=class extends yh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var xv=class{constructor(e){this.persistence=e,this.Nr=new Hn(t=>Ui(t),Jc),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zc,this.targetCount=0,this.kr=Ss.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ss(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var wh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Yt(0),this.Kr=!1,this.Kr=!0,this.$r=new Cv,this.referenceDelegate=e(this),this.Ur=new xv(this),this.indexManager=new fv,this.remoteDocumentCache=function(i){return new Sv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lh(t),this.Gr=new Dv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new bv(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Rv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Rv=class extends Jd{constructor(e){super(),this.currentSequenceNumber=e}},_h=class n{constructor(e){this.persistence=e,this.Jr=new zc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Mv=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Xd("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Eb,{unique:!0}),c.createObjectStore("documentMutations")}(e),aS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),aS(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Eb,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:T2});l.createIndex("collectionPathOverlayIndex",C2,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",b2,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:f2});l.createIndex("documentKeyIndex",p2),l.createIndex("collectionGroupIndex",g2)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:_2}).createIndex("sequenceNumberIndex",I2,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:E2}).createIndex("documentKeyIndex",D2,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=gh(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{K(c.userId===o.userId);let l=Ni(this.serializer,c);return DA(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new ye(s),l=function(p){return[0,Rt(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Rt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:w2});let r=t.store("collectionParents"),i=new qc,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Rt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new ye(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=Vn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Tc(i),s=_A(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new $(ye.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):G()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=bA(this.serializer),o=new wh(_h.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ie();Ni(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new et(l),p=hh.lt(this.serializer,h),m=o.getIndexManager(h),v=mh.lt(h,this.serializer,m,o.referenceDelegate);return new vh(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Nc(t,Yt.oe),c).next()})})}};function aS(n){n.createObjectStore("targetDocuments",{keyPath:y2}).createIndex("documentTargetsIndex",v2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",m2,{unique:!0}),n.createObjectStore("targetGlobal")}var wy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Nv=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wv(this,i),this.Ai=t+"main",this.serializer=new lh(c),this.Ri=new Wr(this.Ai,this.hi,new Mv(this.serializer)),this.$r=new sv,this.Ur=new gv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bA(this.serializer),this.Gr=new ov,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&We("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,wy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Yt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$d(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ri(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ec(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return $d(e).delete(this.clientId)}Fi(){return R(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=rt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):Ec(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,wy);return!1}}return!(!this.networkEnabled||!this.inForeground)||$d(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Nc(e,Yt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>$d(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return mh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?x2:c===16?A2:c===15?Cw:c===14?PS:c===13?NS:c===12?S2:c===11?MS:void G()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Nc(a,this.Qr?this.Qr.next():Yt.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw We(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,SS);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Ec(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,wy)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ec(e).put("owner",t)}static D(){return Wr.D()}bi(e){let t=Ec(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(We(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Lf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return We("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){We("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ec(n){return rt(n,"owner")}function $d(n){return rt(n,"clientMetadata")}function kw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Pv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var kv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ih=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Lf()?8:AS(da())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new kv;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ls()<=bn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",ds(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(ls()<=bn.DEBUG&&k("QueryEngine","Query:",ds(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ls()<=bn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",ds(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mt(t))):S.resolve())}Yi(e,t){if(kb(t))return S.resolve(null);let r=Mt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=sh(t,null,"F"),r=Mt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,sh(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return kb(t)||i.isEqual(J.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(ls()<=bn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ds(t)),this.rs(e,s,t,CS(i,-1)).next(a=>a))})}ts(e,t){let r=new Ae(WS(e));return t.forEach((i,o)=>{eu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ls()<=bn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",ds(t)),this.Ji.getDocumentsMatchingQuery(e,t,an.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Ov=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ne(re),this._s=new Hn(o=>Ui(o),Jc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function SA(n,e,t,r){return new Ov(n,e,t,r)}function AA(n,e){return R(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function cj(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(C=>{v=v.next(()=>h.getEntry(c,C)).next(M=>{let N=l.docVersions.get(C);K(N!==null),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function xA(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function uj(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ye.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,N,j){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let c=Vt(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(RA(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(J.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function RA(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Vt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function lj(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function As(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new bs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function xs(n,e,t){return R(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ri(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Eh(n,e,t){let r=B(n),i=J.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=B(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Mt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:J.min(),t?o:ie())).next(a=>(PA(r,GS(e),a),{documents:a,Ts:o})))}function MA(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function NA(n,e){let t=B(n),r=t.us.get(e)||J.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,CS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(PA(t,e,i),i))}function PA(n,e,t){let r=n.us.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function dj(n,e,t,r){return R(this,null,function*(){let i=B(n),o=ie(),s=Vt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield As(i,function(h){return Mt(Ls(ye.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>RA(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function hj(r,i){return R(this,arguments,function*(n,e,t=ie()){let o=yield As(n,Mt(Nw(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Qe(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ye.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function cS(n,e){return`firestore_clients_${n}_${e}`}function uS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _y(n,e){return`firestore_targets_${n}_${e}`}var Dh=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(We("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ac=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(We("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Th=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=xw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=xS(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(We("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Fv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(We("SharedClientState",`Failed to parse online state: ${e}`),null)}},Hc=class{constructor(){this.activeTargetIds=xw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},xc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ne(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=cS(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Hc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(cS(this.persistenceKey,r));if(i){let o=Th.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(_y(this.persistenceKey,e));if(i){let o=Ac.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_y(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void We("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Yt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){We("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Yt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Dh(this.currentUser,e,t,r),o=uS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=uS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=_y(this.persistenceKey,e),o=new Ac(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Th.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Dh.Rs(new et(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Ac.Rs(i,t)}Ls(e){return Fv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=xw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Ch=class{constructor(){this.so=new Hc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Hc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Lv=class{_o(e){}shutdown(){}};var bh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var qd=null;function Iy(){return qd===null?qd=function(){return 268435456+Math.round(2147483648*Math.random())}():qd++,"0x"+qd.toString(16)}var fj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Vv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var _t="WebChannelConnection",jv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Iy(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw In("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=fj[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Iy();return new Promise((s,a)=>{let c=new fy;c.setWithCredentials(!0),c.listenOnce(py.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case vc.NO_ERROR:let h=c.getResponseJson();k(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case vc.TIMEOUT:k(_t,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case vc.HTTP_ERROR:let p=c.getStatus();if(k(_t,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let C=function(N){let j=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(j)>=0?j:x.UNKNOWN}(v.status);a(new P(C,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{k(_t,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(_t,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Iy(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yy(),a=my(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(_t,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,v=!1,C=new Vv({Io:N=>{v?k(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(_t,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(_t,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),M=(N,j,z)=>{N.listen(j,L=>{try{z(L)}catch(Q){setTimeout(()=>{throw Q},0)}})};return M(p,os.EventType.OPEN,()=>{v||(k(_t,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),M(p,os.EventType.CLOSE,()=>{v||(v=!0,k(_t,`RPC '${e}' stream ${i} transport closed`),C.So())}),M(p,os.EventType.ERROR,N=>{v||(v=!0,In(_t,`RPC '${e}' stream ${i} transport errored:`,N),C.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,os.EventType.MESSAGE,N=>{var j;if(!v){let z=N.data[0];K(!!z);let L=z,Q=L.error||((j=L[0])===null||j===void 0?void 0:j.error);if(Q){k(_t,`RPC '${e}' stream ${i} received error:`,Q);let ee=Q.status,X=function(_){let E=Je[_];if(E!==void 0)return sA(E)}(ee),I=Q.message;X===void 0&&(X=x.INTERNAL,I="Unknown error status: "+ee+" with message "+Q.message),v=!0,C.So(new P(X,I)),p.close()}else k(_t,`RPC '${e}' stream ${i} received:`,z),C.bo(z)}}),M(a,gy.STAT_EVENT,N=>{N.stat===jd.PROXY?k(_t,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===jd.NOPROXY&&k(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function kA(){return typeof window<"u"?window:null}function Kd(){return typeof document<"u"?document:null}function tu(n){return new ev(n,!0)}var Gc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Sh=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return R(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return R(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return R(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(We(t.toString()),We("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>R(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Uv=class extends Sh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Z2(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?Qe(s.readTime):J.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=rv(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=ih(c)?{documents:pA(o,c)}:{query:gA(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=cA(o,s.resumeToken);let l=tv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Cs(o,s.snapshotVersion.toTimestamp());let l=tv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=X2(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=rv(this.serializer),t.removeTarget=e,this.a_(t)}},Bv=class extends Sh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=J2(e.writeResults,e.commitTime),r=Qe(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=rv(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>$c(this.serializer,r))};this.a_(t)}};var $v=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,nv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,nv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},qv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(We(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var zv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>R(this,null,function*(){ii(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return R(this,null,function*(){let l=B(c);l.L_.add(4),yield Vs(l),l.q_.set("Unknown"),l.L_.delete(4),yield nu(l)})}(this))}))}),this.q_=new qv(r,i)}};function nu(n){return R(this,null,function*(){if(ii(n))for(let e of n.B_)yield e(!0)})}function Vs(n){return R(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Kh(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Lw(t)?Fw(t):Us(t).r_()&&Ow(t,e))}function Rs(n,e){let t=B(n),r=Us(t);t.N_.delete(e),r.r_()&&OA(t,e),t.N_.size===0&&(r.r_()?r.o_():ii(t)&&t.q_.set("Unknown"))}function Ow(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Us(n).A_(e)}function OA(n,e){n.Q_.xe(e),Us(n).R_(e)}function Fw(n){n.Q_=new Xy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Us(n).start(),n.q_.v_()}function Lw(n){return ii(n)&&!Us(n).n_()&&n.N_.size>0}function ii(n){return B(n).L_.size===0}function FA(n){n.Q_=void 0}function pj(n){return R(this,null,function*(){n.q_.set("Online")})}function gj(n){return R(this,null,function*(){n.N_.forEach((e,t)=>{Ow(n,e)})})}function mj(n,e){return R(this,null,function*(){FA(n),Lw(n)?(n.q_.M_(e),Fw(n)):n.q_.set("Unknown")})}function yj(n,e,t){return R(this,null,function*(){if(n.q_.set("Online"),e instanceof ch&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ah(n,r)}else if(e instanceof vs?n.Q_.Ke(e):e instanceof ah?n.Q_.He(e):n.Q_.We(e),!t.isEqual(J.min()))try{let r=yield xA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Ye.EMPTY_BYTE_STRING,h.snapshotVersion)),OA(o,c);let p=new bs(h.target,c,l,h.sequenceNumber);Ow(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Ah(n,r)}})}function Ah(n,e,t){return R(this,null,function*(){if(!ri(e))throw e;n.L_.add(1),yield Vs(n),n.q_.set("Offline"),t||(t=()=>xA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield nu(n)}))})}function LA(n,e){return e().catch(t=>Ah(n,t,e))}function js(n){return R(this,null,function*(){let e=B(n),t=ti(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;vj(e);)try{let i=yield lj(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,wj(e,i)}catch(i){yield Ah(e,i)}VA(e)&&jA(e)})}function vj(n){return ii(n)&&n.O_.length<10}function wj(n,e){n.O_.push(e);let t=ti(n);t.r_()&&t.V_&&t.m_(e.mutations)}function VA(n){return ii(n)&&!ti(n).n_()&&n.O_.length>0}function jA(n){ti(n).start()}function _j(n){return R(this,null,function*(){ti(n).p_()})}function Ij(n){return R(this,null,function*(){let e=ti(n);for(let t of n.O_)e.m_(t.mutations)})}function Ej(n,e,t){return R(this,null,function*(){let r=n.O_.shift(),i=Yy.from(r,e,t);yield LA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield js(n)})}function Dj(n,e){return R(this,null,function*(){e&&ti(n).V_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return oA(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();ti(r).s_(),yield LA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield js(r)}})}(n,e)),VA(n)&&jA(n)})}function lS(n,e){return R(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ii(t);t.L_.add(3),yield Vs(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield nu(t)})}function Hv(n,e){return R(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield nu(t)):e||(t.L_.add(2),yield Vs(t),t.q_.set("Unknown"))})}function Us(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new Uv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:pj.bind(null,n),Ro:gj.bind(null,n),mo:mj.bind(null,n),d_:yj.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.K_.s_(),Lw(n)?Fw(n):n.q_.set("Unknown")):(yield n.K_.stop(),FA(n))}))),n.K_}function ti(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new Bv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_j.bind(null,n),mo:Dj.bind(null,n),f_:Ij.bind(null,n),g_:Ej.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.U_.s_(),yield js(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Gv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Bs(n,e){if(We("AsyncQueue",`${e}: ${n}`),ri(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var xh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Dc(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Rh=class{constructor(){this.W_=new Ne($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ms=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,xh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Wv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Kv=class{constructor(){this.queries=dS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=dS(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function dS(){return new Hn(n=>HS(n),Xc)}function Vw(n,e){return R(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Wv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Bs(s,`Initialization of query '${ds(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Uw(t)})}function jw(n,e){return R(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Tj(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Uw(t)}function Cj(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Uw(n){n.Y_.forEach(e=>{e.next()})}var Qv,hS;(hS=Qv||(Qv={})).ea="default",hS.Cache="cache";var Wc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qv.Cache}};var Yv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Mh=class{constructor(e){this.serializer=e}Es(e){return Bn(this.serializer,e)}ds(e){return e.metadata.exists?fA(this.serializer,e.document,!1):tt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Qe(e)}},Zv=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UA(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ye.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Mh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return R(this,null,function*(){let e=yield dj(this.localStore,new Mh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield hj(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function UA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Nh=class{constructor(e){this.key=e}},Ph=class{constructor(e){this.key=e}},kh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=WS(e),this.Ra=new xh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Rh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=eu(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?C!==M&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(v?(s=s.add(v),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,C){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return M(v)-M(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new Ms(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Rh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Ph(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Nh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ms.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Jv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Xv=class{constructor(e){this.key=e,this.va=!1}},ew=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Hn(a=>HS(a),Xc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne($.comparator),this.Na=new Map,this.La=new zc,this.Ba={},this.ka=new Map,this.qa=Ss.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function bj(n,e,t=!0){return R(this,null,function*(){let r=Qh(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield BA(r,e,t,!0),i})}function Sj(n,e){return R(this,null,function*(){let t=Qh(n);yield BA(t,e,!0,!1)})}function BA(n,e,t,r){return R(this,null,function*(){let i=yield As(n.localStore,Mt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Bw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Kh(n.remoteStore,i),a})}function Bw(n,e,t,r,i){return R(this,null,function*(){n.Ka=(p,m,v)=>function(M,N,j,z){return R(this,null,function*(){let L=N.view.ma(j);L.ns&&(L=yield Eh(M.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,L)));let Q=z&&z.targetChanges.get(N.targetId),ee=z&&z.targetMismatches.get(N.targetId)!=null,X=N.view.applyChanges(L,M.isPrimaryClient,Q,ee);return tw(M,N.targetId,X.wa),X.snapshot})}(n,p,m,v);let o=yield Eh(n.localStore,e,!0),s=new kh(e,o.Ts),a=s.ma(o.documents),c=Uc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);tw(n,t,l.wa);let h=new Jv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Aj(n,e,t){return R(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Xc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield xs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Rs(r.remoteStore,i.targetId),Ns(r,i.targetId)}).catch(ni))):(Ns(r,i.targetId),yield xs(r.localStore,i.targetId,!0))})}function xj(n,e){return R(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Rs(t.remoteStore,r.targetId))})}function Rj(n,e,t){return R(this,null,function*(){let r=Hw(n);try{let i=yield function(s,a){let c=B(s),l=je.now(),h=a.reduce((v,C)=>v.add(C.key),ie()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=Vt(),M=ie();return c.cs.getEntries(v,h).next(N=>{C=N,C.forEach((j,z)=>{z.isValidDocument()||(M=M.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,C)).next(N=>{p=N;let j=[];for(let z of a){let L=z2(z,p.get(z.key).overlayedDocument);L!=null&&j.push(new Dn(z.key,L,VS(L.value.mapValue),ze.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,j,a)}).next(N=>{m=N;let j=N.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,N.batchId,j)})}).then(()=>({batchId:m.batchId,changes:QS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ne(re)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield yr(r,i.changes),yield js(r.remoteStore)}catch(i){let o=Bs(i,"Failed to persist write");t.reject(o)}})}function $A(n,e){return R(this,null,function*(){let t=B(n);try{let r=yield uj(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield yr(t,r,e)}catch(r){yield ni(r)}})}function fS(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=B(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&Uw(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Mj(n,e,t){return R(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ne($.comparator);s=s.insert(o,tt.newNoDocument(o,J.min()));let a=ie().add(o),c=new jc(J.min(),new Map,new Ne(re),s,a);yield $A(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),zw(r)}else yield xs(r.localStore,e,!1).then(()=>Ns(r,e,t)).catch(ni)})}function Nj(n,e){return R(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield cj(t.localStore,e);qw(t,r,null),$w(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yr(t,i)}catch(i){yield ni(i)}})}function Pj(n,e,t){return R(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let c=B(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);qw(r,e,t),$w(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yr(r,i)}catch(i){yield ni(i)}})}function kj(n,e){return R(this,null,function*(){let t=B(n);ii(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Bs(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function $w(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function qw(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ns(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||qA(n,r)})}function qA(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Rs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),zw(n))}function tw(n,e,t){for(let r of t)r instanceof Nh?(n.La.addReference(r.key,e),Oj(n,r)):r instanceof Ph?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||qA(n,r.key)):G()}function Oj(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),zw(n))}function zw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ye.fromString(e)),r=n.qa.next();n.Na.set(r,new Xv(t)),n.Oa=n.Oa.insert(t,r),Kh(n.remoteStore,new bs(Mt(Ls(t.path)),r,"TargetPurposeLimboResolution",Yt.oe))}}function yr(n,e,t){return R(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Pv.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return R(this,null,function*(){let h=B(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!ri(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),C=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function Fj(n,e){return R(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield AA(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yr(t,r.hs)}})}function Lj(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function Vj(n,e){return R(this,null,function*(){let t=B(n),r=yield Eh(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&tw(t,e.targetId,i.wa),i})}function jj(n,e){return R(this,null,function*(){let t=B(n);return NA(t.localStore,e).then(r=>yr(t,r))})}function Uj(n,e,t,r){return R(this,null,function*(){let i=B(n),o=yield function(a,c){let l=B(a),h=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield js(i.remoteStore):t==="acknowledged"||t==="rejected"?(qw(i,e,r||null),$w(i,e),function(a,c){B(B(a).mutationQueue).On(c)}(i.localStore,e)):G(),yield yr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Bj(n,e){return R(this,null,function*(){let t=B(n);if(Qh(t),Hw(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield pS(t,r.toArray());t.Qa=!0,yield Hv(t.remoteStore,!0);for(let o of i)Kh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ns(t,s),xs(t.localStore,s,!0))),Rs(t.remoteStore,s)}),yield i,yield pS(t,r),function(s){let a=B(s);a.Na.forEach((c,l)=>{Rs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ne($.comparator)}(t),t.Qa=!1,yield Hv(t.remoteStore,!1)}})}function pS(n,e,t){return R(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield As(r.localStore,Mt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield Vj(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield MA(r.localStore,s);a=yield As(r.localStore,l),yield Bw(r,zA(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function zA(n){return zS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $j(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function qj(n,e,t,r){return R(this,null,function*(){let i=B(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield NA(i.localStore,GS(o[0])),a=jc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ye.EMPTY_BYTE_STRING);yield yr(i,s,a);break}case"rejected":yield xs(i.localStore,e,!0),Ns(i,e,r);break;default:G()}})}function zj(n,e,t){return R(this,null,function*(){let r=Qh(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield MA(r.localStore,i),s=yield As(r.localStore,o);yield Bw(r,zA(o),s.targetId,!1,s.resumeToken),Kh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield xs(r.localStore,i,!1).then(()=>{Rs(r.remoteStore,i),Ns(r,i)}).catch(ni))}})}function Qh(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mj.bind(null,e),e.Ca.d_=Tj.bind(null,e.eventManager),e.Ca.$a=Cj.bind(null,e.eventManager),e}function Hw(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pj.bind(null,e),e}function Hj(n,e,t){let r=B(n);(function(o,s,a){return R(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(v,C){let M=B(v),N=Qe(C.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",j=>M.Gr.getBundleMetadata(j,C.id)).then(j=>!!j&&j.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(UA(c));let l=new Zv(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield yr(o,p.Ia,void 0),yield function(v,C){let M=B(v);return M.persistence.runTransaction("Save bundle","readwrite",N=>M.Gr.saveBundleMetadata(N,C))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return In("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var nw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=tu(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return SA(this.persistence,new Ih,t.initialUser,this.serializer)}Ga(t){return new wh(_h.Zr,this.serializer)}Wa(t){return new Ch}terminate(){return R(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Oh=class n extends nw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield Of(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Hw(this.Ja.syncEngine),yield js(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return SA(this.persistence,new Ih,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new yv(r,e.asyncQueue,t)}Ha(e,t){let r=new ky(t,this.persistence);return new Py(e.asyncQueue,r)}Ga(e){let t=kw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Nv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kA(),Kd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Ch}},rw=class n extends Oh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield Of(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof xc&&(this.sharedClientState.syncEngine={no:Uj.bind(null,t),ro:qj.bind(null,t),io:zj.bind(null,t),Qi:$j.bind(null,t),eo:jj.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>R(this,null,function*(){yield Bj(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=kA();if(!xc.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=kw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Gw=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fj.bind(null,this.syncEngine),yield Hv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Kv}()}createDatastore(t){let r=tu(t.databaseInfo.databaseId),i=function(s){return new jv(s)}(t.databaseInfo);return function(s,a,c,l){return new $v(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new zv(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>fS(this.syncEngine,r,0),function(){return bh.D()?new bh:new Lv}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new ew(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){var t,r;yield function(o){return R(this,null,function*(){let s=B(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Vs(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function gS(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ps=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):We("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var iw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new nt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}Ua(){return R(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return R(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Yv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return R(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return R(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var ow=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return R(this,null,function*(){let s=B(i),a={documents:o.map(p=>Bc(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ye.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=Y2(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ei(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new Fc(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let o=B(r),s={writes:i.map(a=>$c(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ye.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw G();t=J.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?ze.exists(!1):ze.updateTime(t):ze.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ze.updateTime(t)}return ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var sw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Gc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>R(this,null,function*(){let e=new ow(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Zc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!oA(t)}return!1}};var aw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Yd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Bs(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ey(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield AA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function mS(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Ww(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>lS(e.remoteStore,i)),n._onlineComponents=e})}function Ww(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ey(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;In("Error using user provided cache. Falling back to memory cache: "+t),yield Ey(n,new nw)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Ey(n,new nw);return n._offlineComponents})}function Yh(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield mS(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield mS(n,new Gw))),n._onlineComponents})}function HA(n){return Ww(n).then(e=>e.persistence)}function Kw(n){return Ww(n).then(e=>e.localStore)}function GA(n){return Yh(n).then(e=>e.remoteStore)}function Qw(n){return Yh(n).then(e=>e.syncEngine)}function Gj(n){return Yh(n).then(e=>e.datastore)}function ks(n){return R(this,null,function*(){let e=yield Yh(n),t=e.eventManager;return t.onListen=bj.bind(null,e.syncEngine),t.onUnlisten=Aj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Sj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xj.bind(null,e.syncEngine),t})}function Wj(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield HA(n),t=yield GA(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),nu(o)}(t)}))}function Kj(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield HA(n),t=yield GA(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=B(i);o.L_.add(0),yield Vs(o),o.q_.set("Offline")})}(t)}))}function Qj(n,e){let t=new nt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield function(l,h){let p=B(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Bs(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Kw(n),e,t)})),t.promise}function WA(n,e,t={}){let r=new nt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new Ps({next:m=>{h.Za(),s.enqueueAndForget(()=>jw(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Wc(Ls(a.path),h,{includeMetadataChanges:!0,_a:!0});return Vw(o,p)}(yield ks(n),n.asyncQueue,e,t,r)})),r.promise}function Yj(n,e){let t=new nt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield Eh(i,o,!0),c=new kh(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Bs(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Kw(n),e,t)})),t.promise}function KA(n,e,t={}){let r=new nt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new Ps({next:m=>{h.Za(),s.enqueueAndForget(()=>jw(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Wc(a,h,{includeMetadataChanges:!0,_a:!0});return Vw(o,p)}(yield ks(n),n.asyncQueue,e,t,r)})),r.promise}function Zj(n,e){let t=new Ps(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield ks(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield ks(n),t)}))}}function Jj(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?aA().encode(s):s,function(h,p){return new iw(h,p)}(function(h,p){if(h instanceof Uint8Array)return gS(h,p);if(h instanceof ArrayBuffer)return gS(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,tu(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){Hj(yield Qw(n),i,r)}))}function Xj(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield Kw(n),e)}))}function QA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var yS=new Map;function Yw(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Zw(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vS(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wS(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G()}function ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Zh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function YA(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Fh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Zw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},zi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Dy;switch(r.type){case"firstParty":return new Sy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=yS.get(t);r&&(k("ComponentProvider","Removing Datastore"),yS.delete(t),r.terminate())}(this),Promise.resolve()}};function ZA(n,e,t,r={}){var i;let o=(n=ve(n,zi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&In("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=et.MOCK_USER;else{a=CI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new et(l)}n._authCredentials=new Ty(new Qd(a,c))}}var ht=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Re=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},$n=class n extends ht{constructor(e,t,r){super(e,t,Ls(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Jw(n,e,...t){if(n=Oe(n),Yw("collection","path",e),n instanceof zi){let r=ye.fromString(e,...t);return wS(r),new $n(n,null,r)}{if(!(n instanceof Re||n instanceof $n))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return wS(r),new $n(n.firestore,null,r)}}function JA(n,e){if(n=ve(n,zi),Yw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ht(n,null,function(r){return new En(ye.emptyPath(),r)}(e))}function ru(n,e,...t){if(n=Oe(n),arguments.length===1&&(e=Yd.newId()),Yw("doc","path",e),n instanceof zi){let r=ye.fromString(e,...t);return vS(r),new Re(n,null,new $(r))}{if(!(n instanceof Re||n instanceof $n))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ye.fromString(e,...t));return vS(r),new Re(n.firestore,n instanceof $n?n.converter:null,new $(r))}}function Xw(n,e){return n=Oe(n),e=Oe(e),(n instanceof Re||n instanceof $n)&&(e instanceof Re||e instanceof $n)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function e_(n,e){return n=Oe(n),e=Oe(e),n instanceof ht&&e instanceof ht&&n.firestore===e.firestore&&Xc(n._query,e._query)&&n.converter===e.converter}var Lh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gc(this,"async_queue_retry"),this.Vu=()=>{let r=Kd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Kd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Kd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new nt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ri(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw We("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Gv.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&G()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function cw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var uw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new nt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var XA=-1,Ue=class extends zi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Lh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Lh(e),this._firestoreClient=void 0,yield e}})}};function ft(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ex(n),n._firestoreClient}function ex(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new Oy(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,QA(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new aw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function tx(n,e){In("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return rx(n,Gw.provider,{build:r=>new Oh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function nx(n){return R(this,null,function*(){In("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();rx(n,Gw.provider,{build:t=>new rw(t,e.cacheSizeBytes)})})}function rx(n,e,t){if((n=ve(n,Ue))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},ex(n)}function ix(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new nt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!Wr.D())return Promise.resolve();let i=r+"main";yield Wr.delete(i)})}(kw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function ox(n){return function(t){let r=new nt;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return kj(yield Qw(t),r)})),r.promise}(ft(n=ve(n,Ue)))}function sx(n){return Wj(ft(n=ve(n,Ue)))}function ax(n){return Kj(ft(n=ve(n,Ue)))}function cx(n,e){let t=ft(n=ve(n,Ue)),r=new uw;return Jj(t,n._databaseId,e,r),r}function ux(n,e){return Xj(ft(n=ve(n,Ue)),e).then(t=>t?new ht(n,null,t.query):null)}var Gn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ye.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Tn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var gr=class{constructor(e){this._methodName=e}};var Hi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var Kc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var eU=/^__.*__$/,lw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Dn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xr(e,this.data,t,this.fieldTransforms)}},Vh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Dn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function lx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var jh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Uh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lx(this.Cu)&&eU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},dw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||tu(e)}Qu(e,t,r,i=!1){return new jh({Cu:e,methodName:t,qu:r,path:Ke.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Qi(n){let e=n._freezeSettings(),t=tu(n._databaseId);return new dw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Jh(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);r_("Data must be an object, but it was:",s,r);let a=fx(r,s),c,l;if(o.merge)c=new Zt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=mw(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);gx(h,m)||h.push(m)}c=new Zt(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new lw(new It(a),c,l)}var Qc=class n extends gr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function dx(n,e,t){return new jh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var hw=class n extends gr{_toFieldTransform(e){return new Bi(e.path,new Zr)}isEqual(e){return e instanceof n}},fw=class n extends gr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=dx(this,e,!0),r=this.Ku.map(o=>Yi(o,t)),i=new fr(r);return new Bi(e.path,i)}isEqual(e){return e instanceof n&&Vf(this.Ku,e.Ku)}},pw=class n extends gr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=dx(this,e,!0),r=this.Ku.map(o=>Yi(o,t)),i=new pr(r);return new Bi(e.path,i)}isEqual(e){return e instanceof n&&Vf(this.Ku,e.Ku)}},gw=class n extends gr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Jr(e.serializer,JS(e.serializer,this.$u));return new Bi(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function t_(n,e,t,r){let i=n.Qu(1,e,t);r_("Data must be an object, but it was:",i,r);let o=[],s=It.empty();Ki(r,(c,l)=>{let h=i_(e,c,t);l=Oe(l);let p=i.Nu(h);if(l instanceof Qc)o.push(h);else{let m=Yi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Zt(o);return new Vh(s,a,i.fieldTransforms)}function n_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[mw(e,r,t)],c=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(mw(e,o[m])),c.push(o[m+1]);let l=[],h=It.empty();for(let m=a.length-1;m>=0;--m)if(!gx(l,a[m])){let v=a[m],C=c[m];C=Oe(C);let M=s.Nu(v);if(C instanceof Qc)l.push(v);else{let N=Yi(C,M);N!=null&&(l.push(v),h.set(v,N))}}let p=new Zt(l);return new Vh(h,p,s.fieldTransforms)}function hx(n,e,t,r=!1){return Yi(t,n.Qu(r?4:3,e))}function Yi(n,e){if(px(n=Oe(n)))return r_("Unsupported field value:",e,n),fx(n,e);if(n instanceof gr)return function(r,i){if(!lx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Yi(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=je.fromDate(r);return{timestampValue:Cs(i.serializer,o)}}if(r instanceof je){let o=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cs(i.serializer,o)}}if(r instanceof Hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gn)return{bytesValue:cA(i.serializer,r._byteString)};if(r instanceof Re){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Mw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Kc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Rw(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Zh(r)}`)}(n,e)}function fx(n,e){let t={};return kS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ki(n,(r,i)=>{let o=Yi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function px(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof Hi||n instanceof Gn||n instanceof Re||n instanceof gr||n instanceof Kc)}function r_(n,e,t){if(!px(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Zh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function mw(n,e,t){if((e=Oe(e))instanceof Tn)return e._internalPath;if(typeof e=="string")return i_(n,e);throw Uh("Field path arguments must be of type string or ",n,!1,void 0,t)}var tU=new RegExp("[~\\*/\\[\\]]");function i_(n,e,t){if(e.search(tU)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tn(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Uh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(x.INVALID_ARGUMENT,a+n+c)}function gx(n,e){return n.some(t=>t.isEqual(e))}var Gi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Xh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},yw=class extends Gi{data(){return super.data()}};function Xh(n,e){return typeof e=="string"?i_(n,e):e instanceof Tn?e._internalPath:e._delegate._internalPath}function mx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yc=class{},Wi=class extends Yc{};function vr(n,e,...t){let r=[];e instanceof Yc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof vw).length,a=o.filter(c=>c instanceof Bh).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Bh=class n extends Wi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return bx(e._query,t),new ht(e.firestore,e.converter,Ky(e._query,t))}_parse(e){let t=Qi(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){IS(p,h);let v=[];for(let C of p)v.push(_S(c,o,C));m={arrayValue:{values:v}}}else m=_S(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||IS(p,h),m=hx(a,s,p,h==="in"||h==="not-in");return fe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function yx(n,e,t){let r=e,i=Xh("where",n);return Bh._create(i,r,t)}var vw=class n extends Yc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ce.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)bx(s,c),s=Ky(s,c)}(e._query,t),new ht(e.firestore,e.converter,Ky(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ww=class n extends Wi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ji(o,s)}(e._query,this._field,this._direction);return new ht(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new En(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function vx(n,e="asc"){let t=e,r=Xh("orderBy",n);return ww._create(r,t)}var $h=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ht(e.firestore,e.converter,sh(e._query,this._limit,this._limitType))}};function wx(n){return YA("limit",n),$h._create("limit",n,"F")}function _x(n){return YA("limitToLast",n),$h._create("limitToLast",n,"L")}var qh=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Cx(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new En(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Ix(...n){return qh._create("startAt",n,!0)}function Ex(...n){return qh._create("startAfter",n,!1)}var zh=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Cx(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new En(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Dx(...n){return zh._create("endBefore",n,!1)}function Tx(...n){return zh._create("endAt",n,!0)}function Cx(n,e,t,r){if(t[0]=Oe(t[0]),t[0]instanceof Gi)return function(o,s,a,c,l){if(!c)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of ys(o))if(p.field.isKeyField())h.push(Vi(s,c.key));else{let m=c.data.field(p.field);if(Gh(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new zn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Qi(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let C=0;C<h.length;C++){let M=h[C];if(m[C].field.isKeyField()){if(typeof M!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!Aw(s)&&M.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let N=s.path.child(ye.fromString(M));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let j=new $(N);v.push(Vi(a,j))}else{let N=hx(c,l,M);v.push(N)}}return new zn(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _S(n,e,t){if(typeof(t=Oe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Aw(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ye.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vi(n,new $(r))}if(t instanceof Re)return Vi(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zh(t)}.`)}function IS(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bx(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Os=class{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ki(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new Kc(o)}convertGeoPoint(e){return new Hi(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=bw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){let t=hr(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ye.fromString(e);K(wA(r));let i=new Qr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||We(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function ef(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var _w=class extends Os{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};var dr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cn=class extends Gi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Hr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Xh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Hr=class extends cn{data(e={}){return super.data(e)}},Cn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hr(this._firestore,this._userDataWriter,r.key,r,new dr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Hr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Hr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:nU(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function nU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}function o_(n,e){return n instanceof cn&&e instanceof cn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Cn&&e instanceof Cn&&n._firestore===e._firestore&&e_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Sx(n){n=ve(n,Re);let e=ve(n.firestore,Ue);return WA(ft(e),n._key).then(t=>u_(e,n,t))}var mr=class extends Os{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};function Ax(n){n=ve(n,Re);let e=ve(n.firestore,Ue),t=ft(e),r=new mr(e);return Qj(t,n._key).then(i=>new cn(e,r,n._key,i,new dr(i!==null&&i.hasLocalMutations,!0),n.converter))}function xx(n){n=ve(n,Re);let e=ve(n.firestore,Ue);return WA(ft(e),n._key,{source:"server"}).then(t=>u_(e,n,t))}function Rx(n){n=ve(n,ht);let e=ve(n.firestore,Ue),t=ft(e),r=new mr(e);return mx(n._query),KA(t,n._query).then(i=>new Cn(e,r,n,i))}function Mx(n){n=ve(n,ht);let e=ve(n.firestore,Ue),t=ft(e),r=new mr(e);return Yj(t,n._query).then(i=>new Cn(e,r,n,i))}function Nx(n){n=ve(n,ht);let e=ve(n.firestore,Ue),t=ft(e),r=new mr(e);return KA(t,n._query,{source:"server"}).then(i=>new Cn(e,r,n,i))}function s_(n,e,t){n=ve(n,Re);let r=ve(n.firestore,Ue),i=ef(n.converter,e,t);return $s(r,[Jh(Qi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ze.none())])}function a_(n,e,t,...r){n=ve(n,Re);let i=ve(n.firestore,Ue),o=Qi(i),s;return s=typeof(e=Oe(e))=="string"||e instanceof Tn?n_(o,"updateDoc",n._key,e,t,r):t_(o,"updateDoc",n._key,e),$s(i,[s.toMutation(n._key,ze.exists(!0))])}function Px(n){return $s(ve(n.firestore,Ue),[new ei(n._key,ze.none())])}function kx(n,e){let t=ve(n.firestore,Ue),r=ru(n),i=ef(n.converter,e);return $s(t,[Jh(Qi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ze.exists(!1))]).then(()=>r)}function c_(n,...e){var t,r,i;n=Oe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||cw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(cw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Re)l=ve(n.firestore,Ue),h=Ls(n._key.path),c={next:p=>{e[s]&&e[s](u_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=ve(n,ht);l=ve(p.firestore,Ue),h=p._query;let m=new mr(l);c={next:v=>{e[s]&&e[s](new Cn(l,m,p,v))},error:e[s+1],complete:e[s+2]},mx(n._query)}return function(m,v,C,M){let N=new Ps(M),j=new Wc(v,N,C);return m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Vw(yield ks(m),j)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return jw(yield ks(m),j)}))}}(ft(l),h,a,c)}function Ox(n,e){return Zj(ft(n=ve(n,Ue)),cw(e)?e:{next:e})}function $s(n,e){return function(r,i){let o=new nt;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Rj(yield Qw(r),i,o)})),o.promise}(ft(n),e)}function u_(n,e,t){let r=t.docs.get(e._key),i=new mr(n);return new cn(n,i,e._key,r,new dr(t.hasPendingWrites,t.fromCache),e.converter)}var rU={maxAttempts:5};var Hh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qi(e)}set(e,t,r){this._verifyNotCommitted();let i=qr(e,this._firestore),o=ef(i.converter,t,r),s=Jh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ze.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=qr(e,this._firestore),s;return s=typeof(t=Oe(t))=="string"||t instanceof Tn?n_(this._dataReader,"WriteBatch.update",o._key,t,r,i):t_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,ze.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=qr(e,this._firestore);return this._mutations=this._mutations.concat(new ei(t._key,ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qr(n,e){if((n=Oe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Iw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Qi(t)}get(t){let r=qr(t,this._firestore),i=new _w(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return G();let s=o[0];if(s.isFoundDocument())return new Gi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Gi(this._firestore,i,r._key,null,r.converter);throw G()})}set(t,r,i){let o=qr(t,this._firestore),s=ef(o.converter,r,i),a=Jh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=qr(t,this._firestore),a;return a=typeof(r=Oe(r))=="string"||r instanceof Tn?n_(this._dataReader,"Transaction.update",s._key,r,i,o):t_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=qr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=qr(e,this._firestore),r=new mr(this._firestore);return super.get(e).then(i=>new cn(this._firestore,r,t._key,i._document,new dr(!1,!1),t.converter))}};function Fx(n,e,t){n=ve(n,Ue);let r=Object.assign(Object.assign({},rU),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new nt;return o.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield Gj(o);new sw(o.asyncQueue,l,a,s,c).au()})),c.promise}(ft(n),i=>e(new Iw(n,i)),r)}function Lx(){return new Qc("deleteField")}function Vx(){return new hw("serverTimestamp")}function jx(...n){return new fw("arrayUnion",n)}function Ux(...n){return new pw("arrayRemove",n)}function Bx(n){return new gw("increment",n)}(function(e,t=!0){(function(i){Fs=i})(AI),ha(new ui("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ue(new Cy(r.getProvider("auth-internal")),new xy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Dr(wb,"4.7.3",e),Dr(wb,"4.7.3","esm2017")})();var iU="@firebase/firestore-compat",oU="0.3.38";function g_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $x(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function qx(){if(!OS())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var tf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return qx(),new n(Gn.fromBase64String(e))}static fromUint8Array(e){return $x(),new n(Gn.fromUint8Array(e))}toBase64(){return qx(),this._delegate.toBase64()}toUint8Array(){return $x(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function l_(n){return sU(n,["next","error","complete"])}function sU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var d_=class{enableIndexedDbPersistence(e,t){return tx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return nx(e._delegate)}clearIndexedDbPersistence(e){return ix(e._delegate)}},nf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&In("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){ZA(this._delegate,e,t,r)}enableNetwork(){return sx(this._delegate)}disableNetwork(){return ax(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Zw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ox(this._delegate)}onSnapshotsInSync(e){return Ox(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hs(this,Jw(this._delegate,e))}catch(t){throw Nt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wn(this,ru(this._delegate,e))}catch(t){throw Nt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,JA(this._delegate,e))}catch(t){throw Nt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Fx(this._delegate,t=>e(new rf(this,t)))}batch(){return ft(this._delegate),new of(new Hh(this._delegate,e=>$s(this._delegate,e)))}loadBundle(e){return cx(this._delegate,e)}namedQuery(e){return ux(this._delegate,e).then(t=>t?new eo(this,t):null)}},qs=class extends Os{constructor(e){super(),this.firestore=e}convertBytes(e){return new tf(new Gn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Wn.forKey(t,this.firestore,null)}};function aU(n){ES(n)}var rf=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qs(e)}get(e){let t=Zi(e);return this._delegate.get(t).then(r=>new Ji(this._firestore,new cn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Zi(e);return r?(g_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Zi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Zi(e);return this._delegate.delete(t),this}},of=class{constructor(e){this._delegate=e}set(e,t,r){let i=Zi(e);return r?(g_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Zi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Zi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},zs=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Hr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new qs(e),t),i.set(t,o)),o}};zs.INSTANCES=new WeakMap;var Wn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qs(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Re(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Re(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hs(this.firestore,Jw(this._delegate,e))}catch(t){throw Nt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Oe(e),e instanceof Re?Xw(this._delegate,e):!1}set(e,t){t=g_("DocumentReference.set",t);try{return t?s_(this._delegate,e,t):s_(this._delegate,e)}catch(r){throw Nt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?a_(this._delegate,e):a_(this._delegate,e,t,...r)}catch(i){throw Nt(i,"updateDoc()","DocumentReference.update()")}}delete(){return Px(this._delegate)}onSnapshot(...e){let t=zx(e),r=Hx(e,i=>new Ji(this.firestore,new cn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return c_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=Ax(this._delegate):e?.source==="server"?t=xx(this._delegate):t=Sx(this._delegate),t.then(r=>new Ji(this.firestore,new cn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(zs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Nt(n,e,t){return n.message=n.message.replace(e,t),n}function zx(n){for(let e of n)if(typeof e=="object"&&!l_(e))return e;return{}}function Hx(n,e){var t,r;let i;return l_(n[0])?i=n[0]:l_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ji=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return o_(this._delegate,e._delegate)}},Xi=class extends Ji{data(e){let t=this._delegate.data(e);return this._delegate._converter||DS(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},eo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qs(e)}where(e,t,r){try{return new n(this.firestore,vr(this._delegate,yx(e,t,r)))}catch(i){throw Nt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,vr(this._delegate,vx(e,t)))}catch(r){throw Nt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,vr(this._delegate,wx(e)))}catch(t){throw Nt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,vr(this._delegate,_x(e)))}catch(t){throw Nt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,vr(this._delegate,Ix(...e)))}catch(t){throw Nt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,vr(this._delegate,Ex(...e)))}catch(t){throw Nt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,vr(this._delegate,Dx(...e)))}catch(t){throw Nt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,vr(this._delegate,Tx(...e)))}catch(t){throw Nt(t,"endAt()","Query.endAt()")}}isEqual(e){return e_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Mx(this._delegate):e?.source==="server"?t=Nx(this._delegate):t=Rx(this._delegate),t.then(r=>new iu(this.firestore,new Cn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=zx(e),r=Hx(e,i=>new iu(this.firestore,new Cn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return c_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(zs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},h_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},iu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new h_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xi(this._firestore,r))})}isEqual(e){return o_(this._delegate,e._delegate)}},Hs=class n extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Wn(this.firestore,e):null}doc(e){try{return e===void 0?new Wn(this.firestore,ru(this._delegate)):new Wn(this.firestore,ru(this._delegate,e))}catch(t){throw Nt(t,"doc()","CollectionReference.doc()")}}add(e){return kx(this._delegate,e).then(t=>new Wn(this.firestore,t))}isEqual(e){return Xw(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(zs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Zi(n){return ve(n,Re)}var f_=class n{constructor(...e){this._delegate=new Tn(...e)}static documentId(){return new n(Ke.keyField().canonicalString())}isEqual(e){return e=Oe(e),e instanceof Tn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var p_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=Vx();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Lx();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=jx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=Ux(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Bx(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var cU={Firestore:nf,GeoPoint:Hi,Timestamp:je,Blob:tf,Transaction:rf,WriteBatch:of,DocumentReference:Wn,DocumentSnapshot:Ji,Query:eo,QueryDocumentSnapshot:Xi,QuerySnapshot:iu,CollectionReference:Hs,FieldPath:f_,FieldValue:p_,setLogLevel:aU,CACHE_SIZE_UNLIMITED:XA};function uU(n,e){n.INTERNAL.registerComponent(new ui("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},cU)))}function lU(n){uU(n,(e,t)=>new nf(e,t,new d_)),n.registerVersion(iU,oU)}lU(Bt);function dU(n,e=ma){return new he(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Gx(n,e){return dU(n,e)}function hU(n,e){return Gx(n,e).pipe(pi(void 0),va(),W(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function v_(n,e){return Gx(n,e).pipe(W(t=>({payload:t,type:"query"})))}var sf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=Qx(r,t);return new cf(i,o,this.afs)}snapshotChanges(){return hU(this.ref,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return this.snapshotChanges().pipe(W(({payload:t})=>e.idField?xe(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return _e(this.ref.get(e)).pipe(Lt)}};function af(n,e){return v_(n,e).pipe(pi(void 0),va(),W(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function Wx(n,e,t){return af(n,t).pipe(fi((r,i)=>fU(r,i.map(o=>o.payload),e),[]),cp(),W(r=>r.map(i=>({type:i.type,payload:i}))))}function fU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=pU(n,r))}),n}function m_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function pU(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return m_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return m_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return m_(n,e.oldIndex,1);break}return n}function Kx(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var cf=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=af(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(W(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(pi(void 0),va(),it(([r,i])=>i.length>0||!r),W(([,r])=>r),Lt)}auditTrail(e){return this.stateChanges(e).pipe(fi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Kx(e);return Wx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return v_(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.payload.docs.map(r=>e.idField?xe(V({},r.data()),{[e.idField]:r.id}):r.data())),Lt)}get(e){return _e(this.query.get(e)).pipe(Lt)}add(e){return this.ref.add(e)}doc(e){return new sf(this.ref.doc(e),this.afs)}},y_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?af(this.query,this.afs.schedulers.outsideAngular).pipe(Lt):af(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.filter(r=>e.indexOf(r.type)>-1)),it(t=>t.length>0),Lt)}auditTrail(e){return this.stateChanges(e).pipe(fi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Kx(e);return Wx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return v_(this.query,this.afs.schedulers.outsideAngular).pipe(W(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Lt)}get(e){return _e(this.query.get(e)).pipe(Lt)}},gU=new H("angularfire2.enableFirestorePersistence"),mU=new H("angularfire2.firestore.persistenceSettings"),yU=new H("angularfire2.firestore.settings"),vU=new H("angularfire2.firestore.use-emulator");function Qx(n,e=t=>t){return{query:e(n),ref:n}}var jt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,v,C,M,N,j,z){this.schedulers=c;let L=yc(t,a,r),Q=h;p&&dy(L,a,m,C,M,N,v,j),[this.firestore,this.persistenceEnabled$]=Ld(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{let ee=a.runOutsideAngular(()=>L.firestore());if(o&&ee.settings(o),Q&&ee.useEmulator(...Q),i&&!or(s)){let X=()=>{try{return _e(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),Y(!1)}};return[ee,a.runOutsideAngular(X)]}else return[ee,Y(!1)]},[o,Q,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=Qx(i,r),a=this.schedulers.ngZone.run(()=>o);return new cf(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new y_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new sf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(rs),O(is,8),O(gU,8),O(yU,8),O(dt),O(pe),O(kd),O(mU,8),O(vU,8),O(mb,8),O(oy,8),O(sy,8),O(ay,8),O(cy,8),O(uy,8),O(ly,8),O(Ai,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Yx=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running...",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _U(n,e){if(n&1&&(ce(0,"tbody")(1,"tr")(2,"td"),Ee(3),Ve(4,"br"),Ee(5),oe(),ce(6,"td"),Ve(7,"img",3),oe(),ce(8,"td"),Ee(9),Ve(10,"br"),Ee(11),Ve(12,"br"),Ee(13),Ve(14,"br"),Ee(15),oe()()()),n&2){let t=p0();Ie(3),rn(" ",t.header.name,""),Ie(2),rn(" ",t.header.goalLife," "),Ie(2),Ft("src",t.header.photoUrl,wT),Ie(2),rn(" ",t.header.email,""),Ie(2),rn(" ",t.header.phoneNumber,""),Ie(2),rn(" ",t.header.location,""),Ie(2),rn(" ",t.header.socialNetwork," ")}}var Zx=(()=>{class n{constructor(t){this.headerService=t,this.header=new Nd,this.headerService.getHeader().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0]})}static{this.\u0275fac=function(r){return new(r||n)(qe(Yx))}}static{this.\u0275cmp=at({type:n,selectors:[["app-header"]],decls:6,vars:1,consts:[["border","1"],["colspan","3"],[4,"ngIf"],["width","200","height","200","alt","Foto de perfil",3,"src"]],template:function(r,i){r&1&&(ce(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),Ee(4,"Informaci\xF3n Personal"),oe()()(),Wt(5,_U,16,7,"tbody",2),oe()),r&2&&(Ie(5),Ft("ngIf",i.header&&i.header.name))},dependencies:[j0]})}}return n})();var Jx=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="work experience running...",this.dbPath="/Work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DU(n,e){if(n&1&&(ce(0,"li"),Ee(1),ce(2,"i"),Ee(3),oe(),Ve(4,"br"),ce(5,"b"),Ee(6),oe(),Ve(7,"br"),Ee(8),Ve(9,"br"),ce(10,"strong"),Ee(11,"Logros:"),oe(),Ve(12,"br"),Ee(13),Ve(14,"br"),oe()),n&2){let t=e.$implicit;Ie(),$g(" ",t.startDate," \u2013 ",t.endDate," "),Ie(2),wt(t.location),Ie(3),wt(t.position),Ie(2),rn(" ",t.company," "),Ie(5),rn(" ",t.accomplishment," ")}}var Xx=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[],console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r})}static{this.\u0275fac=function(r){return new(r||n)(qe(Jx))}}static{this.\u0275cmp=at({type:n,selectors:[["app-work-experience"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(ce(0,"ul"),Wt(1,DU,15,6,"li",0),oe()),r&2&&(Ie(),Ft("ngForOf",i.workExperience))},dependencies:[Fn]})}}return n})();var eR=(()=>{class n{constructor(t){this.db=t,this.accesoEducationService="education service running",this.dbPath="/Education",this.EducationRef=t.collection(this.dbPath)}getEducation(){return this.EducationRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bU(n,e){if(n&1&&(ce(0,"li")(1,"p"),Ee(2),oe(),ce(3,"p"),Ee(4),oe()()),n&2){let t=e.$implicit;Ie(2),wt(t.Instituto),Ie(2),wt(t.NivelAcademico)}}var tR=(()=>{class n{constructor(t){this.EducationService=t,this.educations=[],this.EducationService.getEducation().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.educations=r,console.log("Datos de educaci\xF3n:",this.educations)})}static{this.\u0275fac=function(r){return new(r||n)(qe(eR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-education"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(ce(0,"ul"),Wt(1,bU,5,2,"li",0),oe()),r&2&&(Ie(),Ft("ngForOf",i.educations))},dependencies:[Fn]})}}return n})();var uf=class{constructor(){this.lenguajes="Java, C#, C++, Python, JavaScript, TypeScript",this.tecnologia="Angular, React, Node.js, Express.js, .NET, .NET Core"}};var nR=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="Skills running...",this.dbPath="/Skills",this.SkillsRef=t.collection(this.dbPath)}getSkills(){return this.SkillsRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rR=(()=>{class n{constructor(t){this.SkillsService=t,this.skills=new uf,this.SkillsService.getSkills().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r[0],console.log("Datos de skills:",this.skills)})}static{this.\u0275fac=function(r){return new(r||n)(qe(nR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-skills"]],decls:11,vars:2,template:function(r,i){r&1&&(ce(0,"ul")(1,"li")(2,"p"),Ee(3,"Lenguajes"),oe(),ce(4,"p"),Ee(5),oe()(),ce(6,"li")(7,"p"),Ee(8,"Tecnologias"),oe(),ce(9,"p"),Ee(10),oe()()()),r&2&&(Ie(5),wt(i.skills.lenguajes),Ie(5),wt(i.skills.tecnologia))}})}}return n})();var iR=(()=>{class n{constructor(t){this.db=t,this.accesoCertificates="certificates service running...",this.dbPath="/Certificates",this.certificateReg=t.collection(this.dbPath)}getCertificate(){return this.certificateReg}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function MU(n,e){if(n&1&&(ce(0,"li")(1,"p"),Ee(2),oe()()),n&2){let t=e.$implicit;Ie(2),wt(t.NombreCertificado)}}var oR=(()=>{class n{constructor(t){this.CertificatesService=t,this.certificates=[],this.CertificatesService.getCertificate().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log("Datos de educaci\xF3n:",this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)(qe(iR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-certificates"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(ce(0,"ul"),Wt(1,MU,3,1,"li",0),oe()),r&2&&(Ie(),Ft("ngForOf",i.certificates))},dependencies:[Fn]})}}return n})();var sR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Language",this.LanguageRef=t.collection(this.dbPath)}getLanguage(){return this.LanguageRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kU(n,e){if(n&1&&(ce(0,"li")(1,"p"),Ee(2),oe()()),n&2){let t=e.$implicit;Ie(2),wt(t.Language)}}var aR=(()=>{class n{constructor(t){this.LanguagesService=t,this.languages=[],console.log(this.LanguagesService),this.LanguagesService.getLanguage().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r})}static{this.\u0275fac=function(r){return new(r||n)(qe(sR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-languages"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(ce(0,"ul"),Wt(1,kU,3,1,"li",0),oe()),r&2&&(Ie(),Ft("ngForOf",i.languages))},dependencies:[Fn]})}}return n})();var cR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Interest",this.InterestRef=t.collection(this.dbPath)}getInterest(){return this.InterestRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LU(n,e){if(n&1&&(ce(0,"li")(1,"p"),Ee(2),oe()()),n&2){let t=e.$implicit;Ie(2),wt(t.Interest)}}var uR=(()=>{class n{constructor(t){this.InterestsService=t,this.interest=[],this.InterestsService.getInterest().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interest=r})}static{this.\u0275fac=function(r){return new(r||n)(qe(cR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-interests"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(ce(0,"ul"),Wt(1,LU,3,1,"li",0),oe()),r&2&&(Ie(),Ft("ngForOf",i.interest))},dependencies:[Fn]})}}return n})();var lR=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["app-root"]],decls:22,vars:0,consts:[["border","1"],["colspan","2"]],template:function(r,i){r&1&&(ce(0,"table",0)(1,"tr")(2,"th",1),Ee(3,"Header"),oe()(),ce(4,"tr")(5,"td",1),Ve(6,"app-header"),oe()(),ce(7,"tr")(8,"td"),Ve(9,"app-work-experience"),oe(),ce(10,"td"),Ve(11,"app-skills"),oe()(),ce(12,"tr")(13,"td"),Ve(14,"app-education"),oe(),ce(15,"td"),Ve(16,"app-certificates"),oe()(),ce(17,"tr")(18,"td"),Ve(19,"app-languages"),oe(),ce(20,"td"),Ve(21,"app-interests"),oe()()())},dependencies:[Zx,Xx,tR,rR,oR,aR,uR]})}}return n})();var dR={production:!1,firebase:{apiKey:"AIzaSyDmyAaf-6SvFynKBXcqfU3gxUjXBgwHz-M",authDomain:"wikiman-85253.firebaseapp.com",projectId:"wikiman-85253",storageBucket:"wikiman-85253.firebasestorage.app",messagingSenderId:"523325811673",appId:"1:523325811673:web:f1ca5dfcf39a70dd4087c8",measurementId:"G-TXDTV55QSB"}};var hR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=At({type:n,bootstrap:[lR]})}static{this.\u0275inj=St({providers:[aC()],imports:[oC,XC,gb.initializeApp(dR.firebase)]})}}return n})();iC().bootstrapModule(hR,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));

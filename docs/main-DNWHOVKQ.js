import{A as qt,a as j,b as Re,c as UI,d as zf,e as N,f as BI,g as Au,h as $I,i as qI,j as zI,k as Hf,l as HI,m as ga,n as Gf,o as xu,p as GI,q as WI,r as Wf,s as Fe,t as ui,u as An,v as Ru,w as ma,x as KI,y as QI,z as Dr}from"./chunk-L7TVQH4Q.js";var Qf=null;var Kf=1,ZI=Symbol("SIGNAL");function Te(n){let e=Qf;return Qf=n,e}function YI(){return Qf}var Zf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vR(n){if(!(tp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Kf)){if(!n.producerMustRecompute(n)&&!Jf(n)){n.dirty=!1,n.lastCleanEpoch=Kf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Kf}}function Yf(n){return n&&(n.nextProducerIndex=0),Te(n)}function JI(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(tp(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ep(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Jf(n){np(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(vR(t),r!==t.version))return!0}return!1}function Xf(n){if(np(n),tp(n))for(let e=0;e<n.producerNode.length;e++)ep(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ep(n,e){if(wR(n),n.liveConsumerNode.length===1&&_R(n))for(let r=0;r<n.producerNode.length;r++)ep(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];np(i),i.producerIndexOfThis[r]=e}}function tp(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function np(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function wR(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function _R(n){return n.producerNode!==void 0}function IR(){throw new Error}var ER=IR;function XI(n){ER=n}function re(n){return typeof n=="function"}function uo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Mu=uo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function li(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof Mu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{eE(o)}catch(s){e=e??[],s instanceof Mu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Mu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)eE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&li(t,e)}remove(e){let{_finalizers:t}=this;t&&li(t,e),e instanceof n&&e._removeParent(this)}};qe.EMPTY=(()=>{let n=new qe;return n.closed=!0,n})();var rp=qe.EMPTY;function Nu(n){return n instanceof qe||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function eE(n){re(n)?n():n.unsubscribe()}var dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var lo={setTimeout(n,e,...t){let{delegate:r}=lo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=lo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Pu(n){lo.setTimeout(()=>{let{onUnhandledError:e}=dn;if(e)e(n);else throw n})}function ya(){}var tE=ip("C",void 0,void 0);function nE(n){return ip("E",void 0,n)}function rE(n){return ip("N",n,void 0)}function ip(n,e,t){return{kind:n,value:e,error:t}}var di=null;function ho(n){if(dn.useDeprecatedSynchronousErrorHandling){let e=!di;if(e&&(di={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=di;if(di=null,t)throw r}}else n()}function iE(n){dn.useDeprecatedSynchronousErrorHandling&&di&&(di.errorThrown=!0,di.error=n)}var hi=class extends qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Nu(e)&&e.add(this)):this.destination=CR}static create(e,t,r){return new Jn(e,t,r)}next(e){this.isStopped?sp(rE(e),this):this._next(e)}error(e){this.isStopped?sp(nE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sp(tE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DR=Function.prototype.bind;function op(n,e){return DR.call(n,e)}var ap=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ku(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ku(r)}else ku(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ku(t)}}},Jn=class extends hi{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&dn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&op(e.next,o),error:e.error&&op(e.error,o),complete:e.complete&&op(e.complete,o)}):i=e}this.destination=new ap(i)}};function ku(n){dn.useDeprecatedSynchronousErrorHandling?iE(n):Pu(n)}function TR(n){throw n}function sp(n,e){let{onStoppedNotification:t}=dn;t&&lo.setTimeout(()=>t(n,e))}var CR={closed:!0,next:ya,error:TR,complete:ya};var fo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function bt(n){return n}function cp(...n){return up(n)}function up(n){return n.length===0?bt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=SR(t)?t:new Jn(t,r,i);return ho(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=oE(r),new r((i,o)=>{let s=new Jn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[fo](){return this}pipe(...t){return up(t)(this)}toPromise(t){return t=oE(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function oE(n){var e;return(e=n??dn.Promise)!==null&&e!==void 0?e:Promise}function bR(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function SR(n){return n&&n instanceof hi||bR(n)&&Nu(n)}function lp(n){return re(n?.lift)}function ce(n){return e=>{if(lp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new dp(n,e,t,r,i)}var dp=class extends hi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function po(){return ce((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var go=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,lp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qe;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qe.EMPTY)}return e}refCount(){return po()(this)}};var sE=uo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ge=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ou(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new sE}next(t){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?rp:(this.currentObservers=null,o.push(t),new qe(()=>{this.currentObservers=null,li(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new Ou(e,t),n})(),Ou=class extends Ge{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:rp}};var dt=class extends Ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var va={now(){return(va.delegate||Date).now()},delegate:void 0};var Fu=class extends Ge{constructor(e=1/0,t=1/0,r=va){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Lu=class extends qe{constructor(e,t){super()}schedule(e,t=0){return this}};var wa={setInterval(n,e,...t){let{delegate:r}=wa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=wa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var mo=class extends Lu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return wa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&wa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,li(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var yo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};yo.now=va.now;var vo=class extends yo{constructor(e,t=yo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var _a=new vo(mo);var Vu=class extends mo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ju=class extends vo{};var hp=new ju(Vu);var St=new fe(n=>n.complete());function aE(n){return n&&re(n.schedule)}function fp(n){return n[n.length-1]}function cE(n){return re(fp(n))?n.pop():void 0}function xn(n){return aE(fp(n))?n.pop():void 0}function uE(n,e){return typeof fp(n)=="number"?n.pop():e}var Uu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Bu(n){return re(n?.then)}function $u(n){return re(n[fo])}function qu(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function zu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function AR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hu=AR();function Gu(n){return re(n?.[Hu])}function Wu(n){return $I(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Au(t.read());if(i)return yield Au(void 0);yield yield Au(r)}}finally{t.releaseLock()}})}function Ku(n){return re(n?.getReader)}function Le(n){if(n instanceof fe)return n;if(n!=null){if($u(n))return xR(n);if(Uu(n))return RR(n);if(Bu(n))return MR(n);if(qu(n))return lE(n);if(Gu(n))return NR(n);if(Ku(n))return PR(n)}throw zu(n)}function xR(n){return new fe(e=>{let t=n[fo]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function RR(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function MR(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Pu)})}function NR(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function lE(n){return new fe(e=>{kR(n,e).catch(t=>e.error(t))})}function PR(n){return lE(Wu(n))}function kR(n,e){var t,r,i,o;return BI(this,void 0,void 0,function*(){try{for(t=qI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ft(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function tn(n,e=0){return ce((t,r)=>{t.subscribe(de(r,i=>Ft(r,n,()=>r.next(i),e),()=>Ft(r,n,()=>r.complete(),e),i=>Ft(r,n,()=>r.error(i),e)))})}function hn(n,e=0){return ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function dE(n,e){return Le(n).pipe(hn(e),tn(e))}function hE(n,e){return Le(n).pipe(hn(e),tn(e))}function fE(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function pE(n,e){return new fe(t=>{let r;return Ft(t,e,()=>{r=n[Hu](),Ft(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Qu(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{Ft(t,e,()=>{let r=n[Symbol.asyncIterator]();Ft(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function gE(n,e){return Qu(Wu(n),e)}function mE(n,e){if(n!=null){if($u(n))return dE(n,e);if(Uu(n))return fE(n,e);if(Bu(n))return hE(n,e);if(qu(n))return Qu(n,e);if(Gu(n))return pE(n,e);if(Ku(n))return gE(n,e)}throw zu(n)}function Ee(n,e){return e?mE(n,e):Le(n)}function Z(...n){let e=xn(n);return Ee(n,e)}function wo(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function pp(n){return!!n&&(n instanceof fe||re(n.lift)&&re(n.subscribe))}var Xn=uo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function W(n,e){return ce((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:OR}=Array;function FR(n,e){return OR(e)?n(...e):n(e)}function yE(n){return W(e=>FR(n,e))}var{isArray:LR}=Array,{getPrototypeOf:VR,prototype:jR,keys:UR}=Object;function vE(n){if(n.length===1){let e=n[0];if(LR(e))return{args:e,keys:null};if(BR(e)){let t=UR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function BR(n){return n&&typeof n=="object"&&VR(n)===jR}function wE(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ia(...n){let e=xn(n),t=cE(n),{args:r,keys:i}=vE(n);if(r.length===0)return Ee([],e);let o=new fe($R(r,e,i?s=>wE(i,s):bt));return t?o.pipe(yE(t)):o}function $R(n,e,t=bt){return r=>{_E(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)_E(e,()=>{let l=Ee(n[c],e),h=!1;l.subscribe(de(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function _E(n,e,t){n?Ft(t,n,e):e()}function IE(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},y=A=>l<r?T(A):c.push(A),T=A=>{o&&e.next(A),l++;let M=!1;Le(t(A,h++)).subscribe(de(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let L=c.shift();s?Ft(e,s,()=>T(L)):T(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(de(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Je(n,e,t=1/0){return re(e)?Je((r,i)=>W((o,s)=>e(r,o,i,s))(Le(n(r,i))),t):(typeof e=="number"&&(t=e),ce((r,i)=>IE(r,i,n,t)))}function Tr(n=1/0){return Je(bt,n)}function EE(){return Tr(1)}function _o(...n){return EE()(Ee(n,xn(n)))}function Zu(n){return new fe(e=>{Le(n()).subscribe(e)})}function gp(...n){let e=xn(n),t=uE(n,1/0),r=n;return r.length?r.length===1?Le(r[0]):Tr(t)(Ee(r,e)):St}function ot(n,e){return ce((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Cr(n){return ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=Le(n(s,Cr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function DE(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(de(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function br(n,e){return re(e)?Je(n,e,1):Je(n,1)}function Sr(n){return ce((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function er(n){return n<=0?()=>St:ce((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function mp(n){return W(()=>n)}function yp(n,e=bt){return n=n??qR,ce((t,r)=>{let i,o=!0;t.subscribe(de(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function qR(n,e){return n===e}function Yu(n=zR){return ce((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zR(){return new Xn}function Io(n){return ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function zt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ot((i,o)=>n(i,o,r)):bt,er(1),t?Sr(e):Yu(()=>new Xn))}function Eo(n){return n<=0?()=>St:ce((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function vp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ot((i,o)=>n(i,o,r)):bt,Eo(1),t?Sr(e):Yu(()=>new Xn))}function Ea(){return ce((n,e)=>{let t,r=!1;n.subscribe(de(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function fi(n,e){return ce(DE(n,e,arguments.length>=2,!0))}function TE(n={}){let{connector:e=()=>new Ge,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=c=void 0,h=p=!1},T=()=>{let A=s;y(),A?.unsubscribe()};return ce((A,M)=>{l++,!p&&!h&&m();let L=c=c??e();M.add(()=>{l--,l===0&&!p&&!h&&(a=wp(T,i))}),L.subscribe(M),!s&&l>0&&(s=new Jn({next:q=>L.next(q),error:q=>{p=!0,m(),a=wp(y,t,q),L.error(q)},complete:()=>{h=!0,m(),a=wp(y,r),L.complete()}}),Le(A).subscribe(s))})(o)}}function wp(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Jn({next:()=>{r.unsubscribe(),n()}});return Le(e(...t)).subscribe(r)}function Ju(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,TE({connector:()=>new Fu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function pi(...n){let e=xn(n);return ce((t,r)=>{(e?_o(n,t,e):_o(n,t)).subscribe(r)})}function Ve(n,e){return ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,c=>{i?.unsubscribe();let l=0,h=o++;Le(n(c,h)).subscribe(i=de(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Xu(n,e){return re(e)?Ve(()=>n,e):Ve(()=>n)}function _p(n){return ce((e,t)=>{Le(n).subscribe(de(t,()=>t.complete(),ya)),!t.closed&&e.subscribe(t)})}function We(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):bt}var l0="https://g.co/ng/security#xss",Y=class extends Error{constructor(e,t){super(jl(e,t)),this.code=e}};function jl(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function La(n){return{toString:n}.toString()}var el="__parameters__";function HR(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function d0(n,e,t){return La(()=>{let r=HR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(el)?c[el]:Object.defineProperty(c,el,{value:[]})[el];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var rr=globalThis;function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function Lt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Lt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function CE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var GR=Ae({__forward_ref__:Ae});function h0(n){return n.__forward_ref__=h0,n.toString=function(){return Lt(this())},n}function rn(n){return f0(n)?n():n}function f0(n){return typeof n=="function"&&n.hasOwnProperty(GR)&&n.__forward_ref__===h0}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Rt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ul(n){return bE(n,g0)||bE(n,m0)}function p0(n){return Ul(n)!==null}function bE(n,e){return n.hasOwnProperty(e)?n[e]:null}function WR(n){let e=n&&(n[g0]||n[m0]);return e||null}function SE(n){return n&&(n.hasOwnProperty(AE)||n.hasOwnProperty(KR))?n[AE]:null}var g0=Ae({\u0275prov:Ae}),AE=Ae({\u0275inj:Ae}),m0=Ae({ngInjectableDef:Ae}),KR=Ae({ngInjectorDef:Ae}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function y0(n){return n&&!!n.\u0275providers}var QR=Ae({\u0275cmp:Ae}),ZR=Ae({\u0275dir:Ae}),YR=Ae({\u0275pipe:Ae}),JR=Ae({\u0275mod:Ae}),ul=Ae({\u0275fac:Ae}),Ca=Ae({__NG_ELEMENT_ID__:Ae}),xE=Ae({__NG_ENV_ID__:Ae});function Sa(n){return typeof n=="string"?n:n==null?"":String(n)}function XR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Sa(n)}function eM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Y(-200,n)}function Eg(n,e){throw new Y(-201,!1)}var le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(le||{}),Np;function v0(){return Np}function nn(n){let e=Np;return Np=n,e}function w0(n,e,t){let r=Ul(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&le.Optional)return null;if(e!==void 0)return e;Eg(n,"Injector")}var tM={},Aa=tM,Pp="__NG_DI_FLAG__",ll="ngTempTokenPath",nM="ngTokenPath",rM=/\n/gm,iM="\u0275",RE="__source",So;function oM(){return So}function Ar(n){let e=So;return So=n,e}function sM(n,e=le.Default){if(So===void 0)throw new Y(-203,!1);return So===null?w0(n,void 0,e):So.get(n,e&le.Optional?null:void 0,e)}function O(n,e=le.Default){return(v0()||sM)(rn(n),e)}function F(n,e=le.Default){return O(n,Bl(e))}function Bl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function kp(n){let e=[];for(let t=0;t<n.length;t++){let r=rn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],c=aM(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function _0(n,e){return n[Pp]=e,n.prototype[Pp]=e,n}function aM(n){return n[Pp]}function cM(n,e,t,r){let i=n[ll];throw e[RE]&&i.unshift(e[RE]),n.message=uM(`
`+n.message,i,t,r),n[nM]=i,n[ll]=null,n}function uM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==iM?n.slice(2):n;let i=Lt(e);if(Array.isArray(e))i=e.map(Lt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Lt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(rM,`
  `)}`}var jo=_0(d0("Optional"),8);var Dg=_0(d0("SkipSelf"),4);function xo(n,e){let t=n.hasOwnProperty(ul);return t?n[ul]:null}function Tg(n,e){n.forEach(t=>Array.isArray(t)?Tg(t,e):e(t))}function I0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function dl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var xa={},pn=[],mi=new H(""),E0=new H("",-1),D0=new H(""),hl=class{get(e,t=Aa){if(t===Aa){let r=new Error(`NullInjectorError: No provider for ${Lt(e)}!`);throw r.name="NullInjectorError",r}return t}},T0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(T0||{}),Nn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Nn||{}),Mr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Mr||{});function lM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Op(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];hM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function dM(n){return n===3||n===4||n===6}function hM(n){return n.charCodeAt(0)===64}function Cg(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ME(n,t,i,null,e[++r]):ME(n,t,i,null,null))}}return n}function ME(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var C0="ng-template";function fM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&lM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(bg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function bg(n){return n.type===4&&n.value!==C0}function pM(n,e,t){let r=n.type===4&&!t?C0:n.value;return e===r}function gM(n,e,t){let r=4,i=n.attrs,o=i!==null?vM(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!fn(r)&&!fn(c))return!1;if(s&&fn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!pM(n,c,t)||c===""&&e.length===1){if(fn(r))return!1;s=!0}}else if(r&8){if(i===null||!fM(n,i,c,t)){if(fn(r))return!1;s=!0}}else{let l=e[++a],h=mM(c,i,bg(n),t);if(h===-1){if(fn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(fn(r))return!1;s=!0}}}}return fn(r)||s}function fn(n){return(n&1)===0}function mM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return wM(e,n)}function yM(n,e,t=!1){for(let r=0;r<e.length;r++)if(gM(n,e[r],t))return!0;return!1}function vM(n){for(let e=0;e<n.length;e++){let t=n[e];if(dM(t))return e}return n.length}function wM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function NE(n,e){return n?":not("+e.trim()+")":e}function _M(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!fn(s)&&(e+=NE(o,i),i=""),r=s,o=o||!fn(r);t++}return i!==""&&(e+=NE(o,i)),e}function IM(n){return n.map(_M).join(",")}function EM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!fn(i))break;i=o}r++}return{attrs:e,classes:t}}function at(n){return La(()=>{let e=R0(n),t=Re(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===T0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Nn.Emulated,styles:n.styles||pn,_:null,schemas:n.schemas||null,tView:null,id:""});M0(t);let r=n.dependencies;return t.directiveDefs=kE(r,!1),t.pipeDefs=kE(r,!0),t.id=CM(t),t})}function DM(n){return Nr(n)||b0(n)}function TM(n){return n!==null}function Mt(n){return La(()=>({type:n.type,bootstrap:n.bootstrap||pn,declarations:n.declarations||pn,imports:n.imports||pn,exports:n.exports||pn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function PE(n,e){if(n==null)return xa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Mr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Mr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Va(n){return La(()=>{let e=R0(n);return M0(e),e})}function Nr(n){return n[QR]||null}function b0(n){return n[ZR]||null}function S0(n){return n[YR]||null}function A0(n){let e=Nr(n)||b0(n)||S0(n);return e!==null?e.standalone:!1}function x0(n,e){let t=n[JR]||null;if(!t&&e===!0)throw new Error(`Type ${Lt(n)} does not have '\u0275mod' property.`);return t}function R0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||xa,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||pn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:PE(n.inputs,e),outputs:PE(n.outputs),debugInfo:null}}function M0(n){n.features?.forEach(e=>e(n))}function kE(n,e){if(!n)return null;let t=e?S0:DM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(TM)}function CM(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ja(n){return{\u0275providers:n}}function bM(...n){return{\u0275providers:N0(!0,n),\u0275fromNgModule:!0}}function N0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Tg(e,s=>{let a=s;Fp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&P0(i,o),t}function P0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Sg(i,o=>{e(o,r)})}}function Fp(n,e,t,r){if(n=rn(n),!n)return!1;let i=null,o=SE(n),s=!o&&Nr(n);if(!o&&!s){let c=n.ngModule;if(o=SE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Fp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Tg(o.imports,h=>{Fp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&P0(l,e)}if(!a){let l=xo(i)||(()=>new i);e({provide:i,useFactory:l,deps:pn},i),e({provide:D0,useValue:i,multi:!0},i),e({provide:mi,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Sg(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Sg(n,e){for(let t of n)y0(t)&&(t=t.\u0275providers),Array.isArray(t)?Sg(t,e):e(t)}var SM=Ae({provide:String,useValue:Ae});function k0(n){return n!==null&&typeof n=="object"&&SM in n}function AM(n){return!!(n&&n.useExisting)}function xM(n){return!!(n&&n.useFactory)}function Lp(n){return typeof n=="function"}var $l=new H(""),ol={},RM={},Ip;function Ag(){return Ip===void 0&&(Ip=new hl),Ip}var Gt=class{},Ra=class extends Gt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jp(e,s=>this.processProvider(s)),this.records.set(E0,Do(void 0,this)),i.has("environment")&&this.records.set(Gt,Do(void 0,this));let o=this.records.get($l);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(D0,pn,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ar(this),r=nn(void 0),i;try{return e()}finally{Ar(t),nn(r)}}get(e,t=Aa,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xE))return e[xE](this);r=Bl(r);let i,o=Ar(this),s=nn(void 0);try{if(!(r&le.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=FM(e)&&Ul(e);l&&this.injectableDefInScope(l)?c=Do(Vp(e),ol):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&le.Self?Ag():this.parent;return t=r&le.Optional&&t===Aa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ll]=a[ll]||[]).unshift(Lt(e)),o)throw a;return cM(a,e,"R3InjectorError",this.source)}else throw a}finally{nn(s),Ar(o)}}resolveInjectorInitializers(){let e=Te(null),t=Ar(this),r=nn(void 0),i;try{let o=this.get(mi,pn,le.Self);for(let s of o)s()}finally{Ar(t),nn(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Lt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(e){e=rn(e);let t=Lp(e)?e:rn(e&&e.provide),r=NM(e);if(!Lp(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Do(void 0,ol,!0),i.factory=()=>kp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===ol&&(t.value=RM,t.value=t.factory()),typeof t.value=="object"&&t.value&&OM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=rn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Vp(n){let e=Ul(n),t=e!==null?e.factory:xo(n);if(t!==null)return t;if(n instanceof H)throw new Y(204,!1);if(n instanceof Function)return MM(n);throw new Y(204,!1)}function MM(n){if(n.length>0)throw new Y(204,!1);let t=WR(n);return t!==null?()=>t.factory(n):()=>new n}function NM(n){if(k0(n))return Do(void 0,n.useValue);{let e=PM(n);return Do(e,ol)}}function PM(n,e,t){let r;if(Lp(n)){let i=rn(n);return xo(i)||Vp(i)}else if(k0(n))r=()=>rn(n.useValue);else if(xM(n))r=()=>n.useFactory(...kp(n.deps||[]));else if(AM(n))r=()=>O(rn(n.useExisting));else{let i=rn(n&&(n.useClass||n.provide));if(kM(n))r=()=>new i(...kp(n.deps));else return xo(i)||Vp(i)}return r}function Do(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function kM(n){return!!n.deps}function OM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function FM(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function jp(n,e){for(let t of n)Array.isArray(t)?jp(t,e):t&&y0(t)?jp(t.\u0275providers,e):e(t)}function yn(n,e){n instanceof Ra&&n.assertNotDestroyed();let t,r=Ar(n),i=nn(void 0);try{return e()}finally{Ar(r),nn(i)}}function O0(){return v0()!==void 0||oM()!=null}function LM(n){if(!O0())throw new Y(-203,!1)}function VM(n){let e=rr.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function jM(n){return typeof n=="function"}var Wt=0,ue=1,ie=2,_t=3,gn=4,vn=5,mn=6,OE=7,Ht=8,Ro=9,Pn=10,st=11,Ma=12,FE=13,Uo=14,Kt=15,Mo=16,To=17,No=18,ql=19,F0=20,Rr=21,Ep=22,on=23,xt=25,L0=1,Na=6,tr=7,fl=8,pl=9,wt=10,gl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(gl||{});function Mn(n){return Array.isArray(n)&&typeof n[L0]=="object"}function On(n){return Array.isArray(n)&&n[L0]===!0}function V0(n){return(n.flags&4)!==0}function Ua(n){return n.componentOffset>-1}function j0(n){return(n.flags&1)===1}function Ba(n){return!!n.template}function ml(n){return(n[ie]&512)!==0}var Up=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function U0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function zl(){return B0}function B0(n){return n.type.prototype.ngOnChanges&&(n.setInput=BM),UM}zl.ngInherit=!0;function UM(){let n=q0(this),e=n?.current;if(e){let t=n.previous;if(t===xa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function BM(n,e,t,r,i){let o=this.declaredInputs[r],s=q0(n)||$M(n,{previous:xa,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Up(l&&l.currentValue,t,c===xa),U0(n,e,i,t)}var $0="__ngSimpleChanges__";function q0(n){return n[$0]||null}function $M(n,e){return n[$0]=e}var LE=null;var xr=function(n,e,t){LE?.(n,e,t)},z0="svg",qM="math";function kn(n){for(;Array.isArray(n);)n=n[Wt];return n}function zM(n,e){return kn(e[n])}function wn(n,e){return kn(e[n.index])}function xg(n,e){return n.data[e]}function Bo(n,e){let t=e[n];return Mn(t)?t:t[Wt]}function Rg(n){return(n[ie]&128)===128}function HM(n){return On(n[_t])}function Po(n,e){return e==null?null:n[e]}function H0(n){n[To]=0}function G0(n){n[ie]&1024||(n[ie]|=1024,Rg(n)&&Gl(n))}function GM(n,e){for(;n>0;)e=e[Uo],n--;return e}function Hl(n){return!!(n[ie]&9216||n[on]?.dirty)}function Bp(n){n[Pn].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),Hl(n)&&Gl(n)}function Gl(n){n[Pn].changeDetectionScheduler?.notify(0);let e=yi(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Rg(e)));)e=yi(e)}function W0(n,e){if((n[ie]&256)===256)throw new Y(911,!1);n[Rr]===null&&(n[Rr]=[]),n[Rr].push(e)}function WM(n,e){if(n[Rr]===null)return;let t=n[Rr].indexOf(e);t!==-1&&n[Rr].splice(t,1)}function yi(n){let e=n[_t];return On(e)?e[_t]:e}var he={lFrame:rD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var K0=!1;function KM(){return he.lFrame.elementDepthCount}function QM(){he.lFrame.elementDepthCount++}function ZM(){he.lFrame.elementDepthCount--}function Q0(){return he.bindingsEnabled}function $a(){return he.skipHydrationRootTNode!==null}function YM(n){return he.skipHydrationRootTNode===n}function JM(n){he.skipHydrationRootTNode=n}function XM(){he.skipHydrationRootTNode=null}function je(){return he.lFrame.lView}function Ii(){return he.lFrame.tView}function Fn(){let n=Z0();for(;n!==null&&n.type===64;)n=n.parent;return n}function Z0(){return he.lFrame.currentTNode}function eN(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function qa(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function Y0(){return he.lFrame.isParent}function tN(){he.lFrame.isParent=!1}function J0(){return K0}function VE(n){K0=n}function X0(){let n=he.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function nN(){return he.lFrame.bindingIndex}function rN(n){return he.lFrame.bindingIndex=n}function Mg(){return he.lFrame.bindingIndex++}function iN(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function oN(){return he.lFrame.inI18n}function sN(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,$p(e)}function aN(){return he.lFrame.currentDirectiveIndex}function $p(n){he.lFrame.currentDirectiveIndex=n}function eD(n){he.lFrame.currentQueryIndex=n}function cN(n){let e=n[ue];return e.type===2?e.declTNode:e.type===1?n[vn]:null}function tD(n,e,t){if(t&le.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&le.Host);)if(i=cN(o),i===null||(o=o[Uo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=he.lFrame=nD();return r.currentTNode=e,r.lView=n,!0}function Ng(n){let e=nD(),t=n[ue];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nD(){let n=he.lFrame,e=n===null?null:n.child;return e===null?rD(n):e}function rD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function iD(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var oD=iD;function Pg(){let n=iD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function uN(n){return(he.lFrame.contextLView=GM(n,he.lFrame.contextLView))[Ht]}function za(){return he.lFrame.selectedIndex}function vi(n){he.lFrame.selectedIndex=n}function lN(){let n=he.lFrame;return xg(n.tView,n.selectedIndex)}function $o(){he.lFrame.currentNamespace=z0}function Wl(){dN()}function dN(){he.lFrame.currentNamespace=null}function sD(){return he.lFrame.currentNamespace}var aD=!0;function kg(){return aD}function Or(n){aD=n}function hN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=B0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Og(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function sl(n,e,t){cD(n,e,3,t)}function al(n,e,t,r){(n[ie]&3)===t&&cD(n,e,t,r)}function Dp(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function cD(n,e,t,r){let i=r!==void 0?n[To]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[To]+=65536),(a<o||o==-1)&&(fN(n,t,e,c),n[To]=(n[To]&4294901760)+c+2),c++}function jE(n,e){xr(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),xr(5,n,e)}}function fN(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ie]>>14<n[To]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,jE(a,o)):jE(a,o)}var Ao=-1,Pa=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function pN(n){return n instanceof Pa}function gN(n){return(n.flags&8)!==0}function mN(n){return(n.flags&16)!==0}var Tp={},qp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Bl(r);let i=this.injector.get(e,Tp,r);return i!==Tp||t===Tp?i:this.parentInjector.get(e,t,r)}};function uD(n){return n!==Ao}function yl(n){return n&32767}function yN(n){return n>>16}function vl(n,e){let t=yN(n),r=e;for(;t>0;)r=r[Uo],t--;return r}var zp=!0;function UE(n){let e=zp;return zp=n,e}var vN=256,lD=vN-1,dD=5,wN=0,Rn={};function _N(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ca)&&(r=t[Ca]),r==null&&(r=t[Ca]=wN++);let i=r&lD,o=1<<i;e.data[n+(i>>dD)]|=o}function hD(n,e){let t=fD(n,e);if(t!==-1)return t;let r=e[ue];r.firstCreatePass&&(n.injectorIndex=e.length,Cp(r.data,n),Cp(e,null),Cp(r.blueprint,null));let i=Fg(n,e),o=n.injectorIndex;if(uD(i)){let s=yl(i),a=vl(i,e),c=a[ue].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Cp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Fg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=vD(i),r===null)return Ao;if(t++,i=i[Uo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ao}function IN(n,e,t){_N(n,e,t)}function pD(n,e,t){if(t&le.Optional||n!==void 0)return n;Eg(e,"NodeInjector")}function gD(n,e,t,r){if(t&le.Optional&&r===void 0&&(r=null),!(t&(le.Self|le.Host))){let i=n[Ro],o=nn(void 0);try{return i?i.get(e,r,t&le.Optional):w0(e,r,t&le.Optional)}finally{nn(o)}}return pD(r,e,t)}function mD(n,e,t,r=le.Default,i){if(n!==null){if(e[ie]&2048&&!(r&le.Self)){let s=bN(n,e,t,r,Rn);if(s!==Rn)return s}let o=yD(n,e,t,r,Rn);if(o!==Rn)return o}return gD(e,t,r,i)}function yD(n,e,t,r,i){let o=TN(t);if(typeof o=="function"){if(!tD(e,n,r))return r&le.Host?pD(i,t,r):gD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))Eg(t);else return s}finally{oD()}}else if(typeof o=="number"){let s=null,a=fD(n,e),c=Ao,l=r&le.Host?e[Kt][vn]:null;for((a===-1||r&le.SkipSelf)&&(c=a===-1?Fg(n,e):e[a+8],c===Ao||!$E(r,!1)?a=-1:(s=e[ue],a=yl(c),e=vl(c,e)));a!==-1;){let h=e[ue];if(BE(o,a,h.data)){let p=EN(a,e,t,s,r,l);if(p!==Rn)return p}c=e[a+8],c!==Ao&&$E(r,e[ue].data[a+8]===l)&&BE(o,a,e)?(s=h,a=yl(c),e=vl(c,e)):a=-1}}return i}function EN(n,e,t,r,i,o){let s=e[ue],a=s.data[n+8],c=r==null?Ua(a)&&zp:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,h=DN(a,s,t,c,l);return h!==null?ka(e,s,h,a):Rn}function DN(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let T=s[y];if(y<c&&t===T||y>=c&&T.type===t)return y}if(i){let y=s[c];if(y&&Ba(y)&&y.type===t)return c}return null}function ka(n,e,t,r){let i=n[t],o=e.data;if(pN(i)){let s=i;s.resolving&&eM(XR(o[t]));let a=UE(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?nn(s.injectImpl):null,h=tD(n,r,le.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&hN(t,o[t],e)}finally{l!==null&&nn(l),UE(a),s.resolving=!1,oD()}}return i}function TN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ca)?n[Ca]:void 0;return typeof e=="number"?e>=0?e&lD:CN:e}function BE(n,e,t){let r=1<<n;return!!(t[e+(n>>dD)]&r)}function $E(n,e){return!(n&le.Self)&&!(n&le.Host&&e)}var gi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mD(this._tNode,this._lView,e,Bl(r),t)}};function CN(){return new gi(Fn(),je())}function Lg(n){return La(()=>{let e=n.prototype.constructor,t=e[ul]||Hp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ul]||Hp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Hp(n){return f0(n)?()=>{let e=Hp(rn(n));return e&&e()}:xo(n)}function bN(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!(s[ie]&512);){let a=yD(o,s,t,r|le.Self,Rn);if(a!==Rn)return a;let c=o.parent;if(!c){let l=s[F0];if(l){let h=l.get(t,Rn,r);if(h!==Rn)return h}c=vD(s),s=s[Uo]}o=c}return i}function vD(n){let e=n[ue],t=e.type;return t===2?e.declTNode:t===1?n[vn]:null}function qE(n,e=null,t=null,r){let i=wD(n,e,t,r);return i.resolveInjectorInitializers(),i}function wD(n,e=null,t=null,r,i=new Set){let o=[t||pn,bM(n)];return r=r||(typeof n=="object"?void 0:Lt(n)),new Ra(o,e||Ag(),r||null,i)}var Qt=class n{static{this.THROW_IF_NOT_FOUND=Aa}static{this.NULL=new hl}static create(e,t){if(Array.isArray(e))return qE({name:""},t,e,"");{let r=e.name??"";return qE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=z({token:n,providedIn:"any",factory:()=>O(E0)})}static{this.__NG_ELEMENT_ID__=-1}};var SN=new H("");SN.__NG_ELEMENT_ID__=n=>{let e=Fn();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(n&le.Optional)return null;throw new Y(204,!1)};var AN="ngOriginalError";function bp(n){return n[AN]}var _D=!0,Vg=(()=>{class n{static{this.__NG_ELEMENT_ID__=xN}static{this.__NG_ENV_ID__=t=>t}}return n})(),Gp=class extends Vg{constructor(e){super(),this._lView=e}onDestroy(e){return W0(this._lView,e),()=>WM(this._lView,e)}};function xN(){return new Gp(je())}var Ei=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new dt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Wp=class extends Ge{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,O0()&&(this.destroyRef=F(Vg,{optional:!0})??void 0,this.pendingTasks=F(Ei,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof qe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},At=Wp;function wl(...n){}function ID(n){let e,t;function r(){n=wl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function zE(n){return queueMicrotask(()=>n()),()=>{n=wl}}var jg="isAngularZone",_l=jg+"_ID",RN=0,me=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new At(!1),this.onMicrotaskEmpty=new At(!1),this.onStable=new At(!1),this.onError=new At(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=_D}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,PN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(jg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,MN,wl,wl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},MN={};function Ug(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function NN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){ID(()=>{n.callbackScheduled=!1,Kp(n),n.isCheckStableRunning=!0,Ug(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Kp(n)}function PN(n){let e=()=>{NN(n)},t=RN++;n._inner=n._inner.fork({name:"angular",properties:{[jg]:!0,[_l]:t,[_l+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(kN(c))return r.invokeTask(o,s,a,c);try{return HE(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),GE(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return HE(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!ON(c)&&e(),GE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Kp(n),Ug(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Kp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function HE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function GE(n){n._nesting--,Ug(n)}var Il=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new At,this.onMicrotaskEmpty=new At,this.onStable=new At,this.onError=new At}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function kN(n){return ED(n,"__ignore_ng_zone__")}function ON(n){return ED(n,"__scheduler_tick__")}function ED(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function FN(n="zone.js",e){return n==="noop"?new Il:n==="zone.js"?new me(e):n}var nr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&bp(e);for(;t&&bp(t);)t=bp(t);return t||null}},LN=new H("",{providedIn:"root",factory:()=>{let n=F(me),e=F(nr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function VN(){return Kl(Fn(),je())}function Kl(n,e){return new Ql(wn(n,e))}var Ql=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=VN}}return n})();var jN="ngSkipHydration",UN="ngskiphydration";function DD(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===UN)return!0}return!1}function TD(n){return n.hasAttribute(jN)}function El(n){return(n.flags&128)===128}function BN(n){if(El(n))return!0;let e=n.parent;for(;e;){if(El(n)||DD(e))return!0;e=e.parent}return!1}var CD=new Map,$N=0;function qN(){return $N++}function zN(n){CD.set(n[ql],n)}function Qp(n){CD.delete(n[ql])}var WE="__ngContext__";function wi(n,e){Mn(e)?(n[WE]=e[ql],zN(e)):n[WE]=e}function bD(n){return AD(n[Ma])}function SD(n){return AD(n[gn])}function AD(n){for(;n!==null&&!On(n);)n=n[gn];return n}var Zp;function xD(n){Zp=n}function Zl(){if(Zp!==void 0)return Zp;if(typeof document<"u")return document;throw new Y(210,!1)}var Ha=new H("",{providedIn:"root",factory:()=>HN}),HN="ng",Bg=new H(""),ht=new H("",{providedIn:"platform",factory:()=>"unknown"});var $g=new H("",{providedIn:"root",factory:()=>Zl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function GN(){let n=new qo;return F(ht)==="browser"&&(n.store=WN(Zl(),F(Ha))),n}var qo=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=z({token:n,providedIn:"root",factory:GN})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function WN(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var RD="h",MD="b",Yp=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Yp||{}),KN="e",QN="t",qg="c",ND="x",Dl="r",ZN="i",YN="n",PD="d";var JN="__nghData__",kD=JN,Sp="ngh",XN="nghm",OD=()=>null;function eP(n,e,t=!1){let r=n.getAttribute(Sp);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let h=e.get(qo,null,{optional:!0});h!==null&&(c=h.get(kD,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Yl(l,0,n.nextSibling)),a?n.setAttribute(Sp,a):n.removeAttribute(Sp),l}function tP(){OD=eP}function zg(n,e,t=!1){return OD(n,e,t)}function nP(n){let e=n._lView;return e[ue].type===2?null:(ml(e)&&(e=e[xt]),e)}function rP(n){return n.textContent?.replace(/\s/gm,"")}function iP(n){let e=Zl(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=rP(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Yl(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Jp(n,e){return n.segmentHeads?.[e]??null}function oP(n,e){let t=n.data,r=t[KN]?.[e]??null;return r===null&&t[qg]?.[e]&&(r=Hg(n,e)),r}function FD(n,e){return n.data[qg]?.[e]??null}function Hg(n,e){let t=FD(n,e)??[],r=0;for(let i of t)r+=i[Dl]*(i[ND]??1);return r}function sP(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[PD];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Ga(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[PD];n.disconnectedNodes=t?new Set(t):null}return!!sP(n)?.has(e)}var tl=new H(""),LD=!1,VD=new H("",{providedIn:"root",factory:()=>LD});var Tl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${l0})`}};function Gg(n){return n instanceof Tl?n.changingThisBreaksApplicationSecurity:n}function jD(n,e){let t=aP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${l0})`)}return t===e}function aP(n){return n instanceof Tl&&n.getTypeName()||null}var cP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function UD(n){return n=String(n),n.match(cP)?n:"unsafe:"+n}var Wg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Wg||{});function Jl(n){let e=uP();return e?e.sanitize(Wg.URL,n)||"":jD(n,"URL")?Gg(n):UD(Sa(n))}function uP(){let n=je();return n&&n[Pn].sanitizer}var lP=/^>|^->|<!--|-->|--!>|<!-$/g,dP=/(<|>)/g,hP="\u200B$1\u200B";function fP(n){return n.replace(lP,e=>e.replace(dP,hP))}function pP(n){return n.ownerDocument.body}function BD(n){return n instanceof Function?n():n}function Da(n){return(n??F(Qt)).get(ht)==="browser"}var Di=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Di||{}),gP;function Kg(n,e){return gP(n,e)}function Co(n,e,t,r,i){if(r!=null){let o,s=!1;On(r)?o=r:Mn(r)&&(s=!0,r=r[Wt]);let a=kn(r);n===0&&t!==null?i==null?GD(e,t,a):Cl(e,t,a,i||null,!0):n===1&&t!==null?Cl(e,t,a,i||null,!0):n===2?Jg(e,a,s):n===3&&e.destroyNode(a),o!=null&&RP(e,n,o,t,i)}}function $D(n,e){return n.createText(e)}function mP(n,e,t){n.setValue(e,t)}function qD(n,e){return n.createComment(fP(e))}function Qg(n,e,t){return n.createElement(e,t)}function yP(n,e){zD(n,e),e[Wt]=null,e[vn]=null}function vP(n,e,t,r,i,o){r[Wt]=i,r[vn]=e,ed(n,r,t,1,i,o)}function zD(n,e){e[Pn].changeDetectionScheduler?.notify(9),ed(n,e,e[st],2,null,null)}function wP(n){let e=n[Ma];if(!e)return Ap(n[ue],n);for(;e;){let t=null;if(Mn(e))t=e[Ma];else{let r=e[wt];r&&(t=r)}if(!t){for(;e&&!e[gn]&&e!==n;)Mn(e)&&Ap(e[ue],e),e=e[_t];e===null&&(e=n),Mn(e)&&Ap(e[ue],e),t=e&&e[gn]}e=t}}function _P(n,e,t,r){let i=wt+r,o=t.length;r>0&&(t[i-1][gn]=e),r<o-wt?(e[gn]=t[i],I0(t,wt+r,e)):(t.push(e),e[gn]=null),e[_t]=t;let s=e[Mo];s!==null&&t!==s&&HD(s,e);let a=e[No];a!==null&&a.insertView(n),Bp(e),e[ie]|=128}function HD(n,e){let t=n[pl],r=e[_t];if(Mn(r))n[ie]|=gl.HasTransplantedViews;else{let i=r[_t][Kt];e[Kt]!==i&&(n[ie]|=gl.HasTransplantedViews)}t===null?n[pl]=[e]:t.push(e)}function Zg(n,e){let t=n[pl],r=t.indexOf(e);t.splice(r,1)}function Oa(n,e){if(n.length<=wt)return;let t=wt+e,r=n[t];if(r){let i=r[Mo];i!==null&&i!==n&&Zg(i,r),e>0&&(n[t-1][gn]=r[gn]);let o=dl(n,wt+e);yP(r[ue],r);let s=o[No];s!==null&&s.detachView(o[ue]),r[_t]=null,r[gn]=null,r[ie]&=-129}return r}function Xl(n,e){if(!(e[ie]&256)){let t=e[st];t.destroyNode&&ed(n,e,t,3,null,null),wP(e)}}function Ap(n,e){if(e[ie]&256)return;let t=Te(null);try{e[ie]&=-129,e[ie]|=256,e[on]&&Xf(e[on]),EP(n,e),IP(n,e),e[ue].type===1&&e[st].destroy();let r=e[Mo];if(r!==null&&On(e[_t])){r!==e[_t]&&Zg(r,e);let i=e[No];i!==null&&i.detachView(n)}Qp(e)}finally{Te(t)}}function IP(n,e){let t=n.cleanup,r=e[OE];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[OE]=null);let i=e[Rr];if(i!==null){e[Rr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function EP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Pa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];xr(4,a,c);try{c.call(a)}finally{xr(5,a,c)}}else{xr(4,i,o);try{o.call(i)}finally{xr(5,i,o)}}}}}function DP(n,e,t){return TP(n,e.parent,t)}function TP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Wt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Nn.None||o===Nn.Emulated)return null}return wn(r,t)}}function Cl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function GD(n,e,t){n.appendChild(e,t)}function KE(n,e,t,r,i){r!==null?Cl(n,e,t,r,i):GD(n,e,t)}function WD(n,e){return n.parentNode(e)}function CP(n,e){return n.nextSibling(e)}function bP(n,e,t){return AP(n,e,t)}function SP(n,e,t){return n.type&40?wn(n,t):null}var AP=SP,QE;function Yg(n,e,t,r){let i=DP(n,r,e),o=e[st],s=r.parent||e[vn],a=bP(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)KE(o,i,t[c],a,!1);else KE(o,i,t,a,!1);QE!==void 0&&QE(o,r,e,t,i)}function Ta(n,e){if(e!==null){let t=e.type;if(t&3)return wn(e,n);if(t&4)return Xp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ta(n,r);{let i=n[e.index];return On(i)?Xp(-1,i):kn(i)}}else{if(t&128)return Ta(n,e.next);if(t&32)return Kg(e,n)()||kn(n[e.index]);{let r=KD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=yi(n[Kt]);return Ta(i,r)}else return Ta(n,e.next)}}}return null}function KD(n,e){if(e!==null){let r=n[Kt][vn],i=e.projection;return r.projection[i]}return null}function Xp(n,e){let t=wt+n+1;if(t<e.length){let r=e[t],i=r[ue].firstChild;if(i!==null)return Ta(r,i)}return e[tr]}function Jg(n,e,t){n.removeChild(null,e,t)}function QD(n){n.textContent=""}function Xg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&wi(kn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Xg(n,e,t.child,r,i,o,!1),Co(e,n,i,a,o);else if(c&32){let l=Kg(t,r),h;for(;h=l();)Co(e,n,i,h,o);Co(e,n,i,a,o)}else c&16?xP(n,e,r,t,i,o):Co(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ed(n,e,t,r,i,o){Xg(t,r,n.firstChild,e,i,o,!1)}function xP(n,e,t,r,i,o){let s=t[Kt],c=s[vn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Co(e,n,i,h,o)}else{let l=c,h=s[_t];El(r)&&(l.flags|=128),Xg(n,e,l,h,i,o,!0)}}function RP(n,e,t,r,i){let o=t[tr],s=kn(t);o!==s&&Co(e,n,r,o,i);for(let a=wt;a<t.length;a++){let c=t[a];ed(c[ue],c,n,e,r,o)}}function MP(n,e,t){n.setAttribute(e,"style",t)}function ZD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function YD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Op(n,e,r),i!==null&&ZD(n,e,i),o!==null&&MP(n,e,o)}var Ti={};function pe(n=1){JD(Ii(),je(),za()+n,!1)}function JD(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&sl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&al(e,o,0,t)}vi(t)}function ze(n,e=le.Default){let t=je();if(t===null)return O(n,e);let r=Fn();return mD(r,t,rn(n),e)}function XD(){let n="invalid";throw new Error(n)}function eT(n,e,t,r,i,o){let s=Te(null);try{let a=null;i&Mr.SignalBased&&(a=e[r][ZI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Mr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):U0(e,a,r,o)}finally{Te(s)}}function NP(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)vi(~i);else{let o=i,s=t[++r],a=t[++r];sN(s,o);let c=e[o];a(2,c)}}}finally{vi(-1)}}function td(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Wt]=i,p[ie]=r|4|128|8|64,(l!==null||n&&n[ie]&2048)&&(p[ie]|=2048),H0(p),p[_t]=p[Uo]=n,p[Ht]=t,p[Pn]=s||n&&n[Pn],p[st]=a||n&&n[st],p[Ro]=c||n&&n[Ro]||null,p[vn]=o,p[ql]=qN(),p[mn]=h,p[F0]=l,p[Kt]=e.type==2?n[Kt]:p,p}function nd(n,e,t,r,i){let o=n.data[e];if(o===null)o=PP(n,e,t,r,i),oN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=eN();o.injectorIndex=s===null?-1:s.injectorIndex}return qa(o,!0),o}function PP(n,e,t,r,i){let o=Z0(),s=Y0(),a=s?o:o&&o.parent,c=n.data[e]=jP(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function tT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function nT(n,e,t,r,i){let o=za(),s=r&2;try{vi(-1),s&&e.length>xt&&JD(n,e,xt,!1),xr(s?2:0,i),t(r,i)}finally{vi(o),xr(s?3:1,i)}}function rT(n,e,t){if(V0(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Te(r)}}}function iT(n,e,t){Q0()&&(GP(n,e,t,wn(t,e)),(t.flags&64)===64&&lT(n,e,t))}function oT(n,e,t=wn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function sT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=em(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function em(n,e,t,r,i,o,s,a,c,l,h){let p=xt+r,m=p+i,y=kP(p,m),T=typeof l=="function"?l():l;return y[ue]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:h}}function kP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ti);return t}function OP(n,e,t,r){let o=r.get(VD,LD)||t===Nn.ShadowDom,s=n.selectRootElement(e,o);return FP(s),s}function FP(n){aT(n)}var aT=()=>null;function LP(n){TD(n)?QD(n):iP(n)}function VP(){aT=LP}function jP(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return $a()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ZE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Mr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?YE(r,t,l,a,c):YE(r,t,l,a)}return r}function YE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function UP(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,T=m?m.outputs:null;c=ZE(0,p.inputs,h,c,y),l=ZE(1,p.outputs,h,l,T);let A=c!==null&&s!==null&&!bg(e)?tk(c,h,s):null;a.push(A)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function BP(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $P(n,e,t,r,i,o,s,a){let c=wn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(tm(n,t,h,r,i),Ua(e)&&qP(t,e.index)):e.type&3?(r=BP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function qP(n,e){let t=Bo(e,n);t[ie]&16||(t[ie]|=64)}function cT(n,e,t,r){if(Q0()){let i=r===null?null:{"":-1},o=KP(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&uT(n,e,t,s,i,a),i&&QP(t,r,i)}t.mergedAttrs=Cg(t.mergedAttrs,t.attrs)}function uT(n,e,t,r,i,o){for(let l=0;l<r.length;l++)IN(hD(t,e),n,r[l].type);YP(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=tT(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Cg(t.mergedAttrs,h.hostAttrs),JP(n,t,e,c,h),ZP(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}UP(n,t,o)}function zP(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;HP(s)!=a&&s.push(a),s.push(t,r,o)}}function HP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function GP(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Ua(t)&&XP(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||hD(t,e),wi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=ka(e,n,a,t);if(wi(l,e),s!==null&&ek(e,a-i,l,c,t,s),Ba(c)){let h=Bo(t.index,e);h[Ht]=ka(e,n,a,t)}}}function lT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=aN();try{vi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];$p(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&WP(c,l)}}finally{vi(-1),$p(s)}}function WP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function KP(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(yM(e,s.selectors,!1))if(r||(r=[]),Ba(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;eg(n,e,c)}else r.unshift(s),eg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function eg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function QP(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Y(-301,!1);r.push(e[i],o)}}}function ZP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ba(e)&&(t[""]=n)}}function YP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function JP(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=xo(i.type,!0)),s=new Pa(o,Ba(i),ze);n.blueprint[r]=s,t[r]=s,zP(n,e,r,tT(n,t,i.hostVars,Ti),i)}function XP(n,e,t){let r=wn(e,n),i=sT(t),o=n[Pn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=rd(n,td(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function ek(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];eT(r,t,c,l,h,p)}}function tk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function dT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function hT(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];eD(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function rd(n,e){return n[Ma]?n[FE][gn]=e:n[Ma]=e,n[FE]=e,e}function tg(n,e,t){eD(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function nk(n,e){let t=n[Ro],r=t?t.get(nr,null):null;r&&r.handleError(e)}function tm(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];eT(h,l,r,a,c,i)}}function fT(n,e,t){let r=zM(e,n);mP(n[st],r,t)}function rk(n,e){let t=Bo(e,n),r=t[ue];ik(r,t);let i=t[Wt];i!==null&&t[mn]===null&&(t[mn]=zg(i,t[Ro])),nm(r,t,t[Ht])}function ik(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function nm(n,e,t){Ng(e);try{let r=n.viewQuery;r!==null&&tg(1,r,t);let i=n.template;i!==null&&nT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[No]?.finishViewCreation(n),n.staticContentQueries&&hT(n,e),n.staticViewQueries&&tg(2,n.viewQuery,t);let o=n.components;o!==null&&ok(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,Pg()}}function ok(n,e){for(let t=0;t<e.length;t++)rk(n,e[t])}function rm(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[ie]&4096?4096:16,c=td(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Mo]=l;let h=n[No];return h!==null&&(c[No]=h.createEmbeddedView(o)),nm(o,c,t),c}finally{Te(i)}}function sk(n,e){let t=wt+e;if(t<n.length)return n[t]}function bl(n,e){return!e||e.firstChild===null||El(n)}function im(n,e,t,r=!0){let i=e[ue];if(_P(i,e,n,t),r){let s=Xp(t,n),a=e[st],c=WD(a,n[tr]);c!==null&&vP(i,n[vn],a,e,c,s)}let o=e[mn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ak(n,e){let t=Oa(n,e);return t!==void 0&&Xl(t[ue],t),t}function Sl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(kn(o)),On(o)&&ck(o,r);let s=t.type;if(s&8)Sl(n,e,t.child,r);else if(s&32){let a=Kg(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=KD(e,t);if(Array.isArray(a))r.push(...a);else{let c=yi(e[Kt]);Sl(c[ue],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function ck(n,e){for(let t=wt;t<n.length;t++){let r=n[t],i=r[ue].firstChild;i!==null&&Sl(r[ue],r,i,e)}n[tr]!==n[Wt]&&e.push(n[tr])}var pT=[];function uk(n){return n[on]??lk(n)}function lk(n){let e=pT.pop()??Object.create(hk);return e.lView=n,e}function dk(n){n.lView[on]!==n&&(n.lView=null,pT.push(n))}var hk=Re(j({},Zf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Gl(n.lView)},consumerOnSignalRead(){this.lView[on]=this}});function fk(n){let e=n[on]??Object.create(pk);return e.lView=n,e}var pk=Re(j({},Zf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=yi(n.lView);for(;e&&!gT(e[ue]);)e=yi(e);e&&G0(e)},consumerOnSignalRead(){this.lView[on]=this}});function gT(n){return n.type!==2}var gk=100;function mT(n,e=!0,t=0){let r=n[Pn],i=r.rendererFactory,o=!1;o||i.begin?.();try{mk(n,t)}catch(s){throw e&&nk(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function mk(n,e){let t=J0();try{VE(!0),ng(n,e);let r=0;for(;Hl(n);){if(r===gk)throw new Y(103,!1);r++,ng(n,1)}}finally{VE(t)}}function yk(n,e,t,r){let i=e[ie];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Pn].inlineEffectRunner?.flush(),Ng(e);let a=!0,c=null,l=null;o||(gT(n)?(l=uk(e),c=Yf(l)):YI()===null?(a=!1,l=fk(e),c=Yf(l)):e[on]&&(Xf(e[on]),e[on]=null));try{H0(e),rN(n.bindingStartIndex),t!==null&&nT(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&sl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&al(e,y,0,null),Dp(e,0)}if(s||vk(e),yT(e,0),n.contentQueries!==null&&hT(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&sl(e,y)}else{let y=n.contentHooks;y!==null&&al(e,y,1),Dp(e,1)}NP(n,e);let p=n.components;p!==null&&wT(e,p,0);let m=n.viewQuery;if(m!==null&&tg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&sl(e,y)}else{let y=n.viewHooks;y!==null&&al(e,y,2),Dp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ep]){for(let y of e[Ep])y();e[Ep]=null}o||(e[ie]&=-73)}catch(h){throw o||Gl(e),h}finally{l!==null&&(JI(l,c),a&&dk(l)),Pg()}}function yT(n,e){for(let t=bD(n);t!==null;t=SD(t))for(let r=wt;r<t.length;r++){let i=t[r];vT(i,e)}}function vk(n){for(let e=bD(n);e!==null;e=SD(e)){if(!(e[ie]&gl.HasTransplantedViews))continue;let t=e[pl];for(let r=0;r<t.length;r++){let i=t[r];G0(i)}}}function wk(n,e,t){let r=Bo(e,n);vT(r,t)}function vT(n,e){Rg(n)&&ng(n,e)}function ng(n,e){let r=n[ue],i=n[ie],o=n[on],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Jf(o)),s||=!1,o&&(o.dirty=!1),n[ie]&=-9217,s)yk(r,n,r.template,n[Ht]);else if(i&8192){yT(n,1);let a=r.components;a!==null&&wT(n,a,1)}}function wT(n,e,t){for(let r=0;r<e.length;r++)wk(n,e[r],t)}function _T(n,e){let t=J0()?64:1088;for(n[Pn].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=yi(n);if(ml(n)&&!r)return n;n=r}return null}var _i=class{get rootNodes(){let e=this._lView,t=e[ue];return Sl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ht]}set context(e){this._lView[Ht]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_t];if(On(e)){let t=e[fl],r=t?t.indexOf(this):-1;r>-1&&(Oa(e,r),dl(t,r))}this._attachedToViewContainer=!1}Xl(this._lView[ue],this._lView)}onDestroy(e){W0(this._lView,e)}markForCheck(){_T(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){Bp(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,mT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ml(this._lView),t=this._lView[Mo];t!==null&&!e&&Zg(t,this._lView),zD(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=ml(this._lView),r=this._lView[Mo];r!==null&&!t&&HD(r,this._lView),Bp(this._lView)}},id=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ek}}return n})(),_k=id,Ik=class extends _k{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=rm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new _i(i)}};function Ek(){return Dk(Fn(),je())}function Dk(n,e){return n.type&4?new Ik(e,n,Kl(n,e)):null}var Tk=new RegExp(`^(\\d+)*(${MD}|${RD})*(.*)`);function Ck(n){let e=n.match(Tk),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,l,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(l,p)}return[s,...a]}function bk(n){return!n.prev&&n.parent?.type===8}function xp(n){return n.index-xt}function Sk(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function od(n,e,t,r){let i=xp(r),o=Sk(n,i);if(o===void 0){let s=n.data[YN];if(s?.[i])o=xk(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(bk(r)){let l=xp(r.parent);o=Jp(n,l)}else{let l=wn(c,t);if(a)o=l.firstChild;else{let h=xp(c),p=Jp(n,h);if(c.type===2&&p){let y=Hg(n,h)+1;o=sd(y,p)}else o=l.nextSibling}}}}return o}function sd(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function Ak(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case Yp.FirstChild:t=t.firstChild;break;case Yp.NextSibling:t=t.nextSibling;break}}return t}function xk(n,e){let[t,...r]=Ck(n),i;if(t===RD)i=e[Kt][Wt];else if(t===MD)i=pP(e[Kt][Wt]);else{let o=Number(t);i=kn(e[o+xt])}return Ak(i,r)}var Rk=!1;function Mk(n){Rk=n}function Nk(n){let e=n[mn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[st];for(let o of r.values())Pk(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function Pk(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-xt);i&&Jg(n,i,!1)}}function IT(n){let e=n[Na]??[],r=n[_t][st];for(let i of e)kk(i,r);n[Na]=pn}function kk(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Dl];for(;t<i;){let o=r.nextSibling;Jg(e,r,!1),r=o,t++}}}function ET(n){IT(n);let e=n[Wt];Mn(e)&&Al(e);for(let t=wt;t<n.length;t++)Al(n[t])}function Al(n){Nk(n);let e=n[ue];for(let t=xt;t<e.bindingStartIndex;t++)if(On(n[t])){let r=n[t];ET(r)}else Mn(n[t])&&Al(n[t])}function Ok(n){let e=n._views;for(let t of e){let r=nP(t);r!==null&&r[Wt]!==null&&(Mn(r)?Al(r):ET(r))}}function Fk(n,e){let t=[];for(let r of e)for(let i=0;i<(r[ND]??1);i++){let o={data:r,firstChild:null};r[Dl]>0&&(o.firstChild=n,n=sd(r[Dl],n)),t.push(o)}return[n,t]}var DT=()=>null;function Lk(n,e){let t=n[Na];return!e||t===null||t.length===0?null:t[0].data[ZN]===e?t.shift():(IT(n),null)}function Vk(){DT=Lk}function xl(n,e){return DT(n,e)}var ko=class{},om=new H("",{providedIn:"root",factory:()=>!1});var TT=new H(""),CT=new H(""),rg=class{},Rl=class{};function jk(n){let e=Error(`No component factory found for ${Lt(n)}.`);return e[Uk]=n,e}var Uk="ngComponent";var ig=class{resolveComponentFactory(e){throw jk(e)}},Oo=class{static{this.NULL=new ig}},Fo=class{};var Bk=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}}return n})();function og(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=CE(i,a);else if(o==2){let c=a,l=e[++s];r=CE(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ml=class extends Oo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Nr(e);return new Lo(t,this.ngModule)}};function JE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Mr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Mr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function $k(n){let e=n.toLowerCase();return e==="svg"?z0:e==="math"?qM:null}var Lo=class extends Rl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=JE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return JE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=IM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Te(null);try{i=i||this.ngModule;let s=i instanceof Gt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new qp(e,s):e,c=a.get(Fo,null);if(c===null)throw new Y(407,!1);let l=a.get(Bk,null),h=a.get(ko,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",T=r?OP(m,r,this.componentDef.encapsulation,a):Qg(m,y,$k(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let M=null;T!==null&&(M=zg(T,a,!0));let L=em(0,null,null,1,0,null,null,null,null,null,null),q=td(null,L,null,A,null,null,p,m,a,null,M);Ng(q);let V,Q,ne=null;try{let ee=this.componentDef,I,v=null;ee.findHostDirectiveDefs?(I=[],v=new Map,ee.findHostDirectiveDefs(ee,I,v),I.push(ee)):I=[ee];let _=qk(q,T);ne=zk(_,T,ee,I,q,p,m),Q=xg(L,xt),T&&Wk(m,ee,T,r),t!==void 0&&Kk(Q,this.ngContentSelectors,t),V=Gk(ne,ee,I,v,q,[Qk]),nm(L,q,null)}catch(ee){throw ne!==null&&Qp(ne),Qp(q),ee}finally{Pg()}return new sg(this.componentType,V,Kl(Q,q),q,Q)}finally{Te(o)}}},sg=class extends rg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new _i(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;tm(o[ue],o,i,e,t),this.previousInputValues.set(e,t);let s=Bo(this._tNode.index,o);_T(s,1)}}get injector(){return new gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function qk(n,e){let t=n[ue],r=xt;return n[r]=e,nd(t,r,2,"#host",null)}function zk(n,e,t,r,i,o,s){let a=i[ue];Hk(r,n,e,s);let c=null;e!==null&&(c=zg(e,i[Ro]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=td(i,sT(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&eg(a,n,r.length-1),rd(i,p),i[n.index]=p}function Hk(n,e,t,r){for(let i of n)e.mergedAttrs=Cg(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(og(e,e.mergedAttrs,!0),t!==null&&YD(r,t,e))}function Gk(n,e,t,r,i,o){let s=Fn(),a=i[ue],c=wn(s,i);uT(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=ka(i,a,p,s);wi(m,i)}lT(a,i,s),c&&wi(c,i);let l=ka(i,a,s.directiveStart+s.componentOffset,s);if(n[Ht]=i[Ht]=l,o!==null)for(let h of o)h(l,e);return rT(a,s,i),l}function Wk(n,e,t,r){if(r)Op(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=EM(e.selectors[0]);i&&Op(n,t,i),o&&o.length>0&&ZD(n,t,o.join(" "))}}function Kk(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function Qk(){let n=Fn();Og(je()[ue],n)}var zo=(()=>{class n{static{this.__NG_ELEMENT_ID__=Zk}}return n})();function Zk(){let n=Fn();return Jk(n,je())}var Yk=zo,bT=class extends Yk{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Kl(this._hostTNode,this._hostLView)}get injector(){return new gi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Fg(this._hostTNode,this._hostLView);if(uD(e)){let t=vl(e,this._hostLView),r=yl(e),i=t[ue].data[r+8];return new gi(i,t)}else return new gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=XE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-wt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=xl(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,bl(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!jM(e),a;if(s)a=t;else{let T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let c=s?e:new Lo(Nr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let A=(s?l:this.parentInjector).get(Gt,null);A&&(o=A)}let h=Nr(c.componentType??{}),p=xl(this._lContainer,h?.id??null),m=p?.firstChild??null,y=c.create(l,i,m,o);return this.insertImpl(y.hostView,a,bl(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(HM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[_t],l=new bT(c,c[vn],c[_t]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return im(s,i,o,r),e.attachToViewContainerRef(),I0(Rp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=XE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Oa(this._lContainer,t);r&&(dl(Rp(this._lContainer),t),Xl(r[ue],r))}detach(e){let t=this._adjustIndex(e,-1),r=Oa(this._lContainer,t);return r&&dl(Rp(this._lContainer),t)!=null?new _i(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function XE(n){return n[fl]}function Rp(n){return n[fl]||(n[fl]=[])}function Jk(n,e){let t,r=e[n.index];return On(r)?t=r:(t=dT(r,e,null,n),e[n.index]=t,rd(e,t)),ST(t,e,n,r),new bT(t,n,e)}function Xk(n,e){let t=n[st],r=t.createComment(""),i=wn(e,n),o=WD(t,i);return Cl(t,o,r,CP(t,i),!1),r}var ST=AT,sm=()=>!1;function eO(n,e,t){return sm(n,e,t)}function AT(n,e,t,r){if(n[tr])return;let i;t.type&8?i=kn(r):i=Xk(e,t),n[tr]=i}function tO(n,e,t){if(n[tr]&&n[Na])return!0;let r=t[mn],i=e.index-xt;if(!r||BN(e)||Ga(r,i))return!1;let s=Jp(r,i),a=r.data[qg]?.[i],[c,l]=Fk(s,a);return n[tr]=c,n[Na]=l,!0}function nO(n,e,t,r){sm(n,t,e)||AT(n,e,t,r)}function rO(){ST=nO,sm=tO}var e0=new Set;function Ci(n){e0.has(n)||(e0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function iO(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(cO))}return o}return Nl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>uO(o));e.push(c)}),sO(),Promise.all(e).then(()=>{})}var Nl=new Map,oO=new Set;function sO(){let n=Nl;return Nl=new Map,n}function aO(){return Nl.size===0}function cO(n){return typeof n=="string"?n:n.text()}function uO(n){oO.delete(n)}var Pr=class{},Fa=class{};var Pl=class extends Pr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ml(this);let o=x0(e);this._bootstrapComponents=BD(o.bootstrap),this._r3Injector=wD(e,t,[{provide:Pr,useValue:this},{provide:Oo,useValue:this.componentFactoryResolver},...r],Lt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kl=class extends Fa{constructor(e){super(),this.moduleType=e}create(e){return new Pl(this.moduleType,e,[])}};function lO(n,e,t){return new Pl(n,e,t,!1)}var ag=class extends Pr{constructor(e){super(),this.componentFactoryResolver=new Ml(this),this.instance=null;let t=new Ra([...e.providers,{provide:Pr,useValue:this},{provide:Oo,useValue:this.componentFactoryResolver}],e.parent||Ag(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ad(n,e,t=null){return new ag({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function xT(n){return hO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function dO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function hO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function RT(n,e,t){return n[e]=t}function MT(n,e){return n[e]}function Vo(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function cg(n,e,t,r){let i=Vo(n,e,t);return Vo(n,e+1,r)||i}function fO(n,e,t,r,i,o){let s=cg(n,e,t,r);return cg(n,e+2,i,o)||s}function Wa(n){return(n.flags&32)===32}function pO(n,e,t,r,i,o,s,a,c){let l=e.consts,h=nd(e,n,4,s||null,a||null);cT(e,t,h,Po(l,c)),Og(e,h);let p=h.tView=em(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function ug(n,e,t,r,i,o,s,a,c,l){let h=t+xt,p=e.firstCreatePass?pO(h,e,n,r,i,o,s,a,c):e.data[h];qa(p,!1);let m=NT(e,n,p,t);kg()&&Yg(e,n,m,p),wi(m,n);let y=dT(m,n,m,p);return n[h]=y,rd(n,y),eO(y,p,n),j0(p)&&iT(e,n,p),c!=null&&oT(n,p,l),p}function Zt(n,e,t,r,i,o,s,a){let c=je(),l=Ii(),h=Po(l.consts,o);return ug(c,l,n,e,t,r,i,h,s,a),Zt}var NT=PT;function PT(n,e,t,r){return Or(!0),e[st].createComment("")}function gO(n,e,t,r){let i=e[mn],o=!i||$a()||Wa(t)||Ga(i,r);if(Or(o),o)return PT(n,e,t,r);let s=i.data[QN]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=od(i,n,e,t);Yl(i,r,a);let c=Hg(i,r);return sd(c,a)}function mO(){NT=gO}var bo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(bo||{}),kT=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})(),lg=class n{constructor(){this.ngZone=F(me),this.scheduler=F(ko),this.errorHandler=F(nr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[bo.EarlyRead,bo.Write,bo.MixedReadWrite,bo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}},dg=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function am(n,e){!e?.injector&&LM(am);let t=e?.injector??F(Qt);return Da(t)?(Ci("NgAfterNextRender"),vO(n,t,e,!0)):wO}function yO(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function vO(n,e,t,r){let i=e.get(kT);i.impl??=e.get(lg);let o=t?.phase??bo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Vg):null,a=new dg(i.impl,yO(n,o),r,s);return i.impl.register(a),a}var wO={destroy(){}};function _O(n,e,t,r){return Vo(n,Mg(),t)?e+Sa(t)+r:Ti}function IO(n,e,t,r,i,o){let s=nN(),a=cg(n,s,t,i);return iN(2),a?e+Sa(t)+r+Sa(i)+o:Ti}function It(n,e,t){let r=je(),i=Mg();if(Vo(r,i,e)){let o=Ii(),s=lN();$P(o,s,r,n,e,r[st],t,!1)}return It}function t0(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";tm(n,t,o[s],s,r)}var hg=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Mp(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function EO(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=n.at(o),h=e[o],p=Mp(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let m=n.at(s),y=e[c],T=Mp(s,m,c,y,t);if(T!==0){T<0&&n.updateValue(s,y),s--,c--;continue}let A=t(o,l),M=t(s,m),L=t(o,h);if(Object.is(L,M)){let q=t(c,y);Object.is(q,A)?(n.swap(o,s),n.updateValue(s,y),c--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new Ol,i??=r0(n,o,s,t),fg(n,r,o,L))n.updateValue(o,h),o++,s++;else if(i.has(L))r.set(A,n.detach(o)),s--;else{let q=n.create(o,e[o]);n.attach(o,q),o++,s++}}for(;o<=c;)n0(n,r,t,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,m=Mp(o,h,o,p,t);if(m!==0)m<0&&n.updateValue(o,p),o++,l=c.next();else{r??=new Ol,i??=r0(n,o,s,t);let y=t(o,p);if(fg(n,r,o,y))n.updateValue(o,p),o++,s++,l=c.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,l=c.next();else{let T=t(o,h);r.set(T,n.detach(o)),s--}}}for(;!l.done;)n0(n,r,t,n.length,l.value),l=c.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(c=>{n.destroy(c)})}function fg(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function n0(n,e,t,r,i){if(fg(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function r0(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Ol=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};var pg=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-wt}};var gg=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function OT(n,e,t,r,i,o,s,a,c,l,h,p,m){Ci("NgControlFlow");let y=je(),T=Ii(),A=c!==void 0,M=je(),L=a?s.bind(M[Kt][Ht]):s,q=new gg(A,L);M[xt+n]=q,ug(y,T,n+1,e,t,r,i,Po(T.consts,o)),A&&ug(y,T,n+2,c,l,h,p,Po(T.consts,m))}var mg=class extends hg{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-wt}at(e){return this.getLView(e)[Ht].$implicit}attach(e,t){let r=t[mn];this.needsIndexUpdate||=e!==this.length,im(this.lContainer,t,e,bl(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,DO(this.lContainer,e)}create(e,t){let r=xl(this.lContainer,this.templateTNode.tView.ssrId),i=rm(this.hostLView,this.templateTNode,new pg(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Xl(e[ue],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Ht].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ht].$index=e}getLView(e){return TO(this.lContainer,e)}};function FT(n){let e=Te(null),t=za();try{let r=je(),i=r[ue],o=r[t],s=t+1,a=i0(r,s);if(o.liveCollection===void 0){let l=o0(i,s);o.liveCollection=new mg(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(EO(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=Mg(),h=c.length===0;if(Vo(r,l,h)){let p=t+2,m=i0(r,p);if(h){let y=o0(i,p),T=xl(m,y.tView.ssrId),A=rm(r,y,void 0,{dehydratedView:T});im(m,A,0,bl(y,T))}else ak(m,0)}}}finally{Te(e)}}function i0(n,e){return n[e]}function DO(n,e){return Oa(n,e)}function TO(n,e){return sk(n,e)}function o0(n,e){return xg(n,e)}function CO(n,e,t,r,i,o){let s=e.consts,a=Po(s,i),c=nd(e,n,2,r,a);return cT(e,t,c,Po(s,o)),c.attrs!==null&&og(c,c.attrs,!1),c.mergedAttrs!==null&&og(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function J(n,e,t,r){let i=je(),o=Ii(),s=xt+n,a=i[st],c=o.firstCreatePass?CO(s,o,i,e,t,r):o.data[s],l=LT(o,i,c,a,e,n);i[s]=l;let h=j0(c);return qa(c,!0),YD(a,l,c),!Wa(c)&&kg()&&Yg(o,i,l,c),KM()===0&&wi(l,i),QM(),h&&(iT(o,i,c),rT(o,c,i)),r!==null&&oT(i,c),J}function te(){let n=Fn();Y0()?tN():(n=n.parent,qa(n,!1));let e=n;YM(e)&&XM(),ZM();let t=Ii();return t.firstCreatePass&&(Og(t,n),V0(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&gN(e)&&t0(t,e,je(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&mN(e)&&t0(t,e,je(),e.stylesWithoutHost,!1),te}function De(n,e,t,r){return J(n,e,t,r),te(),De}var LT=(n,e,t,r,i,o)=>(Or(!0),Qg(r,i,sD()));function bO(n,e,t,r,i,o){let s=e[mn],a=!s||$a()||Wa(t)||Ga(s,o);if(Or(a),a)return Qg(r,i,sD());let c=od(s,n,e,t);return FD(s,o)&&Yl(s,o,c.nextSibling),s&&(DD(t)||TD(c))&&Ua(t)&&(JM(t),QD(c)),c}function SO(){LT=bO}var AO=(n,e,t,r)=>(Or(!0),qD(e[st],""));function xO(n,e,t,r){let i,o=e[mn],s=!o||$a()||Ga(o,r)||Wa(t);if(Or(s),s)return qD(e[st],"");let a=od(o,n,e,t),c=oP(o,r);return Yl(o,r,a),i=sd(c,a),i}function RO(){AO=xO}var Fl="en-US";var MO=Fl;function NO(n){typeof n=="string"&&(MO=n.toLowerCase().replace(/_/g,"-"))}function VT(n=1){return uN(n)}function ye(n,e=""){let t=je(),r=Ii(),i=n+xt,o=r.firstCreatePass?nd(r,i,1,e,null):r.data[i],s=jT(r,t,o,e,n);t[i]=s,kg()&&Yg(r,t,s,o),qa(o,!1)}var jT=(n,e,t,r,i)=>(Or(!0),$D(e[st],r));function PO(n,e,t,r,i){let o=e[mn],s=!o||$a()||Wa(t)||Ga(o,i);return Or(s),s?$D(e[st],r):od(o,n,e,t)}function kO(){jT=PO}function ct(n){return Vt("",n,""),ct}function Vt(n,e,t){let r=je(),i=_O(r,n,e,t);return i!==Ti&&fT(r,za(),i),Vt}function cm(n,e,t,r,i){let o=je(),s=IO(o,n,e,t,r,i);return s!==Ti&&fT(o,za(),s),cm}var OO=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=N0(!1,t.type),i=r.length>0?ad([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(O(Gt))})}}return n})();function UT(n){Ci("NgStandalone"),n.getStandaloneInjector=e=>e.get(OO).getOrCreateStandaloneInjector(n)}function Ho(n,e,t){let r=X0()+n,i=je();return i[r]===Ti?RT(i,r,t?e.call(t):e()):MT(i,r)}function BT(n,e,t,r,i,o,s,a){let c=X0()+n,l=je(),h=fO(l,c,t,r,i,o);return Vo(l,c+4,s)||h?RT(l,c+5,a?e.call(a,t,r,i,o,s):e(t,r,i,o,s)):MT(l,c+5)}var nl=null;function FO(n){nl!==null&&(n.defaultEncapsulation!==nl.defaultEncapsulation||n.preserveWhitespaces!==nl.preserveWhitespaces)||(nl=n)}var kr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},$T=new kr("18.2.13");var cd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var um=new H(""),Ka=new H(""),ud=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,lm||(LO(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(me),O(ld),O(Ka))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),ld=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return lm?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function LO(n){lm=n}var lm;function Qa(n){return!!n&&typeof n.then=="function"}function qT(n){return!!n&&typeof n.subscribe=="function"}var dd=new H(""),zT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=F(dd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Qa(o))t.push(o);else if(qT(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Go=new H("");function VO(){XI(()=>{throw new Y(600,!1)})}function jO(n){return n.isBoundToModule}var UO=10;function BO(n,e,t){try{let r=t();return Qa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function HT(n,e){return Array.isArray(e)?e.reduce(HT,n):j(j({},n),e)}var _n=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(LN),this.afterRenderManager=F(kT),this.zonelessEnabled=F(om),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ge,this.afterTick=new Ge,this.componentTypes=[],this.components=[],this.isStable=F(Ei).hasPendingTasks.pipe(W(t=>!t)),this._injector=F(Gt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Rl;if(!this._injector.get(zT).done){let m=!i&&A0(t),y=!1;throw new Y(405,y)}let s;i?s=t:s=this._injector.get(Oo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=jO(s)?void 0:this._injector.get(Pr),c=r||s.selector,l=s.create(Qt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(um,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),cl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Y(101,!1);let t=Te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Fo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<UO;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)$O(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Hl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;cl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Go,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>cl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var rl;function hd(n){rl??=new WeakMap;let e=rl.get(n);if(e)return e;let t=n.isStable.pipe(zt(r=>r)).toPromise().then(()=>{});return rl.set(n,t),n.onDestroy(()=>rl?.delete(n)),t}function $O(n,e,t,r){if(!t&&!Hl(n))return;mT(n,e,t&&!r?0:1)}var yg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},fd=(()=>{class n{compileModuleSync(t){return new kl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=x0(t),o=BD(i.declarations).reduce((s,a)=>{let c=Nr(a);return c&&s.push(new Lo(c)),s},[]);return new yg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qO=new H("");function zO(n,e,t){let r=new kl(t);return Promise.resolve(r)}function s0(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var HO=(()=>{class n{constructor(){this.zone=F(me),this.changeDetectionScheduler=F(ko),this.applicationRef=F(_n)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GO({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new me(Re(j({},GT()),{scheduleInRootZone:t})),[{provide:me,useFactory:n},{provide:mi,multi:!0,useFactory:()=>{let r=F(HO,{optional:!0});return()=>r.initialize()}},{provide:mi,multi:!0,useFactory:()=>{let r=F(WO);return()=>{r.initialize()}}},e===!0?{provide:TT,useValue:!0}:[],{provide:CT,useValue:t??_D}]}function GT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var WO=(()=>{class n{constructor(){this.subscription=new qe,this.initialized=!1,this.zone=F(me),this.pendingTasks=F(Ei)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var KO=(()=>{class n{constructor(){this.appRef=F(_n),this.taskService=F(Ei),this.ngZone=F(me),this.zonelessEnabled=F(om),this.disableScheduling=F(TT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new qe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_l):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(CT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Il||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?zE:ID;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_l+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QO(){return typeof $localize<"u"&&$localize.locale||Fl}var dm=new H("",{providedIn:"root",factory:()=>F(dm,le.Optional|le.SkipSelf)||QO()});var Ll=new H("");function il(n){return!n.moduleRef}function ZO(n){let e=il(n)?n.r3Injector:n.moduleRef.injector,t=e.get(me);return t.run(()=>{il(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(nr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),il(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ll);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ll);s.add(o),n.moduleRef.onDestroy(()=>{cl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return BO(r,t,()=>{let o=e.get(zT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(dm,Fl);if(NO(s||Fl),il(n)){let a=e.get(_n);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return YO(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function YO(n,e){let t=n.injector.get(_n);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Y(-403,!1);e.push(n)}var WT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>FN(r?.ngZone,Re(j({},GT({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[GO({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:ko,useExisting:KO}],c=lO(t.moduleType,this.injector,a);return ZO({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=HT({},r);return zO(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Ll,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Qt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ba=null,KT=new H("");function JO(n){if(ba&&!ba.get(KT,!1))throw new Y(400,!1);VO(),ba=n;let e=n.get(WT);return t2(n),e}function hm(n,e,t=[]){let r=`Platform: ${e}`,i=new H(r);return(o=[])=>{let s=QT();if(!s||s.injector.get(KT,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):JO(XO(a,r))}return e2(i)}}function XO(n=[],e){return Qt.create({name:e,providers:[{provide:$l,useValue:"platform"},{provide:Ll,useValue:new Set([()=>ba=null])},...n]})}function e2(n){let e=QT();if(!e)throw new Y(401,!1);return e}function QT(){return ba?.get(WT)??null}function t2(n){n.get(Bg,null)?.forEach(t=>t())}function fm(){return!1}var Za=(()=>{class n{static{this.__NG_ELEMENT_ID__=n2}}return n})();function n2(n){return r2(Fn(),je(),(n&16)===16)}function r2(n,e,t){if(Ua(n)&&!t){let r=Bo(n.index,e);return new _i(r,r)}else if(n.type&175){let r=e[Kt];return new _i(r,e)}return null}var vg=class{constructor(){}supports(e){return xT(e)}create(e){return new wg(e)}},i2=(n,e)=>e,wg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||i2}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<a0(r,i,o)?t:r,a=a0(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,T=y+m;h<=T&&T<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!xT(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,dO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new _g(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Vl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Vl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},_g=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ig=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Vl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ig,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function a0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function c0(){return new pm([new vg])}var pm=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:c0})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||c0()),deps:[[n,new Dg,new jo]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Y(901,!1)}}return n})();var ZT=hm(null,"core",[]),YT=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(_n))}}static{this.\u0275mod=Mt({type:n})}static{this.\u0275inj=Rt({})}}return n})();var u0=!1;function o2(){u0||(u0=!0,tP(),SO(),kO(),RO(),mO(),rO(),Vk(),VP())}function s2(n,e){return hd(n)}function JT(){return ja([{provide:tl,useFactory:()=>{let n=!0;return Da()&&(n=!!F(qo,{optional:!0})?.get(kD,null)),n&&Ci("NgHydration"),n}},{provide:mi,useValue:()=>{Mk(!1),Da()&&F(tl)&&(a2(),o2())},multi:!0},{provide:VD,useFactory:()=>Da()&&F(tl)},{provide:Go,useFactory:()=>{if(Da()&&F(tl)){let n=F(_n),e=F(Qt);return()=>{s2(n,e).then(()=>{Ok(n)})}}return()=>{}},multi:!0}])}function a2(){let n=Zl(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===XN){e=t;break}if(!e)throw new Y(-507,!1)}function XT(n){let e=Nr(n);if(!e)return null;let t=new Lo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var oC=null;function bi(){return oC}function sC(n){oC??=n}var pd=class{};var Nt=new H(""),wm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(d2),providedIn:"platform"})}}return n})(),aC=new H(""),d2=(()=>{class n extends wm{constructor(){super(),this._doc=F(Nt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bi().getBaseHref(this._doc)}onPopState(t){let r=bi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=bi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function _m(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function eC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ir(n){return n&&n[0]!=="?"?"?"+n:n}var Si=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(Im),providedIn:"root"})}}return n})(),cC=new H(""),Im=(()=>{class n extends Si{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(Nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _m(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ir(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ir(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ir(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(wm),O(cC,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uC=(()=>{class n extends Si{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=_m(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ir(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ir(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(wm),O(cC,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Wo=(()=>{class n{constructor(t){this._subject=new At,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=p2(eC(tC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ir(r))}normalize(t){return n.stripTrailingSlash(f2(this._basePath,tC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ir(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ir(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=ir}static{this.joinWithSlash=_m}static{this.stripTrailingSlash=eC}static{this.\u0275fac=function(r){return new(r||n)(O(Si))}}static{this.\u0275prov=z({token:n,factory:()=>h2(),providedIn:"root"})}}return n})();function h2(){return new Wo(O(Si))}function f2(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function tC(n){return n.replace(/\/index.html$/,"")}function p2(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Em(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var gm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ln=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new gm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),nC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);nC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ze(zo),ze(id),ze(pm))}}static{this.\u0275dir=Va({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function nC(n,e){n.context.$implicit=e.item}var lC=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rC("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rC("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ze(zo),ze(id))}}static{this.\u0275dir=Va({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),mm=class{constructor(){this.$implicit=null,this.ngIf=null}};function rC(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Lt(e)}'.`)}var dC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Mt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),Dm="browser",g2="server";function m2(n){return n===Dm}function or(n){return n===g2}var hC=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>m2(F(ht))?new ym(F(Nt),window):new vm})}}return n})(),ym=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=y2(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function y2(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var vm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},gd=class{};var yd=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var _C=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(_C||{}),Tm=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new yd,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var vd=class n extends Tm{constructor(e={}){super(e),this.type=_C.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var v2=new H("");var w2=new H(""),fC="b",pC="h",gC="s",mC="st",yC="u",vC="rt",md=new H(""),_2=["GET","HEAD"];function I2(n,e){let y=F(md),{isCacheActive:t}=y,r=UI(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!_2.includes(o)||!r.includeRequestsWithAuthHeaders&&E2(n)||r.filter?.(n)===!1)return e(n);let s=F(qo),a=F(w2,{optional:!0}),c=or(F(ht));if(a&&!c)throw new Y(2803,!1);let l=c&&a?b2(n.url,a):n.url,h=T2(n,l),p=s.get(h,null),m=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(m=i.includeHeaders),p){let{[fC]:T,[vC]:A,[pC]:M,[gC]:L,[mC]:q,[yC]:V}=p,Q=T;switch(A){case"arraybuffer":Q=new TextEncoder().encode(T).buffer;break;case"blob":Q=new Blob([T]);break}let ne=new yd(M);return Z(new vd({body:Q,headers:ne,status:L,statusText:q,url:V}))}return e(n).pipe(We(T=>{T instanceof vd&&c&&s.set(h,{[fC]:T.body,[pC]:D2(T.headers,m),[gC]:T.status,[mC]:T.statusText,[yC]:l,[vC]:n.responseType})}))}function E2(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function D2(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function wC(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function T2(n,e){let{params:t,method:r,responseType:i}=n,o=wC(t),s=n.serializeBody();s instanceof URLSearchParams?s=wC(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=C2(a);return c}function C2(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function IC(n){return[{provide:md,useFactory:()=>(Ci("NgHttpTransferCache"),j({isCacheActive:!0},n))},{provide:v2,useValue:I2,multi:!0,deps:[qo,md]},{provide:Go,multi:!0,useFactory:()=>{let e=F(_n),t=F(md);return()=>{hd(e).then(()=>{t.isCacheActive=!1})}}}]}function b2(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var Sm=class extends pd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Am=class n extends Sm{static makeCurrent(){sC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=S2();return t==null?null:A2(t)}resetBaseElement(){Ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Em(document.cookie,e)}},Ya=null;function S2(){return Ya=Ya||document.querySelector("base"),Ya?Ya.getAttribute("href"):null}function A2(n){return new URL(n,document.baseURI).pathname}var xm=class{addToWindow(e){rr.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Y(5103,!1);return o},rr.getAllAngularTestabilities=()=>e.getAllTestabilities(),rr.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=rr.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};rr.frameworkStabilizers||(rr.frameworkStabilizers=[]),rr.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?bi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},x2=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Rm=new H(""),CC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Rm),O(me))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),wd=class{constructor(e){this._doc=e}},Cm="ng-app-id",bC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=or(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Cm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Cm),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Cm,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(Nt),O(Ha),O($g,8),O(ht))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),bm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Pm=/%COMP%/g,SC="%COMP%",R2=`_nghost-${SC}`,M2=`_ngcontent-${SC}`,N2=!0,P2=new H("",{providedIn:"root",factory:()=>N2});function k2(n){return M2.replace(Pm,n)}function O2(n){return R2.replace(Pm,n)}function AC(n,e){return e.map(t=>t.replace(Pm,n))}var EC=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=or(a),this.defaultRenderer=new Ja(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Nn.ShadowDom&&(r=Re(j({},r),{encapsulation:Nn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof _d?i.applyToHost(t):i instanceof Xa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Nn.Emulated:o=new _d(c,l,r,this.appId,h,s,a,p);break;case Nn.ShadowDom:return new Mm(c,l,t,r,s,a,this.nonce,p);default:o=new Xa(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(CC),O(bC),O(Ha),O(P2),O(Nt),O(ht),O(me),O($g))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Ja=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(bm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(DC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(DC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=bm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=bm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Di.DashCase|Di.Important)?e.style.setProperty(t,r,i&Di.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Di.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=bi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function DC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Mm=class extends Ja{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=AC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xa=class extends Ja{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?AC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},_d=class extends Xa{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=k2(l),this.hostAttr=O2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},F2=(()=>{class n extends wd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(Nt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),TC=["alt","control","meta","shift"],L2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},V2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},j2=(()=>{class n extends wd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),TC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=L2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),TC.forEach(s=>{if(s!==i){let a=V2[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(Nt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function U2(){Am.makeCurrent()}function B2(){return new nr}function $2(){return xD(document),document}var q2=[{provide:ht,useValue:Dm},{provide:Bg,useValue:U2,multi:!0},{provide:Nt,useFactory:$2,deps:[]}],xC=hm(ZT,"browser",q2),z2=new H(""),H2=[{provide:Ka,useClass:xm,deps:[]},{provide:um,useClass:ud,deps:[me,ld,Ka]},{provide:ud,useClass:ud,deps:[me,ld,Ka]}],G2=[{provide:$l,useValue:"root"},{provide:nr,useFactory:B2,deps:[]},{provide:Rm,useClass:F2,multi:!0,deps:[Nt,me,ht]},{provide:Rm,useClass:j2,multi:!0,deps:[Nt]},EC,bC,CC,{provide:Fo,useExisting:EC},{provide:gd,useClass:x2,deps:[]},[]],RC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ha,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(z2,12))}}static{this.\u0275mod=Mt({type:n})}static{this.\u0275inj=Rt({providers:[...G2,...H2],imports:[dC,YT]})}}return n})();var MC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(Nt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Nm=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Nm||{});function NC(...n){let e=[],t=new Set,r=t.has(Nm.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return ja([[],JT(),t.has(Nm.NoHttpTransferCache)||r?[]:IC({}),e])}var ae="primary",pc=Symbol("RouteTitle"),Vm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function es(n){return new Vm(n)}function W2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function K2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vn(n[t],e[t]))return!1;return!0}function Vn(n,e){let t=n?jm(n):void 0,r=e?jm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!zC(n[i],e[i]))return!1;return!0}function jm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function HC(n){return n.length>0?n[n.length-1]:null}function Lr(n){return pp(n)?n:Qa(n)?Ee(Promise.resolve(n)):Z(n)}var Q2={exact:WC,subset:KC},GC={exact:Z2,subset:Y2,ignored:()=>!0};function kC(n,e,t){return Q2[t.paths](n.root,e.root,t.matrixParams)&&GC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Z2(n,e){return Vn(n,e)}function WC(n,e,t){if(!xi(n.segments,e.segments)||!Dd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!WC(n.children[r],e.children[r],t))return!1;return!0}function Y2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zC(n[t],e[t]))}function KC(n,e,t){return QC(n,e,e.segments,t)}function QC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!xi(i,t)||e.hasChildren()||!Dd(i,t,r))}else if(n.segments.length===t.length){if(!xi(n.segments,t)||!Dd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!KC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!xi(n.segments,i)||!Dd(n.segments,i,r)||!n.children[ae]?!1:QC(n.children[ae],e,o,r)}}function Dd(n,e,t){return e.every((r,i)=>GC[t](n[i].parameters,r.parameters))}var ar=class{constructor(e=new Ce([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=es(this.queryParams),this._queryParamMap}toString(){return eF.serialize(this)}},Ce=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Td(this)}},Ai=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=es(this.parameters),this._parameterMap}toString(){return YC(this)}};function J2(n,e){return xi(n,e)&&n.every((t,r)=>Vn(t.parameters,e[r].parameters))}function xi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function X2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var gc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new ts,providedIn:"root"})}}return n})(),ts=class{parse(e){let t=new Bm(e);return new ar(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ec(e.root,!0)}`,r=rF(e.queryParams),i=typeof e.fragment=="string"?`#${tF(e.fragment)}`:"";return`${t}${r}${i}`}},eF=new ts;function Td(n){return n.segments.map(e=>YC(e)).join("/")}function ec(n,e){if(!n.hasChildren())return Td(n);if(e){let t=n.children[ae]?ec(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${ec(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=X2(n,(r,i)=>i===ae?[ec(n.children[ae],!1)]:[`${i}:${ec(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${Td(n)}/${t[0]}`:`${Td(n)}/(${t.join("//")})`}}function ZC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Id(n){return ZC(n).replace(/%3B/gi,";")}function tF(n){return encodeURI(n)}function Um(n){return ZC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cd(n){return decodeURIComponent(n)}function OC(n){return Cd(n.replace(/\+/g,"%20"))}function YC(n){return`${Um(n.path)}${nF(n.parameters)}`}function nF(n){return Object.entries(n).map(([e,t])=>`;${Um(e)}=${Um(t)}`).join("")}function rF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Id(t)}=${Id(i)}`).join("&"):`${Id(t)}=${Id(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var iF=/^[^\/()?;#]+/;function km(n){let e=n.match(iF);return e?e[0]:""}var oF=/^[^\/()?;=#]+/;function sF(n){let e=n.match(oF);return e?e[0]:""}var aF=/^[^=?&#]+/;function cF(n){let e=n.match(aF);return e?e[0]:""}var uF=/^[^&#]+/;function lF(n){let e=n.match(uF);return e?e[0]:""}var Bm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new Ce(e,t)),r}parseSegment(){let e=km(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new Ai(Cd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=sF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=km(this.remaining);i&&(r=i,this.capture(r))}e[Cd(t)]=Cd(r)}parseQueryParam(e){let t=cF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=lF(this.remaining);s&&(r=s,this.capture(r))}let i=OC(t),o=OC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=km(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ae]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function JC(n){return n.segments.length>0?new Ce([],{[ae]:n}):n}function XC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=XC(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ce(n.segments,e);return dF(t)}function dF(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new Ce(n.segments.concat(e.segments),e.children)}return n}function sc(n){return n instanceof ar}function hF(n,e,t=null,r=null){let i=eb(n);return tb(i,e,t,r)}function eb(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Ce(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=JC(r);return e??i}function tb(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Om(i,i,i,t,r);let o=fF(e);if(o.toRoot())return Om(i,i,new Ce([],{}),t,r);let s=pF(o,i,n),a=s.processChildren?rc(s.segmentGroup,s.index,o.commands):rb(s.segmentGroup,s.index,o.commands);return Om(i,s.segmentGroup,a,t,r)}function bd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ac(n){return typeof n=="object"&&n!=null&&n.outlets}function Om(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=nb(n,e,t);let a=JC(XC(s));return new ar(a,o,i)}function nb(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=nb(o,e,t)}),new Ce(n.segments,r)}var Sd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&bd(r[0]))throw new Y(4003,!1);let i=r.find(ac);if(i&&i!==HC(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Sd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Sd(t,e,r)}var Yo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function pF(n,e,t){if(n.isAbsolute)return new Yo(e,!0,0);if(!t)return new Yo(e,!1,NaN);if(t.parent===null)return new Yo(t,!0,0);let r=bd(n.commands[0])?0:1,i=t.segments.length-1+r;return gF(t,i,n.numberOfDoubleDots)}function gF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new Yo(r,!1,i-o)}function mF(n){return ac(n[0])?n[0].outlets:{[ae]:n}}function rb(n,e,t){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return rc(n,e,t);let r=yF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,r.pathIndex),{});return o.children[ae]=new Ce(n.segments.slice(r.pathIndex),n.children),rc(o,0,i)}else return r.match&&i.length===0?new Ce(n.segments,{}):r.match&&!n.hasChildren()?$m(n,e,t):r.match?rc(n,0,i):$m(n,e,t)}function rc(n,e,t){if(t.length===0)return new Ce(n.segments,{});{let r=mF(t),i={};if(Object.keys(r).some(o=>o!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let o=rc(n.children[ae],e,t);return new Ce(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=rb(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(n.segments,i)}}function yF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ac(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!LC(c,l,s))return o;r+=2}else{if(!LC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function $m(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ac(o)){let c=vF(o.outlets);return new Ce(r,c)}if(i===0&&bd(t[0])){let c=n.segments[e];r.push(new Ai(c.path,FC(t[0]))),i++;continue}let s=ac(o)?o.outlets[ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&bd(a)?(r.push(new Ai(s,FC(a))),i+=2):(r.push(new Ai(s,{})),i++)}return new Ce(r,{})}function vF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=$m(new Ce([],{}),0,r))}),e}function FC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function LC(n,e,t){return n==t.path&&Vn(e,t.parameters)}var ic="imperative",ut=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ut||{}),sn=class{constructor(e,t){this.id=e,this.url=t}},ns=class extends sn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ut.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},cr=class extends sn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ut.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Jt||{}),Ad=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ad||{}),sr=class extends sn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ut.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fr=class extends sn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ut.NavigationSkipped}},cc=class extends sn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ut.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xd=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ut.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qm=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ut.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zm=class extends sn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ut.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Hm=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ut.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gm=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ut.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wm=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Km=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Qm=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zm=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ym=class{constructor(e){this.snapshot=e,this.type=ut.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jm=class{constructor(e){this.snapshot=e,this.type=ut.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ut.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},uc=class{},rs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function wF(n,e){return n.providers&&!n._injector&&(n._injector=ad(n.providers,e,`Route: ${n.path}`)),n._injector??e}function In(n){return n.outlet||ae}function _F(n,e){let t=n.filter(r=>In(r)===e);return t.push(...n.filter(r=>In(r)!==e)),t}function mc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Xm=class{get injector(){return mc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new yc(this.rootInjector),this.attachRef=null}},yc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Xm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(Gt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Md=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ey(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ey(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ty(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ty(e,this._root).map(t=>t.value)}};function ey(n,e){if(n===e.value)return e;for(let t of e.children){let r=ey(n,t);if(r)return r}return null}function ty(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ty(n,t);if(r.length)return r.unshift(e),r}return[]}var Yt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Zo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Nd=class extends Md{constructor(e,t){super(e),this.snapshot=t,ly(this,e)}toString(){return this.snapshot.toString()}};function ib(n){let e=IF(n),t=new dt([new Ai("",{})]),r=new dt({}),i=new dt({}),o=new dt({}),s=new dt(""),a=new is(t,r,o,s,i,ae,n,e.root);return a.snapshot=e.root,new Nd(new Yt(a,[]),e)}function IF(n){let e={},t={},r={},i="",o=new Jo([],e,r,i,t,ae,n,null,{});return new kd("",new Yt(o,[]))}var is=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(W(l=>l[pc]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(e=>es(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(e=>es(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&sb(i)&&(r.resolve[pc]=i.title),r}var Jo=class{get title(){return this.data?.[pc]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=es(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=es(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},kd=class extends Md{constructor(e,t){super(t),this.url=e,ly(this,t)}toString(){return ob(this._root)}};function ly(n,e){e.value._routerState=n,e.children.forEach(t=>ly(n,t))}function ob(n){let e=n.children.length>0?` { ${n.children.map(ob).join(", ")} } `:"";return`${n.value}${e}`}function Fm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vn(e.params,t.params)||n.paramsSubject.next(t.params),K2(e.url,t.url)||n.urlSubject.next(t.url),Vn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ny(n,e){let t=Vn(n.params,e.params)&&J2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ny(n.parent,e.parent))}function sb(n){return typeof n.title=="string"||n.title===null}var EF=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ae,this.activateEvents=new At,this.deactivateEvents=new At,this.attachEvents=new At,this.detachEvents=new At,this.parentContexts=F(yc),this.location=F(zo),this.changeDetector=F(Za),this.inputBinder=F(jd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ry(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Va({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zl]})}}return n})(),ry=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===is?this.route:e===yc?this.childContexts:this.parent.get(e,t)}},jd=new H(""),VC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ia([r.queryParams,r.params,r.data]).pipe(Ve(([o,s,a],c)=>(a=j(j(j({},o),s),a),c===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=XT(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function DF(n,e,t){let r=lc(n,e._root,t?t._root:void 0);return new Nd(r,e)}function lc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=TF(n,e,t);return new Yt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>lc(n,a)),s}}let r=CF(e.value),i=e.children.map(o=>lc(n,o));return new Yt(r,i)}}function TF(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return lc(n,r,i);return lc(n,r)})}function CF(n){return new is(new dt(n.url),new dt(n.params),new dt(n.queryParams),new dt(n.fragment),new dt(n.data),n.outlet,n.component,n)}var dc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ab="ngNavigationCancelingError";function Od(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=sc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=cb(!1,Jt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function cb(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ab]=!0,t.cancellationCode=e,t}function bF(n){return ub(n)&&sc(n.url)}function ub(n){return!!n&&n[ab]}var SF=(n,e,t,r)=>W(i=>(new iy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),iy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Zo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Zo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Zo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Zo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Jm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Zm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Fm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Fm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Fd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Xo=class{constructor(e,t){this.component=e,this.route=t}};function AF(n,e,t){let r=n._root,i=e?e._root:null;return tc(r,i,t,[r.value])}function xF(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ss(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!p0(n)?n:e.get(n):r}function tc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Zo(e);return n.children.forEach(s=>{RF(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>oc(a,t.getContext(s),i)),i}function RF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=MF(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Fd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?tc(n,e,a?a.children:null,r,i):tc(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xo(a.outlet.component,s))}else s&&oc(e,a,i),i.canActivateChecks.push(new Fd(r)),o.component?tc(n,null,a?a.children:null,r,i):tc(n,null,t,r,i);return i}function MF(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!xi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xi(n.url,e.url)||!Vn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ny(n,e)||!Vn(n.queryParams,e.queryParams);case"paramsChange":default:return!ny(n,e)}}function oc(n,e,t){let r=Zo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?oc(s,e.children.getContext(o),t):oc(s,null,t):oc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Xo(e.outlet.component,i)):t.canDeactivateChecks.push(new Xo(null,i)):t.canDeactivateChecks.push(new Xo(null,i))}function vc(n){return typeof n=="function"}function NF(n){return typeof n=="boolean"}function PF(n){return n&&vc(n.canLoad)}function kF(n){return n&&vc(n.canActivate)}function OF(n){return n&&vc(n.canActivateChild)}function FF(n){return n&&vc(n.canDeactivate)}function LF(n){return n&&vc(n.canMatch)}function lb(n){return n instanceof Xn||n?.name==="EmptyError"}var Ed=Symbol("INITIAL_VALUE");function os(){return Ve(n=>Ia(n.map(e=>e.pipe(er(1),pi(Ed)))).pipe(W(e=>{for(let t of e)if(t!==!0){if(t===Ed)return Ed;if(t===!1||VF(t))return t}return!0}),ot(e=>e!==Ed),er(1)))}function VF(n){return sc(n)||n instanceof dc}function jF(n,e){return Je(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(Re(j({},t),{guardsResult:!0})):UF(s,r,i,n).pipe(Je(a=>a&&NF(a)?BF(r,o,n,e):Z(a)),W(a=>Re(j({},t),{guardsResult:a})))})}function UF(n,e,t,r){return Ee(n).pipe(Je(i=>GF(i.component,i.route,t,e,r)),zt(i=>i!==!0,!0))}function BF(n,e,t,r){return Ee(e).pipe(br(i=>_o(qF(i.route.parent,r),$F(i.route,r),HF(n,i.path,t),zF(n,i.route,t))),zt(i=>i!==!0,!0))}function $F(n,e){return n!==null&&e&&e(new Ym(n)),Z(!0)}function qF(n,e){return n!==null&&e&&e(new Qm(n)),Z(!0)}function zF(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Zu(()=>{let s=mc(e)??t,a=ss(o,s),c=kF(a)?a.canActivate(e,n):yn(s,()=>a(e,n));return Lr(c).pipe(zt())}));return Z(i).pipe(os())}function HF(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>xF(s)).filter(s=>s!==null).map(s=>Zu(()=>{let a=s.guards.map(c=>{let l=mc(s.node)??t,h=ss(c,l),p=OF(h)?h.canActivateChild(r,n):yn(l,()=>h(r,n));return Lr(p).pipe(zt())});return Z(a).pipe(os())}));return Z(o).pipe(os())}function GF(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let c=mc(e)??i,l=ss(a,c),h=FF(l)?l.canDeactivate(n,e,t,r):yn(c,()=>l(n,e,t,r));return Lr(h).pipe(zt())});return Z(s).pipe(os())}function WF(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=ss(s,n),c=PF(a)?a.canLoad(e,t):yn(n,()=>a(e,t));return Lr(c)});return Z(o).pipe(os(),db(r))}function db(n){return cp(We(e=>{if(typeof e!="boolean")throw Od(n,e)}),W(e=>e===!0))}function KF(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=ss(s,n),c=LF(a)?a.canMatch(e,t):yn(n,()=>a(e,t));return Lr(c)});return Z(o).pipe(os(),db(r))}var hc=class{constructor(e){this.segmentGroup=e||null}},fc=class extends Error{constructor(e){super(),this.urlTree=e}};function Qo(n){return wo(new hc(n))}function QF(n){return wo(new Y(4e3,!1))}function ZF(n){return wo(cb(!1,Jt.GuardRejected))}var oy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ae])return QF(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:T,title:A}=i,M=yn(o,()=>a({params:y,data:T,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:A}));if(M instanceof ar)throw new fc(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new fc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ar(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ce(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},sy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function YF(n,e,t,r,i){let o=hb(n,e,t);return o.matched?(r=wF(e,r),KF(r,e,t,i).pipe(W(s=>s===!0?o:j({},sy)))):Z(o)}function hb(n,e,t){if(e.path==="**")return JF(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},sy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||W2)(t,n,e);if(!i)return j({},sy);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function JF(n){return{matched:!0,parameters:n.length>0?HC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function jC(n,e,t,r){return t.length>0&&tL(n,t,r)?{segmentGroup:new Ce(e,eL(r,new Ce(t,n.children))),slicedSegments:[]}:t.length===0&&nL(n,t,r)?{segmentGroup:new Ce(n.segments,XF(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:t}}function XF(n,e,t,r){let i={};for(let o of t)if(Ud(n,e,o)&&!r[In(o)]){let s=new Ce([],{});i[In(o)]=s}return j(j({},r),i)}function eL(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&In(r)!==ae){let i=new Ce([],{});t[In(r)]=i}return t}function tL(n,e,t){return t.some(r=>Ud(n,e,r)&&In(r)!==ae)}function nL(n,e,t){return t.some(r=>Ud(n,e,r))}function Ud(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function rL(n,e,t){return e.length===0&&!n.children[t]}var ay=class{};function iL(n,e,t,r,i,o,s="emptyOnly"){return new cy(n,e,t,r,i,s,o).recognize()}var oL=31,cy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new oy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=jC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(({children:t,rootSnapshot:r})=>{let i=new Yt(r,t),o=new kd("",i),s=hF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Jo([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(W(r=>({children:r,rootSnapshot:t})),Cr(r=>{if(r instanceof fc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof hc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(W(s=>s instanceof Yt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(br(s=>{let a=r.children[s],c=_F(t,s);return this.processSegmentGroup(e,c,a,s,i)}),fi((s,a)=>(s.push(...a),s)),Sr(null),vp(),Je(s=>{if(s===null)return Qo(r);let a=fb(s);return sL(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return Ee(t).pipe(br(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Cr(l=>{if(l instanceof hc)return Z(null);throw l}))),zt(c=>!!c),Cr(c=>{if(lb(c))return rL(r,i,o)?Z(new ay):Qo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return In(r)!==s&&(s===ae||!Ud(i,o,r))?Qo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Qo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=hb(t,i,o);if(!c)return Qo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>oL&&(this.allowRedirects=!1));let y=new Jo(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,UC(i),In(i),i.component??i._loadedComponent??null,i,BC(i)),T=Pd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(T.params),y.data=Object.freeze(T.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(Je(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=YF(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ve(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ve(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=c,T=new Jo(m,p,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,UC(r),In(r),r.component??r._loadedComponent??null,r,BC(r)),A=Pd(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(A.params),T.data=Object.freeze(A.data);let{segmentGroup:M,slicedSegments:L}=jC(t,m,y,l);if(L.length===0&&M.hasChildren())return this.processChildren(h,l,M,T).pipe(W(V=>new Yt(T,V)));if(l.length===0&&L.length===0)return Z(new Yt(T,[]));let q=In(r)===o;return this.processSegment(h,l,M,L,q?ae:o,!0,T).pipe(W(V=>new Yt(T,V instanceof Yt?[V]:[])))}))):Qo(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):WF(e,t,r,this.urlSerializer).pipe(Je(i=>i?this.configLoader.loadChildren(e,t).pipe(We(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):ZF(t))):Z({routes:[],injector:e})}};function sL(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function aL(n){let e=n.value.routeConfig;return e&&e.path===""}function fb(n){let e=[],t=new Set;for(let r of n){if(!aL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=fb(r.children);e.push(new Yt(r.value,i))}return e.filter(r=>!t.has(r))}function UC(n){return n.data||{}}function BC(n){return n.resolve||{}}function cL(n,e,t,r,i,o){return Je(s=>iL(n,e,t,r,s.extractedUrl,i,o).pipe(W(({state:a,tree:c})=>Re(j({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function uL(n,e){return Je(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of pb(c))s.add(l);let a=0;return Ee(s).pipe(br(c=>o.has(c)?lL(c,r,n,e):(c.data=Pd(c,c.parent,n).resolve,Z(void 0))),We(()=>a++),Eo(1),Je(c=>a===s.size?Z(t):St))})}function pb(n){let e=n.children.map(t=>pb(t)).flat();return[n,...e]}function lL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!sb(i)&&(o[pc]=i.title),dL(o,n,e,r).pipe(W(s=>(n._resolvedData=s,n.data=Pd(n,n.parent,t).resolve,null)))}function dL(n,e,t,r){let i=jm(n);if(i.length===0)return Z({});let o={};return Ee(i).pipe(Je(s=>hL(n[s],e,t,r).pipe(zt(),We(a=>{if(a instanceof dc)throw Od(new ts,a);o[s]=a}))),Eo(1),mp(o),Cr(s=>lb(s)?St:wo(s)))}function hL(n,e,t,r){let i=mc(e)??r,o=ss(n,i),s=o.resolve?o.resolve(e,t):yn(i,()=>o(e,t));return Lr(s)}function Lm(n){return Ve(e=>{let t=n(e);return t?Ee(t).pipe(W(()=>e)):Z(e)})}var gb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[pc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(fL),providedIn:"root"})}}return n})(),fL=(()=>{class n extends gb{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(MC))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wc=new H("",{providedIn:"root",factory:()=>({})}),pL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["ng-component"]],standalone:!0,features:[UT],decls:1,vars:0,template:function(r,i){r&1&&De(0,"router-outlet")},dependencies:[EF],encapsulation:2})}}return n})();function dy(n){let e=n.children&&n.children.map(dy),t=e?Re(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=pL),t}var Ld=new H(""),hy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(fd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Lr(t.loadComponent()).pipe(W(mb),We(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Io(()=>{this.componentLoaders.delete(t)})),i=new go(r,()=>new Ge).pipe(po());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=gL(r,this.compiler,t,this.onLoadEndListener).pipe(Io(()=>{this.childrenLoaders.delete(r)})),s=new go(o,()=>new Ge).pipe(po());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gL(n,e,t,r){return Lr(n.loadChildren()).pipe(W(mb),Je(i=>i instanceof Fa||Array.isArray(i)?Z(i):Ee(e.compileModuleAsync(i))),W(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ld,[],{optional:!0,self:!0}).flat()),{routes:s.map(dy),injector:o}}))}function mL(n){return n&&typeof n=="object"&&"default"in n}function mb(n){return mL(n)?n.default:n}var fy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(yL),providedIn:"root"})}}return n})(),yL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yb=new H(""),vb=new H("");function vL(n,e,t){let r=n.get(vb),i=n.get(Nt);return n.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),wL(n))),{onViewTransitionCreated:c}=r;return c&&yn(n,()=>c({transition:a,from:e,to:t})),s})}function wL(n){return new Promise(e=>{am({read:()=>setTimeout(e)},{injector:n})})}var _L=new H(""),py=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ge,this.transitionAbortSubject=new Ge,this.configLoader=F(hy),this.environmentInjector=F(Gt),this.urlSerializer=F(gc),this.rootContexts=F(yc),this.location=F(Wo),this.inputBindingEnabled=F(jd,{optional:!0})!==null,this.titleStrategy=F(gb),this.options=F(wc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(fy),this.createViewTransition=F(yb,{optional:!0}),this.navigationErrorHandler=F(_L,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Wm(i)),r=i=>this.events.next(new Km(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Re(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new dt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ic,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ot(o=>o.id!==0),W(o=>Re(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ve(o=>{let s=!1,a=!1;return Z(o).pipe(Ve(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),St;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Re(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Fr(c.id,this.urlSerializer.serialize(c.rawUrl),p,Ad.IgnoredSameUrlNavigation)),c.resolve(!1),St}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z(c).pipe(Ve(p=>{let m=this.transitions?.getValue();return this.events.next(new ns(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?St:Promise.resolve(p)}),cL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),We(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Re(j({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new xd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:T,extras:A}=c,M=new ns(p,this.urlSerializer.serialize(m),y,T);this.events.next(M);let L=ib(this.rootComponentType).snapshot;return this.currentTransition=o=Re(j({},c),{targetSnapshot:L,urlAfterRedirects:m,extras:Re(j({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Z(o)}else{let p="";return this.events.next(new Fr(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Ad.IgnoredByUrlHandlingStrategy)),c.resolve(!1),St}}),We(c=>{let l=new qm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),W(c=>(this.currentTransition=o=Re(j({},c),{guards:AF(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),jF(this.environmentInjector,c=>this.events.next(c)),We(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Od(this.urlSerializer,c.guardsResult);let l=new zm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ot(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Jt.GuardRejected),!1)),Lm(c=>{if(c.guards.canActivateChecks.length)return Z(c).pipe(We(l=>{let h=new Hm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ve(l=>{let h=!1;return Z(l).pipe(uL(this.paramsInheritanceStrategy,this.environmentInjector),We({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Jt.NoDataFromResolver)}}))}),We(l=>{let h=new Gm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Lm(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(We(m=>{h.component=m}),W(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Ia(l(c.targetSnapshot.root)).pipe(Sr(null),er(1))}),Lm(()=>this.afterPreactivation()),Ve(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ee(h).pipe(W(()=>o)):Z(o)}),W(c=>{let l=DF(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Re(j({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),We(()=>{this.events.next(new uc)}),SF(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),er(1),We({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new cr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),_p(this.transitionAbortSubject.pipe(We(c=>{throw c}))),Io(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Cr(c=>{if(a=!0,ub(c))this.events.next(new sr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),bF(c)?this.events.next(new rs(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new cc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=yn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof dc){let{message:p,cancellationCode:m}=Od(this.urlSerializer,h);this.events.next(new sr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new rs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return St}))}))}cancelNavigationTransition(t,r,i){let o=new sr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IL(n){return n!==ic}var EL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(DL),providedIn:"root"})}}return n})(),uy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},DL=(()=>{class n extends uy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lg(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(TL),providedIn:"root"})}}return n})(),TL=(()=>{class n extends wb{constructor(){super(...arguments),this.location=F(Wo),this.urlSerializer=F(gc),this.options=F(wc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(fy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ar,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ib(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ns)this.stateMemento=this.createStateMemento();else if(t instanceof Fr)this.rawUrlTree=r.initialUrl;else if(t instanceof xd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof uc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof sr&&(t.code===Jt.GuardRejected||t.code===Jt.NoDataFromResolver)?this.restoreHistory(r):t instanceof cc?this.restoreHistory(r,!0):t instanceof cr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof ar?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=j(j({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lg(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(nc||{});function _b(n,e){n.events.pipe(ot(t=>t instanceof cr||t instanceof sr||t instanceof cc||t instanceof Fr),W(t=>t instanceof cr||t instanceof Fr?nc.COMPLETE:(t instanceof sr?t.code===Jt.Redirect||t.code===Jt.SupersededByNewNavigation:!1)?nc.REDIRECTING:nc.FAILED),ot(t=>t!==nc.REDIRECTING),er(1)).subscribe(()=>{e()})}function CL(n){throw n}var bL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ri=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(cd),this.stateManager=F(wb),this.options=F(wc,{optional:!0})||{},this.pendingTasks=F(Ei),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(py),this.urlSerializer=F(gc),this.location=F(Wo),this.urlHandlingStrategy=F(fy),this._events=new Ge,this.errorHandler=this.options.errorHandler||CL,this.navigated=!1,this.routeReuseStrategy=F(EL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(Ld,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(jd,{optional:!0}),this.eventsSubscription=new qe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof sr&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof cr)this.navigated=!0;else if(r instanceof rs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||IL(i.source)},s);this.scheduleNavigation(a,ic,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}xL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ic,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=j({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(dy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=eb(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return tb(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=sc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ic,null,r)}navigate(t,r={skipLocationChange:!1}){return AL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},bL):r===!1?i=j({},SL):i=r,sc(t))return kC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return kC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return _b(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function AL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}function xL(n){return!(n instanceof uc)&&!(n instanceof rs)}var Vd=class{};var RL=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ot(t=>t instanceof cr),br(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ad(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ee(i).pipe(Tr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(Je(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ee([o,s]).pipe(Tr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(Ri),O(fd),O(Gt),O(Vd),O(hy))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ib=new H(""),ML=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ns?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof cr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Fr&&t.code===Ad.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Rd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Rd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){XD()}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function NL(n){return n.routerState.root}function _c(n,e){return{\u0275kind:n,\u0275providers:e}}function PL(){let n=F(Qt);return e=>{let t=n.get(_n);if(e!==t.components[0])return;let r=n.get(Ri),i=n.get(Eb);n.get(gy)===1&&r.initialNavigation(),n.get(Db,null,le.Optional)?.setUpPreloading(),n.get(Ib,null,le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Eb=new H("",{factory:()=>new Ge}),gy=new H("",{providedIn:"root",factory:()=>1});function kL(){return _c(2,[{provide:gy,useValue:0},{provide:dd,multi:!0,deps:[Qt],useFactory:e=>{let t=e.get(aC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ri),o=e.get(Eb);_b(i,()=>{r(!0)}),e.get(py).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function OL(){return _c(3,[{provide:dd,multi:!0,useFactory:()=>{let e=F(Ri);return()=>{e.setUpLocationChangeListener()}}},{provide:gy,useValue:2}])}var Db=new H("");function FL(n){return _c(0,[{provide:Db,useExisting:RL},{provide:Vd,useExisting:n}])}function LL(){return _c(8,[VC,{provide:jd,useExisting:VC}])}function VL(n){let e=[{provide:yb,useValue:vL},{provide:vb,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return _c(9,e)}var $C=new H("ROUTER_FORROOT_GUARD"),jL=[Wo,{provide:gc,useClass:ts},Ri,yc,{provide:is,useFactory:NL,deps:[Ri]},hy,[]],my=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[jL,[],{provide:Ld,multi:!0,useValue:t},{provide:$C,useFactory:qL,deps:[[Ri,new jo,new Dg]]},{provide:wc,useValue:r||{}},r?.useHash?BL():$L(),UL(),r?.preloadingStrategy?FL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?zL(r):[],r?.bindToComponentInputs?LL().\u0275providers:[],r?.enableViewTransitions?VL().\u0275providers:[],HL()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ld,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O($C,8))}}static{this.\u0275mod=Mt({type:n})}static{this.\u0275inj=Rt({})}}return n})();function UL(){return{provide:Ib,useFactory:()=>{let n=F(hC),e=F(me),t=F(wc),r=F(py),i=F(gc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ML(i,r,n,e,t)}}}function BL(){return{provide:Si,useClass:uC}}function $L(){return{provide:Si,useClass:Im}}function qL(n){return"guarded"}function zL(n){return[n.initialNavigation==="disabled"?OL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?kL().\u0275providers:[]]}var qC=new H("");function HL(){return[{provide:qC,useFactory:PL},{provide:Go,multi:!0,useExisting:qC}]}var GL=[],Tb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Mt({type:n})}static{this.\u0275inj=Rt({imports:[my.forRoot(GL),my]})}}return n})();var Bd=class{constructor(){this.name="",this.email="",this.location="",this.goalLife="",this.phoneNumber="",this.photoUrl="",this.socialNetwork=""}};var WL="firebase",KL="10.14.1";Dr(WL,KL,"app");var Ic=new kr("ANGULARFIRE2_VERSION");var QL=(n,e)=>{let t=e?[e]:QI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Mi=class{constructor(){return QL(ZL)}},ZL="app-check";function yy(){}var $d=class{zone;delegate;constructor(e,t=hp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},vy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yy,{},yy,yy)),t.pipe(We({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},qd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new $d(Zone.current)),this.insideAngular=t.run(()=>new $d(Zone.current,_a)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(me))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YL(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function jt(n){return JL(YL())(n)}function JL(n){return function(t){return t=t.lift(new vy(n.ngZone)),t.pipe(hn(n.outsideAngular),tn(n.insideAngular))}}var tV=new Map,nV={activated:!1,tokenObservers:[]},rV={initialized:!1,enabled:!1};function En(n){return tV.get(n)||Object.assign({},nV)}function Rb(){return rV}var iV="https://content-firebaseappcheck.googleapis.com/v1";var oV="exchangeDebugToken",bb={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},sq=24*60*60*1e3;var _y=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Hf,this.pending.promise.catch(t=>{}),yield sV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Hf,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function sV(n){return new Promise(e=>{setTimeout(e,n)})}var aV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vr=new WI("appCheck","AppCheck",aV);function Mb(n){if(!En(n).activated)throw Vr.create("use-before-activation",{appName:n.name})}function Nb(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw Vr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw Vr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw Vr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function Pb(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${iV}/projects/${t}/apps/${r}:${oV}?key=${i}`,body:{debug_token:e}}}var cV="firebase-app-check-database",uV=1,Iy="firebase-app-check-store";var zd=null;function lV(){return zd||(zd=new Promise((n,e)=>{try{let t=indexedDB.open(cV,uV);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Vr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Iy,{keyPath:"compositeKey"})}}}catch(t){e(Vr.create("storage-open",{originalErrorMessage:t?.message}))}}),zd)}function dV(n,e){return hV(fV(n),e)}function hV(n,e){return N(this,null,function*(){let r=(yield lV()).transaction(Iy,"readwrite"),o=r.objectStore(Iy).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Vr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function fV(n){return`${n.options.appId}-${n.name}`}var Ey=new Ru("@firebase/app-check");function wy(n,e){return xu()?dV(n,e).catch(t=>{Ey.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kb(){return Rb().enabled}function Ob(){return N(this,null,function*(){let n=Rb();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pV={error:"UNKNOWN_ERROR"};function gV(n){return zI.encodeString(JSON.stringify(n),!1)}function Dy(n,e=!1){return N(this,null,function*(){let t=n.app;Mb(t);let r=En(t),i=r.token,o;if(i&&!Ec(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Ec(c)?i=c:yield wy(t,void 0))}if(!e&&i&&Ec(i))return{token:i.token};let s=!1;if(kb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Nb(Pb(t,yield Ob()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield wy(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield En(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Ey.warn(c.message):Ey.error(c),o=c}let a;return i?o?Ec(i)?a={token:i.token,internalError:o}:a=Ab(o):(a={token:i.token},r.token=i,yield wy(t,i)):a=Ab(o),s&&wV(t,a),a})}function mV(n){return N(this,null,function*(){let e=n.app;Mb(e);let{provider:t}=En(e);if(kb()){let r=yield Ob(),{token:i}=yield Nb(Pb(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function yV(n,e,t,r){let{app:i}=n,o=En(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ec(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),Sb(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Sb(n))}function Fb(n,e){let t=En(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Sb(n){let{app:e}=n,t=En(e),r=t.tokenRefresher;r||(r=vV(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vV(n){let{app:e}=n;return new _y(()=>N(this,null,function*(){let t=En(e),r;if(t.token?r=yield Dy(n,!0):r=yield Dy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=En(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},bb.RETRIAL_MIN_WAIT,bb.RETRIAL_MAX_WAIT)}function wV(n,e){let t=En(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ec(n){return n.expireTimeMillis-Date.now()>0}function Ab(n){return{token:gV(pV),error:n}}var Ty=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=En(this.app);for(let t of e)Fb(this.app,t.next);return Promise.resolve()}};function _V(n,e){return new Ty(n,e)}function IV(n){return{getToken:e=>Dy(n,e),getLimitedUseToken:()=>mV(n),addTokenListener:e=>yV(n,"INTERNAL",e),removeTokenListener:e=>Fb(n.app,e)}}var EV="@firebase/app-check",DV="0.8.8";var TV="app-check",xb="app-check-internal";function CV(){ma(new ui(TV,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return _V(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xb).initialize()})),ma(new ui(xb,n=>{let e=n.getProvider("app-check").getImmediate();return IV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Dr(EV,DV)}CV();var bV=["localhost","0.0.0.0","127.0.0.1"],vq=typeof window<"u"&&bV.includes(window.location.hostname);var SV="firebase",AV="10.14.1";qt.registerVersion(SV,AV,"app-compat");var xV=["ngOnDestroy"],jb=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(xV.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Hd=class{constructor(e){return e}},as=new H("angularfire2.app.options"),cs=new H("angularfire2.app.name");function Dc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=qt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>qt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;RV("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Hd(s)}var RV=(n,...e)=>{fm()&&typeof console<"u"&&console[n](...e)},MV={provide:Hd,useFactory:Dc,deps:[as,me,[new jo,cs]]},Ub=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:as,useValue:t},{provide:cs,useValue:r}]}}constructor(t){qt.registerVersion("angularfire",Ic.full,"core"),qt.registerVersion("angularfire",Ic.full,"app-compat"),qt.registerVersion("angular",$T.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(ht))};static \u0275mod=Mt({type:n});static \u0275inj=Rt({providers:[MV]})}return n})();function Gd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return NV(i,s)||(Vb("error",`${e} was already initialized on the ${t} Firebase App with different settings.${PV?" You may need to reload as Firebase is not HMR aware.":""}`),Vb("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function NV(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var PV=typeof module<"u"&&!!module.hot,Vb=(n,...e)=>{fm()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Cy=new H("angularfire2.auth.use-emulator"),by=new H("angularfire2.auth.settings"),Sy=new H("angularfire2.auth.tenant-id"),Ay=new H("angularfire2.auth.langugage-code"),xy=new H("angularfire2.auth.use-device-language"),Ry=new H("angularfire.auth.persistence"),My=(n,e,t,r,i,o,s,a)=>Gd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),Bb=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,y){let T=new Ge,A=Z(void 0).pipe(tn(s.outsideAngular),Ve(()=>o.runOutsideAngular(()=>import("./chunk-IDFRXQP6.js"))),W(()=>Dc(t,o,r)),W(M=>My(M,o,a,l,h,p,c,m)),Ju({bufferSize:1,refCount:!1}));if(or(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{A.pipe(zt()).subscribe();let M=A.pipe(Ve(V=>V.getRedirectResult().then(Q=>Q,()=>null)),jt,Ju({bufferSize:1,refCount:!1})),L=A.pipe(Ve(V=>new fe(Q=>({unsubscribe:o.runOutsideAngular(()=>V.onAuthStateChanged(ne=>Q.next(ne),ne=>Q.error(ne),()=>Q.complete()))})))),q=A.pipe(Ve(V=>new fe(Q=>({unsubscribe:o.runOutsideAngular(()=>V.onIdTokenChanged(ne=>Q.next(ne),ne=>Q.error(ne),()=>Q.complete()))}))));this.authState=M.pipe(Xu(L),hn(s.outsideAngular),tn(s.insideAngular)),this.user=M.pipe(Xu(q),hn(s.outsideAngular),tn(s.insideAngular)),this.idToken=this.user.pipe(Ve(V=>V?Ee(V.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(Ve(V=>V?Ee(V.getIdTokenResult()):Z(null))),this.credential=gp(M,T,this.authState.pipe(ot(V=>!V))).pipe(W(V=>V?.user?V:null),hn(s.outsideAngular),tn(s.insideAngular))}return jb(this,A,o,{spy:{apply:(M,L,q)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&q.then(V=>T.next(V))}}})}static \u0275fac=function(r){return new(r||n)(O(as),O(cs,8),O(ht),O(me),O(qd),O(Cy,8),O(by,8),O(Sy,8),O(Ay,8),O(xy,8),O(Ry,8),O(Mi,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var $b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qb={};var jr,Ny;(function(){var n;function e(I,v){function _(){}_.prototype=v.prototype,I.D=v.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(E,D,b){for(var w=Array(arguments.length-2),Qn=2;Qn<arguments.length;Qn++)w[Qn-2]=arguments[Qn];return v.prototype[D].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,_){_||(_=0);var E=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)E[D]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(D=0;16>D;++D)E[D]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=I.g[0],_=I.g[1],D=I.g[2];var b=I.g[3],w=v+(b^_&(D^b))+E[0]+3614090360&4294967295;v=_+(w<<7&4294967295|w>>>25),w=b+(D^v&(_^D))+E[1]+3905402710&4294967295,b=v+(w<<12&4294967295|w>>>20),w=D+(_^b&(v^_))+E[2]+606105819&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(v^D&(b^v))+E[3]+3250441966&4294967295,_=D+(w<<22&4294967295|w>>>10),w=v+(b^_&(D^b))+E[4]+4118548399&4294967295,v=_+(w<<7&4294967295|w>>>25),w=b+(D^v&(_^D))+E[5]+1200080426&4294967295,b=v+(w<<12&4294967295|w>>>20),w=D+(_^b&(v^_))+E[6]+2821735955&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(v^D&(b^v))+E[7]+4249261313&4294967295,_=D+(w<<22&4294967295|w>>>10),w=v+(b^_&(D^b))+E[8]+1770035416&4294967295,v=_+(w<<7&4294967295|w>>>25),w=b+(D^v&(_^D))+E[9]+2336552879&4294967295,b=v+(w<<12&4294967295|w>>>20),w=D+(_^b&(v^_))+E[10]+4294925233&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(v^D&(b^v))+E[11]+2304563134&4294967295,_=D+(w<<22&4294967295|w>>>10),w=v+(b^_&(D^b))+E[12]+1804603682&4294967295,v=_+(w<<7&4294967295|w>>>25),w=b+(D^v&(_^D))+E[13]+4254626195&4294967295,b=v+(w<<12&4294967295|w>>>20),w=D+(_^b&(v^_))+E[14]+2792965006&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(v^D&(b^v))+E[15]+1236535329&4294967295,_=D+(w<<22&4294967295|w>>>10),w=v+(D^b&(_^D))+E[1]+4129170786&4294967295,v=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(v^_))+E[6]+3225465664&4294967295,b=v+(w<<9&4294967295|w>>>23),w=D+(v^_&(b^v))+E[11]+643717713&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^v&(D^b))+E[0]+3921069994&4294967295,_=D+(w<<20&4294967295|w>>>12),w=v+(D^b&(_^D))+E[5]+3593408605&4294967295,v=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(v^_))+E[10]+38016083&4294967295,b=v+(w<<9&4294967295|w>>>23),w=D+(v^_&(b^v))+E[15]+3634488961&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^v&(D^b))+E[4]+3889429448&4294967295,_=D+(w<<20&4294967295|w>>>12),w=v+(D^b&(_^D))+E[9]+568446438&4294967295,v=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(v^_))+E[14]+3275163606&4294967295,b=v+(w<<9&4294967295|w>>>23),w=D+(v^_&(b^v))+E[3]+4107603335&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^v&(D^b))+E[8]+1163531501&4294967295,_=D+(w<<20&4294967295|w>>>12),w=v+(D^b&(_^D))+E[13]+2850285829&4294967295,v=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(v^_))+E[2]+4243563512&4294967295,b=v+(w<<9&4294967295|w>>>23),w=D+(v^_&(b^v))+E[7]+1735328473&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^v&(D^b))+E[12]+2368359562&4294967295,_=D+(w<<20&4294967295|w>>>12),w=v+(_^D^b)+E[5]+4294588738&4294967295,v=_+(w<<4&4294967295|w>>>28),w=b+(v^_^D)+E[8]+2272392833&4294967295,b=v+(w<<11&4294967295|w>>>21),w=D+(b^v^_)+E[11]+1839030562&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^v)+E[14]+4259657740&4294967295,_=D+(w<<23&4294967295|w>>>9),w=v+(_^D^b)+E[1]+2763975236&4294967295,v=_+(w<<4&4294967295|w>>>28),w=b+(v^_^D)+E[4]+1272893353&4294967295,b=v+(w<<11&4294967295|w>>>21),w=D+(b^v^_)+E[7]+4139469664&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^v)+E[10]+3200236656&4294967295,_=D+(w<<23&4294967295|w>>>9),w=v+(_^D^b)+E[13]+681279174&4294967295,v=_+(w<<4&4294967295|w>>>28),w=b+(v^_^D)+E[0]+3936430074&4294967295,b=v+(w<<11&4294967295|w>>>21),w=D+(b^v^_)+E[3]+3572445317&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^v)+E[6]+76029189&4294967295,_=D+(w<<23&4294967295|w>>>9),w=v+(_^D^b)+E[9]+3654602809&4294967295,v=_+(w<<4&4294967295|w>>>28),w=b+(v^_^D)+E[12]+3873151461&4294967295,b=v+(w<<11&4294967295|w>>>21),w=D+(b^v^_)+E[15]+530742520&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^v)+E[2]+3299628645&4294967295,_=D+(w<<23&4294967295|w>>>9),w=v+(D^(_|~b))+E[0]+4096336452&4294967295,v=_+(w<<6&4294967295|w>>>26),w=b+(_^(v|~D))+E[7]+1126891415&4294967295,b=v+(w<<10&4294967295|w>>>22),w=D+(v^(b|~_))+E[14]+2878612391&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~v))+E[5]+4237533241&4294967295,_=D+(w<<21&4294967295|w>>>11),w=v+(D^(_|~b))+E[12]+1700485571&4294967295,v=_+(w<<6&4294967295|w>>>26),w=b+(_^(v|~D))+E[3]+2399980690&4294967295,b=v+(w<<10&4294967295|w>>>22),w=D+(v^(b|~_))+E[10]+4293915773&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~v))+E[1]+2240044497&4294967295,_=D+(w<<21&4294967295|w>>>11),w=v+(D^(_|~b))+E[8]+1873313359&4294967295,v=_+(w<<6&4294967295|w>>>26),w=b+(_^(v|~D))+E[15]+4264355552&4294967295,b=v+(w<<10&4294967295|w>>>22),w=D+(v^(b|~_))+E[6]+2734768916&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~v))+E[13]+1309151649&4294967295,_=D+(w<<21&4294967295|w>>>11),w=v+(D^(_|~b))+E[4]+4149444226&4294967295,v=_+(w<<6&4294967295|w>>>26),w=b+(_^(v|~D))+E[11]+3174756917&4294967295,b=v+(w<<10&4294967295|w>>>22),w=D+(v^(b|~_))+E[2]+718787259&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var _=v-this.blockSize,E=this.B,D=this.h,b=0;b<v;){if(D==0)for(;b<=_;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<v;)if(E[D++]=I.charCodeAt(b++),D==this.blockSize){i(this,E),D=0;break}}else for(;b<v;)if(E[D++]=I[b++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var _=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.u(I),I=Array(16),v=_=0;4>v;++v)for(var E=0;32>E;E+=8)I[_++]=this.g[v]>>>E&255;return I};function o(I,v){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=v(I)}function s(I,v){this.h=v;for(var _=[],E=!0,D=I.length-1;0<=D;D--){var b=I[D]|0;E&&b==v||(_[D]=b,E=!1)}this.g=_}var a={};function c(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return M(l(-I));for(var v=[],_=1,E=0;I>=_;E++)v[E]=I/_|0,_*=4294967296;return new s(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return M(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),E=p,D=0;D<I.length;D+=8){var b=Math.min(8,I.length-D),w=parseInt(I.substring(D,D+b),v);8>b?(b=l(Math.pow(v,b)),E=E.j(b).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var p=c(0),m=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(A(this))return-M(this).m();for(var I=0,v=1,_=0;_<this.g.length;_++){var E=this.i(_);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(A(this))return"-"+M(this).toString(I);for(var v=l(Math.pow(I,6)),_=this,E="";;){var D=Q(_,v).g;_=L(_,D.j(v));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=D,T(_))return b+E;for(;6>b.length;)b="0"+b;E=b+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function A(I){return I.h==-1}n.l=function(I){return I=L(this,I),A(I)?-1:T(I)?0:1};function M(I){for(var v=I.g.length,_=[],E=0;E<v;E++)_[E]=~I.g[E];return new s(_,~I.h).add(m)}n.abs=function(){return A(this)?M(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0,D=0;D<=v;D++){var b=E+(this.i(D)&65535)+(I.i(D)&65535),w=(b>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=w>>>16,b&=65535,w&=65535,_[D]=w<<16|b}return new s(_,_[_.length-1]&-2147483648?-1:0)};function L(I,v){return I.add(M(v))}n.j=function(I){if(T(this)||T(I))return p;if(A(this))return A(I)?M(this).j(M(I)):M(M(this).j(I));if(A(I))return M(this.j(M(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,_=[],E=0;E<2*v;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var b=this.i(E)>>>16,w=this.i(E)&65535,Qn=I.i(D)>>>16,Zs=I.i(D)&65535;_[2*E+2*D]+=w*Zs,q(_,2*E+2*D),_[2*E+2*D+1]+=b*Zs,q(_,2*E+2*D+1),_[2*E+2*D+1]+=w*Qn,q(_,2*E+2*D+1),_[2*E+2*D+2]+=b*Qn,q(_,2*E+2*D+2)}for(E=0;E<v;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=v;E<2*v;E++)_[E]=0;return new s(_,0)};function q(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function Q(I,v){if(T(v))throw Error("division by zero");if(T(I))return new V(p,p);if(A(I))return v=Q(M(I),v),new V(M(v.g),M(v.h));if(A(v))return v=Q(I,M(v)),new V(M(v.g),v.h);if(30<I.g.length){if(A(I)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=v;0>=E.l(I);)_=ne(_),E=ne(E);var D=ee(_,1),b=ee(E,1);for(E=ee(E,2),_=ee(_,2);!T(E);){var w=b.add(E);0>=w.l(I)&&(D=D.add(_),b=w),E=ee(E,1),_=ee(_,1)}return v=L(I,D.j(v)),new V(D,v)}for(D=p;0<=I.l(v);){for(_=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),b=l(_),w=b.j(v);A(w)||0<w.l(I);)_-=E,b=l(_),w=b.j(v);T(b)&&(b=m),D=D.add(b),I=L(I,w)}return new V(D,I)}n.A=function(I){return Q(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)&I.i(E);return new s(_,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)|I.i(E);return new s(_,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)^I.i(E);return new s(_,this.h^I.h)};function ne(I){for(var v=I.g.length+1,_=[],E=0;E<v;E++)_[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(_,I.h)}function ee(I,v){var _=v>>5;v%=32;for(var E=I.g.length-_,D=[],b=0;b<E;b++)D[b]=0<v?I.i(b+_)>>>v|I.i(b+_+1)<<32-v:I.i(b+_);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ny=qb.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,jr=qb.Integer=s}).apply(typeof $b<"u"?$b:typeof self<"u"?self:typeof window<"u"?window:{});var Wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ur={};var Py,OV,us,ky,Tc,Kd,Oy,Fy,Ly;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wd=="object"&&Wd];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var x=f++;return{value:d(x,u[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function T(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,x){for(var U=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)U[Se-2]=arguments[Se];return d.prototype[C].apply(g,U)}}function A(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function M(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,x=g.length||0;u.length=C+x;for(let U=0;U<x;U++)u[C+U]=g[U]}else u.push(g)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(u){return/^[\s\xa0]*$/.test(u)}function V(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Q(u){return Q[" "](u),u}Q[" "]=function(){};var ne=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function ee(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let x=0;x<_.length;x++)f=_[x],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function b(u){a.setTimeout(()=>{throw u},0)}function w(){var u=wf;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Qn{constructor(){this.h=this.g=null}add(d,f){let g=Zs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Zs=new L(()=>new Vx,u=>u.reset());class Vx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ys,Js=!1,wf=new Qn,j_=()=>{let u=a.Promise.resolve(void 0);Ys=()=>{u.then(jx)}};var jx=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){b(f)}var d=Zs;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Js=!1};function wr(){this.s=this.s,this.C=this.C}wr.prototype.s=!1,wr.prototype.ma=function(){this.s||(this.s=!0,this.N())},wr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function gt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}gt.prototype.h=function(){this.defaultPrevented=!0};var Ux=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Xs(u,d){if(gt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ne){e:{try{Q(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Bx[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Xs.aa.h.call(this)}}T(Xs,gt);var Bx={2:"touch",3:"pen",4:"mouse"};Xs.prototype.h=function(){Xs.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ea="closure_listenable_"+(1e6*Math.random()|0),$x=0;function qx(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++$x,this.da=this.fa=!1}function du(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function hu(u){this.src=u,this.g={},this.h=0}hu.prototype.add=function(u,d,f,g,C){var x=u.toString();u=this.g[x],u||(u=this.g[x]=[],this.h++);var U=If(u,d,g,C);return-1<U?(d=u[U],f||(d.fa=!1)):(d=new qx(d,this.src,x,!!g,C),d.fa=f,u.push(d)),d};function _f(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=C)&&Array.prototype.splice.call(g,C,1),x&&(du(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function If(u,d,f,g){for(var C=0;C<u.length;++C){var x=u[C];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return C}return-1}var Ef="closure_lm_"+(1e6*Math.random()|0),Df={};function U_(u,d,f,g,C){if(g&&g.once)return $_(u,d,f,g,C);if(Array.isArray(d)){for(var x=0;x<d.length;x++)U_(u,d[x],f,g,C);return null}return f=Sf(f),u&&u[ea]?u.K(d,f,l(g)?!!g.capture:!!g,C):B_(u,d,f,!1,g,C)}function B_(u,d,f,g,C,x){if(!d)throw Error("Invalid event type");var U=l(C)?!!C.capture:!!C,Se=Cf(u);if(Se||(u[Ef]=Se=new hu(u)),f=Se.add(d,f,g,U,x),f.proxy)return f;if(g=zx(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)Ux||(C=U),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(z_(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function zx(){function u(f){return d.call(u.src,u.listener,f)}let d=Hx;return u}function $_(u,d,f,g,C){if(Array.isArray(d)){for(var x=0;x<d.length;x++)$_(u,d[x],f,g,C);return null}return f=Sf(f),u&&u[ea]?u.L(d,f,l(g)?!!g.capture:!!g,C):B_(u,d,f,!0,g,C)}function q_(u,d,f,g,C){if(Array.isArray(d))for(var x=0;x<d.length;x++)q_(u,d[x],f,g,C);else g=l(g)?!!g.capture:!!g,f=Sf(f),u&&u[ea]?(u=u.i,d=String(d).toString(),d in u.g&&(x=u.g[d],f=If(x,f,g,C),-1<f&&(du(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete u.g[d],u.h--)))):u&&(u=Cf(u))&&(d=u.g[d.toString()],u=-1,d&&(u=If(d,f,g,C)),(f=-1<u?d[u]:null)&&Tf(f))}function Tf(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[ea])_f(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(z_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Cf(d))?(_f(f,u),f.h==0&&(f.src=null,d[Ef]=null)):du(u)}}}function z_(u){return u in Df?Df[u]:Df[u]="on"+u}function Hx(u,d){if(u.da)u=!0;else{d=new Xs(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Tf(u),u=f.call(g,d)}return u}function Cf(u){return u=u[Ef],u instanceof hu?u:null}var bf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sf(u){return typeof u=="function"?u:(u[bf]||(u[bf]=function(d){return u.handleEvent(d)}),u[bf])}function mt(){wr.call(this),this.i=new hu(this),this.M=this,this.F=null}T(mt,wr),mt.prototype[ea]=!0,mt.prototype.removeEventListener=function(u,d,f,g){q_(this,u,d,f,g)};function Tt(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new gt(d,u);else if(d instanceof gt)d.target=d.target||u;else{var C=d;d=new gt(g,u),E(d,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var U=d.g=f[x];C=fu(U,g,!0,d)&&C}if(U=d.g=u,C=fu(U,g,!0,d)&&C,C=fu(U,g,!1,d)&&C,f)for(x=0;x<f.length;x++)U=d.g=f[x],C=fu(U,g,!1,d)&&C}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)du(f[g]);delete u.g[d],u.h--}}this.F=null},mt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},mt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function fu(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,x=0;x<d.length;++x){var U=d[x];if(U&&!U.da&&U.capture==f){var Se=U.listener,lt=U.ha||U.src;U.fa&&_f(u.i,U),C=Se.call(lt,g)!==!1&&C}}return C&&!g.defaultPrevented}function H_(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function G_(u){u.g=H_(()=>{u.g=null,u.i&&(u.i=!1,G_(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class Gx extends wr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:G_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ta(u){wr.call(this),this.h=u,this.g={}}T(ta,wr);var W_=[];function K_(u){ee(u.g,function(d,f){this.g.hasOwnProperty(f)&&Tf(d)},u),u.g={}}ta.prototype.N=function(){ta.aa.N.call(this),K_(this)},ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Af=a.JSON.stringify,Wx=a.JSON.parse,Kx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function xf(){}xf.prototype.h=null;function Q_(u){return u.h||(u.h=u.i())}function Z_(){}var na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rf(){gt.call(this,"d")}T(Rf,gt);function Mf(){gt.call(this,"c")}T(Mf,gt);var oi={},Y_=null;function pu(){return Y_=Y_||new mt}oi.La="serverreachability";function J_(u){gt.call(this,oi.La,u)}T(J_,gt);function ra(u){let d=pu();Tt(d,new J_(d))}oi.STAT_EVENT="statevent";function X_(u,d){gt.call(this,oi.STAT_EVENT,u),this.stat=d}T(X_,gt);function Ct(u){let d=pu();Tt(d,new X_(d,u))}oi.Ma="timingevent";function eI(u,d){gt.call(this,oi.Ma,u),this.size=d}T(eI,gt);function ia(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function oa(){this.g=!0}oa.prototype.xa=function(){this.g=!1};function Qx(u,d,f,g,C,x){u.info(function(){if(u.g)if(x)for(var U="",Se=x.split("&"),lt=0;lt<Se.length;lt++){var Ie=Se[lt].split("=");if(1<Ie.length){var yt=Ie[0];Ie=Ie[1];var vt=yt.split("_");U=2<=vt.length&&vt[1]=="type"?U+(yt+"="+Ie+"&"):U+(yt+"=redacted&")}}else U=null;else U=x;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+U})}function Zx(u,d,f,g,C,x,U){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+x+" "+U})}function oo(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Jx(u,f)+(g?" "+g:"")})}function Yx(u,d){u.info(function(){return"TIMEOUT: "+d})}oa.prototype.info=function(){};function Jx(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var U=1;U<C.length;U++)C[U]=""}}}}return Af(f)}catch{return d}}var gu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nf;function mu(){}T(mu,xf),mu.prototype.g=function(){return new XMLHttpRequest},mu.prototype.i=function(){return{}},Nf=new mu;function _r(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new ta(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nI}function nI(){this.i=null,this.g="",this.h=!1}var rI={},Pf={};function kf(u,d,f){u.L=1,u.v=_u(Zn(d)),u.m=f,u.P=!0,iI(u,null)}function iI(u,d){u.F=Date.now(),yu(u),u.A=Zn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),vI(f.i,"t",g),u.C=0,f=u.j.J,u.h=new nI,u.g=FI(u.j,f?d:null,!u.m),0<u.O&&(u.M=new Gx(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(W_[0]=C.toString()),C=W_);for(var x=0;x<C.length;x++){var U=U_(f,C[x],g||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),ra(),Qx(u.i,u.u,u.A,u.l,u.R,u.m)}_r.prototype.ca=function(u){u=u.target;let d=this.M;d&&Yn(u)==3?d.j():this.Y(u)},_r.prototype.Y=function(u){try{if(u==this.g)e:{let vt=Yn(this.g);var d=this.g.Ba();let co=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||CI(this.g)))){this.J||vt!=4||d==7||(d==8||0>=co?ra(3):ra(2)),Of(this);var f=this.g.Z();this.X=f;t:if(oI(this)){var g=CI(this.g);u="";var C=g.length,x=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),sa(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(x&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,Zx(this.i,this.u,this.A,this.l,this.R,vt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,lt=this.g;if((Se=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Se)){var Ie=Se;break t}}Ie=null}if(f=Ie)oo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ff(this,f);else{this.o=!1,this.s=3,Ct(12),si(this),sa(this);break e}}if(this.P){f=!0;let ln;for(;!this.J&&this.C<U.length;)if(ln=Xx(this,U),ln==Pf){vt==4&&(this.s=4,Ct(14),f=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==rI){this.s=4,Ct(15),oo(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else oo(this.i,this.l,ln,null),Ff(this,ln);if(oI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||U.length!=0||this.h.h||(this.s=1,Ct(16),f=!1),this.o=this.o&&f,!f)oo(this.i,this.l,U,"[Invalid Chunked Response]"),si(this),sa(this);else if(0<U.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),$f(yt),yt.M=!0,Ct(11))}}else oo(this.i,this.l,U,null),Ff(this,U);vt==4&&si(this),this.o&&!this.J&&(vt==4?NI(this.j,this):(this.o=!1,yu(this)))}else mR(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),si(this),sa(this)}}}catch{}finally{}};function oI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xx(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Pf:(f=Number(d.substring(f,g)),isNaN(f)?rI:(g+=1,g+f>d.length?Pf:(d=d.slice(g,g+f),u.C=g+f,d)))}_r.prototype.cancel=function(){this.J=!0,si(this)};function yu(u){u.S=Date.now()+u.I,sI(u,u.I)}function sI(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ia(m(u.ba,u),d)}function Of(u){u.B&&(a.clearTimeout(u.B),u.B=null)}_r.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Yx(this.i,this.A),this.L!=2&&(ra(),Ct(17)),si(this),this.s=2,sa(this)):sI(this,this.S-u)};function sa(u){u.j.G==0||u.J||NI(u.j,u)}function si(u){Of(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,K_(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Ff(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Lf(f.h,u))){if(!u.K&&Lf(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Cu(f),Du(f);else break e;Bf(f),Ct(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ia(m(f.Za,f),6e3));if(1>=uI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ci(f,11)}else if((u.K||f.g==u)&&Cu(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ie=C[d];if(f.T=Ie[0],Ie=Ie[1],f.G==2)if(Ie[0]=="c"){f.K=Ie[1],f.ia=Ie[2];let yt=Ie[3];yt!=null&&(f.la=yt,f.j.info("VER="+f.la));let vt=Ie[4];vt!=null&&(f.Aa=vt,f.j.info("SVER="+f.Aa));let co=Ie[5];co!=null&&typeof co=="number"&&0<co&&(g=1.5*co,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let ln=u.g;if(ln){let Su=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Su){var x=g.h;x.g||Su.indexOf("spdy")==-1&&Su.indexOf("quic")==-1&&Su.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Vf(x,x.h),x.h=null))}if(g.D){let qf=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;qf&&(g.ya=qf,Ne(g.I,g.D,qf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var U=u;if(g.qa=OI(g,g.J?g.ia:null,g.W),U.K){lI(g.h,U);var Se=U,lt=g.L;lt&&(Se.I=lt),Se.B&&(Of(Se),yu(Se)),g.g=U}else RI(g);0<f.i.length&&Tu(f)}else Ie[0]!="stop"&&Ie[0]!="close"||ci(f,7);else f.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?ci(f,7):Uf(f):Ie[0]!="noop"&&f.l&&f.l.ta(Ie),f.v=0)}}ra(4)}catch{}}var eR=class{constructor(u,d){this.g=u,this.map=d}};function aI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function uI(u){return u.h?1:u.g?u.g.size:0}function Lf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Vf(u,d){u.g?u.g.add(d):u.h=d}function lI(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}aI.prototype.cancel=function(){if(this.i=dI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function dI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return A(u.i)}function tR(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function nR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function hI(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=nR(u),g=tR(u),C=g.length,x=0;x<C;x++)d.call(void 0,g[x],f&&f[x],u)}var fI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rR(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var x=u[f].substring(0,g);C=u[f].substring(g+1)}else x=u[f];d(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ai(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ai){this.h=u.h,vu(this,u.j),this.o=u.o,this.g=u.g,wu(this,u.s),this.l=u.l;var d=u.i,f=new ua;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),pI(this,f),this.m=u.m}else u&&(d=String(u).match(fI))?(this.h=!1,vu(this,d[1]||"",!0),this.o=aa(d[2]||""),this.g=aa(d[3]||"",!0),wu(this,d[4]),this.l=aa(d[5]||"",!0),pI(this,d[6]||"",!0),this.m=aa(d[7]||"")):(this.h=!1,this.i=new ua(null,this.h))}ai.prototype.toString=function(){var u=[],d=this.j;d&&u.push(ca(d,gI,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(ca(d,gI,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(ca(f,f.charAt(0)=="/"?sR:oR,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",ca(f,cR)),u.join("")};function Zn(u){return new ai(u)}function vu(u,d,f){u.j=f?aa(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function wu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function pI(u,d,f){d instanceof ua?(u.i=d,uR(u.i,u.h)):(f||(d=ca(d,aR)),u.i=new ua(d,u.h))}function Ne(u,d,f){u.i.set(d,f)}function _u(u){return Ne(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function aa(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ca(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,iR),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function iR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var gI=/[#\/\?@]/g,oR=/[#\?:]/g,sR=/[#\?]/g,aR=/[#\?@]/g,cR=/#/g;function ua(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Ir(u){u.g||(u.g=new Map,u.h=0,u.i&&rR(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ua.prototype,n.add=function(u,d){Ir(this),this.i=null,u=so(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function mI(u,d){Ir(u),d=so(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function yI(u,d){return Ir(u),d=so(u,d),u.g.has(d)}n.forEach=function(u,d){Ir(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){Ir(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let x=0;x<C.length;x++)f.push(d[g])}return f},n.V=function(u){Ir(this);let d=[];if(typeof u=="string")yI(this,u)&&(d=d.concat(this.g.get(so(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return Ir(this),this.i=null,u=so(this,u),yI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function vI(u,d,f){mI(u,d),0<f.length&&(u.i=null,u.g.set(so(u,d),A(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var C=x;U[g]!==""&&(C+="="+encodeURIComponent(String(U[g]))),u.push(C)}}return this.i=u.join("&")};function so(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function uR(u,d){d&&!u.j&&(Ir(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(mI(this,g),vI(this,C,f))},u)),u.j=d}function lR(u,d){let f=new oa;if(a.Image){let g=new Image;g.onload=y(Er,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Er,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Er,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Er,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function dR(u,d){let f=new oa,g=new AbortController,C=setTimeout(()=>{g.abort(),Er(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(x=>{clearTimeout(C),x.ok?Er(f,"TestPingServer: ok",!0,d):Er(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Er(f,"TestPingServer: error",!1,d)})}function Er(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function hR(){this.g=new Kx}function fR(u,d,f){let g=f||"";try{hI(u,function(C,x){let U=C;l(C)&&(U=Af(C)),d.push(g+x+"="+encodeURIComponent(U))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function la(u){this.l=u.Ub||null,this.j=u.eb||!1}T(la,xf),la.prototype.g=function(){return new Iu(this.l,this.j)},la.prototype.i=function(u){return function(){return u}}({});function Iu(u,d){mt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Iu,mt),n=Iu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ha(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,da(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ha(this)),this.g&&(this.readyState=3,ha(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function wI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?da(this):ha(this),this.readyState==3&&wI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,da(this))},n.Qa=function(u){this.g&&(this.response=u,da(this))},n.ga=function(){this.g&&da(this)};function da(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ha(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function ha(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function _I(u){let d="";return ee(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function jf(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=_I(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Ne(u,d,f))}function $e(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T($e,mt);var pR=/^https?$/i,gR=["POST","PUT"];n=$e.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nf.g(),this.v=this.o?Q_(this.o):Q_(Nf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(x){II(this,x);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gR,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,U]of f)this.g.setRequestHeader(x,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{TI(this),this.u=!0,this.g.send(u),this.u=!1}catch(x){II(this,x)}};function II(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,EI(u),Eu(u)}function EI(u){u.A||(u.A=!0,Tt(u,"complete"),Tt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Tt(this,"complete"),Tt(this,"abort"),Eu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eu(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?DI(this):this.bb())},n.bb=function(){DI(this)};function DI(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Yn(u)!=4||u.Z()!=2)){if(u.u&&Yn(u)==4)H_(u.Ea,0,u);else if(Tt(u,"readystatechange"),Yn(u)==4){u.h=!1;try{let U=u.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=U===0){var C=String(u.D).match(fI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!pR.test(C?C.toLowerCase():"")}f=g}if(f)Tt(u,"complete"),Tt(u,"success");else{u.m=6;try{var x=2<Yn(u)?u.g.statusText:""}catch{x=""}u.l=x+" ["+u.Z()+"]",EI(u)}}finally{Eu(u)}}}}function Eu(u,d){if(u.g){TI(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Tt(u,"ready");try{f.onreadystatechange=g}catch{}}}function TI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Yn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Wx(d)}};function CI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function mR(u){let d={};u=(u.g&&2<=Yn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(q(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[C]||[];d[C]=x,x.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function bI(u){this.Aa=0,this.i=[],this.j=new oa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fa("baseRetryDelayMs",5e3,u),this.cb=fa("retryDelaySeedMs",1e4,u),this.Wa=fa("forwardChannelMaxRetries",2,u),this.wa=fa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new aI(u&&u.concurrentRequestLimit),this.Da=new hR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=bI.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){Ct(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=OI(this,null,this.W),Tu(this)};function Uf(u){if(SI(u),u.G==3){var d=u.U++,f=Zn(u.I);if(Ne(f,"SID",u.K),Ne(f,"RID",d),Ne(f,"TYPE","terminate"),pa(u,f),d=new _r(u,u.j,d),d.L=2,d.v=_u(Zn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=FI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),yu(d)}kI(u)}function Du(u){u.g&&($f(u),u.g.cancel(),u.g=null)}function SI(u){Du(u),u.u&&(a.clearTimeout(u.u),u.u=null),Cu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Tu(u){if(!cI(u.h)&&!u.s){u.s=!0;var d=u.Ga;Ys||j_(),Js||(Ys(),Js=!0),wf.add(d,u),u.B=0}}function yR(u,d){return uI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ia(m(u.Ga,u,d),PI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new _r(this,this.j,u),x=this.o;if(this.S&&(x?(x=v(x),E(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=xI(this,C,d),f=Zn(this.I),Ne(f,"RID",u),Ne(f,"CVER",22),this.D&&Ne(f,"X-HTTP-Session-Id",this.D),pa(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(_I(x)))+"&"+d:this.m&&jf(f,this.m,x)),Vf(this.h,C),this.Ua&&Ne(f,"TYPE","init"),this.P?(Ne(f,"$req",d),Ne(f,"SID","null"),C.T=!0,kf(C,f,null)):kf(C,f,d),this.G=2}}else this.G==3&&(u?AI(this,u):this.i.length==0||cI(this.h)||AI(this))};function AI(u,d){var f;d?f=d.l:f=u.U++;let g=Zn(u.I);Ne(g,"SID",u.K),Ne(g,"RID",f),Ne(g,"AID",u.T),pa(u,g),u.m&&u.o&&jf(g,u.m,u.o),f=new _r(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=xI(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Vf(u.h,f),kf(f,g,d)}function pa(u,d){u.H&&ee(u.H,function(f,g){Ne(d,g,f)}),u.l&&hI({},function(f,g){Ne(d,g,f)})}function xI(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let x=-1;for(;;){let U=["count="+f];x==-1?0<f?(x=C[0].g,U.push("ofs="+x)):x=0:U.push("ofs="+x);let Se=!0;for(let lt=0;lt<f;lt++){let Ie=C[lt].g,yt=C[lt].map;if(Ie-=x,0>Ie)x=Math.max(0,C[lt].g-100),Se=!1;else try{fR(yt,U,"req"+Ie+"_")}catch{g&&g(yt)}}if(Se){g=U.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function RI(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Ys||j_(),Js||(Ys(),Js=!0),wf.add(d,u),u.v=0}}function Bf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ia(m(u.Fa,u),PI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,MI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ia(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),Du(this),MI(this))};function $f(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function MI(u){u.g=new _r(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Zn(u.qa);Ne(d,"RID","rpc"),Ne(d,"SID",u.K),Ne(d,"AID",u.T),Ne(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ne(d,"TO",u.ja),Ne(d,"TYPE","xmlhttp"),pa(u,d),u.m&&u.o&&jf(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=_u(Zn(d)),f.m=null,f.P=!0,iI(f,u)}n.Za=function(){this.C!=null&&(this.C=null,Du(this),Bf(this),Ct(19))};function Cu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function NI(u,d){var f=null;if(u.g==d){Cu(u),$f(u),u.g=null;var g=2}else if(Lf(u.h,d))f=d.D,lI(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=pu(),Tt(g,new eI(g,f)),Tu(u)}else RI(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&yR(u,d)||g==2&&Bf(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:ci(u,5);break;case 4:ci(u,10);break;case 3:ci(u,6);break;default:ci(u,2)}}}function PI(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ci(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new ai(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vu(g,"https"),_u(g),C?lR(g.toString(),f):dR(g.toString(),f)}else Ct(2);u.G=0,u.l&&u.l.sa(d),kI(u),SI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function kI(u){if(u.G=0,u.ka=[],u.l){let d=dI(u.h);(d.length!=0||u.i.length!=0)&&(M(u.ka,d),M(u.ka,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.ra()}}function OI(u,d,f){var g=f instanceof ai?Zn(f):new ai(f);if(g.g!="")d&&(g.g=d+"."+g.g),wu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var x=new ai(null);g&&vu(x,g),d&&(x.g=d),C&&wu(x,C),f&&(x.l=f),g=x}return f=u.D,d=u.ya,f&&d&&Ne(g,f,d),Ne(g,"VER",u.la),pa(u,g),g}function FI(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new $e(new la({eb:f})):new $e(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function LI(){}n=LI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function bu(){}bu.prototype.g=function(u,d){return new $t(u,d)};function $t(u,d){mt.call(this),this.g=new bI(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!q(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ao(this)}T($t,mt),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Uf(this.g)},$t.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Af(u),u=f);d.i.push(new eR(d.Ya++,u)),d.G==3&&Tu(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,Uf(this.g),delete this.g,$t.aa.N.call(this)};function VI(u){Rf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}T(VI,Rf);function jI(){Mf.call(this),this.status=1}T(jI,Mf);function ao(u){this.g=u}T(ao,LI),ao.prototype.ua=function(){Tt(this.g,"a")},ao.prototype.ta=function(u){Tt(this.g,new VI(u))},ao.prototype.sa=function(u){Tt(this.g,new jI)},ao.prototype.ra=function(){Tt(this.g,"b")},bu.prototype.createWebChannel=bu.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,Ly=ur.createWebChannelTransport=function(){return new bu},Fy=ur.getStatEventTarget=function(){return pu()},Oy=ur.Event=oi,Kd=ur.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gu.NO_ERROR=0,gu.TIMEOUT=8,gu.HTTP_ERROR=6,Tc=ur.ErrorCode=gu,tI.COMPLETE="complete",ky=ur.EventType=tI,Z_.EventType=na,na.OPEN="a",na.CLOSE="b",na.ERROR="c",na.MESSAGE="d",mt.prototype.listen=mt.prototype.K,us=ur.WebChannel=Z_,OV=ur.FetchXmlHttpFactory=la,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,Py=ur.XhrIo=$e}).apply(typeof Wd<"u"?Wd:typeof self<"u"?self:typeof window<"u"?window:{});var zb="@firebase/firestore";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var Us="10.14.0";var Gr=new Ru("@firebase/firestore");function ps(){return Gr.logLevel}function WS(n){Gr.setLogLevel(n)}function k(n,...e){if(Gr.logLevel<=An.DEBUG){let t=e.map($w);Gr.debug(`Firestore (${Us}): ${n}`,...t)}}function Ke(n,...e){if(Gr.logLevel<=An.ERROR){let t=e.map($w);Gr.error(`Firestore (${Us}): ${n}`,...t)}}function Dn(n,...e){if(Gr.logLevel<=An.WARN){let t=e.map($w);Gr.warn(`Firestore (${Us}): ${n}`,...t)}}function $w(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function G(n="Unexpected state"){let e=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: `+n;throw Ke(e),new Error(e)}function K(n,e){n||G()}function KS(n,e){n||G()}function B(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends GI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ih=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tt.UNAUTHENTICATED))}shutdown(){}},zy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Hy=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>N(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new ih(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new tt(e)}},Gy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Wy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Gy(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ky=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Qy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new Ky(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function FV(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var oh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=FV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function oe(n,e){return n<e?-1:n>e?1:0}function Ds(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function QS(n){return n+"\0"}var Ue=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ue(0,0))}static max(){return new n(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var sh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(),r===void 0?r=e.length-t:r>e.length-t&&G(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},we=class n extends sh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},LV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qe=class n extends sh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return LV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(we.fromString(e))}static fromName(e){return new n(we.fromString(e).popFirst(5))}static empty(){return new n(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return we.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new we(e.slice()))}};var Ts=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Zy(n){return n.fields.find(e=>e.kind===2)}function Pi(n){return n.fields.filter(e=>e.kind!==2)}Ts.UNKNOWN_ID=-1;var _s=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Fc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,cn.min())}};function ZS(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Ue(t+1,0):new Ue(t,r));return new cn(i,$.empty(),e)}function YS(n){return new cn(n.readTime,n.key,-1)}var cn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(X.min(),$.empty(),-1)}static max(){return new n(X.max(),$.empty(),-1)}};function qw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var JS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ah=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ni(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==JS)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var ch=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ji(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=zw(r.target.error);this.V.reject(new ji(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ji(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Jy(t)}},Wr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ga())===12.2&&Ke("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),ki(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!xu())return!1;if(n.v())return!0;let e=ga(),t=n.S(e),r=0<t&&t<10,i=XS(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ji(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ji(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=ch.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function XS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Yy=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ki(this.B.delete())}},ji=class extends P{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ri(n){return n.name==="IndexedDbTransactionError"}var Jy=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ki(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),ki(this.store.add(e))}get(e){return ki(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),ki(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),ki(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=zw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Yy(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ki(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=zw(r.target.error);t(i)}})}var Hb=!1;function zw(n){let e=Wr.S(ga());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hb||(Hb=!0,setTimeout(()=>{throw r},0)),r}}return n}var Xy=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){ri(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ni(t)}yield this.X(6e4)}))}},ev=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=YS(o);qw(s,r)>0&&(r=s)}),new cn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Xt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ru(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function e1(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Pt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gb(e)),e=VV(n.get(t),e);return Gb(e)}function VV(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function Gb(n){return n+""}function jn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),we.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&G(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:G()}o=s+2}return new we(r)}var Wb=["userId","batchId"];function Xd(n,e){return[n,Pt(e)]}function t1(n,e,t){return[n,Pt(e),t]}var jV={},UV=["prefixPath","collectionGroup","readTime","documentId"],BV=["prefixPath","collectionGroup","documentId"],$V=["collectionGroup","readTime","prefixPath","documentId"],qV=["canonicalId","targetId"],zV=["targetId","path"],HV=["path","targetId"],GV=["collectionId","parent"],WV=["indexId","uid"],KV=["uid","sequenceNumber"],QV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZV=["indexId","uid","orderedDocumentKey"],YV=["userId","collectionPath","documentId"],JV=["userId","collectionPath","largestBatchId"],XV=["userId","collectionGroup","largestBatchId"],n1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],e4=[...n1,"documentOverlays"],r1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],i1=r1,Hw=[...i1,"indexConfiguration","indexState","indexEntries"],t4=Hw,n4=[...Hw,"globals"];var Vc=class extends ah{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function it(n,e){let t=B(n);return Wr.F(t._e,e)}function Kb(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function o1(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pe=class n{constructor(e,t){this.comparator=e,this.root=t||Bn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ws(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ws(this.root,e,this.comparator,!1)}getReverseIterator(){return new ws(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ws(this.root,e,this.comparator,!0)}},ws=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Bn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xe=class n{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uh(this.data.getIterator())}getIteratorFrom(e){return new uh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},uh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ls(n){return n.hasNext()?n.getNext():void 0}var en=class n{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new n([])}unionWith(e){let t=new xe(Qe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ds(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var lh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function s1(){return typeof atob<"u"}var Ye=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ye.EMPTY_BYTE_STRING=new Ye("");var r4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(n){if(K(!!n),typeof n=="string"){let e=0,t=r4.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Kr(n){return typeof n=="string"?Ye.fromBase64String(n):Ye.fromUint8Array(n)}function tf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Gw(n){let e=n.mapValue.fields.__previous_value__;return tf(e)?Gw(e):e}function jc(n){let e=hr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}var tv=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Qr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},eh={nullValue:"NULL_VALUE"};function Ui(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tf(n)?4:a1(n)?9007199254740991:nf(n)?10:11:G()}function zn(n,e){if(n===e)return!0;let t=Ui(n);if(t!==Ui(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jc(n).isEqual(jc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=hr(i.timestampValue),a=hr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Kr(i.bytesValue).isEqual(Kr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?Lc(s)===Lc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ds(n.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Kb(s)!==Kb(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!zn(s[c],a[c])))return!1;return!0}(n,e);default:return G()}}function Uc(n,e){return(n.values||[]).find(t=>zn(t,e))!==void 0}function Zr(n,e){if(n===e)return 0;let t=Ui(n),r=Ui(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Oe(o.integerValue||o.doubleValue),c=Oe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Qb(n.timestampValue,e.timestampValue);case 4:return Qb(jc(n),jc(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Kr(o),c=Kr(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=oe(a[l],c[l]);if(h!==0)return h}return oe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=oe(Oe(o.latitude),Oe(s.latitude));return a!==0?a:oe(Oe(o.longitude),Oe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Zb(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,T=(c=m.value)===null||c===void 0?void 0:c.arrayValue,A=oe(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:Zb(y,T)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===zr.mapValue&&s===zr.mapValue)return 0;if(o===zr.mapValue)return 1;if(s===zr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=oe(c[p],h[p]);if(m!==0)return m;let y=Zr(a[c[p]],l[h[p]]);if(y!==0)return y}return oe(c.length,h.length)}(n.mapValue,e.mapValue);default:throw G()}}function Qb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=hr(n),r=hr(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function Zb(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Zr(t[i],r[i]);if(o)return o}return oe(t.length,r.length)}function Cs(n){return nv(n)}function nv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=hr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Kr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=nv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${nv(t.fields[s])}`;return i+"}"}(n.mapValue):G()}function Bi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rv(n){return!!n&&"integerValue"in n}function Bc(n){return!!n&&"arrayValue"in n}function Yb(n){return!!n&&"nullValue"in n}function Jb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function th(n){return!!n&&"mapValue"in n}function nf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Mc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Yi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function a1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var c1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function i4(n){return"nullValue"in n?eh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Bi(Qr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?nf(n)?c1:{mapValue:{}}:G()}function o4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Bi(Qr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?c1:"mapValue"in n?nf(n)?{mapValue:{}}:zr:G()}function Xb(n,e){let t=Zr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function eS(n,e){let t=Zr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Dt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!th(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mc(t)}setAll(e){let t=Qe.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Mc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());th(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];th(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Mc(this.value))}};function u1(n){let e=[];return Yi(n.fields,(t,r)=>{let i=new Qe([t]);if(th(r)){let o=u1(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new en(e)}var nt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),Dt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,X.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),Dt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),Dt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Hn=class{constructor(e,t){this.position=e,this.inclusive=t}};function tS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Zr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function nS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zn(n.position[t],e.position[t]))return!1;return!0}var $i=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function s4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var dh=class{},ge=class n extends dh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sv(e,t,r):t==="array-contains"?new uv(e,r):t==="in"?new hh(e,r):t==="not-in"?new lv(e,r):t==="array-contains-any"?new dv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new av(e,r):new cv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Zr(t,this.value)):t!==null&&Ui(this.value)===Ui(t)&&this.matchesComparison(Zr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},be=class n extends dh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return bs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function bs(n){return n.op==="and"}function iv(n){return n.op==="or"}function Ww(n){return l1(n)&&bs(n)}function l1(n){for(let e of n.filters)if(e instanceof be)return!1;return!0}function ov(n){if(n instanceof ge)return n.field.canonicalString()+n.op.toString()+Cs(n.value);if(Ww(n))return n.filters.map(e=>ov(e)).join(",");{let e=n.filters.map(t=>ov(t)).join(",");return`${n.op}(${e})`}}function d1(n,e){return n instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(n,e):n instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&d1(s,i.filters[a]),!0):!1}(n,e):void G()}function h1(n,e){let t=n.filters.concat(e);return be.create(t,n.op)}function f1(n){return n instanceof ge?function(t){return`${t.field.canonicalString()} ${t.op} ${Cs(t.value)}`}(n):n instanceof be?function(t){return t.op.toString()+" {"+t.getFilters().map(f1).join(" ,")+"}"}(n):"Filter"}var sv=class extends ge{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},av=class extends ge{constructor(e,t){super(e,"in",t),this.keys=p1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},cv=class extends ge{constructor(e,t){super(e,"not-in",t),this.keys=p1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function p1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var uv=class extends ge{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Bc(t)&&Uc(t.arrayValue,this.value)}},hh=class extends ge{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Uc(this.value.arrayValue,t)}},lv=class extends ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Uc(this.value.arrayValue,t)}},dv=class extends ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Bc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uc(this.value.arrayValue,r))}};var hv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function fv(n,e=null,t=[],r=[],i=null,o=null,s=null){return new hv(n,e,t,r,i,o,s)}function qi(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ov(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ru(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Cs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Cs(r)).join(",")),e.ue=t}return e.ue}function iu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!s4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!d1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nS(n.startAt,e.startAt)&&nS(n.endAt,e.endAt)}function fh(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ph(n,e){return n.filters.filter(t=>t instanceof ge&&t.field.isEqual(e))}function rS(n,e,t){let r=eh,i=!0;for(let o of ph(n,e)){let s=eh,a=!0;switch(o.op){case"<":case"<=":s=i4(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=eh}Xb({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Xb({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function iS(n,e,t){let r=zr,i=!0;for(let o of ph(n,e)){let s=zr,a=!0;switch(o.op){case">=":case">":s=o4(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=zr}eS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];eS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Tn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function g1(n,e,t,r,i,o,s,a){return new Tn(n,e,t,r,i,o,s,a)}function Bs(n){return new Tn(n)}function oS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Kw(n){return n.collectionGroup!==null}function Is(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xe(Qe.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new $i(o,r))}),t.has(Qe.keyField().canonicalString())||e.ce.push(new $i(Qe.keyField(),r))}return e.ce}function kt(n){let e=B(n);return e.le||(e.le=a4(e,Is(n))),e.le}function a4(n,e){if(n.limitType==="F")return fv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new $i(i.field,o)});let t=n.endAt?new Hn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hn(n.startAt.position,n.startAt.inclusive):null;return fv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function pv(n,e){let t=n.filters.concat([e]);return new Tn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gh(n,e,t){return new Tn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ou(n,e){return iu(kt(n),kt(e))&&n.limitType===e.limitType}function m1(n){return`${qi(kt(n))}|lt:${n.limitType}`}function gs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>f1(i)).join(", ")}]`),ru(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Cs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Cs(i)).join(",")),`Target(${r})`}(kt(n))}; limitType=${n.limitType})`}function su(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Is(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=tS(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Is(r),i)||r.endAt&&!function(s,a,c){let l=tS(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Is(r),i))}(n,e)}function y1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function v1(n){return(e,t)=>{let r=!1;for(let i of Is(n)){let o=c4(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function c4(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Zr(c,l):G()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}var Gn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return o1(this.inner)}size(){return this.innerSize}};var u4=new Pe($.comparator);function Ut(){return u4}var w1=new Pe($.comparator);function xc(...n){let e=w1;for(let t of n)e=e.insert(t.key,t);return e}function _1(n){let e=w1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Un(){return Nc()}function I1(){return Nc()}function Nc(){return new Gn(n=>n.toString(),(n,e)=>n.isEqual(e))}var l4=new Pe($.comparator),d4=new xe($.comparator);function se(...n){let e=d4;for(let t of n)e=e.add(t);return e}var h4=new xe(oe);function Qw(){return h4}function Zw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function E1(n){return{integerValue:""+n}}function D1(n,e){return e1(e)?E1(e):Zw(n,e)}var Ss=class{constructor(){this._=void 0}};function f4(n,e,t){return n instanceof Yr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&tf(o)&&(o=Gw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof fr?C1(n,e):n instanceof pr?b1(n,e):function(i,o){let s=T1(i,o),a=sS(s)+sS(i.Pe);return rv(s)&&rv(i.Pe)?E1(a):Zw(i.serializer,a)}(n,e)}function p4(n,e,t){return n instanceof fr?C1(n,e):n instanceof pr?b1(n,e):t}function T1(n,e){return n instanceof Jr?function(r){return rv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Yr=class extends Ss{},fr=class extends Ss{constructor(e){super(),this.elements=e}};function C1(n,e){let t=S1(e);for(let r of n.elements)t.some(i=>zn(i,r))||t.push(r);return{arrayValue:{values:t}}}var pr=class extends Ss{constructor(e){super(),this.elements=e}};function b1(n,e){let t=S1(e);for(let r of n.elements)t=t.filter(i=>!zn(i,r));return{arrayValue:{values:t}}}var Jr=class extends Ss{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function sS(n){return Oe(n.integerValue||n.doubleValue)}function S1(n){return Bc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var zi=class{constructor(e,t){this.field=e,this.transform=t}};function g4(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof fr&&i instanceof fr||r instanceof pr&&i instanceof pr?Ds(r.elements,i.elements,zn):r instanceof Jr&&i instanceof Jr?zn(r.Pe,i.Pe):r instanceof Yr&&i instanceof Yr}(n.transform,e.transform)}var gv=class{constructor(e,t){this.version=e,this.transformResults=t}},He=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function nh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var As=class{};function A1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ei(n.key,He.none()):new Xr(n.key,n.data,He.none());{let t=n.data,r=Dt.empty(),i=new xe(Qe.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Cn(n.key,r,new en(i.toArray()),He.none())}}function m4(n,e,t){n instanceof Xr?function(i,o,s){let a=i.value.clone(),c=cS(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Cn?function(i,o,s){if(!nh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=cS(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(x1(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Pc(n,e,t,r){return n instanceof Xr?function(o,s,a,c){if(!nh(o.precondition,s))return a;let l=o.value.clone(),h=uS(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cn?function(o,s,a,c){if(!nh(o.precondition,s))return a;let l=uS(o.fieldTransforms,c,s),h=s.data;return h.setAll(x1(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return nh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function y4(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=T1(r.transform,i||null);o!=null&&(t===null&&(t=Dt.empty()),t.set(r.field,o))}return t||null}function aS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ds(r,i,(o,s)=>g4(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Xr=class extends As{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Cn=class extends As{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function x1(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function cS(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,p4(s,a,t[i]))}return r}function uS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,f4(o,s,e))}return r}var ei=class extends As{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$c=class extends As{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var qc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&m4(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Pc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=I1();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=A1(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&Ds(this.mutations,e.mutations,(t,r)=>aS(t,r))&&Ds(this.baseMutations,e.baseMutations,(t,r)=>aS(t,r))}},mv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return l4}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var zc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var yv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Xe,ve;function R1(n){switch(n){default:return G();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function M1(n){if(n===void 0)return Ke("GRPC error has no .code"),R.UNKNOWN;switch(n){case Xe.OK:return R.OK;case Xe.CANCELLED:return R.CANCELLED;case Xe.UNKNOWN:return R.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return R.INTERNAL;case Xe.UNAVAILABLE:return R.UNAVAILABLE;case Xe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Xe.NOT_FOUND:return R.NOT_FOUND;case Xe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Xe.ABORTED:return R.ABORTED;case Xe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Xe.DATA_LOSS:return R.DATA_LOSS;default:return G()}}(ve=Xe||(Xe={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var lS=null;function N1(){return new TextEncoder}var v4=new jr([4294967295,4294967295],0);function dS(n){let e=N1().encode(n),t=new Ny;return t.update(e),new Uint8Array(t.digest())}function hS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jr([t,r],0),new jr([i,o],0)]}var vv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vi(`Invalid padding: ${t}`);if(r<0)throw new Vi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Vi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=jr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(jr.fromNumber(r)));return i.compare(v4)===1&&(i=new jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=dS(e),[r,i]=hS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=dS(e),[r,i]=hS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Vi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Hc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(X.min(),i,new Pe(oe),Ut(),se())}},Gc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var Es=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},mh=class{constructor(e,t){this.targetId=e,this.me=t}},yh=class{constructor(e,t,r=Ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},vh=class{constructor(){this.fe=0,this.ge=pS(),this.pe=Ye.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),t=se(),r=se();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G()}}),new Gc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=pS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},wv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ut(),this.qe=fS(),this.Qe=new Pe(oe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(fh(o))if(r===0){let s=new $(o.path);this.Ue(t,s,nt.newNoDocument(s,X.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}lS?.et(function(h,p,m,y,T){var A,M,L,q,V,Q;let ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ee=p.unchangedNames;return ee&&(ne.bloomFilter={applied:T===0,hashCount:(A=ee?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(q=(L=(M=ee?.bits)===null||M===void 0?void 0:M.bitmap)===null||L===void 0?void 0:L.length)!==null&&q!==void 0?q:0,padding:(Q=(V=ee?.bits)===null||V===void 0?void 0:V.padding)!==null&&Q!==void 0?Q:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),ne}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Kr(r).toUint8Array()}catch(c){if(c instanceof lh)return Dn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new vv(s,i,o)}catch(c){return Dn(c instanceof Vi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&fh(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,nt.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=se();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Hc(e,t,this.Qe,this.ke,r);return this.ke=Ut(),this.qe=fS(),this.Qe=new Pe(oe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new vh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xe(oe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function fS(){return new Pe($.comparator)}function pS(){return new Pe($.comparator)}var w4={asc:"ASCENDING",desc:"DESCENDING"},_4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I4={and:"AND",or:"OR"},_v=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Iv(n,e){return n.useProto3Json||ru(e)?e:{value:e}}function xs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function E4(n,e){return xs(n,e.toTimestamp())}function Ze(n){return K(!!n),X.fromTimestamp(function(t){let r=hr(t);return new Ue(r.seconds,r.nanos)}(n))}function Yw(n,e){return Ev(n,e).canonicalString()}function Ev(n,e){let t=function(i){return new we(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function k1(n){let e=we.fromString(n);return K(z1(e)),e}function Wc(n,e){return Yw(n.databaseId,e.path)}function $n(n,e){let t=k1(e);if(t.get(1)!==n.databaseId.projectId)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(L1(t))}function O1(n,e){return Yw(n.databaseId,e)}function F1(n){let e=k1(n);return e.length===4?we.emptyPath():L1(e)}function Dv(n){return new we(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function L1(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function gS(n,e,t){return{name:Wc(n,e),fields:t.value.mapValue.fields}}function V1(n,e,t){let r=$n(n,e.name),i=Ze(e.updateTime),o=e.createTime?Ze(e.createTime):X.min(),s=new Dt({mapValue:{fields:e.fields}}),a=nt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function D4(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=$n(r,i.found.name),s=Ze(i.found.updateTime),a=i.found.createTime?Ze(i.found.createTime):X.min(),c=new Dt({mapValue:{fields:i.found.fields}});return nt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=$n(r,i.missing),s=Ze(i.readTime);return nt.newNoDocument(o,s)}(n,e):G()}function T4(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Ye.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ye.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:M1(l.code);return new P(h,l.message||"")}(s);t=new yh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=$n(n,r.document.name),o=Ze(r.document.updateTime),s=r.document.createTime?Ze(r.document.createTime):X.min(),a=new Dt({mapValue:{fields:r.document.fields}}),c=nt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Es(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=$n(n,r.document),o=r.readTime?Ze(r.readTime):X.min(),s=nt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Es([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=$n(n,r.document),o=r.removedTargetIds||[];t=new Es([],o,i,null)}else{if(!("filter"in e))return G();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new yv(i,o),a=r.targetId;t=new mh(a,s)}}return t}function Kc(n,e){let t;if(e instanceof Xr)t={update:gS(n,e.key,e.value)};else if(e instanceof ei)t={delete:Wc(n,e.key)};else if(e instanceof Cn)t={update:gS(n,e.key,e.data),updateMask:R4(e.fieldMask)};else{if(!(e instanceof $c))return G();t={verify:Wc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Yr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw G()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:E4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G()}(n,e.precondition)),t}function Tv(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?He.updateTime(Ze(o.updateTime)):o.exists!==void 0?He.exists(o.exists):He.none()}(e.currentDocument):He.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),c=new Yr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new fr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new pr(h)}else"increment"in a?c=new Jr(s,a.increment):G();let l=Qe.fromServerFormat(a.fieldPath);return new zi(l,c)}(n,i)):[];if(e.update){e.update.name;let i=$n(n,e.update.name),o=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new en(l.map(h=>Qe.fromServerFormat(h)))}(e.updateMask);return new Cn(i,o,s,t,r)}return new Xr(i,o,t,r)}if(e.delete){let i=$n(n,e.delete);return new ei(i,t)}if(e.verify){let i=$n(n,e.verify);return new $c(i,t)}return G()}function C4(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ze(i.updateTime):Ze(o);return s.isEqual(X.min())&&(s=Ze(o)),new gv(s,i.transformResults||[])}(t,e))):[]}function j1(n,e){return{documents:[O1(n,e.path)]}}function U1(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=O1(n,i);let o=function(l){if(l.length!==0)return q1(be.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ms(m.field),direction:S4(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Iv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function B1(n){let e=F1(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=$1(p);return m instanceof be&&Ww(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(T){return new $i(ys(T.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,ru(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,y=p.values||[];return new Hn(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Hn(y,m)}(t.endAt)),g1(e,i,s,o,a,"F",c,l)}function b4(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ys(t.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ys(t.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ys(t.unaryFilter.field);return ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ys(t.unaryFilter.field);return ge.create(s,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(n):n.fieldFilter!==void 0?function(t){return ge.create(ys(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return be.create(t.compositeFilter.filters.map(r=>$1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(t.compositeFilter.op))}(n):G()}function S4(n){return w4[n]}function A4(n){return _4[n]}function x4(n){return I4[n]}function ms(n){return{fieldPath:n.canonicalString()}}function ys(n){return Qe.fromServerFormat(n.fieldPath)}function q1(n){return n instanceof ge?function(t){if(t.op==="=="){if(Jb(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NAN"}};if(Yb(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jb(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NOT_NAN"}};if(Yb(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(t.field),op:A4(t.op),value:t.value}}}(n):n instanceof be?function(t){let r=t.getFilters().map(i=>q1(i));return r.length===1?r[0]:{compositeFilter:{op:x4(t.op),filters:r}}}(n):G()}function R4(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function z1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Rs=class n{constructor(e,t,r,i,o=X.min(),s=X.min(),a=Ye.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var wh=class{constructor(e){this.ct=e}};function M4(n,e){let t;if(e.document)t=V1(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Gi(e.noDocument.readTime);t=nt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return G();{let r=$.fromSegments(e.unknownDocument.path),i=Gi(e.unknownDocument.version);t=nt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ue(i[0],i[1]);return X.fromTimestamp(o)}(e.readTime)),t}function mS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_h(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Wc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:xs(o,s.version.toTimestamp()),createTime:xs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hi(e.version)};else{if(!e.isUnknownDocument())return G();r.unknownDocument={path:t.path.toArray(),version:Hi(e.version)}}return r}function _h(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gi(n){let e=new Ue(n.seconds,n.nanoseconds);return X.fromTimestamp(e)}function Oi(n,e){let t=(e.baseMutations||[]).map(o=>Tv(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Tv(n.ct,o)),i=Ue.fromMillis(e.localWriteTimeMs);return new qc(e.batchId,i,t,r)}function Rc(n){let e=Gi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Gi(n.lastLimboFreeSnapshotVersion):X.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),kt(Bs(F1(o.documents[0])))}(n.query):function(o){return kt(B1(o))}(n.query),new Rs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ye.fromBase64String(n.resumeToken))}function H1(n,e){let t=Hi(e.snapshotVersion),r=Hi(e.lastLimboFreeSnapshotVersion),i;i=fh(e.target)?j1(n.ct,e.target):U1(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Jw(n){let e=B1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gh(e,e.limit,"L"):e}function Vy(n,e){return new zc(e.largestBatchId,Tv(n.ct,e.overlayMutation))}function yS(n,e){let t=e.path.lastSegment();return[n,Pt(e.path.popLast()),t]}function vS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Hi(r.readTime),documentKey:Pt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Cv=class{getBundleMetadata(e,t){return wS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Gi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return wS(e).put(function(i){return{bundleId:i.id,createTime:Hi(Ze(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return _S(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Jw(o.bundledQuery),readTime:Gi(o.readTime)}}(r)})}saveNamedQuery(e,t){return _S(e).put(function(i){return{name:i.name,readTime:Hi(Ze(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function wS(n){return it(n,"bundles")}function _S(n){return it(n,"namedQueries")}var Ih=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Cc(e).get(yS(this.userId,t)).next(r=>r?Vy(this.serializer,r):null)}getOverlays(e,t){let r=Un();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new zc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Pt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Cc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Un(),o=Pt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Cc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Vy(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Un(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cc(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=Vy(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Cc(e).put(function(i,o,s){let[a,c,l]=yS(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Kc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Cc(n){return it(n,"documentOverlays")}var bv=class{Pt(e){return it(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ye.fromUint8Array(r):Ye.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var lr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Lc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=hr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Kr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?a1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):nf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):G()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};lr.vt=new lr;function N4(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function IS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=N4(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Sv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=IS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=IS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Av=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},xv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Fi=class{constructor(){this.jt=new Sv,this.Ht=new Av(this.jt),this.Jt=new xv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Li=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Ur(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=ES(n.arrayValue,e.arrayValue),t!==0?t:(t=ES(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function ES(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Eh=class{constructor(e){this.Xt=new xe((t,r)=>Qe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Zy(e);if(t!==void 0&&!this.sn(t))return!1;let r=Pi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new xe(Qe.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new _s(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new _s(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new _s(r.field,r.dir==="asc"?0:1)));return new Ts(Ts.UNKNOWN_ID,this.collectionId,t,Fc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function G1(n){var e,t;if(K(n instanceof ge||n instanceof be),n instanceof ge){if(n instanceof hh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ge.create(n.field,"==",o)))||[];return be.create(i,"or")}return n}let r=n.filters.map(i=>G1(i));return be.create(r,n.op)}function P4(n){if(n.getFilters().length===0)return[];let e=Nv(G1(n));return K(W1(e)),Rv(e)||Mv(e)?[e]:e.getFilters()}function Rv(n){return n instanceof ge}function Mv(n){return n instanceof be&&Ww(n)}function W1(n){return Rv(n)||Mv(n)||function(t){if(t instanceof be&&iv(t)){for(let r of t.getFilters())if(!Rv(r)&&!Mv(r))return!1;return!0}return!1}(n)}function Nv(n){if(K(n instanceof ge||n instanceof be),n instanceof ge)return n;if(n.filters.length===1)return Nv(n.filters[0]);let e=n.filters.map(r=>Nv(r)),t=be.create(e,n.op);return t=Dh(t),W1(t)?t:(K(t instanceof be),K(bs(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>Xw(r,i)))}function Xw(n,e){let t;return K(n instanceof ge||n instanceof be),K(e instanceof ge||e instanceof be),t=n instanceof ge?e instanceof ge?function(i,o){return be.create([i,o],"and")}(n,e):DS(n,e):e instanceof ge?DS(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),bs(i)&&bs(o))return h1(i,o.getFilters());let s=iv(i)?i:o,a=iv(i)?o:i,c=s.filters.map(l=>Xw(l,a));return be.create(c,"or")}(n,e),Dh(t)}function DS(n,e){if(bs(e))return h1(e,n.getFilters());{let t=e.filters.map(r=>Xw(n,r));return be.create(t,"or")}}function Dh(n){if(K(n instanceof ge||n instanceof be),n instanceof ge)return n;let e=n.getFilters();if(e.length===1)return Dh(e[0]);if(l1(n))return n;let t=e.map(i=>Dh(i)),r=[];return t.forEach(i=>{i instanceof ge?r.push(i):i instanceof be&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,n.op)}var Pv=class{constructor(){this.un=new Qc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(cn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(cn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Qc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xe(we.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(we.comparator)).toArray()}};var Qd=new Uint8Array(0),kv=class{constructor(e,t){this.databaseId=t,this.cn=new Qc,this.ln=new Gn(r=>qi(r),(r,i)=>iu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Pt(i)};return TS(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[QS(t),""],!1,!0);return TS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(jn(s.parent))}return r})}addFieldIndex(e,t){let r=bc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=hs(e);return o.next(a=>{s.put(vS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=bc(e),i=hs(e),o=ds(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=bc(e),r=ds(e),i=hs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Eh(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=ds(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=se(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(c)} to execute ${qi(t)}`);let h=function(V,Q){let ne=Zy(Q);if(ne===void 0)return null;for(let ee of ph(V,ne.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null}(l,c),p=function(V,Q){let ne=new Map;for(let ee of Pi(Q))for(let I of ph(V,ee.fieldPath))switch(I.op){case"==":case"in":ne.set(ee.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ne.set(ee.fieldPath.canonicalString(),I.value),Array.from(ne.values())}return null}(l,c),m=function(V,Q){let ne=[],ee=!0;for(let I of Pi(Q)){let v=I.kind===0?rS(V,I.fieldPath,V.startAt):iS(V,I.fieldPath,V.startAt);ne.push(v.value),ee&&(ee=v.inclusive)}return new Hn(ne,ee)}(l,c),y=function(V,Q){let ne=[],ee=!0;for(let I of Pi(Q)){let v=I.kind===0?iS(V,I.fieldPath,V.endAt):rS(V,I.fieldPath,V.endAt);ne.push(v.value),ee&&(ee=v.inclusive)}return new Hn(ne,ee)}(l,c),T=this.In(c,l,m),A=this.In(c,l,y),M=this.Tn(c,l,p),L=this.En(c.indexId,h,T,m.inclusive,A,y.inclusive,M);return S.forEach(L,q=>r.G(q,t.limit).next(V=>{V.forEach(Q=>{let ne=$.fromSegments(Q.documentKey);s.has(ne)||(s=s.add(ne),a.push(ne))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=P4(be.create(e.filters,"and")).map(r=>fv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):Qd,y=this.An(e,m,r[p%l],i),T=this.Rn(e,m,o[p%l],s),A=a.map(M=>this.An(e,m,M,!0));h.push(...this.createRange(y,T,A))}return h}An(e,t,r,i){let o=new Li(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Li(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Eh(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new xe(Qe.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Fi;for(let i of Pi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);lr.vt.It(o,s)}return r.zt()}dn(e){let t=new Fi;return lr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Fi;return lr.vt.It(Bi(this.databaseId,t),r.Yt(function(o){let s=Pi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Fi);let o=0;for(let s of Pi(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&Bc(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);lr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Fi;c.seed(a.zt()),lr.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=bc(e),i=hs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new Fc(p.sequenceNumber,new cn(Gi(p.readTime),new $(jn(p.documentKey)),p.largestBatchId)):Fc.empty(),y=h.fields.map(([T,A])=>new _s(Qe.fromServerFormat(T),A));return new Ts(h.indexId,h.collectionGroup,y,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:oe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=bc(e),o=hs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(vS(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return ds(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ds(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=ds(e),o=new xe(Ur);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Li(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new xe(Ur),i=this.Vn(t,e);if(i==null)return r;let o=Zy(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Bc(s))for(let a of s.arrayValue.values||[])r=r.add(new Li(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Li(t.indexId,e.key,Qd,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let y=c.getIterator(),T=l.getIterator(),A=ls(y),M=ls(T);for(;A||M;){let L=!1,q=!1;if(A&&M){let V=h(A,M);V<0?q=!0:V>0&&(L=!0)}else A!=null?q=!0:L=!0;L?(p(M),M=ls(T)):q?(m(A),A=ls(y)):(A=ls(y),M=ls(T))}}(i,o,Ur,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return hs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Ur(s,a)).filter((s,a,c)=>!a||Ur(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ur(s,e),c=Ur(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Qd,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Qd,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return Ur(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(CS)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||G())).next(CS)}};function TS(n){return it(n,"collectionParents")}function ds(n){return it(n,"indexEntries")}function bc(n){return it(n,"indexConfiguration")}function hs(n){return it(n,"indexState")}function CS(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;qw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new cn(e.readTime,e.documentKey,t)}var bS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},an=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function K1(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=t1(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Th(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw G();e=n.noDocument}return JSON.stringify(e).length}an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(41943040,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);var Ch=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=vs(e),s=Br(e);return s.add({}).next(a=>{K(typeof a=="number");let c=new qc(a,t,r,i),l=function(y,T,A){let M=A.baseMutations.map(q=>Kc(y.ct,q)),L=A.mutations.map(q=>Kc(y.ct,q));return{userId:T,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:M,mutations:L}}(this.serializer,this.userId,c),h=[],p=new xe((m,y)=>oe(m.canonicalString(),y.canonicalString()));for(let m of i){let y=t1(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,jV))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Br(e).get(t).next(r=>r?(K(r.userId===this.userId),Oi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Br(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Oi(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Br(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).U("userMutationsIndex",t).next(r=>r.map(i=>Oi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Xd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return vs(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=jn(h);if(l===this.userId&&t.path.isEqual(m))return Br(e).get(p).next(y=>{if(!y)throw G();K(y.userId===this.userId),o.push(Oi(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(oe),i=[];return t.forEach(o=>{let s=Xd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=vs(e).J({range:a},(l,h,p)=>{let[m,y,T]=l,A=jn(y);m===this.userId&&o.path.isEqual(A)?r=r.add(T):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Xd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new xe(oe);return vs(e).J({range:s},(c,l,h)=>{let[p,m,y]=c,T=jn(m);p===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Br(e).get(o).next(s=>{if(s===null)throw G();K(s.userId===this.userId),r.push(Oi(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return K1(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return vs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=jn(o[1]);i.push(c)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return Q1(e,this.userId,t)}Nn(e){return Z1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Q1(n,e,t){let r=Xd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return vs(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Br(n){return it(n,"mutations")}function vs(n){return it(n,"documentMutations")}function Z1(n){return it(n,"mutationQueues")}var Ms=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Ov=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Ms(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>X.fromTimestamp(new Ue(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return fs(e).J((s,a)=>{let c=Rc(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return fs(e).J((r,i)=>{let o=Rc(i);t(o)})}qn(e){return SS(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return SS(e).put("targetGlobalKey",t)}Kn(e,t){return fs(e).put(H1(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=qi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return fs(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Rc(a);iu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=$r(e);return t.forEach(s=>{let a=Pt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=$r(e);return S.forEach(t,o=>{let s=Pt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=$r(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=$r(e),o=se();return i.J({range:r,H:!0},(s,a,c)=>{let l=jn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Pt(t.path),i=IDBKeyRange.bound([r],[QS(r)],!1,!0),o=0;return $r(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return fs(e).get(t).next(r=>r?Rc(r):null)}};function fs(n){return it(n,"targets")}function SS(n){return it(n,"targetGlobal")}function $r(n){return it(n,"targetDocuments")}function AS([n,e],[t,r]){let i=oe(n,t);return i===0?oe(e,r):i}var Fv=class{constructor(e){this.Un=e,this.buffer=new xe(AS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();AS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Lv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ri(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ni(t)}yield this.Hn(3e5)}))}},Vv=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Xt.oe);let r=new Fv(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(bS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ps()<=An.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function k4(n,e){return new Vv(n,e)}var jv=class{constructor(e,t){this.db=e,this.garbageCollector=k4(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Zd(e,r)}removeReference(e,t,r){return Zd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Zd(e,t)}nr(e,t){return function(i,o){let s=!1;return Z1(i).Y(a=>Q1(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,X.min()),$r(e).delete(function(p){return[0,Pt(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Zd(e,t)}tr(e,t){let r=$r(e),i,o=Xt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Xt.oe&&t(new $(jn(i)),o),o=l,i=c):o=Xt.oe}).next(()=>{o!==Xt.oe&&t(new $(jn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Zd(n,e){return $r(n).put(function(r,i){return{targetId:0,path:Pt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var bh=class{constructor(){this.changes=new Gn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Uv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ni(e).put(r)}removeEntry(e,t,r){return Ni(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],_h(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=nt.newInvalidDocument(t);return Ni(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Sc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:nt.newInvalidDocument(t)};return Ni(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Sc(t))},(i,o)=>{r={document:this.ir(t,o),size:Th(o)}}).next(()=>r)}getEntries(e,t){let r=Ut();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Ut(),i=new Pe($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Th(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new xe(MS);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Sc(i.first()),Sc(i.last())),s=i.getIterator(),a=s.getNext();return Ni(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&MS(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Sc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),_h(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ni(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Ut();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(su(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Ut(),s=RS(t,r),a=RS(t,cn.max());return Ni(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Bv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return xS(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return xS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=M4(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(X.min())))return r}return nt.newInvalidDocument(e)}};function Y1(n){return new Uv(n)}var Bv=class extends bh{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Gn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new xe((o,s)=>oe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=mS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Th(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=mS(this.cr.serializer,s.convertToNoDocument(X.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function xS(n){return it(n,"remoteDocumentGlobal")}function Ni(n){return it(n,"remoteDocumentsV14")}function Sc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function RS(n,e){let t=e.documentKey.path.toArray();return[n,_h(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function MS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=oe(t[o],r[o]),i)return i;return i=oe(t.length,r.length),i||(i=oe(t[t.length-2],r[r.length-2]),i||oe(t[t.length-1],r[r.length-1]))}var $v=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Sh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Pc(r.mutation,i,en.empty(),Ue.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=Un();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=xc();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Un();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ut(),s=Nc(),a=function(){return Nc()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Cn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Pc(h.mutation,l,h.mutation.getFieldMask(),Ue.now())):s.set(l.key,en.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new $v(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Nc(),i=new Pe((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||en.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||se()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=I1();h.forEach(m=>{if(!o.has(m)){let y=A1(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Un()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,se())).next(h=>({batchId:a,changes:_1(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=xc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=xc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new Tn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,nt.newInvalidDocument(h)))});let a=xc();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&Pc(h.mutation,l,en.empty(),Ue.now()),su(t,l)&&(a=a.insert(c,l))}),a})}};var qv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ze(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Jw(i.bundledQuery),readTime:Ze(i.readTime)}}(t)),S.resolve()}};var zv=class{constructor(){this.overlays=new Pe($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Un();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Un(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Un(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Un(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new zc(t,r));let o=this.Ir.get(t);o===void 0&&(o=se(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Hv=class{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Zc=class{constructor(){this.Tr=new xe(et.Er),this.dr=new xe(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new et(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new et(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new we([])),r=new et(t,e),i=new et(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new we([])),r=new et(t,e),i=new et(t,e+1),o=se();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new et(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||oe(e.wr,t.wr)}static Ar(e,t){return oe(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Gv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xe(et.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new qc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(oe);return t.forEach(i=>{let o=new et(i,0),s=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new et(new $(o),0),a=new xe(oe);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new et(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new et(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Wv=class{constructor(e){this.Mr=e,this.docs=function(){return new Pe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(t))}getEntries(e,t){let r=Ut();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ut(),s=t.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||qw(YS(h),r)<=0||(i.has(h.key)||su(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){G()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Kv(this)}getSize(e){return S.resolve(this.size)}},Kv=class extends bh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Qv=class{constructor(e){this.persistence=e,this.Nr=new Gn(t=>qi(t),iu),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Zc,this.targetCount=0,this.kr=Ms.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ms(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Ah=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Xt(0),this.Kr=!1,this.Kr=!0,this.$r=new Hv,this.referenceDelegate=e(this),this.Ur=new Qv(this),this.indexManager=new Pv,this.remoteDocumentCache=function(i){return new Wv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new wh(t),this.Gr=new qv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Gv(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Zv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Zv=class extends ah{constructor(e){super(),this.currentSequenceNumber=e}},xh=class n{constructor(e){this.persistence=e,this.Jr=new Zc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Yv=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new ch("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wb,{unique:!0}),c.createObjectStore("documentMutations")}(e),NS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),NS(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wb,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:YV});l.createIndex("collectionPathOverlayIndex",JV,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",XV,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:UV});l.createIndex("documentKeyIndex",BV),l.createIndex("collectionGroupIndex",$V)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:WV}).createIndex("sequenceNumberIndex",KV,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:QV}).createIndex("documentKeyIndex",ZV,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Th(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{K(c.userId===o.userId);let l=Oi(this.serializer,c);return K1(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new we(s),l=function(p){return[0,Pt(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Pt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:GV});let r=t.store("collectionParents"),i=new Qc,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Pt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new we(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=jn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Rc(i),s=H1(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new $(we.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):G()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=Y1(this.serializer),o=new Ah(xh.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:se();Oi(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new tt(l),p=Ih.lt(this.serializer,h),m=o.getIndexManager(h),y=Ch.lt(h,this.serializer,m,o.referenceDelegate);return new Sh(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Vc(t,Xt.oe),c).next()})})}};function NS(n){n.createObjectStore("targetDocuments",{keyPath:zV}).createIndex("documentTargetsIndex",HV,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qV,{unique:!0}),n.createObjectStore("targetGlobal")}var jy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Jv=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jv(this,i),this.Ai=t+"main",this.serializer=new wh(c),this.Ri=new Wr(this.Ai,this.hi,new Yv(this.serializer)),this.$r=new bv,this.Ur=new Ov(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Y1(this.serializer),this.Gr=new Cv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ke("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,jy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Xt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ri(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ac(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return Yd(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=it(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):Ac(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,jy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Vc(e,Xt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Yd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Ch.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ih.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?n4:c===16?t4:c===15?Hw:c===14?i1:c===13?r1:c===12?e4:c===11?n1:void G()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Vc(a,this.Qr?this.Qr.next():Xt.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw Ke(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(R.FAILED_PRECONDITION,JS);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Ac(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(R.FAILED_PRECONDITION,jy)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ac(e).put("owner",t)}static D(){return Wr.D()}bi(e){let t=Ac(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ke(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Gf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ke("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ke("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ac(n){return it(n,"owner")}function Yd(n){return it(n,"clientMetadata")}function e_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Xv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var ew=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Rh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Gf()?8:XS(ga())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ew;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ps()<=An.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",gs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(ps()<=An.DEBUG&&k("QueryEngine","Query:",gs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ps()<=An.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",gs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kt(t))):S.resolve())}Yi(e,t){if(oS(t))return S.resolve(null);let r=kt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=gh(t,null,"F"),r=kt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,gh(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return oS(t)||i.isEqual(X.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(ps()<=An.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gs(t)),this.rs(e,s,t,ZS(i,-1)).next(a=>a))})}ts(e,t){let r=new xe(v1(e));return t.forEach((i,o)=>{su(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ps()<=An.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",gs(t)),this.Ji.getDocumentsMatchingQuery(e,t,cn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Pe(oe),this._s=new Gn(o=>qi(o),iu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function J1(n,e,t,r){return new tw(n,e,t,r)}function X1(n,e){return N(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=se();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function O4(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(c,T)).next(A=>{let M=l.docVersions.get(T);K(M!==null),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function eA(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function F4(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ye.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,M,L){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let c=Ut(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(tA(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(X.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function tA(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ut();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function L4(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ns(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Rs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ps(n,e,t){return N(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ri(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Mh(n,e,t){let r=B(n),i=X.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=B(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,kt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:X.min(),t?o:se())).next(a=>(iA(r,y1(e),a),{documents:a,Ts:o})))}function nA(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function rA(n,e){let t=B(n),r=t.us.get(e)||X.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,ZS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(iA(t,e,i),i))}function iA(n,e,t){let r=n.us.get(e)||X.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function V4(n,e,t,r){return N(this,null,function*(){let i=B(n),o=se(),s=Ut();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Ns(i,function(h){return kt(Bs(we.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>tA(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function j4(r,i){return N(this,arguments,function*(n,e,t=se()){let o=yield Ns(n,kt(Jw(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ze(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ye.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function PS(n,e){return`firestore_clients_${n}_${e}`}function kS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Uy(n,e){return`firestore_targets_${n}_${e}`}var Nh=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ke("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},kc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ke("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ph=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Qw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=e1(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ke("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},nw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ke("SharedClientState",`Failed to parse online state: ${e}`),null)}},Yc=class{constructor(){this.activeTargetIds=Qw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Oc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pe(oe),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=PS(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Yc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(PS(this.persistenceKey,r));if(i){let o=Ph.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Uy(this.persistenceKey,e));if(i){let o=kc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uy(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ke("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Xt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){Ke("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Xt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Nh(this.currentUser,e,t,r),o=kS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=kS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Uy(this.persistenceKey,e),o=new kc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Ph.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Nh.Rs(new tt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return kc.Rs(i,t)}Ls(e){return nw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Qw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},kh=class{constructor(){this.so=new Yc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var rw=class{_o(e){}shutdown(){}};var Oh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Jd=null;function By(){return Jd===null?Jd=function(){return 268435456+Math.round(2147483648*Math.random())}():Jd++,"0x"+Jd.toString(16)}var U4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var iw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Et="WebChannelConnection",ow=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=By(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Dn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Us}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=U4[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=By();return new Promise((s,a)=>{let c=new Py;c.setWithCredentials(!0),c.listenOnce(ky.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Tc.NO_ERROR:let h=c.getResponseJson();k(Et,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Tc.TIMEOUT:k(Et,`RPC '${e}' ${o} timed out`),a(new P(R.DEADLINE_EXCEEDED,"Request time out"));break;case Tc.HTTP_ERROR:let p=c.getStatus();if(k(Et,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let T=function(M){let L=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(L)>=0?L:R.UNKNOWN}(y.status);a(new P(T,y.message))}else a(new P(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(R.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{k(Et,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(Et,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=By(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ly(),a=Fy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(Et,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,y=!1,T=new iw({Io:M=>{y?k(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(k(Et,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(Et,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),A=(M,L,q)=>{M.listen(L,V=>{try{q(V)}catch(Q){setTimeout(()=>{throw Q},0)}})};return A(p,us.EventType.OPEN,()=>{y||(k(Et,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),A(p,us.EventType.CLOSE,()=>{y||(y=!0,k(Et,`RPC '${e}' stream ${i} transport closed`),T.So())}),A(p,us.EventType.ERROR,M=>{y||(y=!0,Dn(Et,`RPC '${e}' stream ${i} transport errored:`,M),T.So(new P(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,us.EventType.MESSAGE,M=>{var L;if(!y){let q=M.data[0];K(!!q);let V=q,Q=V.error||((L=V[0])===null||L===void 0?void 0:L.error);if(Q){k(Et,`RPC '${e}' stream ${i} received error:`,Q);let ne=Q.status,ee=function(_){let E=Xe[_];if(E!==void 0)return M1(E)}(ne),I=Q.message;ee===void 0&&(ee=R.INTERNAL,I="Unknown error status: "+ne+" with message "+Q.message),y=!0,T.So(new P(ee,I)),p.close()}else k(Et,`RPC '${e}' stream ${i} received:`,q),T.bo(q)}}),A(a,Oy.STAT_EVENT,M=>{M.stat===Kd.PROXY?k(Et,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Kd.NOPROXY&&k(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}};function oA(){return typeof window<"u"?window:null}function rh(){return typeof document<"u"?document:null}function au(n){return new _v(n,!0)}var Jc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Fh=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Jc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Ke(t.toString()),Ke("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},sw=class extends Fh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=T4(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Ze(s.readTime):X.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Dv(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=fh(c)?{documents:j1(o,c)}:{query:U1(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=P1(o,s.resumeToken);let l=Iv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=xs(o,s.snapshotVersion.toTimestamp());let l=Iv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=b4(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Dv(this.serializer),t.removeTarget=e,this.a_(t)}},aw=class extends Fh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=C4(e.writeResults,e.commitTime),r=Ze(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Dv(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Kc(this.serializer,r))};this.a_(t)}};var cw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Ev(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Ev(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},uw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ke(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var lw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){ii(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return N(this,null,function*(){let l=B(c);l.L_.add(4),yield $s(l),l.q_.set("Unknown"),l.L_.delete(4),yield cu(l)})}(this))}))}),this.q_=new uw(r,i)}};function cu(n){return N(this,null,function*(){if(ii(n))for(let e of n.B_)yield e(!0)})}function $s(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function rf(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),r_(t)?n_(t):zs(t).r_()&&t_(t,e))}function ks(n,e){let t=B(n),r=zs(t);t.N_.delete(e),r.r_()&&sA(t,e),t.N_.size===0&&(r.r_()?r.o_():ii(t)&&t.q_.set("Unknown"))}function t_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zs(n).A_(e)}function sA(n,e){n.Q_.xe(e),zs(n).R_(e)}function n_(n){n.Q_=new wv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),zs(n).start(),n.q_.v_()}function r_(n){return ii(n)&&!zs(n).n_()&&n.N_.size>0}function ii(n){return B(n).L_.size===0}function aA(n){n.Q_=void 0}function B4(n){return N(this,null,function*(){n.q_.set("Online")})}function $4(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{t_(n,e)})})}function q4(n,e){return N(this,null,function*(){aA(n),r_(n)?(n.q_.M_(e),n_(n)):n.q_.set("Unknown")})}function z4(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof yh&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Lh(n,r)}else if(e instanceof Es?n.Q_.Ke(e):e instanceof mh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(X.min()))try{let r=yield eA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Ye.EMPTY_BYTE_STRING,h.snapshotVersion)),sA(o,c);let p=new Rs(h.target,c,l,h.sequenceNumber);t_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Lh(n,r)}})}function Lh(n,e,t){return N(this,null,function*(){if(!ri(e))throw e;n.L_.add(1),yield $s(n),n.q_.set("Offline"),t||(t=()=>eA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield cu(n)}))})}function cA(n,e){return e().catch(t=>Lh(n,t,e))}function qs(n){return N(this,null,function*(){let e=B(n),t=ti(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;H4(e);)try{let i=yield L4(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,G4(e,i)}catch(i){yield Lh(e,i)}uA(e)&&lA(e)})}function H4(n){return ii(n)&&n.O_.length<10}function G4(n,e){n.O_.push(e);let t=ti(n);t.r_()&&t.V_&&t.m_(e.mutations)}function uA(n){return ii(n)&&!ti(n).n_()&&n.O_.length>0}function lA(n){ti(n).start()}function W4(n){return N(this,null,function*(){ti(n).p_()})}function K4(n){return N(this,null,function*(){let e=ti(n);for(let t of n.O_)e.m_(t.mutations)})}function Q4(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=mv.from(r,e,t);yield cA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qs(n)})}function Z4(n,e){return N(this,null,function*(){e&&ti(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return R1(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();ti(r).s_(),yield cA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield qs(r)}})}(n,e)),uA(n)&&lA(n)})}function OS(n,e){return N(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ii(t);t.L_.add(3),yield $s(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield cu(t)})}function dw(n,e){return N(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield cu(t)):e||(t.L_.add(2),yield $s(t),t.q_.set("Unknown"))})}function zs(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new sw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:B4.bind(null,n),Ro:$4.bind(null,n),mo:q4.bind(null,n),d_:z4.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),r_(n)?n_(n):n.q_.set("Unknown")):(yield n.K_.stop(),aA(n))}))),n.K_}function ti(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new aw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:W4.bind(null,n),mo:Z4.bind(null,n),f_:K4.bind(null,n),g_:Q4.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield qs(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var hw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Hs(n,e){if(Ke("AsyncQueue",`${e}: ${n}`),ri(n))return new P(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Vh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=xc(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var jh=class{constructor(){this.W_=new Pe($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Os=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Vh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var fw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},pw=class{constructor(){this.queries=FS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=FS(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(R.ABORTED,"Firestore shutting down"))}};function FS(){return new Gn(n=>m1(n),ou)}function i_(n,e){return N(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new fw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Hs(s,`Initialization of query '${gs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&s_(t)})}function o_(n,e){return N(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Y4(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&s_(t)}function J4(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function s_(n){n.Y_.forEach(e=>{e.next()})}var gw,LS;(LS=gw||(gw={})).ea="default",LS.Cache="cache";var Xc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Os(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Os.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gw.Cache}};var mw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Uh=class{constructor(e){this.serializer=e}Es(e){return $n(this.serializer,e)}ds(e){return e.metadata.exists?V1(this.serializer,e.document,!1):nt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ze(e)}},yw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dA(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=we.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Uh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||se()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield V4(this.localStore,new Uh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield j4(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function dA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Bh=class{constructor(e){this.key=e}},$h=class{constructor(e){this.key=e}},qh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=v1(e),this.Ra=new Vh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new jh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=su(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?T!==A&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(c||l)&&(a=!0)),M&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,T){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return A(y)-A(T)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new Os(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new $h(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Bh(r))}),t}ba(e){this.Ta=e.Ts,this.da=se();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Os.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},vw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ww=class{constructor(e){this.key=e,this.va=!1}},_w=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Gn(a=>m1(a),ou),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe($.comparator),this.Na=new Map,this.La=new Zc,this.Ba={},this.ka=new Map,this.qa=Ms.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function X4(n,e,t=!0){return N(this,null,function*(){let r=of(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield hA(r,e,t,!0),i})}function e3(n,e){return N(this,null,function*(){let t=of(n);yield hA(t,e,!0,!1)})}function hA(n,e,t,r){return N(this,null,function*(){let i=yield Ns(n.localStore,kt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield a_(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&rf(n.remoteStore,i),a})}function a_(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,y)=>function(A,M,L,q){return N(this,null,function*(){let V=M.view.ma(L);V.ns&&(V=yield Mh(A.localStore,M.query,!1).then(({documents:I})=>M.view.ma(I,V)));let Q=q&&q.targetChanges.get(M.targetId),ne=q&&q.targetMismatches.get(M.targetId)!=null,ee=M.view.applyChanges(V,A.isPrimaryClient,Q,ne);return Iw(A,M.targetId,ee.wa),ee.snapshot})}(n,p,m,y);let o=yield Mh(n.localStore,e,!0),s=new qh(e,o.Ts),a=s.ma(o.documents),c=Gc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Iw(n,t,l.wa);let h=new vw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function t3(n,e,t){return N(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!ou(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ps(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ks(r.remoteStore,i.targetId),Fs(r,i.targetId)}).catch(ni))):(Fs(r,i.targetId),yield Ps(r.localStore,i.targetId,!0))})}function n3(n,e){return N(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ks(t.remoteStore,r.targetId))})}function r3(n,e,t){return N(this,null,function*(){let r=d_(n);try{let i=yield function(s,a){let c=B(s),l=Ue.now(),h=a.reduce((y,T)=>y.add(T.key),se()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Ut(),A=se();return c.cs.getEntries(y,h).next(M=>{T=M,T.forEach((L,q)=>{q.isValidDocument()||(A=A.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,T)).next(M=>{p=M;let L=[];for(let q of a){let V=y4(q,p.get(q.key).overlayedDocument);V!=null&&L.push(new Cn(q.key,V,u1(V.value.mapValue),He.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,L,a)}).next(M=>{m=M;let L=M.applyToLocalDocumentSet(p,A);return c.documentOverlayCache.saveOverlays(y,M.batchId,L)})}).then(()=>({batchId:m.batchId,changes:_1(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Pe(oe)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield yr(r,i.changes),yield qs(r.remoteStore)}catch(i){let o=Hs(i,"Failed to persist write");t.reject(o)}})}function fA(n,e){return N(this,null,function*(){let t=B(n);try{let r=yield F4(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield yr(t,r,e)}catch(r){yield ni(r)}})}function VS(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=B(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&s_(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function i3(n,e,t){return N(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Pe($.comparator);s=s.insert(o,nt.newNoDocument(o,X.min()));let a=se().add(o),c=new Hc(X.min(),new Map,new Pe(oe),s,a);yield fA(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),l_(r)}else yield Ps(r.localStore,e,!1).then(()=>Fs(r,e,t)).catch(ni)})}function o3(n,e){return N(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield O4(t.localStore,e);u_(t,r,null),c_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yr(t,i)}catch(i){yield ni(i)}})}function s3(n,e,t){return N(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let c=B(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);u_(r,e,t),c_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yr(r,i)}catch(i){yield ni(i)}})}function a3(n,e){return N(this,null,function*(){let t=B(n);ii(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Hs(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function c_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function u_(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Fs(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||pA(n,r)})}function pA(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ks(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),l_(n))}function Iw(n,e,t){for(let r of t)r instanceof Bh?(n.La.addReference(r.key,e),c3(n,r)):r instanceof $h?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||pA(n,r.key)):G()}function c3(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),l_(n))}function l_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(we.fromString(e)),r=n.qa.next();n.Na.set(r,new ww(t)),n.Oa=n.Oa.insert(t,r),rf(n.remoteStore,new Rs(kt(Bs(t.path)),r,"TargetPurposeLimboResolution",Xt.oe))}}function yr(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Xv.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return N(this,null,function*(){let h=B(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ri(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),T=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(m,A)}}})}(r.localStore,o))})}function u3(n,e){return N(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield X1(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yr(t,r.hs)}})}function l3(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function d3(n,e){return N(this,null,function*(){let t=B(n),r=yield Mh(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Iw(t,e.targetId,i.wa),i})}function h3(n,e){return N(this,null,function*(){let t=B(n);return rA(t.localStore,e).then(r=>yr(t,r))})}function f3(n,e,t,r){return N(this,null,function*(){let i=B(n),o=yield function(a,c){let l=B(a),h=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield qs(i.remoteStore):t==="acknowledged"||t==="rejected"?(u_(i,e,r||null),c_(i,e),function(a,c){B(B(a).mutationQueue).On(c)}(i.localStore,e)):G(),yield yr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function p3(n,e){return N(this,null,function*(){let t=B(n);if(of(t),d_(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield jS(t,r.toArray());t.Qa=!0,yield dw(t.remoteStore,!0);for(let o of i)rf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Fs(t,s),Ps(t.localStore,s,!0))),ks(t.remoteStore,s)}),yield i,yield jS(t,r),function(s){let a=B(s);a.Na.forEach((c,l)=>{ks(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Pe($.comparator)}(t),t.Qa=!1,yield dw(t.remoteStore,!1)}})}function jS(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield Ns(r.localStore,kt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield d3(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield nA(r.localStore,s);a=yield Ns(r.localStore,l),yield a_(r,gA(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function gA(n){return g1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g3(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function m3(n,e,t,r){return N(this,null,function*(){let i=B(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield rA(i.localStore,y1(o[0])),a=Hc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ye.EMPTY_BYTE_STRING);yield yr(i,s,a);break}case"rejected":yield Ps(i.localStore,e,!0),Fs(i,e,r);break;default:G()}})}function y3(n,e,t){return N(this,null,function*(){let r=of(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield nA(r.localStore,i),s=yield Ns(r.localStore,o);yield a_(r,gA(o),s.targetId,!1,s.resumeToken),rf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Ps(r.localStore,i,!1).then(()=>{ks(r.remoteStore,i),Fs(r,i)}).catch(ni))}})}function of(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i3.bind(null,e),e.Ca.d_=Y4.bind(null,e.eventManager),e.Ca.$a=J4.bind(null,e.eventManager),e}function d_(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s3.bind(null,e),e}function v3(n,e,t){let r=B(n);(function(o,s,a){return N(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,T){let A=B(y),M=Ze(T.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",L=>A.Gr.getBundleMetadata(L,T.id)).then(L=>!!L&&L.createTime.compareTo(M)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(dA(c));let l=new yw(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield yr(o,p.Ia,void 0),yield function(y,T){let A=B(y);return A.persistence.runTransaction("Save bundle","readwrite",M=>A.Gr.saveBundleMetadata(M,T))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return Dn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Ew=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=au(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return J1(this.persistence,new Rh,t.initialUser,this.serializer)}Ga(t){return new Ah(xh.Zr,this.serializer)}Wa(t){return new kh}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var zh=class n extends Ew{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield zf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield d_(this.Ja.syncEngine),yield qs(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return J1(this.persistence,new Rh,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Lv(r,e.asyncQueue,t)}Ha(e,t){let r=new ev(t,this.persistence);return new Xy(e.asyncQueue,r)}Ga(e){let t=e_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new Jv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oA(),rh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new kh}},Dw=class n extends zh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield zf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Oc&&(this.sharedClientState.syncEngine={no:f3.bind(null,t),ro:m3.bind(null,t),io:y3.bind(null,t),Qi:g3.bind(null,t),eo:h3.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield p3(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=oA();if(!Oc.D(t))throw new P(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=e_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Oc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},h_=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>VS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=u3.bind(null,this.syncEngine),yield dw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new pw}()}createDatastore(t){let r=au(t.databaseInfo.databaseId),i=function(s){return new ow(s)}(t.databaseInfo);return function(s,a,c,l){return new cw(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new lw(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>VS(this.syncEngine,r,0),function(){return Oh.D()?new Oh:new rw}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new _w(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=B(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield $s(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function US(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ls=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ke("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Tw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new rt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new mw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Cw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=B(i),a={documents:o.map(p=>Wc(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,we.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=D4(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ei(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new $c(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=B(r),s={writes:i.map(a=>Kc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,we.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw G();t=X.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(X.min())?He.exists(!1):He.updateTime(t):He.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(X.min()))throw new P(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return He.updateTime(t)}return He.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var bw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Jc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new Cw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!ru(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!R1(t)}return!1}};var Sw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=oh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Hs(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function $y(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield X1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function BS(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield f_(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>OS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>OS(e.remoteStore,i)),n._onlineComponents=e})}function f_(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $y(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Dn("Error using user provided cache. Falling back to memory cache: "+t),yield $y(n,new Ew)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield $y(n,new Ew);return n._offlineComponents})}function sf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield BS(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield BS(n,new h_))),n._onlineComponents})}function mA(n){return f_(n).then(e=>e.persistence)}function p_(n){return f_(n).then(e=>e.localStore)}function yA(n){return sf(n).then(e=>e.remoteStore)}function g_(n){return sf(n).then(e=>e.syncEngine)}function w3(n){return sf(n).then(e=>e.datastore)}function Vs(n){return N(this,null,function*(){let e=yield sf(n),t=e.eventManager;return t.onListen=X4.bind(null,e.syncEngine),t.onUnlisten=t3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=e3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=n3.bind(null,e.syncEngine),t})}function _3(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield mA(n),t=yield yA(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),cu(o)}(t)}))}function I3(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield mA(n),t=yield yA(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=B(i);o.L_.add(0),yield $s(o),o.q_.set("Offline")})}(t)}))}function E3(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=B(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Hs(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield p_(n),e,t)})),t.promise}function vA(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,l){let h=new Ls({next:m=>{h.Za(),s.enqueueAndForget(()=>o_(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new P(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new P(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Xc(Bs(a.path),h,{includeMetadataChanges:!0,_a:!0});return i_(o,p)}(yield Vs(n),n.asyncQueue,e,t,r)})),r.promise}function D3(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield Mh(i,o,!0),c=new qh(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Hs(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield p_(n),e,t)})),t.promise}function wA(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,l){let h=new Ls({next:m=>{h.Za(),s.enqueueAndForget(()=>o_(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Xc(a,h,{includeMetadataChanges:!0,_a:!0});return i_(o,p)}(yield Vs(n),n.asyncQueue,e,t,r)})),r.promise}function T3(n,e){let t=new Ls(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield Vs(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield Vs(n),t)}))}}function C3(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?N1().encode(s):s,function(h,p){return new Tw(h,p)}(function(h,p){if(h instanceof Uint8Array)return US(h,p);if(h instanceof ArrayBuffer)return US(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,au(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){v3(yield g_(n),i,r)}))}function b3(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield p_(n),e)}))}function _A(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var $S=new Map;function m_(n,e,t){if(!t)throw new P(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function y_(n,e,t,r){if(e===!0&&r===!0)throw new P(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qS(n){if(!$.isDocumentKey(n))throw new P(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zS(n){if($.isDocumentKey(n))throw new P(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function af(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G()}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=af(n);throw new P(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function IA(n,e){if(e<=0)throw new P(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Hh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_A((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Wi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qy;switch(r.type){case"firstParty":return new Wy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=$S.get(t);r&&(k("ComponentProvider","Removing Datastore"),$S.delete(t),r.terminate())}(this),Promise.resolve()}};function EA(n,e,t,r={}){var i;let o=(n=_e(n,Wi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Dn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=tt.MOCK_USER;else{a=HI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new tt(l)}n._authCredentials=new zy(new ih(a,c))}}var ft=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},qn=class n extends ft{constructor(e,t,r){super(e,t,Bs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function v_(n,e,...t){if(n=Fe(n),m_("collection","path",e),n instanceof Wi){let r=we.fromString(e,...t);return zS(r),new qn(n,null,r)}{if(!(n instanceof Me||n instanceof qn))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(we.fromString(e,...t));return zS(r),new qn(n.firestore,null,r)}}function DA(n,e){if(n=_e(n,Wi),m_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ft(n,null,function(r){return new Tn(we.emptyPath(),r)}(e))}function uu(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=oh.newId()),m_("doc","path",e),n instanceof Wi){let r=we.fromString(e,...t);return qS(r),new Me(n,null,new $(r))}{if(!(n instanceof Me||n instanceof qn))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(we.fromString(e,...t));return qS(r),new Me(n.firestore,n instanceof qn?n.converter:null,new $(r))}}function w_(n,e){return n=Fe(n),e=Fe(e),(n instanceof Me||n instanceof qn)&&(e instanceof Me||e instanceof qn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function __(n,e){return n=Fe(n),e=Fe(e),n instanceof ft&&e instanceof ft&&n.firestore===e.firestore&&ou(n._query,e._query)&&n.converter===e.converter}var Gh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Jc(this,"async_queue_retry"),this.Vu=()=>{let r=rh();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=rh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=rh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ri(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ke("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=hw.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&G()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Aw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var xw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var TA=-1,Be=class extends Wi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Gh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Gh(e),this._firestoreClient=void 0,yield e}})}};function pt(n){if(n._terminated)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CA(n),n._firestoreClient}function CA(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new tv(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,_A(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Sw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function bA(n,e){Dn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return AA(n,h_.provider,{build:r=>new zh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function SA(n){return N(this,null,function*(){Dn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();AA(n,h_.provider,{build:t=>new Dw(t,e.cacheSizeBytes)})})}function AA(n,e,t){if((n=_e(n,Be))._firestoreClient||n._terminated)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},CA(n)}function xA(n){if(n._initialized&&!n._terminated)throw new P(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new rt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Wr.D())return Promise.resolve();let i=r+"main";yield Wr.delete(i)})}(e_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function RA(n){return function(t){let r=new rt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return a3(yield g_(t),r)})),r.promise}(pt(n=_e(n,Be)))}function MA(n){return _3(pt(n=_e(n,Be)))}function NA(n){return I3(pt(n=_e(n,Be)))}function PA(n,e){let t=pt(n=_e(n,Be)),r=new xw;return C3(t,n._databaseId,e,r),r}function kA(n,e){return b3(pt(n=_e(n,Be)),e).then(t=>t?new ft(n,null,t.query):null)}var Wn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ye.fromBase64String(e))}catch(t){throw new P(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var bn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var gr=class{constructor(e){this._methodName=e}};var Ki=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var eu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var S3=/^__.*__$/,Rw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Cn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xr(e,this.data,t,this.fieldTransforms)}},Wh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function OA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var Kh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(OA(this.Cu)&&S3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Mw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||au(e)}Qu(e,t,r,i=!1){return new Kh({Cu:e,methodName:t,qu:r,path:Qe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ji(n){let e=n._freezeSettings(),t=au(n._databaseId);return new Mw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cf(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);D_("Data must be an object, but it was:",s,r);let a=VA(r,s),c,l;if(o.merge)c=new en(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Fw(e,p,t);if(!s.contains(m))throw new P(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);UA(h,m)||h.push(m)}c=new en(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new Rw(new Dt(a),c,l)}var tu=class n extends gr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function FA(n,e,t){return new Kh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Nw=class n extends gr{_toFieldTransform(e){return new zi(e.path,new Yr)}isEqual(e){return e instanceof n}},Pw=class n extends gr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=FA(this,e,!0),r=this.Ku.map(o=>Xi(o,t)),i=new fr(r);return new zi(e.path,i)}isEqual(e){return e instanceof n&&Wf(this.Ku,e.Ku)}},kw=class n extends gr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=FA(this,e,!0),r=this.Ku.map(o=>Xi(o,t)),i=new pr(r);return new zi(e.path,i)}isEqual(e){return e instanceof n&&Wf(this.Ku,e.Ku)}},Ow=class n extends gr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Jr(e.serializer,D1(e.serializer,this.$u));return new zi(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function I_(n,e,t,r){let i=n.Qu(1,e,t);D_("Data must be an object, but it was:",i,r);let o=[],s=Dt.empty();Yi(r,(c,l)=>{let h=T_(e,c,t);l=Fe(l);let p=i.Nu(h);if(l instanceof tu)o.push(h);else{let m=Xi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new en(o);return new Wh(s,a,i.fieldTransforms)}function E_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Fw(e,r,t)],c=[i];if(o.length%2!=0)throw new P(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Fw(e,o[m])),c.push(o[m+1]);let l=[],h=Dt.empty();for(let m=a.length-1;m>=0;--m)if(!UA(l,a[m])){let y=a[m],T=c[m];T=Fe(T);let A=s.Nu(y);if(T instanceof tu)l.push(y);else{let M=Xi(T,A);M!=null&&(l.push(y),h.set(y,M))}}let p=new en(l);return new Wh(h,p,s.fieldTransforms)}function LA(n,e,t,r=!1){return Xi(t,n.Qu(r?4:3,e))}function Xi(n,e){if(jA(n=Fe(n)))return D_("Unsupported field value:",e,n),VA(n,e);if(n instanceof gr)return function(r,i){if(!OA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Xi(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return D1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ue.fromDate(r);return{timestampValue:xs(i.serializer,o)}}if(r instanceof Ue){let o=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xs(i.serializer,o)}}if(r instanceof Ki)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wn)return{bytesValue:P1(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof eu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Zw(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${af(r)}`)}(n,e)}function VA(n,e){let t={};return o1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(n,(r,i)=>{let o=Xi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function jA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ue||n instanceof Ki||n instanceof Wn||n instanceof Me||n instanceof gr||n instanceof eu)}function D_(n,e,t){if(!jA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=af(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Fw(n,e,t){if((e=Fe(e))instanceof bn)return e._internalPath;if(typeof e=="string")return T_(n,e);throw Qh("Field path arguments must be of type string or ",n,!1,void 0,t)}var A3=new RegExp("[~\\*/\\[\\]]");function T_(n,e,t){if(e.search(A3)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bn(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(R.INVALID_ARGUMENT,a+n+c)}function UA(n,e){return n.some(t=>t.isEqual(e))}var Qi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Lw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(uf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Lw=class extends Qi{data(){return super.data()}};function uf(n,e){return typeof e=="string"?T_(n,e):e instanceof bn?e._internalPath:e._delegate._internalPath}function BA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nu=class{},Zi=class extends nu{};function vr(n,e,...t){let r=[];e instanceof nu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof Vw).length,a=o.filter(c=>c instanceof Zh).length;if(s>1||s>0&&a>0)throw new P(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Zh=class n extends Zi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return YA(e._query,t),new ft(e.firestore,e.converter,pv(e._query,t))}_parse(e){let t=Ji(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){GS(p,h);let y=[];for(let T of p)y.push(HS(c,o,T));m={arrayValue:{values:y}}}else m=HS(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||GS(p,h),m=LA(a,s,p,h==="in"||h==="not-in");return ge.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function $A(n,e,t){let r=e,i=uf("where",n);return Zh._create(i,r,t)}var Vw=class n extends nu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:be.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)YA(s,c),s=pv(s,c)}(e._query,t),new ft(e.firestore,e.converter,pv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var jw=class n extends Zi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $i(o,s)}(e._query,this._field,this._direction);return new ft(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Tn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function qA(n,e="asc"){let t=e,r=uf("orderBy",n);return jw._create(r,t)}var Yh=class n extends Zi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ft(e.firestore,e.converter,gh(e._query,this._limit,this._limitType))}};function zA(n){return IA("limit",n),Yh._create("limit",n,"F")}function HA(n){return IA("limitToLast",n),Yh._create("limitToLast",n,"L")}var Jh=class n extends Zi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=ZA(e,this.type,this._docOrFields,this._inclusive);return new ft(e.firestore,e.converter,function(i,o){return new Tn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function GA(...n){return Jh._create("startAt",n,!0)}function WA(...n){return Jh._create("startAfter",n,!1)}var Xh=class n extends Zi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=ZA(e,this.type,this._docOrFields,this._inclusive);return new ft(e.firestore,e.converter,function(i,o){return new Tn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function KA(...n){return Xh._create("endBefore",n,!1)}function QA(...n){return Xh._create("endAt",n,!0)}function ZA(n,e,t,r){if(t[0]=Fe(t[0]),t[0]instanceof Qi)return function(o,s,a,c,l){if(!c)throw new P(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Is(o))if(p.field.isKeyField())h.push(Bi(s,c.key));else{let m=c.data.field(p.field);if(tf(m))throw new P(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new P(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Hn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ji(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let T=0;T<h.length;T++){let A=h[T];if(m[T].field.isKeyField()){if(typeof A!="string")throw new P(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!Kw(s)&&A.indexOf("/")!==-1)throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let M=s.path.child(we.fromString(A));if(!$.isDocumentKey(M))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let L=new $(M);y.push(Bi(a,L))}else{let M=LA(c,l,A);y.push(M)}}return new Hn(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function HS(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kw(e)&&t.indexOf("/")!==-1)throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(we.fromString(t));if(!$.isDocumentKey(r))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bi(n,new $(r))}if(t instanceof Me)return Bi(n,t._key);throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${af(t)}.`)}function GS(n,e){if(!Array.isArray(n)||n.length===0)throw new P(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var js=class{convertValue(e,t="none"){switch(Ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Yi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Oe(s.doubleValue));return new eu(o)}convertGeoPoint(e){return new Ki(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Gw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){let t=hr(e);return new Ue(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=we.fromString(e);K(z1(r));let i=new Qr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ke(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function lf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Uw=class extends js{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var dr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},un=class extends Qi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Hr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(uf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Hr=class extends un{data(e={}){return super.data(e)}},Sn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hr(this._firestore,this._userDataWriter,r.key,r,new dr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Hr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Hr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:x3(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function x3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}function C_(n,e){return n instanceof un&&e instanceof un?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sn&&e instanceof Sn&&n._firestore===e._firestore&&__(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function JA(n){n=_e(n,Me);let e=_e(n.firestore,Be);return vA(pt(e),n._key).then(t=>x_(e,n,t))}var mr=class extends js{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function XA(n){n=_e(n,Me);let e=_e(n.firestore,Be),t=pt(e),r=new mr(e);return E3(t,n._key).then(i=>new un(e,r,n._key,i,new dr(i!==null&&i.hasLocalMutations,!0),n.converter))}function ex(n){n=_e(n,Me);let e=_e(n.firestore,Be);return vA(pt(e),n._key,{source:"server"}).then(t=>x_(e,n,t))}function tx(n){n=_e(n,ft);let e=_e(n.firestore,Be),t=pt(e),r=new mr(e);return BA(n._query),wA(t,n._query).then(i=>new Sn(e,r,n,i))}function nx(n){n=_e(n,ft);let e=_e(n.firestore,Be),t=pt(e),r=new mr(e);return D3(t,n._query).then(i=>new Sn(e,r,n,i))}function rx(n){n=_e(n,ft);let e=_e(n.firestore,Be),t=pt(e),r=new mr(e);return wA(t,n._query,{source:"server"}).then(i=>new Sn(e,r,n,i))}function b_(n,e,t){n=_e(n,Me);let r=_e(n.firestore,Be),i=lf(n.converter,e,t);return Gs(r,[cf(Ji(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,He.none())])}function S_(n,e,t,...r){n=_e(n,Me);let i=_e(n.firestore,Be),o=Ji(i),s;return s=typeof(e=Fe(e))=="string"||e instanceof bn?E_(o,"updateDoc",n._key,e,t,r):I_(o,"updateDoc",n._key,e),Gs(i,[s.toMutation(n._key,He.exists(!0))])}function ix(n){return Gs(_e(n.firestore,Be),[new ei(n._key,He.none())])}function ox(n,e){let t=_e(n.firestore,Be),r=uu(n),i=lf(n.converter,e);return Gs(t,[cf(Ji(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,He.exists(!1))]).then(()=>r)}function A_(n,...e){var t,r,i;n=Fe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Aw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Aw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Me)l=_e(n.firestore,Be),h=Bs(n._key.path),c={next:p=>{e[s]&&e[s](x_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=_e(n,ft);l=_e(p.firestore,Be),h=p._query;let m=new mr(l);c={next:y=>{e[s]&&e[s](new Sn(l,m,p,y))},error:e[s+1],complete:e[s+2]},BA(n._query)}return function(m,y,T,A){let M=new Ls(A),L=new Xc(y,M,T);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return i_(yield Vs(m),L)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return o_(yield Vs(m),L)}))}}(pt(l),h,a,c)}function sx(n,e){return T3(pt(n=_e(n,Be)),Aw(e)?e:{next:e})}function Gs(n,e){return function(r,i){let o=new rt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return r3(yield g_(r),i,o)})),o.promise}(pt(n),e)}function x_(n,e,t){let r=t.docs.get(e._key),i=new mr(n);return new un(n,i,e._key,r,new dr(t.hasPendingWrites,t.fromCache),e.converter)}var R3={maxAttempts:5};var ef=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ji(e)}set(e,t,r){this._verifyNotCommitted();let i=qr(e,this._firestore),o=lf(i.converter,t,r),s=cf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,He.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=qr(e,this._firestore),s;return s=typeof(t=Fe(t))=="string"||t instanceof bn?E_(this._dataReader,"WriteBatch.update",o._key,t,r,i):I_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,He.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=qr(e,this._firestore);return this._mutations=this._mutations.concat(new ei(t._key,He.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qr(n,e){if((n=Fe(n)).firestore!==e)throw new P(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Bw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ji(t)}get(t){let r=qr(t,this._firestore),i=new Uw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return G();let s=o[0];if(s.isFoundDocument())return new Qi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Qi(this._firestore,i,r._key,null,r.converter);throw G()})}set(t,r,i){let o=qr(t,this._firestore),s=lf(o.converter,r,i),a=cf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=qr(t,this._firestore),a;return a=typeof(r=Fe(r))=="string"||r instanceof bn?E_(this._dataReader,"Transaction.update",s._key,r,i,o):I_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=qr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=qr(e,this._firestore),r=new mr(this._firestore);return super.get(e).then(i=>new un(this._firestore,r,t._key,i._document,new dr(!1,!1),t.converter))}};function ax(n,e,t){n=_e(n,Be);let r=Object.assign(Object.assign({},R3),t);return function(o){if(o.maxAttempts<1)throw new P(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new rt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield w3(o);new bw(o.asyncQueue,l,a,s,c).au()})),c.promise}(pt(n),i=>e(new Bw(n,i)),r)}function cx(){return new tu("deleteField")}function ux(){return new Nw("serverTimestamp")}function lx(...n){return new Pw("arrayUnion",n)}function dx(...n){return new kw("arrayRemove",n)}function hx(n){return new Ow("increment",n)}(function(e,t=!0){(function(i){Us=i})(KI),ma(new ui("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Be(new Hy(r.getProvider("auth-internal")),new Qy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Dr(zb,"4.7.3",e),Dr(zb,"4.7.3","esm2017")})();var M3="@firebase/firestore-compat",N3="0.3.38";function O_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function fx(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function px(){if(!s1())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var df=class n{constructor(e){this._delegate=e}static fromBase64String(e){return px(),new n(Wn.fromBase64String(e))}static fromUint8Array(e){return fx(),new n(Wn.fromUint8Array(e))}toBase64(){return px(),this._delegate.toBase64()}toUint8Array(){return fx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function R_(n){return P3(n,["next","error","complete"])}function P3(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var M_=class{enableIndexedDbPersistence(e,t){return bA(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return SA(e._delegate)}clearIndexedDbPersistence(e){return xA(e._delegate)}},hf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Dn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){EA(this._delegate,e,t,r)}enableNetwork(){return MA(this._delegate)}disableNetwork(){return NA(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,y_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return RA(this._delegate)}onSnapshotsInSync(e){return sx(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qs(this,v_(this._delegate,e))}catch(t){throw Ot(t,"collection()","Firestore.collection()")}}doc(e){try{return new Kn(this,uu(this._delegate,e))}catch(t){throw Ot(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ro(this,DA(this._delegate,e))}catch(t){throw Ot(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ax(this._delegate,t=>e(new ff(this,t)))}batch(){return pt(this._delegate),new pf(new ef(this._delegate,e=>Gs(this._delegate,e)))}loadBundle(e){return PA(this._delegate,e)}namedQuery(e){return kA(this._delegate,e).then(t=>t?new ro(this,t):null)}},Ws=class extends js{constructor(e){super(),this.firestore=e}convertBytes(e){return new df(new Wn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Kn.forKey(t,this.firestore,null)}};function k3(n){WS(n)}var ff=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ws(e)}get(e){let t=eo(e);return this._delegate.get(t).then(r=>new to(this._firestore,new un(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=eo(e);return r?(O_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=eo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=eo(e);return this._delegate.delete(t),this}},pf=class{constructor(e){this._delegate=e}set(e,t,r){let i=eo(e);return r?(O_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=eo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=eo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ks=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Hr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new no(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ws(e),t),i.set(t,o)),o}};Ks.INSTANCES=new WeakMap;var Kn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ws(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qs(this.firestore,v_(this._delegate,e))}catch(t){throw Ot(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof Me?w_(this._delegate,e):!1}set(e,t){t=O_("DocumentReference.set",t);try{return t?b_(this._delegate,e,t):b_(this._delegate,e)}catch(r){throw Ot(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?S_(this._delegate,e):S_(this._delegate,e,t,...r)}catch(i){throw Ot(i,"updateDoc()","DocumentReference.update()")}}delete(){return ix(this._delegate)}onSnapshot(...e){let t=gx(e),r=mx(e,i=>new to(this.firestore,new un(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return A_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=XA(this._delegate):e?.source==="server"?t=ex(this._delegate):t=JA(this._delegate),t.then(r=>new to(this.firestore,new un(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ot(n,e,t){return n.message=n.message.replace(e,t),n}function gx(n){for(let e of n)if(typeof e=="object"&&!R_(e))return e;return{}}function mx(n,e){var t,r;let i;return R_(n[0])?i=n[0]:R_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var to=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Kn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return C_(this._delegate,e._delegate)}},no=class extends to{data(e){let t=this._delegate.data(e);return this._delegate._converter||KS(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},ro=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ws(e)}where(e,t,r){try{return new n(this.firestore,vr(this._delegate,$A(e,t,r)))}catch(i){throw Ot(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,vr(this._delegate,qA(e,t)))}catch(r){throw Ot(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,vr(this._delegate,zA(e)))}catch(t){throw Ot(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,vr(this._delegate,HA(e)))}catch(t){throw Ot(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,vr(this._delegate,GA(...e)))}catch(t){throw Ot(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,vr(this._delegate,WA(...e)))}catch(t){throw Ot(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,vr(this._delegate,KA(...e)))}catch(t){throw Ot(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,vr(this._delegate,QA(...e)))}catch(t){throw Ot(t,"endAt()","Query.endAt()")}}isEqual(e){return __(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=nx(this._delegate):e?.source==="server"?t=rx(this._delegate):t=tx(this._delegate),t.then(r=>new lu(this.firestore,new Sn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=gx(e),r=mx(e,i=>new lu(this.firestore,new Sn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return A_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},N_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new no(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},lu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ro(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new no(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new N_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new no(this._firestore,r))})}isEqual(e){return C_(this._delegate,e._delegate)}},Qs=class n extends ro{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Kn(this.firestore,e):null}doc(e){try{return e===void 0?new Kn(this.firestore,uu(this._delegate)):new Kn(this.firestore,uu(this._delegate,e))}catch(t){throw Ot(t,"doc()","CollectionReference.doc()")}}add(e){return ox(this._delegate,e).then(t=>new Kn(this.firestore,t))}isEqual(e){return w_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function eo(n){return _e(n,Me)}var P_=class n{constructor(...e){this._delegate=new bn(...e)}static documentId(){return new n(Qe.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof bn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var k_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=ux();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=cx();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=lx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=dx(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=hx(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var O3={Firestore:hf,GeoPoint:Ki,Timestamp:Ue,Blob:df,Transaction:ff,WriteBatch:pf,DocumentReference:Kn,DocumentSnapshot:to,Query:ro,QueryDocumentSnapshot:no,QuerySnapshot:lu,CollectionReference:Qs,FieldPath:P_,FieldValue:k_,setLogLevel:k3,CACHE_SIZE_UNLIMITED:TA};function F3(n,e){n.INTERNAL.registerComponent(new ui("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},O3)))}function L3(n){F3(n,(e,t)=>new hf(e,t,new M_)),n.registerVersion(M3,N3)}L3(qt);function V3(n,e=_a){return new fe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function yx(n,e){return V3(n,e)}function j3(n,e){return yx(n,e).pipe(pi(void 0),Ea(),W(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function V_(n,e){return yx(n,e).pipe(W(t=>({payload:t,type:"query"})))}var gf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=_x(r,t);return new yf(i,o,this.afs)}snapshotChanges(){return j3(this.ref,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return this.snapshotChanges().pipe(W(({payload:t})=>e.idField?Re(j({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ee(this.ref.get(e)).pipe(jt)}};function mf(n,e){return V_(n,e).pipe(pi(void 0),Ea(),W(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function vx(n,e,t){return mf(n,t).pipe(fi((r,i)=>U3(r,i.map(o=>o.payload),e),[]),yp(),W(r=>r.map(i=>({type:i.type,payload:i}))))}function U3(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=B3(n,r))}),n}function F_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function B3(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return F_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return F_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return F_(n,e.oldIndex,1);break}return n}function wx(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var yf=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=mf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(W(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(pi(void 0),Ea(),ot(([r,i])=>i.length>0||!r),W(([,r])=>r),jt)}auditTrail(e){return this.stateChanges(e).pipe(fi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=wx(e);return vx(this.query,t,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return V_(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.payload.docs.map(r=>e.idField?Re(j({},r.data()),{[e.idField]:r.id}):r.data())),jt)}get(e){return Ee(this.query.get(e)).pipe(jt)}add(e){return this.ref.add(e)}doc(e){return new gf(this.ref.doc(e),this.afs)}},L_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?mf(this.query,this.afs.schedulers.outsideAngular).pipe(jt):mf(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.filter(r=>e.indexOf(r.type)>-1)),ot(t=>t.length>0),jt)}auditTrail(e){return this.stateChanges(e).pipe(fi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=wx(e);return vx(this.query,t,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return V_(this.query,this.afs.schedulers.outsideAngular).pipe(W(r=>r.payload.docs.map(i=>e.idField?j({[e.idField]:i.id},i.data()):i.data())),jt)}get(e){return Ee(this.query.get(e)).pipe(jt)}},$3=new H("angularfire2.enableFirestorePersistence"),q3=new H("angularfire2.firestore.persistenceSettings"),z3=new H("angularfire2.firestore.settings"),H3=new H("angularfire2.firestore.use-emulator");function _x(n,e=t=>t){return{query:e(n),ref:n}}var Bt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,y,T,A,M,L,q){this.schedulers=c;let V=Dc(t,a,r),Q=h;p&&My(V,a,m,T,A,M,y,L),[this.firestore,this.persistenceEnabled$]=Gd(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{let ne=a.runOutsideAngular(()=>V.firestore());if(o&&ne.settings(o),Q&&ne.useEmulator(...Q),i&&!or(s)){let ee=()=>{try{return Ee(ne.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),Z(!1)}};return[ne,a.runOutsideAngular(ee)]}else return[ne,Z(!1)]},[o,Q,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=_x(i,r),a=this.schedulers.ngZone.run(()=>o);return new yf(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new L_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new gf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(as),O(cs,8),O($3,8),O(z3,8),O(ht),O(me),O(qd),O(q3,8),O(H3,8),O(Bb,8),O(Cy,8),O(by,8),O(Sy,8),O(Ay,8),O(xy,8),O(Ry,8),O(Mi,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Ix=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running...",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(Bt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function W3(n,e){if(n&1&&(J(0,"tbody")(1,"tr")(2,"td"),ye(3),De(4,"br"),ye(5),te(),J(6,"td"),De(7,"img",3),te(),J(8,"td"),ye(9),De(10,"br"),ye(11),De(12,"br"),ye(13),De(14,"br"),ye(15),te()()()),n&2){let t=VT();pe(3),Vt(" ",t.header.name,""),pe(2),Vt(" ",t.header.goalLife," "),pe(2),It("src",t.header.photoUrl,Jl),pe(2),Vt(" ",t.header.email,""),pe(2),Vt(" ",t.header.phoneNumber,""),pe(2),Vt(" ",t.header.location,""),pe(2),Vt(" ",t.header.socialNetwork," ")}}var Ex=(()=>{class n{constructor(t){this.headerService=t,this.header=new Bd,this.headerService.getHeader().snapshotChanges().pipe(W(r=>r.map(i=>j({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0]})}static{this.\u0275fac=function(r){return new(r||n)(ze(Ix))}}static{this.\u0275cmp=at({type:n,selectors:[["app-header"]],decls:6,vars:1,consts:[["border","1"],["colspan","3"],[4,"ngIf"],["width","200","height","200","alt","Foto de perfil",3,"src"]],template:function(r,i){r&1&&(J(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),ye(4,"Informaci\xF3n Personal"),te()()(),Zt(5,W3,16,7,"tbody",2),te()),r&2&&(pe(5),It("ngIf",i.header&&i.header.name))},dependencies:[lC]})}}return n})();var Dx=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="work experience running...",this.dbPath="/Work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(Bt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Z3(n,e){if(n&1&&(J(0,"li"),ye(1),J(2,"i"),ye(3),te(),De(4,"br"),J(5,"b"),ye(6),te(),De(7,"br"),ye(8),De(9,"br"),J(10,"strong"),ye(11,"Logros:"),te(),De(12,"br"),ye(13),De(14,"br"),te()),n&2){let t=e.$implicit;pe(),cm(" ",t.startDate," \u2013 ",t.endDate," "),pe(2),ct(t.location),pe(3),ct(t.position),pe(2),Vt(" ",t.company," "),pe(5),Vt(" ",t.accomplishment," ")}}var Tx=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[],console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(W(r=>r.map(i=>j({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r})}static{this.\u0275fac=function(r){return new(r||n)(ze(Dx))}}static{this.\u0275cmp=at({type:n,selectors:[["app-work-experience"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(J(0,"ul"),Zt(1,Z3,15,6,"li",0),te()),r&2&&(pe(),It("ngForOf",i.workExperience))},dependencies:[Ln]})}}return n})();var Cx=(()=>{class n{constructor(t){this.db=t,this.accesoEducationService="education service running",this.dbPath="/Education",this.EducationRef=t.collection(this.dbPath)}getEducation(){return this.EducationRef}static{this.\u0275fac=function(r){return new(r||n)(O(Bt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function X3(n,e){if(n&1&&(J(0,"li")(1,"p"),ye(2),te(),J(3,"p"),ye(4),te()()),n&2){let t=e.$implicit;pe(2),ct(t.Instituto),pe(2),ct(t.NivelAcademico)}}var bx=(()=>{class n{constructor(t){this.EducationService=t,this.educations=[],this.EducationService.getEducation().snapshotChanges().pipe(W(r=>r.map(i=>j({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.educations=r,console.log("Datos de educaci\xF3n:",this.educations)})}static{this.\u0275fac=function(r){return new(r||n)(ze(Cx))}}static{this.\u0275cmp=at({type:n,selectors:[["app-education"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(J(0,"ul"),Zt(1,X3,5,2,"li",0),te()),r&2&&(pe(),It("ngForOf",i.educations))},dependencies:[Ln]})}}return n})();var vf=class{constructor(){this.lenguajes="Java, C#, C++, Python, JavaScript, TypeScript",this.tecnologia="Angular, React, Node.js, Express.js, .NET, .NET Core"}};var Sx=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="Skills running...",this.dbPath="/Skills",this.SkillsRef=t.collection(this.dbPath)}getSkills(){return this.SkillsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Bt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ax=(()=>{class n{constructor(t){this.SkillsService=t,this.skills=new vf,this.SkillsService.getSkills().snapshotChanges().pipe(W(r=>r.map(i=>j({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r[0],console.log("Datos de skills:",this.skills)})}static{this.\u0275fac=function(r){return new(r||n)(ze(Sx))}}static{this.\u0275cmp=at({type:n,selectors:[["app-skills"]],decls:11,vars:2,template:function(r,i){r&1&&(J(0,"ul")(1,"li")(2,"p"),ye(3,"Lenguajes"),te(),J(4,"p"),ye(5),te()(),J(6,"li")(7,"p"),ye(8,"Tecnologias"),te(),J(9,"p"),ye(10),te()()()),r&2&&(pe(5),ct(i.skills.lenguajes),pe(5),ct(i.skills.tecnologia))}})}}return n})();var xx=(()=>{class n{constructor(t){this.db=t,this.accesoCertificates="certificates service running...",this.dbPath="/Certificates",this.certificateReg=t.collection(this.dbPath)}getCertificate(){return this.certificateReg}static{this.\u0275fac=function(r){return new(r||n)(O(Bt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ij(n,e){if(n&1&&(J(0,"li")(1,"p"),ye(2),te()()),n&2){let t=e.$implicit;pe(2),ct(t.NombreCertificado)}}var Rx=(()=>{class n{constructor(t){this.CertificatesService=t,this.certificates=[],this.CertificatesService.getCertificate().snapshotChanges().pipe(W(r=>r.map(i=>j({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log("Datos de educaci\xF3n:",this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)(ze(xx))}}static{this.\u0275cmp=at({type:n,selectors:[["app-certificates"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(J(0,"ul"),Zt(1,ij,3,1,"li",0),te()),r&2&&(pe(),It("ngForOf",i.certificates))},dependencies:[Ln]})}}return n})();var Mx=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Language",this.LanguageRef=t.collection(this.dbPath)}getLanguage(){return this.LanguageRef}static{this.\u0275fac=function(r){return new(r||n)(O(Bt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function aj(n,e){if(n&1&&(J(0,"li")(1,"p"),ye(2),te()()),n&2){let t=e.$implicit;pe(2),ct(t.Language)}}var Nx=(()=>{class n{constructor(t){this.LanguagesService=t,this.languages=[],console.log(this.LanguagesService),this.LanguagesService.getLanguage().snapshotChanges().pipe(W(r=>r.map(i=>j({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r})}static{this.\u0275fac=function(r){return new(r||n)(ze(Mx))}}static{this.\u0275cmp=at({type:n,selectors:[["app-languages"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(J(0,"ul"),Zt(1,aj,3,1,"li",0),te()),r&2&&(pe(),It("ngForOf",i.languages))},dependencies:[Ln]})}}return n})();var Px=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Interest",this.InterestRef=t.collection(this.dbPath)}getInterest(){return this.InterestRef}static{this.\u0275fac=function(r){return new(r||n)(O(Bt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lj(n,e){if(n&1&&(J(0,"li")(1,"p"),ye(2),te()()),n&2){let t=e.$implicit;pe(2),ct(t.Interest)}}var kx=(()=>{class n{constructor(t){this.InterestsService=t,this.interest=[],this.InterestsService.getInterest().snapshotChanges().pipe(W(r=>r.map(i=>j({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interest=r})}static{this.\u0275fac=function(r){return new(r||n)(ze(Px))}}static{this.\u0275cmp=at({type:n,selectors:[["app-interests"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(J(0,"ul"),Zt(1,lj,3,1,"li",0),te()),r&2&&(pe(),It("ngForOf",i.interest))},dependencies:[Ln]})}}return n})();var hj=(n,e)=>e.title,fj=()=>({title:"Explore the Docs",link:"https://angular.dev"}),pj=()=>({title:"Learn with Tutorials",link:"https://angular.dev/tutorials"}),gj=()=>({title:"CLI Docs",link:"https://angular.dev/tools/cli"}),mj=()=>({title:"Angular Language Service",link:"https://angular.dev/tools/language-service"}),yj=()=>({title:"Angular DevTools",link:"https://angular.dev/tools/devtools"}),vj=(n,e,t,r,i)=>[n,e,t,r,i];function wj(n,e){if(n&1&&(J(0,"a",23)(1,"span"),ye(2),te(),$o(),J(3,"svg",34),De(4,"path",35),te()()),n&2){let t=e.$implicit;It("href",t.link,Jl),pe(2),ct(t.title)}}var Ox=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["app-root"]],decls:60,vars:12,consts:[["border","1"],["colspan","2"],[1,"main"],[1,"content"],[1,"left-side"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 982 239","fill","none",1,"angular-logo"],["clip-path","url(#a)"],["fill","url(#b)","d","M388.676 191.625h30.849L363.31 31.828h-35.758l-56.215 159.797h30.848l13.174-39.356h60.061l13.256 39.356Zm-65.461-62.675 21.602-64.311h1.227l21.602 64.311h-44.431Zm126.831-7.527v70.202h-28.23V71.839h27.002v20.374h1.392c2.782-6.71 7.2-12.028 13.255-15.956 6.056-3.927 13.584-5.89 22.503-5.89 8.264 0 15.465 1.8 21.684 5.318 6.137 3.518 10.964 8.673 14.319 15.382 3.437 6.71 5.074 14.81 4.992 24.383v76.175h-28.23v-71.92c0-8.019-2.046-14.237-6.219-18.819-4.173-4.5-9.819-6.791-17.102-6.791-4.91 0-9.328 1.063-13.174 3.272-3.846 2.128-6.792 5.237-9.001 9.328-2.046 4.009-3.191 8.918-3.191 14.728ZM589.233 239c-10.147 0-18.82-1.391-26.103-4.091-7.282-2.7-13.092-6.382-17.511-10.964-4.418-4.582-7.528-9.655-9.164-15.219l25.448-6.136c1.145 2.372 2.782 4.663 4.991 6.954 2.209 2.291 5.155 4.255 8.837 5.81 3.683 1.554 8.428 2.291 14.074 2.291 8.019 0 14.647-1.964 19.884-5.81 5.237-3.845 7.856-10.227 7.856-19.064v-22.665h-1.391c-1.473 2.946-3.601 5.892-6.383 9.001-2.782 3.109-6.464 5.645-10.965 7.691-4.582 2.046-10.228 3.109-17.101 3.109-9.165 0-17.511-2.209-25.039-6.545-7.446-4.337-13.42-10.883-17.757-19.474-4.418-8.673-6.628-19.473-6.628-32.565 0-13.091 2.21-24.301 6.628-33.383 4.419-9.082 10.311-15.955 17.839-20.7 7.528-4.746 15.874-7.037 25.039-7.037 7.037 0 12.846 1.145 17.347 3.518 4.582 2.373 8.182 5.236 10.883 8.51 2.7 3.272 4.746 6.382 6.137 9.327h1.554v-19.8h27.821v121.749c0 10.228-2.454 18.737-7.364 25.447-4.91 6.709-11.538 11.7-20.048 15.055-8.509 3.355-18.165 4.991-28.884 4.991Zm.245-71.266c5.974 0 11.047-1.473 15.302-4.337 4.173-2.945 7.446-7.118 9.573-12.519 2.21-5.482 3.274-12.027 3.274-19.637 0-7.609-1.064-14.155-3.274-19.8-2.127-5.646-5.318-10.064-9.491-13.255-4.174-3.11-9.329-4.746-15.384-4.746s-11.537 1.636-15.792 4.91c-4.173 3.272-7.365 7.772-9.492 13.418-2.128 5.727-3.191 12.191-3.191 19.392 0 7.2 1.063 13.745 3.273 19.228 2.127 5.482 5.318 9.736 9.573 12.764 4.174 3.027 9.41 4.582 15.629 4.582Zm141.56-26.51V71.839h28.23v119.786h-27.412v-21.273h-1.227c-2.7 6.709-7.119 12.191-13.338 16.446-6.137 4.255-13.747 6.382-22.748 6.382-7.855 0-14.81-1.718-20.783-5.237-5.974-3.518-10.72-8.591-14.075-15.382-3.355-6.709-5.073-14.891-5.073-24.464V71.839h28.312v71.921c0 7.609 2.046 13.664 6.219 18.083 4.173 4.5 9.655 6.709 16.365 6.709 4.173 0 8.183-.982 12.111-3.028 3.927-2.045 7.118-5.072 9.655-9.082 2.537-4.091 3.764-9.164 3.764-15.218Zm65.707-109.395v159.796h-28.23V31.828h28.23Zm44.841 162.169c-7.61 0-14.402-1.391-20.457-4.091-6.055-2.7-10.883-6.791-14.32-12.109-3.518-5.319-5.237-11.946-5.237-19.801 0-6.791 1.228-12.355 3.765-16.773 2.536-4.419 5.891-7.937 10.228-10.637 4.337-2.618 9.164-4.664 14.647-6.055 5.4-1.391 11.046-2.373 16.856-3.027 7.037-.737 12.683-1.391 17.102-1.964 4.337-.573 7.528-1.555 9.574-2.782 1.963-1.309 3.027-3.273 3.027-5.973v-.491c0-5.891-1.718-10.391-5.237-13.664-3.518-3.191-8.51-4.828-15.056-4.828-6.955 0-12.356 1.473-16.447 4.5-4.009 3.028-6.71 6.546-8.183 10.719l-26.348-3.764c2.046-7.282 5.483-13.336 10.31-18.328 4.746-4.909 10.638-8.59 17.511-11.045 6.955-2.455 14.565-3.682 22.912-3.682 5.809 0 11.537.654 17.265 2.045s10.965 3.6 15.711 6.71c4.746 3.109 8.51 7.282 11.455 12.6 2.864 5.318 4.337 11.946 4.337 19.883v80.184h-27.166v-16.446h-.9c-1.719 3.355-4.092 6.464-7.201 9.328-3.109 2.864-6.955 5.237-11.619 6.955-4.828 1.718-10.229 2.536-16.529 2.536Zm7.364-20.701c5.646 0 10.556-1.145 14.729-3.354 4.173-2.291 7.364-5.237 9.655-9.001 2.292-3.763 3.355-7.854 3.355-12.273v-14.155c-.9.737-2.373 1.391-4.5 2.046-2.128.654-4.419 1.145-7.037 1.636-2.619.491-5.155.9-7.692 1.227-2.537.328-4.746.655-6.628.901-4.173.572-8.019 1.472-11.292 2.781-3.355 1.31-5.973 3.11-7.855 5.401-1.964 2.291-2.864 5.318-2.864 8.918 0 5.237 1.882 9.164 5.728 11.782 3.682 2.782 8.51 4.091 14.401 4.091Zm64.643 18.328V71.839h27.412v19.965h1.227c2.21-6.955 5.974-12.274 11.292-16.038 5.319-3.763 11.456-5.645 18.329-5.645 1.555 0 3.355.082 5.237.163 1.964.164 3.601.328 4.91.573v25.938c-1.227-.41-3.109-.819-5.646-1.146a58.814 58.814 0 0 0-7.446-.49c-5.155 0-9.738 1.145-13.829 3.354-4.091 2.209-7.282 5.236-9.655 9.164-2.373 3.927-3.519 8.427-3.519 13.5v70.448h-28.312ZM222.077 39.192l-8.019 125.923L137.387 0l84.69 39.192Zm-53.105 162.825-57.933 33.056-57.934-33.056 11.783-28.556h92.301l11.783 28.556ZM111.039 62.675l30.357 73.803H80.681l30.358-73.803ZM7.937 165.115 0 39.192 84.69 0 7.937 165.115Z"],["fill","url(#c)","d","M388.676 191.625h30.849L363.31 31.828h-35.758l-56.215 159.797h30.848l13.174-39.356h60.061l13.256 39.356Zm-65.461-62.675 21.602-64.311h1.227l21.602 64.311h-44.431Zm126.831-7.527v70.202h-28.23V71.839h27.002v20.374h1.392c2.782-6.71 7.2-12.028 13.255-15.956 6.056-3.927 13.584-5.89 22.503-5.89 8.264 0 15.465 1.8 21.684 5.318 6.137 3.518 10.964 8.673 14.319 15.382 3.437 6.71 5.074 14.81 4.992 24.383v76.175h-28.23v-71.92c0-8.019-2.046-14.237-6.219-18.819-4.173-4.5-9.819-6.791-17.102-6.791-4.91 0-9.328 1.063-13.174 3.272-3.846 2.128-6.792 5.237-9.001 9.328-2.046 4.009-3.191 8.918-3.191 14.728ZM589.233 239c-10.147 0-18.82-1.391-26.103-4.091-7.282-2.7-13.092-6.382-17.511-10.964-4.418-4.582-7.528-9.655-9.164-15.219l25.448-6.136c1.145 2.372 2.782 4.663 4.991 6.954 2.209 2.291 5.155 4.255 8.837 5.81 3.683 1.554 8.428 2.291 14.074 2.291 8.019 0 14.647-1.964 19.884-5.81 5.237-3.845 7.856-10.227 7.856-19.064v-22.665h-1.391c-1.473 2.946-3.601 5.892-6.383 9.001-2.782 3.109-6.464 5.645-10.965 7.691-4.582 2.046-10.228 3.109-17.101 3.109-9.165 0-17.511-2.209-25.039-6.545-7.446-4.337-13.42-10.883-17.757-19.474-4.418-8.673-6.628-19.473-6.628-32.565 0-13.091 2.21-24.301 6.628-33.383 4.419-9.082 10.311-15.955 17.839-20.7 7.528-4.746 15.874-7.037 25.039-7.037 7.037 0 12.846 1.145 17.347 3.518 4.582 2.373 8.182 5.236 10.883 8.51 2.7 3.272 4.746 6.382 6.137 9.327h1.554v-19.8h27.821v121.749c0 10.228-2.454 18.737-7.364 25.447-4.91 6.709-11.538 11.7-20.048 15.055-8.509 3.355-18.165 4.991-28.884 4.991Zm.245-71.266c5.974 0 11.047-1.473 15.302-4.337 4.173-2.945 7.446-7.118 9.573-12.519 2.21-5.482 3.274-12.027 3.274-19.637 0-7.609-1.064-14.155-3.274-19.8-2.127-5.646-5.318-10.064-9.491-13.255-4.174-3.11-9.329-4.746-15.384-4.746s-11.537 1.636-15.792 4.91c-4.173 3.272-7.365 7.772-9.492 13.418-2.128 5.727-3.191 12.191-3.191 19.392 0 7.2 1.063 13.745 3.273 19.228 2.127 5.482 5.318 9.736 9.573 12.764 4.174 3.027 9.41 4.582 15.629 4.582Zm141.56-26.51V71.839h28.23v119.786h-27.412v-21.273h-1.227c-2.7 6.709-7.119 12.191-13.338 16.446-6.137 4.255-13.747 6.382-22.748 6.382-7.855 0-14.81-1.718-20.783-5.237-5.974-3.518-10.72-8.591-14.075-15.382-3.355-6.709-5.073-14.891-5.073-24.464V71.839h28.312v71.921c0 7.609 2.046 13.664 6.219 18.083 4.173 4.5 9.655 6.709 16.365 6.709 4.173 0 8.183-.982 12.111-3.028 3.927-2.045 7.118-5.072 9.655-9.082 2.537-4.091 3.764-9.164 3.764-15.218Zm65.707-109.395v159.796h-28.23V31.828h28.23Zm44.841 162.169c-7.61 0-14.402-1.391-20.457-4.091-6.055-2.7-10.883-6.791-14.32-12.109-3.518-5.319-5.237-11.946-5.237-19.801 0-6.791 1.228-12.355 3.765-16.773 2.536-4.419 5.891-7.937 10.228-10.637 4.337-2.618 9.164-4.664 14.647-6.055 5.4-1.391 11.046-2.373 16.856-3.027 7.037-.737 12.683-1.391 17.102-1.964 4.337-.573 7.528-1.555 9.574-2.782 1.963-1.309 3.027-3.273 3.027-5.973v-.491c0-5.891-1.718-10.391-5.237-13.664-3.518-3.191-8.51-4.828-15.056-4.828-6.955 0-12.356 1.473-16.447 4.5-4.009 3.028-6.71 6.546-8.183 10.719l-26.348-3.764c2.046-7.282 5.483-13.336 10.31-18.328 4.746-4.909 10.638-8.59 17.511-11.045 6.955-2.455 14.565-3.682 22.912-3.682 5.809 0 11.537.654 17.265 2.045s10.965 3.6 15.711 6.71c4.746 3.109 8.51 7.282 11.455 12.6 2.864 5.318 4.337 11.946 4.337 19.883v80.184h-27.166v-16.446h-.9c-1.719 3.355-4.092 6.464-7.201 9.328-3.109 2.864-6.955 5.237-11.619 6.955-4.828 1.718-10.229 2.536-16.529 2.536Zm7.364-20.701c5.646 0 10.556-1.145 14.729-3.354 4.173-2.291 7.364-5.237 9.655-9.001 2.292-3.763 3.355-7.854 3.355-12.273v-14.155c-.9.737-2.373 1.391-4.5 2.046-2.128.654-4.419 1.145-7.037 1.636-2.619.491-5.155.9-7.692 1.227-2.537.328-4.746.655-6.628.901-4.173.572-8.019 1.472-11.292 2.781-3.355 1.31-5.973 3.11-7.855 5.401-1.964 2.291-2.864 5.318-2.864 8.918 0 5.237 1.882 9.164 5.728 11.782 3.682 2.782 8.51 4.091 14.401 4.091Zm64.643 18.328V71.839h27.412v19.965h1.227c2.21-6.955 5.974-12.274 11.292-16.038 5.319-3.763 11.456-5.645 18.329-5.645 1.555 0 3.355.082 5.237.163 1.964.164 3.601.328 4.91.573v25.938c-1.227-.41-3.109-.819-5.646-1.146a58.814 58.814 0 0 0-7.446-.49c-5.155 0-9.738 1.145-13.829 3.354-4.091 2.209-7.282 5.236-9.655 9.164-2.373 3.927-3.519 8.427-3.519 13.5v70.448h-28.312ZM222.077 39.192l-8.019 125.923L137.387 0l84.69 39.192Zm-53.105 162.825-57.933 33.056-57.934-33.056 11.783-28.556h92.301l11.783 28.556ZM111.039 62.675l30.357 73.803H80.681l30.358-73.803ZM7.937 165.115 0 39.192 84.69 0 7.937 165.115Z"],["id","c","cx","0","cy","0","r","1","gradientTransform","rotate(118.122 171.182 60.81) scale(205.794)","gradientUnits","userSpaceOnUse"],["stop-color","#FF41F8"],["offset",".707","stop-color","#FF41F8","stop-opacity",".5"],["offset","1","stop-color","#FF41F8","stop-opacity","0"],["id","b","x1","0","x2","982","y1","192","y2","192","gradientUnits","userSpaceOnUse"],["stop-color","#F0060B"],["offset","0","stop-color","#F0070C"],["offset",".526","stop-color","#CC26D5"],["offset","1","stop-color","#7702FF"],["id","a"],["fill","#fff","d","M0 0h982v239H0z"],["role","separator","aria-label","Divider",1,"divider"],[1,"right-side"],[1,"pill-group"],["target","_blank","rel","noopener",1,"pill",3,"href"],[1,"social-links"],["href","https://github.com/angular/angular","aria-label","Github","target","_blank","rel","noopener"],["width","25","height","24","viewBox","0 0 25 24","fill","none","xmlns","http://www.w3.org/2000/svg","alt","Github"],["d","M12.3047 0C5.50634 0 0 5.50942 0 12.3047C0 17.7423 3.52529 22.3535 8.41332 23.9787C9.02856 24.0946 9.25414 23.7142 9.25414 23.3871C9.25414 23.0949 9.24389 22.3207 9.23876 21.2953C5.81601 22.0377 5.09414 19.6444 5.09414 19.6444C4.53427 18.2243 3.72524 17.8449 3.72524 17.8449C2.61064 17.082 3.81137 17.0973 3.81137 17.0973C5.04697 17.1835 5.69604 18.3647 5.69604 18.3647C6.79321 20.2463 8.57636 19.7029 9.27978 19.3881C9.39052 18.5924 9.70736 18.0499 10.0591 17.7423C7.32641 17.4347 4.45429 16.3765 4.45429 11.6618C4.45429 10.3185 4.9311 9.22133 5.72065 8.36C5.58222 8.04931 5.16694 6.79833 5.82831 5.10337C5.82831 5.10337 6.85883 4.77319 9.2121 6.36459C10.1965 6.09082 11.2424 5.95546 12.2883 5.94931C13.3342 5.95546 14.3801 6.09082 15.3644 6.36459C17.7023 4.77319 18.7328 5.10337 18.7328 5.10337C19.3942 6.79833 18.9789 8.04931 18.8559 8.36C19.6403 9.22133 20.1171 10.3185 20.1171 11.6618C20.1171 16.3888 17.2409 17.4296 14.5031 17.7321C14.9338 18.1012 15.3337 18.8559 15.3337 20.0084C15.3337 21.6552 15.3183 22.978 15.3183 23.3779C15.3183 23.7009 15.5336 24.0854 16.1642 23.9623C21.0871 22.3484 24.6094 17.7341 24.6094 12.3047C24.6094 5.50942 19.0999 0 12.3047 0Z"],["href","https://twitter.com/angular","aria-label","Twitter","target","_blank","rel","noopener"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg","alt","Twitter"],["d","M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"],["href","https://www.youtube.com/channel/UCbn1OgGei-DV7aSRo_HaAiw","aria-label","Youtube","target","_blank","rel","noopener"],["width","29","height","20","viewBox","0 0 29 20","fill","none","xmlns","http://www.w3.org/2000/svg","alt","Youtube"],["fill-rule","evenodd","clip-rule","evenodd","d","M27.4896 1.52422C27.9301 1.96749 28.2463 2.51866 28.4068 3.12258C29.0004 5.35161 29.0004 10 29.0004 10C29.0004 10 29.0004 14.6484 28.4068 16.8774C28.2463 17.4813 27.9301 18.0325 27.4896 18.4758C27.0492 18.9191 26.5 19.2389 25.8972 19.4032C23.6778 20 14.8068 20 14.8068 20C14.8068 20 5.93586 20 3.71651 19.4032C3.11363 19.2389 2.56449 18.9191 2.12405 18.4758C1.68361 18.0325 1.36732 17.4813 1.20683 16.8774C0.613281 14.6484 0.613281 10 0.613281 10C0.613281 10 0.613281 5.35161 1.20683 3.12258C1.36732 2.51866 1.68361 1.96749 2.12405 1.52422C2.56449 1.08095 3.11363 0.76113 3.71651 0.596774C5.93586 0 14.8068 0 14.8068 0C14.8068 0 23.6778 0 25.8972 0.596774C26.5 0.76113 27.0492 1.08095 27.4896 1.52422ZM19.3229 10L11.9036 5.77905V14.221L19.3229 10Z"],["xmlns","http://www.w3.org/2000/svg","height","14","viewBox","0 -960 960 960","width","14","fill","currentColor"],["d","M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"]],template:function(r,i){r&1&&(J(0,"table",0)(1,"tr")(2,"th",1),ye(3,"Header"),te()(),J(4,"tr")(5,"td",1),De(6,"app-header"),te()(),J(7,"tr")(8,"td"),De(9,"app-work-experience"),te(),J(10,"td"),De(11,"app-skills"),te()(),J(12,"tr")(13,"td"),De(14,"app-education"),te(),J(15,"td"),De(16,"app-certificates"),te()(),J(17,"tr")(18,"td"),De(19,"app-languages"),te(),J(20,"td"),De(21,"app-interests"),te()()(),J(22,"main",2)(23,"div",3)(24,"div",4),$o(),J(25,"svg",5)(26,"g",6),De(27,"path",7)(28,"path",8),te(),J(29,"defs")(30,"radialGradient",9),De(31,"stop",10)(32,"stop",11)(33,"stop",12),te(),J(34,"linearGradient",13),De(35,"stop",14)(36,"stop",15)(37,"stop",16)(38,"stop",17),te(),J(39,"clipPath",18),De(40,"path",19),te()()(),Wl(),J(41,"h1"),ye(42),te(),J(43,"p"),ye(44,"Congratulations! Your app is running. \u{1F389}"),te()(),De(45,"div",20),J(46,"div",21)(47,"div",22),OT(48,wj,5,2,"a",23,hj),te(),J(50,"div",24)(51,"a",25),$o(),J(52,"svg",26),De(53,"path",27),te()(),Wl(),J(54,"a",28),$o(),J(55,"svg",29),De(56,"path",30),te()(),Wl(),J(57,"a",31),$o(),J(58,"svg",32),De(59,"path",33),te()()()()()()),r&2&&(pe(42),Vt("Hello, ",i.title,""),pe(6),FT(BT(6,vj,Ho(1,fj),Ho(2,pj),Ho(3,gj),Ho(4,mj),Ho(5,yj))))},dependencies:[Ex,Tx,bx,Ax,Rx,Nx,kx],styles:[`[_nghost-%COMP%] {
    --bright-blue: oklch(51.01% 0.274 263.83);
    --electric-violet: oklch(53.18% 0.28 296.97);
    --french-violet: oklch(47.66% 0.246 305.88);
    --vivid-pink: oklch(69.02% 0.277 332.77);
    --hot-red: oklch(61.42% 0.238 15.34);
    --orange-red: oklch(63.32% 0.24 31.68);

    --gray-900: oklch(19.37% 0.006 300.98);
    --gray-700: oklch(36.98% 0.014 302.71);
    --gray-400: oklch(70.9% 0.015 304.04);

    --red-to-pink-to-purple-vertical-gradient: linear-gradient(
      180deg,
      var(--orange-red) 0%,
      var(--vivid-pink) 50%,
      var(--electric-violet) 100%
    );

    --red-to-pink-to-purple-horizontal-gradient: linear-gradient(
      90deg,
      var(--orange-red) 0%,
      var(--vivid-pink) 50%,
      var(--electric-violet) 100%
    );

    --pill-accent: var(--bright-blue);

    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol";
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1[_ngcontent-%COMP%] {
    font-size: 3.125rem;
    color: var(--gray-900);
    font-weight: 500;
    line-height: 100%;
    letter-spacing: -0.125rem;
    margin: 0;
    font-family: "Inter Tight", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol";
  }

  p[_ngcontent-%COMP%] {
    margin: 0;
    color: var(--gray-700);
  }

  main[_ngcontent-%COMP%] {
    width: 100%;
    min-height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    box-sizing: inherit;
    position: relative;
  }

  .angular-logo[_ngcontent-%COMP%] {
    max-width: 9.2rem;
  }

  .content[_ngcontent-%COMP%] {
    display: flex;
    justify-content: space-around;
    width: 100%;
    max-width: 700px;
    margin-bottom: 3rem;
  }

  .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {
    margin-top: 1.75rem;
  }

  .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {
    margin-top: 1.5rem;
  }

  .divider[_ngcontent-%COMP%] {
    width: 1px;
    background: var(--red-to-pink-to-purple-vertical-gradient);
    margin-inline: 0.5rem;
  }

  .pill-group[_ngcontent-%COMP%] {
    display: flex;
    flex-direction: column;
    align-items: start;
    flex-wrap: wrap;
    gap: 1.25rem;
  }

  .pill[_ngcontent-%COMP%] {
    display: flex;
    align-items: center;
    --pill-accent: var(--bright-blue);
    background: color-mix(in srgb, var(--pill-accent) 5%, transparent);
    color: var(--pill-accent);
    padding-inline: 0.75rem;
    padding-block: 0.375rem;
    border-radius: 2.75rem;
    border: 0;
    transition: background 0.3s ease;
    font-family: var(--inter-font);
    font-size: 0.875rem;
    font-style: normal;
    font-weight: 500;
    line-height: 1.4rem;
    letter-spacing: -0.00875rem;
    text-decoration: none;
  }

  .pill[_ngcontent-%COMP%]:hover {
    background: color-mix(in srgb, var(--pill-accent) 15%, transparent);
  }

  .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 1) {
    --pill-accent: var(--bright-blue);
  }
  .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 2) {
    --pill-accent: var(--french-violet);
  }
  .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 3), 
   .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 4), 
   .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n + 5) {
    --pill-accent: var(--hot-red);
  }

  .pill-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {
    margin-inline-start: 0.25rem;
  }

  .social-links[_ngcontent-%COMP%] {
    display: flex;
    align-items: center;
    gap: 0.73rem;
    margin-top: 1.5rem;
  }

  .social-links[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {
    transition: fill 0.3s ease;
    fill: var(--gray-400);
  }

  .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {
    fill: var(--gray-900);
  }

  @media screen and (max-width: 650px) {
    .content[_ngcontent-%COMP%] {
      flex-direction: column;
      width: max-content;
    }

    .divider[_ngcontent-%COMP%] {
      height: 1px;
      width: 100%;
      background: var(--red-to-pink-to-purple-horizontal-gradient);
      margin-block: 1.5rem;
    }
  }`]})}}return n})();var Fx={production:!1,firebase:{apiKey:"AIzaSyDmyAaf-6SvFynKBXcqfU3gxUjXBgwHz-M",authDomain:"wikiman-85253.firebaseapp.com",projectId:"wikiman-85253",storageBucket:"wikiman-85253.firebasestorage.app",messagingSenderId:"523325811673",appId:"1:523325811673:web:f1ca5dfcf39a70dd4087c8",measurementId:"G-TXDTV55QSB"}};var Lx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Mt({type:n,bootstrap:[Ox]})}static{this.\u0275inj=Rt({providers:[NC()],imports:[RC,Tb,Ub.initializeApp(Fx.firebase)]})}}return n})();xC().bootstrapModule(Lx,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));

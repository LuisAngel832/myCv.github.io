import{A as Bt,a as V,b as xe,c as II,d as Ff,e as R,f as EI,g as Iu,h as DI,i as TI,j as CI,k as Lf,l as bI,m as la,n as Vf,o as Eu,p as SI,q as AI,r as jf,s as Fe,t as ci,u as Cn,v as Du,w as da,x as xI,y as RI,z as Er}from"./chunk-L7TVQH4Q.js";var Bf=null;var Uf=1,MI=Symbol("SIGNAL");function Te(n){let e=Bf;return Bf=n,e}function NI(){return Bf}var $f={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function WR(n){if(!(Wf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Uf)){if(!n.producerMustRecompute(n)&&!zf(n)){n.dirty=!1,n.lastCleanEpoch=Uf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Uf}}function qf(n){return n&&(n.nextProducerIndex=0),Te(n)}function PI(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Wf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Gf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function zf(n){Kf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(WR(t),r!==t.version))return!0}return!1}function Hf(n){if(Kf(n),Wf(n))for(let e=0;e<n.producerNode.length;e++)Gf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Gf(n,e){if(KR(n),n.liveConsumerNode.length===1&&QR(n))for(let r=0;r<n.producerNode.length;r++)Gf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Kf(i),i.producerIndexOfThis[r]=e}}function Wf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Kf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function KR(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function QR(n){return n.producerNode!==void 0}function YR(){throw new Error}var ZR=YR;function kI(n){ZR=n}function re(n){return typeof n=="function"}function oo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Tu=oo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ui(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof Tu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{OI(o)}catch(s){e=e??[],s instanceof Tu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Tu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)OI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ui(t,e)}remove(e){let{_finalizers:t}=this;t&&ui(t,e),e instanceof n&&e._removeParent(this)}};$e.EMPTY=(()=>{let n=new $e;return n.closed=!0,n})();var Qf=$e.EMPTY;function Cu(n){return n instanceof $e||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function OI(n){re(n)?n():n.unsubscribe()}var un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var so={setTimeout(n,e,...t){let{delegate:r}=so;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=so;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function bu(n){so.setTimeout(()=>{let{onUnhandledError:e}=un;if(e)e(n);else throw n})}function ha(){}var FI=Yf("C",void 0,void 0);function LI(n){return Yf("E",void 0,n)}function VI(n){return Yf("N",n,void 0)}function Yf(n,e,t){return{kind:n,value:e,error:t}}var li=null;function ao(n){if(un.useDeprecatedSynchronousErrorHandling){let e=!li;if(e&&(li={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=li;if(li=null,t)throw r}}else n()}function jI(n){un.useDeprecatedSynchronousErrorHandling&&li&&(li.errorThrown=!0,li.error=n)}var di=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Cu(e)&&e.add(this)):this.destination=eM}static create(e,t,r){return new Yn(e,t,r)}next(e){this.isStopped?Jf(VI(e),this):this._next(e)}error(e){this.isStopped?Jf(LI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Jf(FI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},JR=Function.prototype.bind;function Zf(n,e){return JR.call(n,e)}var Xf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Su(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Su(r)}else Su(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Su(t)}}},Yn=class extends di{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&un.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zf(e.next,o),error:e.error&&Zf(e.error,o),complete:e.complete&&Zf(e.complete,o)}):i=e}this.destination=new Xf(i)}};function Su(n){un.useDeprecatedSynchronousErrorHandling?jI(n):bu(n)}function XR(n){throw n}function Jf(n,e){let{onStoppedNotification:t}=un;t&&so.setTimeout(()=>t(n,e))}var eM={closed:!0,next:ha,error:XR,complete:ha};var co=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(n){return n}function ep(...n){return tp(n)}function tp(n){return n.length===0?Dt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=nM(t)?t:new Yn(t,r,i);return ao(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=UI(r),new r((i,o)=>{let s=new Yn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[co](){return this}pipe(...t){return tp(t)(this)}toPromise(t){return t=UI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function UI(n){var e;return(e=n??un.Promise)!==null&&e!==void 0?e:Promise}function tM(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function nM(n){return n&&n instanceof di||tM(n)&&Cu(n)}function np(n){return re(n?.lift)}function ue(n){return e=>{if(np(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new rp(n,e,t,r,i)}var rp=class extends di{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function uo(){return ue((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var lo=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,np(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return uo()(this)}};var BI=oo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Au(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new BI}next(t){ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qf:(this.currentObservers=null,o.push(t),new $e(()=>{this.currentObservers=null,ui(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new Au(e,t),n})(),Au=class extends He{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Qf}};var lt=class extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var fa={now(){return(fa.delegate||Date).now()},delegate:void 0};var xu=class extends He{constructor(e=1/0,t=1/0,r=fa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ru=class extends $e{constructor(e,t){super()}schedule(e,t=0){return this}};var pa={setInterval(n,e,...t){let{delegate:r}=pa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=pa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ho=class extends Ru{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return pa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&pa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ui(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var fo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};fo.now=fa.now;var po=class extends fo{constructor(e,t=fo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ga=new po(ho);var Mu=class extends ho{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Nu=class extends po{};var ip=new Nu(Mu);var Tt=new fe(n=>n.complete());function $I(n){return n&&re(n.schedule)}function op(n){return n[n.length-1]}function qI(n){return re(op(n))?n.pop():void 0}function bn(n){return $I(op(n))?n.pop():void 0}function zI(n,e){return typeof op(n)=="number"?n.pop():e}var Pu=n=>n&&typeof n.length=="number"&&typeof n!="function";function ku(n){return re(n?.then)}function Ou(n){return re(n[co])}function Fu(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Lu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function rM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vu=rM();function ju(n){return re(n?.[Vu])}function Uu(n){return DI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Iu(t.read());if(i)return yield Iu(void 0);yield yield Iu(r)}}finally{t.releaseLock()}})}function Bu(n){return re(n?.getReader)}function Le(n){if(n instanceof fe)return n;if(n!=null){if(Ou(n))return iM(n);if(Pu(n))return oM(n);if(ku(n))return sM(n);if(Fu(n))return HI(n);if(ju(n))return aM(n);if(Bu(n))return cM(n)}throw Lu(n)}function iM(n){return new fe(e=>{let t=n[co]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oM(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function sM(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,bu)})}function aM(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function HI(n){return new fe(e=>{uM(n,e).catch(t=>e.error(t))})}function cM(n){return HI(Uu(n))}function uM(n,e){var t,r,i,o;return EI(this,void 0,void 0,function*(){try{for(t=TI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Jt(n,e=0){return ue((t,r)=>{t.subscribe(de(r,i=>Pt(r,n,()=>r.next(i),e),()=>Pt(r,n,()=>r.complete(),e),i=>Pt(r,n,()=>r.error(i),e)))})}function ln(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function GI(n,e){return Le(n).pipe(ln(e),Jt(e))}function WI(n,e){return Le(n).pipe(ln(e),Jt(e))}function KI(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function QI(n,e){return new fe(t=>{let r;return Pt(t,e,()=>{r=n[Vu](),Pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function $u(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{Pt(t,e,()=>{let r=n[Symbol.asyncIterator]();Pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function YI(n,e){return $u(Uu(n),e)}function ZI(n,e){if(n!=null){if(Ou(n))return GI(n,e);if(Pu(n))return KI(n,e);if(ku(n))return WI(n,e);if(Fu(n))return $u(n,e);if(ju(n))return QI(n,e);if(Bu(n))return YI(n,e)}throw Lu(n)}function Ie(n,e){return e?ZI(n,e):Le(n)}function Z(...n){let e=bn(n);return Ie(n,e)}function go(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function sp(n){return!!n&&(n instanceof fe||re(n.lift)&&re(n.subscribe))}var Zn=oo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function W(n,e){return ue((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:lM}=Array;function dM(n,e){return lM(e)?n(...e):n(e)}function JI(n){return W(e=>dM(n,e))}var{isArray:hM}=Array,{getPrototypeOf:fM,prototype:pM,keys:gM}=Object;function XI(n){if(n.length===1){let e=n[0];if(hM(e))return{args:e,keys:null};if(mM(e)){let t=gM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function mM(n){return n&&typeof n=="object"&&fM(n)===pM}function eE(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ma(...n){let e=bn(n),t=qI(n),{args:r,keys:i}=XI(n);if(r.length===0)return Ie([],e);let o=new fe(yM(r,e,i?s=>eE(i,s):Dt));return t?o.pipe(JI(t)):o}function yM(n,e,t=Dt){return r=>{tE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)tE(e,()=>{let l=Ie(n[c],e),h=!1;l.subscribe(de(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function tE(n,e,t){n?Pt(t,n,e):e()}function nE(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?C(M):c.push(M),C=M=>{o&&e.next(M),l++;let N=!1;Le(t(M,h++)).subscribe(de(e,j=>{i?.(j),o?v(j):e.next(j)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let j=c.shift();s?Pt(e,s,()=>C(j)):C(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(de(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ze(n,e,t=1/0){return re(e)?Ze((r,i)=>W((o,s)=>e(r,o,i,s))(Le(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>nE(r,i,n,t)))}function Dr(n=1/0){return Ze(Dt,n)}function rE(){return Dr(1)}function mo(...n){return rE()(Ie(n,bn(n)))}function qu(n){return new fe(e=>{Le(n()).subscribe(e)})}function ap(...n){let e=bn(n),t=zI(n,1/0),r=n;return r.length?r.length===1?Le(r[0]):Dr(t)(Ie(r,e)):Tt}function it(n,e){return ue((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Tr(n){return ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=Le(n(s,Tr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function iE(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(de(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Cr(n,e){return re(e)?Ze(n,e,1):Ze(n,1)}function br(n){return ue((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Jn(n){return n<=0?()=>Tt:ue((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function cp(n){return W(()=>n)}function up(n,e=Dt){return n=n??vM,ue((t,r)=>{let i,o=!0;t.subscribe(de(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function vM(n,e){return n===e}function zu(n=wM){return ue((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wM(){return new Zn}function yo(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function $t(n,e){let t=arguments.length>=2;return r=>r.pipe(n?it((i,o)=>n(i,o,r)):Dt,Jn(1),t?br(e):zu(()=>new Zn))}function vo(n){return n<=0?()=>Tt:ue((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function lp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?it((i,o)=>n(i,o,r)):Dt,vo(1),t?br(e):zu(()=>new Zn))}function ya(){return ue((n,e)=>{let t,r=!1;n.subscribe(de(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function hi(n,e){return ue(iE(n,e,arguments.length>=2,!0))}function oE(n={}){let{connector:e=()=>new He,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=c=void 0,h=p=!1},C=()=>{let M=s;v(),M?.unsubscribe()};return ue((M,N)=>{l++,!p&&!h&&m();let j=c=c??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=dp(C,i))}),j.subscribe(N),!s&&l>0&&(s=new Yn({next:z=>j.next(z),error:z=>{p=!0,m(),a=dp(v,t,z),j.error(z)},complete:()=>{h=!0,m(),a=dp(v,r),j.complete()}}),Le(M).subscribe(s))})(o)}}function dp(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Yn({next:()=>{r.unsubscribe(),n()}});return Le(e(...t)).subscribe(r)}function Hu(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,oE({connector:()=>new xu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function fi(...n){let e=bn(n);return ue((t,r)=>{(e?mo(n,t,e):mo(n,t)).subscribe(r)})}function Ve(n,e){return ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,c=>{i?.unsubscribe();let l=0,h=o++;Le(n(c,h)).subscribe(i=de(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Gu(n,e){return re(e)?Ve(()=>n,e):Ve(()=>n)}function hp(n){return ue((e,t)=>{Le(n).subscribe(de(t,()=>t.complete(),ha)),!t.closed&&e.subscribe(t)})}function Ge(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dt}var qE="https://g.co/ng/security#xss",J=class extends Error{constructor(e,t){super(Ml(e,t)),this.code=e}};function Ml(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ma(n){return{toString:n}.toString()}var Wu="__parameters__";function _M(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function zE(n,e,t){return Ma(()=>{let r=_M(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Wu)?c[Wu]:Object.defineProperty(c,Wu,{value:[]})[Wu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var nr=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function kt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(kt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function sE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var IM=Se({__forward_ref__:Se});function HE(n){return n.__forward_ref__=HE,n.toString=function(){return kt(this())},n}function en(n){return GE(n)?n():n}function GE(n){return typeof n=="function"&&n.hasOwnProperty(IM)&&n.__forward_ref__===HE}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nl(n){return aE(n,KE)||aE(n,QE)}function WE(n){return Nl(n)!==null}function aE(n,e){return n.hasOwnProperty(e)?n[e]:null}function EM(n){let e=n&&(n[KE]||n[QE]);return e||null}function cE(n){return n&&(n.hasOwnProperty(uE)||n.hasOwnProperty(DM))?n[uE]:null}var KE=Se({\u0275prov:Se}),uE=Se({\u0275inj:Se}),QE=Se({ngInjectableDef:Se}),DM=Se({ngInjectorDef:Se}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function YE(n){return n&&!!n.\u0275providers}var TM=Se({\u0275cmp:Se}),CM=Se({\u0275dir:Se}),bM=Se({\u0275pipe:Se}),SM=Se({\u0275mod:Se}),nl=Se({\u0275fac:Se}),_a=Se({__NG_ELEMENT_ID__:Se}),lE=Se({__NG_ENV_ID__:Se});function Ea(n){return typeof n=="string"?n:n==null?"":String(n)}function AM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ea(n)}function xM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new J(-200,n)}function ag(n,e){throw new J(-201,!1)}var le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(le||{}),Dp;function ZE(){return Dp}function Xt(n){let e=Dp;return Dp=n,e}function JE(n,e,t){let r=Nl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&le.Optional)return null;if(e!==void 0)return e;ag(n,"Injector")}var RM={},Da=RM,Tp="__NG_DI_FLAG__",rl="ngTempTokenPath",MM="ngTokenPath",NM=/\n/gm,PM="\u0275",dE="__source",Do;function kM(){return Do}function Sr(n){let e=Do;return Do=n,e}function OM(n,e=le.Default){if(Do===void 0)throw new J(-203,!1);return Do===null?JE(n,void 0,e):Do.get(n,e&le.Optional?null:void 0,e)}function O(n,e=le.Default){return(ZE()||OM)(en(n),e)}function F(n,e=le.Default){return O(n,Pl(e))}function Pl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cp(n){let e=[];for(let t=0;t<n.length;t++){let r=en(n[t]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],c=FM(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function XE(n,e){return n[Tp]=e,n.prototype[Tp]=e,n}function FM(n){return n[Tp]}function LM(n,e,t,r){let i=n[rl];throw e[dE]&&i.unshift(e[dE]),n.message=VM(`
`+n.message,i,t,r),n[MM]=i,n[rl]=null,n}function VM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==PM?n.slice(2):n;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):kt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(NM,`
  `)}`}var Po=XE(zE("Optional"),8);var cg=XE(zE("SkipSelf"),4);function Co(n,e){let t=n.hasOwnProperty(nl);return t?n[nl]:null}function ug(n,e){n.forEach(t=>Array.isArray(t)?ug(t,e):e(t))}function eD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function il(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Ta={},hn=[],gi=new H(""),tD=new H("",-1),nD=new H(""),ol=class{get(e,t=Da){if(t===Da){let r=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw r.name="NullInjectorError",r}return t}},rD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(rD||{}),xn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(xn||{}),Rr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Rr||{});function jM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function bp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];BM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function UM(n){return n===3||n===4||n===6}function BM(n){return n.charCodeAt(0)===64}function lg(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?hE(n,t,i,null,e[++r]):hE(n,t,i,null,null))}}return n}function hE(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var iD="ng-template";function $M(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(dg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function dg(n){return n.type===4&&n.value!==iD}function qM(n,e,t){let r=n.type===4&&!t?iD:n.value;return e===r}function zM(n,e,t){let r=4,i=n.attrs,o=i!==null?WM(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!dn(r)&&!dn(c))return!1;if(s&&dn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!qM(n,c,t)||c===""&&e.length===1){if(dn(r))return!1;s=!0}}else if(r&8){if(i===null||!$M(n,i,c,t)){if(dn(r))return!1;s=!0}}else{let l=e[++a],h=HM(c,i,dg(n),t);if(h===-1){if(dn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(dn(r))return!1;s=!0}}}}return dn(r)||s}function dn(n){return(n&1)===0}function HM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return KM(e,n)}function GM(n,e,t=!1){for(let r=0;r<e.length;r++)if(zM(n,e[r],t))return!0;return!1}function WM(n){for(let e=0;e<n.length;e++){let t=n[e];if(UM(t))return e}return n.length}function KM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function fE(n,e){return n?":not("+e.trim()+")":e}function QM(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!dn(s)&&(e+=fE(o,i),i=""),r=s,o=o||!dn(r);t++}return i!==""&&(e+=fE(o,i)),e}function YM(n){return n.map(QM).join(",")}function ZM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!dn(i))break;i=o}r++}return{attrs:e,classes:t}}function at(n){return Ma(()=>{let e=uD(n),t=xe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||xn.Emulated,styles:n.styles||hn,_:null,schemas:n.schemas||null,tView:null,id:""});lD(t);let r=n.dependencies;return t.directiveDefs=gE(r,!1),t.pipeDefs=gE(r,!0),t.id=eN(t),t})}function JM(n){return Mr(n)||oD(n)}function XM(n){return n!==null}function St(n){return Ma(()=>({type:n.type,bootstrap:n.bootstrap||hn,declarations:n.declarations||hn,imports:n.imports||hn,exports:n.exports||hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function pE(n,e){if(n==null)return Ta;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Rr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Rr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Na(n){return Ma(()=>{let e=uD(n);return lD(e),e})}function Mr(n){return n[TM]||null}function oD(n){return n[CM]||null}function sD(n){return n[bM]||null}function aD(n){let e=Mr(n)||oD(n)||sD(n);return e!==null?e.standalone:!1}function cD(n,e){let t=n[SM]||null;if(!t&&e===!0)throw new Error(`Type ${kt(n)} does not have '\u0275mod' property.`);return t}function uD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ta,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||hn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pE(n.inputs,e),outputs:pE(n.outputs),debugInfo:null}}function lD(n){n.features?.forEach(e=>e(n))}function gE(n,e){if(!n)return null;let t=e?sD:JM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(XM)}function eN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Pa(n){return{\u0275providers:n}}function tN(...n){return{\u0275providers:dD(!0,n),\u0275fromNgModule:!0}}function dD(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return ug(e,s=>{let a=s;Sp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&hD(i,o),t}function hD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];hg(i,o=>{e(o,r)})}}function Sp(n,e,t,r){if(n=en(n),!n)return!1;let i=null,o=cE(n),s=!o&&Mr(n);if(!o&&!s){let c=n.ngModule;if(o=cE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Sp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{ug(o.imports,h=>{Sp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&hD(l,e)}if(!a){let l=Co(i)||(()=>new i);e({provide:i,useFactory:l,deps:hn},i),e({provide:nD,useValue:i,multi:!0},i),e({provide:gi,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;hg(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function hg(n,e){for(let t of n)YE(t)&&(t=t.\u0275providers),Array.isArray(t)?hg(t,e):e(t)}var nN=Se({provide:String,useValue:Se});function fD(n){return n!==null&&typeof n=="object"&&nN in n}function rN(n){return!!(n&&n.useExisting)}function iN(n){return!!(n&&n.useFactory)}function Ap(n){return typeof n=="function"}var kl=new H(""),Ju={},oN={},fp;function fg(){return fp===void 0&&(fp=new ol),fp}var zt=class{},Ca=class extends zt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rp(e,s=>this.processProvider(s)),this.records.set(tD,wo(void 0,this)),i.has("environment")&&this.records.set(zt,wo(void 0,this));let o=this.records.get(kl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nD,hn,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Sr(this),r=Xt(void 0),i;try{return e()}finally{Sr(t),Xt(r)}}get(e,t=Da,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lE))return e[lE](this);r=Pl(r);let i,o=Sr(this),s=Xt(void 0);try{if(!(r&le.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=dN(e)&&Nl(e);l&&this.injectableDefInScope(l)?c=wo(xp(e),Ju):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&le.Self?fg():this.parent;return t=r&le.Optional&&t===Da?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[rl]=a[rl]||[]).unshift(kt(e)),o)throw a;return LM(a,e,"R3InjectorError",this.source)}else throw a}finally{Xt(s),Sr(o)}}resolveInjectorInitializers(){let e=Te(null),t=Sr(this),r=Xt(void 0),i;try{let o=this.get(gi,hn,le.Self);for(let s of o)s()}finally{Sr(t),Xt(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=en(e);let t=Ap(e)?e:en(e&&e.provide),r=aN(e);if(!Ap(e)&&e.multi===!0){let i=this.records.get(t);i||(i=wo(void 0,Ju,!0),i.factory=()=>Cp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===Ju&&(t.value=oN,t.value=t.factory()),typeof t.value=="object"&&t.value&&lN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=en(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function xp(n){let e=Nl(n),t=e!==null?e.factory:Co(n);if(t!==null)return t;if(n instanceof H)throw new J(204,!1);if(n instanceof Function)return sN(n);throw new J(204,!1)}function sN(n){if(n.length>0)throw new J(204,!1);let t=EM(n);return t!==null?()=>t.factory(n):()=>new n}function aN(n){if(fD(n))return wo(void 0,n.useValue);{let e=cN(n);return wo(e,Ju)}}function cN(n,e,t){let r;if(Ap(n)){let i=en(n);return Co(i)||xp(i)}else if(fD(n))r=()=>en(n.useValue);else if(iN(n))r=()=>n.useFactory(...Cp(n.deps||[]));else if(rN(n))r=()=>O(en(n.useExisting));else{let i=en(n&&(n.useClass||n.provide));if(uN(n))r=()=>new i(...Cp(n.deps));else return Co(i)||xp(i)}return r}function wo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uN(n){return!!n.deps}function lN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function dN(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function Rp(n,e){for(let t of n)Array.isArray(t)?Rp(t,e):t&&YE(t)?Rp(t.\u0275providers,e):e(t)}function pn(n,e){n instanceof Ca&&n.assertNotDestroyed();let t,r=Sr(n),i=Xt(void 0);try{return e()}finally{Sr(r),Xt(i)}}function pD(){return ZE()!==void 0||kM()!=null}function hN(n){if(!pD())throw new J(-203,!1)}function fN(n){let e=nr.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function pN(n){return typeof n=="function"}var Ht=0,he=1,ie=2,vt=3,fn=4,gn=5,Rn=6,mE=7,Xn=8,bo=9,Mn=10,ot=11,ba=12,yE=13,ko=14,nn=15,So=16,_o=17,Ao=18,Ol=19,gD=20,xr=21,pp=22,tn=23,Ot=25,mD=1,Sa=6,er=7,sl=8,al=9,qt=10,cl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(cl||{});function An(n){return Array.isArray(n)&&typeof n[mD]=="object"}function Pn(n){return Array.isArray(n)&&n[mD]===!0}function yD(n){return(n.flags&4)!==0}function ka(n){return n.componentOffset>-1}function vD(n){return(n.flags&1)===1}function Oa(n){return!!n.template}function ul(n){return(n[ie]&512)!==0}var Mp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function wD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Fl(){return _D}function _D(n){return n.type.prototype.ngOnChanges&&(n.setInput=mN),gN}Fl.ngInherit=!0;function gN(){let n=ED(this),e=n?.current;if(e){let t=n.previous;if(t===Ta)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function mN(n,e,t,r,i){let o=this.declaredInputs[r],s=ED(n)||yN(n,{previous:Ta,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Mp(l&&l.currentValue,t,c===Ta),wD(n,e,i,t)}var ID="__ngSimpleChanges__";function ED(n){return n[ID]||null}function yN(n,e){return n[ID]=e}var vE=null;var Ar=function(n,e,t){vE?.(n,e,t)},vN="svg",wN="math";function Nn(n){for(;Array.isArray(n);)n=n[Ht];return n}function _N(n,e){return Nn(e[n])}function mn(n,e){return Nn(e[n.index])}function DD(n,e){return n.data[e]}function Oo(n,e){let t=e[n];return An(t)?t:t[Ht]}function pg(n){return(n[ie]&128)===128}function IN(n){return Pn(n[vt])}function ll(n,e){return e==null?null:n[e]}function TD(n){n[_o]=0}function CD(n){n[ie]&1024||(n[ie]|=1024,pg(n)&&Vl(n))}function EN(n,e){for(;n>0;)e=e[ko],n--;return e}function Ll(n){return!!(n[ie]&9216||n[tn]?.dirty)}function Np(n){n[Mn].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),Ll(n)&&Vl(n)}function Vl(n){n[Mn].changeDetectionScheduler?.notify(0);let e=mi(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!pg(e)));)e=mi(e)}function bD(n,e){if((n[ie]&256)===256)throw new J(911,!1);n[xr]===null&&(n[xr]=[]),n[xr].push(e)}function DN(n,e){if(n[xr]===null)return;let t=n[xr].indexOf(e);t!==-1&&n[xr].splice(t,1)}function mi(n){let e=n[vt];return Pn(e)?e[vt]:e}var me={lFrame:FD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var SD=!1;function TN(){return me.lFrame.elementDepthCount}function CN(){me.lFrame.elementDepthCount++}function bN(){me.lFrame.elementDepthCount--}function AD(){return me.bindingsEnabled}function Fa(){return me.skipHydrationRootTNode!==null}function SN(n){return me.skipHydrationRootTNode===n}function AN(n){me.skipHydrationRootTNode=n}function xN(){me.skipHydrationRootTNode=null}function st(){return me.lFrame.lView}function Fo(){return me.lFrame.tView}function kn(){let n=xD();for(;n!==null&&n.type===64;)n=n.parent;return n}function xD(){return me.lFrame.currentTNode}function RN(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function La(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function RD(){return me.lFrame.isParent}function MN(){me.lFrame.isParent=!1}function MD(){return SD}function wE(n){SD=n}function NN(){return me.lFrame.bindingIndex}function PN(n){return me.lFrame.bindingIndex=n}function ND(){return me.lFrame.bindingIndex++}function kN(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ON(){return me.lFrame.inI18n}function FN(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,Pp(e)}function LN(){return me.lFrame.currentDirectiveIndex}function Pp(n){me.lFrame.currentDirectiveIndex=n}function PD(n){me.lFrame.currentQueryIndex=n}function VN(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[gn]:null}function kD(n,e,t){if(t&le.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&le.Host);)if(i=VN(o),i===null||(o=o[ko],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=OD();return r.currentTNode=e,r.lView=n,!0}function gg(n){let e=OD(),t=n[he];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function OD(){let n=me.lFrame,e=n===null?null:n.child;return e===null?FD(n):e}function FD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function LD(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var VD=LD;function mg(){let n=LD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jN(n){return(me.lFrame.contextLView=EN(n,me.lFrame.contextLView))[Xn]}function jl(){return me.lFrame.selectedIndex}function yi(n){me.lFrame.selectedIndex=n}function UN(){let n=me.lFrame;return DD(n.tView,n.selectedIndex)}function jD(){return me.lFrame.currentNamespace}var UD=!0;function yg(){return UD}function kr(n){UD=n}function BN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=_D(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function vg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Xu(n,e,t){BD(n,e,3,t)}function el(n,e,t,r){(n[ie]&3)===t&&BD(n,e,t,r)}function gp(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function BD(n,e,t,r){let i=r!==void 0?n[_o]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[_o]+=65536),(a<o||o==-1)&&($N(n,t,e,c),n[_o]=(n[_o]&4294901760)+c+2),c++}function _E(n,e){Ar(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),Ar(5,n,e)}}function $N(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ie]>>14<n[_o]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,_E(a,o)):_E(a,o)}var To=-1,Aa=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function qN(n){return n instanceof Aa}function zN(n){return(n.flags&8)!==0}function HN(n){return(n.flags&16)!==0}var mp={},kp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Pl(r);let i=this.injector.get(e,mp,r);return i!==mp||t===mp?i:this.parentInjector.get(e,t,r)}};function $D(n){return n!==To}function dl(n){return n&32767}function GN(n){return n>>16}function hl(n,e){let t=GN(n),r=e;for(;t>0;)r=r[ko],t--;return r}var Op=!0;function IE(n){let e=Op;return Op=n,e}var WN=256,qD=WN-1,zD=5,KN=0,Sn={};function QN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(_a)&&(r=t[_a]),r==null&&(r=t[_a]=KN++);let i=r&qD,o=1<<i;e.data[n+(i>>zD)]|=o}function HD(n,e){let t=GD(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,yp(r.data,n),yp(e,null),yp(r.blueprint,null));let i=wg(n,e),o=n.injectorIndex;if($D(i)){let s=dl(i),a=hl(i,e),c=a[he].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function yp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function GD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function wg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ZD(i),r===null)return To;if(t++,i=i[ko],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return To}function YN(n,e,t){QN(n,e,t)}function WD(n,e,t){if(t&le.Optional||n!==void 0)return n;ag(e,"NodeInjector")}function KD(n,e,t,r){if(t&le.Optional&&r===void 0&&(r=null),!(t&(le.Self|le.Host))){let i=n[bo],o=Xt(void 0);try{return i?i.get(e,r,t&le.Optional):JE(e,r,t&le.Optional)}finally{Xt(o)}}return WD(r,e,t)}function QD(n,e,t,r=le.Default,i){if(n!==null){if(e[ie]&2048&&!(r&le.Self)){let s=tP(n,e,t,r,Sn);if(s!==Sn)return s}let o=YD(n,e,t,r,Sn);if(o!==Sn)return o}return KD(e,t,r,i)}function YD(n,e,t,r,i){let o=XN(t);if(typeof o=="function"){if(!kD(e,n,r))return r&le.Host?WD(i,t,r):KD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))ag(t);else return s}finally{VD()}}else if(typeof o=="number"){let s=null,a=GD(n,e),c=To,l=r&le.Host?e[nn][gn]:null;for((a===-1||r&le.SkipSelf)&&(c=a===-1?wg(n,e):e[a+8],c===To||!DE(r,!1)?a=-1:(s=e[he],a=dl(c),e=hl(c,e)));a!==-1;){let h=e[he];if(EE(o,a,h.data)){let p=ZN(a,e,t,s,r,l);if(p!==Sn)return p}c=e[a+8],c!==To&&DE(r,e[he].data[a+8]===l)&&EE(o,a,e)?(s=h,a=dl(c),e=hl(c,e)):a=-1}}return i}function ZN(n,e,t,r,i,o){let s=e[he],a=s.data[n+8],c=r==null?ka(a)&&Op:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,h=JN(a,s,t,c,l);return h!==null?xa(e,s,h,a):Sn}function JN(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let C=s[v];if(v<c&&t===C||v>=c&&C.type===t)return v}if(i){let v=s[c];if(v&&Oa(v)&&v.type===t)return c}return null}function xa(n,e,t,r){let i=n[t],o=e.data;if(qN(i)){let s=i;s.resolving&&xM(AM(o[t]));let a=IE(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Xt(s.injectImpl):null,h=kD(n,r,le.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&BN(t,o[t],e)}finally{l!==null&&Xt(l),IE(a),s.resolving=!1,VD()}}return i}function XN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_a)?n[_a]:void 0;return typeof e=="number"?e>=0?e&qD:eP:e}function EE(n,e,t){let r=1<<n;return!!(t[e+(n>>zD)]&r)}function DE(n,e){return!(n&le.Self)&&!(n&le.Host&&e)}var pi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return QD(this._tNode,this._lView,e,Pl(r),t)}};function eP(){return new pi(kn(),st())}function _g(n){return Ma(()=>{let e=n.prototype.constructor,t=e[nl]||Fp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[nl]||Fp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Fp(n){return GE(n)?()=>{let e=Fp(en(n));return e&&e()}:Co(n)}function tP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!(s[ie]&512);){let a=YD(o,s,t,r|le.Self,Sn);if(a!==Sn)return a;let c=o.parent;if(!c){let l=s[gD];if(l){let h=l.get(t,Sn,r);if(h!==Sn)return h}c=ZD(s),s=s[ko]}o=c}return i}function ZD(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[gn]:null}function TE(n,e=null,t=null,r){let i=JD(n,e,t,r);return i.resolveInjectorInitializers(),i}function JD(n,e=null,t=null,r,i=new Set){let o=[t||hn,tN(n)];return r=r||(typeof n=="object"?void 0:kt(n)),new Ca(o,e||fg(),r||null,i)}var Gt=class n{static{this.THROW_IF_NOT_FOUND=Da}static{this.NULL=new ol}static create(e,t){if(Array.isArray(e))return TE({name:""},t,e,"");{let r=e.name??"";return TE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=q({token:n,providedIn:"any",factory:()=>O(tD)})}static{this.__NG_ELEMENT_ID__=-1}};var nP=new H("");nP.__NG_ELEMENT_ID__=n=>{let e=kn();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(n&le.Optional)return null;throw new J(204,!1)};var rP="ngOriginalError";function vp(n){return n[rP]}var XD=!0,Ig=(()=>{class n{static{this.__NG_ELEMENT_ID__=iP}static{this.__NG_ENV_ID__=t=>t}}return n})(),Lp=class extends Ig{constructor(e){super(),this._lView=e}onDestroy(e){return bD(this._lView,e),()=>DN(this._lView,e)}};function iP(){return new Lp(st())}var _i=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new lt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Vp=class extends He{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,pD()&&(this.destroyRef=F(Ig,{optional:!0})??void 0,this.pendingTasks=F(_i,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ct=Vp;function fl(...n){}function eT(n){let e,t;function r(){n=fl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function CE(n){return queueMicrotask(()=>n()),()=>{n=fl}}var Eg="isAngularZone",pl=Eg+"_ID",oP=0,ge=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ct(!1),this.onMicrotaskEmpty=new Ct(!1),this.onStable=new Ct(!1),this.onError=new Ct(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=XD}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,cP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Eg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new J(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,sP,fl,fl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},sP={};function Dg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function aP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){eT(()=>{n.callbackScheduled=!1,jp(n),n.isCheckStableRunning=!0,Dg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),jp(n)}function cP(n){let e=()=>{aP(n)},t=oP++;n._inner=n._inner.fork({name:"angular",properties:{[Eg]:!0,[pl]:t,[pl+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(uP(c))return r.invokeTask(o,s,a,c);try{return bE(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),SE(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return bE(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!lP(c)&&e(),SE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,jp(n),Dg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function jp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function bE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function SE(n){n._nesting--,Dg(n)}var gl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ct,this.onMicrotaskEmpty=new Ct,this.onStable=new Ct,this.onError=new Ct}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function uP(n){return tT(n,"__ignore_ng_zone__")}function lP(n){return tT(n,"__scheduler_tick__")}function tT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function dP(n="zone.js",e){return n==="noop"?new gl:n==="zone.js"?new ge(e):n}var tr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&vp(e);for(;t&&vp(t);)t=vp(t);return t||null}},hP=new H("",{providedIn:"root",factory:()=>{let n=F(ge),e=F(tr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function fP(){return Ul(kn(),st())}function Ul(n,e){return new Bl(mn(n,e))}var Bl=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=fP}}return n})();var pP="ngSkipHydration",gP="ngskiphydration";function nT(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===gP)return!0}return!1}function rT(n){return n.hasAttribute(pP)}function ml(n){return(n.flags&128)===128}function mP(n){if(ml(n))return!0;let e=n.parent;for(;e;){if(ml(n)||nT(e))return!0;e=e.parent}return!1}var iT=new Map,yP=0;function vP(){return yP++}function wP(n){iT.set(n[Ol],n)}function Up(n){iT.delete(n[Ol])}var AE="__ngContext__";function vi(n,e){An(e)?(n[AE]=e[Ol],wP(e)):n[AE]=e}function oT(n){return aT(n[ba])}function sT(n){return aT(n[fn])}function aT(n){for(;n!==null&&!Pn(n);)n=n[fn];return n}var Bp;function cT(n){Bp=n}function $l(){if(Bp!==void 0)return Bp;if(typeof document<"u")return document;throw new J(210,!1)}var Va=new H("",{providedIn:"root",factory:()=>_P}),_P="ng",Tg=new H(""),dt=new H("",{providedIn:"platform",factory:()=>"unknown"});var Cg=new H("",{providedIn:"root",factory:()=>$l().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function IP(){let n=new Lo;return F(dt)==="browser"&&(n.store=EP($l(),F(Va))),n}var Lo=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=q({token:n,providedIn:"root",factory:IP})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function EP(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var uT="h",lT="b",$p=function(n){return n.FirstChild="f",n.NextSibling="n",n}($p||{}),DP="e",TP="t",bg="c",dT="x",yl="r",CP="i",bP="n",hT="d";var SP="__nghData__",fT=SP,wp="ngh",AP="nghm",pT=()=>null;function xP(n,e,t=!1){let r=n.getAttribute(wp);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let h=e.get(Lo,null,{optional:!0});h!==null&&(c=h.get(fT,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,ql(l,0,n.nextSibling)),a?n.setAttribute(wp,a):n.removeAttribute(wp),l}function RP(){pT=xP}function Sg(n,e,t=!1){return pT(n,e,t)}function MP(n){let e=n._lView;return e[he].type===2?null:(ul(e)&&(e=e[Ot]),e)}function NP(n){return n.textContent?.replace(/\s/gm,"")}function PP(n){let e=$l(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=NP(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function ql(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function qp(n,e){return n.segmentHeads?.[e]??null}function kP(n,e){let t=n.data,r=t[DP]?.[e]??null;return r===null&&t[bg]?.[e]&&(r=Ag(n,e)),r}function gT(n,e){return n.data[bg]?.[e]??null}function Ag(n,e){let t=gT(n,e)??[],r=0;for(let i of t)r+=i[yl]*(i[dT]??1);return r}function OP(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[hT];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function ja(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[hT];n.disconnectedNodes=t?new Set(t):null}return!!OP(n)?.has(e)}var Ku=new H(""),mT=!1,yT=new H("",{providedIn:"root",factory:()=>mT});var vl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qE})`}};function xg(n){return n instanceof vl?n.changingThisBreaksApplicationSecurity:n}function vT(n,e){let t=FP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${qE})`)}return t===e}function FP(n){return n instanceof vl&&n.getTypeName()||null}var LP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wT(n){return n=String(n),n.match(LP)?n:"unsafe:"+n}var Rg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Rg||{});function _T(n){let e=VP();return e?e.sanitize(Rg.URL,n)||"":vT(n,"URL")?xg(n):wT(Ea(n))}function VP(){let n=st();return n&&n[Mn].sanitizer}var jP=/^>|^->|<!--|-->|--!>|<!-$/g,UP=/(<|>)/g,BP="\u200B$1\u200B";function $P(n){return n.replace(jP,e=>e.replace(UP,BP))}function qP(n){return n.ownerDocument.body}function IT(n){return n instanceof Function?n():n}function va(n){return(n??F(Gt)).get(dt)==="browser"}var Ii=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ii||{}),zP;function Mg(n,e){return zP(n,e)}function Io(n,e,t,r,i){if(r!=null){let o,s=!1;Pn(r)?o=r:An(r)&&(s=!0,r=r[Ht]);let a=Nn(r);n===0&&t!==null?i==null?ST(e,t,a):wl(e,t,a,i||null,!0):n===1&&t!==null?wl(e,t,a,i||null,!0):n===2?Og(e,a,s):n===3&&e.destroyNode(a),o!=null&&ok(e,n,o,t,i)}}function ET(n,e){return n.createText(e)}function HP(n,e,t){n.setValue(e,t)}function DT(n,e){return n.createComment($P(e))}function Ng(n,e,t){return n.createElement(e,t)}function GP(n,e){TT(n,e),e[Ht]=null,e[gn]=null}function WP(n,e,t,r,i,o){r[Ht]=i,r[gn]=e,zl(n,r,t,1,i,o)}function TT(n,e){e[Mn].changeDetectionScheduler?.notify(9),zl(n,e,e[ot],2,null,null)}function KP(n){let e=n[ba];if(!e)return _p(n[he],n);for(;e;){let t=null;if(An(e))t=e[ba];else{let r=e[qt];r&&(t=r)}if(!t){for(;e&&!e[fn]&&e!==n;)An(e)&&_p(e[he],e),e=e[vt];e===null&&(e=n),An(e)&&_p(e[he],e),t=e&&e[fn]}e=t}}function QP(n,e,t,r){let i=qt+r,o=t.length;r>0&&(t[i-1][fn]=e),r<o-qt?(e[fn]=t[i],eD(t,qt+r,e)):(t.push(e),e[fn]=null),e[vt]=t;let s=e[So];s!==null&&t!==s&&CT(s,e);let a=e[Ao];a!==null&&a.insertView(n),Np(e),e[ie]|=128}function CT(n,e){let t=n[al],r=e[vt];if(An(r))n[ie]|=cl.HasTransplantedViews;else{let i=r[vt][nn];e[nn]!==i&&(n[ie]|=cl.HasTransplantedViews)}t===null?n[al]=[e]:t.push(e)}function Pg(n,e){let t=n[al],r=t.indexOf(e);t.splice(r,1)}function zp(n,e){if(n.length<=qt)return;let t=qt+e,r=n[t];if(r){let i=r[So];i!==null&&i!==n&&Pg(i,r),e>0&&(n[t-1][fn]=r[fn]);let o=il(n,qt+e);GP(r[he],r);let s=o[Ao];s!==null&&s.detachView(o[he]),r[vt]=null,r[fn]=null,r[ie]&=-129}return r}function bT(n,e){if(!(e[ie]&256)){let t=e[ot];t.destroyNode&&zl(n,e,t,3,null,null),KP(e)}}function _p(n,e){if(e[ie]&256)return;let t=Te(null);try{e[ie]&=-129,e[ie]|=256,e[tn]&&Hf(e[tn]),ZP(n,e),YP(n,e),e[he].type===1&&e[ot].destroy();let r=e[So];if(r!==null&&Pn(e[vt])){r!==e[vt]&&Pg(r,e);let i=e[Ao];i!==null&&i.detachView(n)}Up(e)}finally{Te(t)}}function YP(n,e){let t=n.cleanup,r=e[mE];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[mE]=null);let i=e[xr];if(i!==null){e[xr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function ZP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Aa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ar(4,a,c);try{c.call(a)}finally{Ar(5,a,c)}}else{Ar(4,i,o);try{o.call(i)}finally{Ar(5,i,o)}}}}}function JP(n,e,t){return XP(n,e.parent,t)}function XP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ht];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===xn.None||o===xn.Emulated)return null}return mn(r,t)}}function wl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ST(n,e,t){n.appendChild(e,t)}function xE(n,e,t,r,i){r!==null?wl(n,e,t,r,i):ST(n,e,t)}function AT(n,e){return n.parentNode(e)}function ek(n,e){return n.nextSibling(e)}function tk(n,e,t){return rk(n,e,t)}function nk(n,e,t){return n.type&40?mn(n,t):null}var rk=nk,RE;function kg(n,e,t,r){let i=JP(n,r,e),o=e[ot],s=r.parent||e[gn],a=tk(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)xE(o,i,t[c],a,!1);else xE(o,i,t,a,!1);RE!==void 0&&RE(o,r,e,t,i)}function wa(n,e){if(e!==null){let t=e.type;if(t&3)return mn(e,n);if(t&4)return Hp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return wa(n,r);{let i=n[e.index];return Pn(i)?Hp(-1,i):Nn(i)}}else{if(t&128)return wa(n,e.next);if(t&32)return Mg(e,n)()||Nn(n[e.index]);{let r=xT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=mi(n[nn]);return wa(i,r)}else return wa(n,e.next)}}}return null}function xT(n,e){if(e!==null){let r=n[nn][gn],i=e.projection;return r.projection[i]}return null}function Hp(n,e){let t=qt+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return wa(r,i)}return e[er]}function Og(n,e,t){n.removeChild(null,e,t)}function RT(n){n.textContent=""}function Fg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&vi(Nn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Fg(n,e,t.child,r,i,o,!1),Io(e,n,i,a,o);else if(c&32){let l=Mg(t,r),h;for(;h=l();)Io(e,n,i,h,o);Io(e,n,i,a,o)}else c&16?ik(n,e,r,t,i,o):Io(e,n,i,a,o);t=s?t.projectionNext:t.next}}function zl(n,e,t,r,i,o){Fg(t,r,n.firstChild,e,i,o,!1)}function ik(n,e,t,r,i,o){let s=t[nn],c=s[gn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Io(e,n,i,h,o)}else{let l=c,h=s[vt];ml(r)&&(l.flags|=128),Fg(n,e,l,h,i,o,!0)}}function ok(n,e,t,r,i){let o=t[er],s=Nn(t);o!==s&&Io(e,n,r,o,i);for(let a=qt;a<t.length;a++){let c=t[a];zl(c[he],c,n,e,r,o)}}function sk(n,e,t){n.setAttribute(e,"style",t)}function MT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function NT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&bp(n,e,r),i!==null&&MT(n,e,i),o!==null&&sk(n,e,o)}var Vo={};function Ee(n=1){PT(Fo(),st(),jl()+n,!1)}function PT(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Xu(e,o,t)}else{let o=n.preOrderHooks;o!==null&&el(e,o,0,t)}yi(t)}function qe(n,e=le.Default){let t=st();if(t===null)return O(n,e);let r=kn();return QD(r,t,en(n),e)}function kT(){let n="invalid";throw new Error(n)}function OT(n,e,t,r,i,o){let s=Te(null);try{let a=null;i&Rr.SignalBased&&(a=e[r][MI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Rr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):wD(e,a,r,o)}finally{Te(s)}}function ak(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)yi(~i);else{let o=i,s=t[++r],a=t[++r];FN(s,o);let c=e[o];a(2,c)}}}finally{yi(-1)}}function Hl(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Ht]=i,p[ie]=r|4|128|8|64,(l!==null||n&&n[ie]&2048)&&(p[ie]|=2048),TD(p),p[vt]=p[ko]=n,p[Xn]=t,p[Mn]=s||n&&n[Mn],p[ot]=a||n&&n[ot],p[bo]=c||n&&n[bo]||null,p[gn]=o,p[Ol]=vP(),p[Rn]=h,p[gD]=l,p[nn]=e.type==2?n[nn]:p,p}function Gl(n,e,t,r,i){let o=n.data[e];if(o===null)o=ck(n,e,t,r,i),ON()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=RN();o.injectorIndex=s===null?-1:s.injectorIndex}return La(o,!0),o}function ck(n,e,t,r,i){let o=xD(),s=RD(),a=s?o:o&&o.parent,c=n.data[e]=pk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function FT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function LT(n,e,t,r,i){let o=jl(),s=r&2;try{yi(-1),s&&e.length>Ot&&PT(n,e,Ot,!1),Ar(s?2:0,i),t(r,i)}finally{yi(o),Ar(s?3:1,i)}}function VT(n,e,t){if(yD(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Te(r)}}}function jT(n,e,t){AD()&&(Ik(n,e,t,mn(t,e)),(t.flags&64)===64&&HT(n,e,t))}function UT(n,e,t=mn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function BT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Lg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Lg(n,e,t,r,i,o,s,a,c,l,h){let p=Ot+r,m=p+i,v=uk(p,m),C=typeof l=="function"?l():l;return v[he]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:C,incompleteFirstPass:!1,ssrId:h}}function uk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Vo);return t}function lk(n,e,t,r){let o=r.get(yT,mT)||t===xn.ShadowDom,s=n.selectRootElement(e,o);return dk(s),s}function dk(n){$T(n)}var $T=()=>null;function hk(n){rT(n)?RT(n):PP(n)}function fk(){$T=hk}function pk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Fa()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ME(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Rr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?NE(r,t,l,a,c):NE(r,t,l,a)}return r}function NE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function gk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,C=m?m.outputs:null;c=ME(0,p.inputs,h,c,v),l=ME(1,p.outputs,h,l,C);let M=c!==null&&s!==null&&!dg(e)?Rk(c,h,s):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function mk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function yk(n,e,t,r,i,o,s,a){let c=mn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Vg(n,t,h,r,i),ka(e)&&vk(t,e.index)):e.type&3?(r=mk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function vk(n,e){let t=Oo(e,n);t[ie]&16||(t[ie]|=64)}function qT(n,e,t,r){if(AD()){let i=r===null?null:{"":-1},o=Dk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&zT(n,e,t,s,i,a),i&&Tk(t,r,i)}t.mergedAttrs=lg(t.mergedAttrs,t.attrs)}function zT(n,e,t,r,i,o){for(let l=0;l<r.length;l++)YN(HD(t,e),n,r[l].type);bk(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=FT(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=lg(t.mergedAttrs,h.hostAttrs),Sk(n,t,e,c,h),Ck(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}gk(n,t,o)}function wk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;_k(s)!=a&&s.push(a),s.push(t,r,o)}}function _k(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Ik(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;ka(t)&&Ak(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||HD(t,e),vi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=xa(e,n,a,t);if(vi(l,e),s!==null&&xk(e,a-i,l,c,t,s),Oa(c)){let h=Oo(t.index,e);h[Xn]=xa(e,n,a,t)}}}function HT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=LN();try{yi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Pp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Ek(c,l)}}finally{yi(-1),Pp(s)}}function Ek(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Dk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(GM(e,s.selectors,!1))if(r||(r=[]),Oa(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Gp(n,e,c)}else r.unshift(s),Gp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Gp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Tk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}}function Ck(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Oa(e)&&(t[""]=n)}}function bk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Sk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Co(i.type,!0)),s=new Aa(o,Oa(i),qe);n.blueprint[r]=s,t[r]=s,wk(n,e,r,FT(n,t,i.hostVars,Vo),i)}function Ak(n,e,t){let r=mn(e,n),i=BT(t),o=n[Mn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Wl(n,Hl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function xk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];OT(r,t,c,l,h,p)}}function Rk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function GT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function WT(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];PD(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function Wl(n,e){return n[ba]?n[yE][fn]=e:n[ba]=e,n[yE]=e,e}function Wp(n,e,t){PD(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function Mk(n,e){let t=n[bo],r=t?t.get(tr,null):null;r&&r.handleError(e)}function Vg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];OT(h,l,r,a,c,i)}}function KT(n,e,t){let r=_N(e,n);HP(n[ot],r,t)}function Nk(n,e){let t=Oo(e,n),r=t[he];Pk(r,t);let i=t[Ht];i!==null&&t[Rn]===null&&(t[Rn]=Sg(i,t[bo])),jg(r,t,t[Xn])}function Pk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function jg(n,e,t){gg(e);try{let r=n.viewQuery;r!==null&&Wp(1,r,t);let i=n.template;i!==null&&LT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ao]?.finishViewCreation(n),n.staticContentQueries&&WT(n,e),n.staticViewQueries&&Wp(2,n.viewQuery,t);let o=n.components;o!==null&&kk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,mg()}}function kk(n,e){for(let t=0;t<e.length;t++)Nk(n,e[t])}function Ok(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[ie]&4096?4096:16,c=Hl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[So]=l;let h=n[Ao];return h!==null&&(c[Ao]=h.createEmbeddedView(o)),jg(o,c,t),c}finally{Te(i)}}function PE(n,e){return!e||e.firstChild===null||ml(n)}function Fk(n,e,t,r=!0){let i=e[he];if(QP(i,e,n,t),r){let s=Hp(t,n),a=e[ot],c=AT(a,n[er]);c!==null&&WP(i,n[gn],a,e,c,s)}let o=e[Rn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function _l(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Nn(o)),Pn(o)&&Lk(o,r);let s=t.type;if(s&8)_l(n,e,t.child,r);else if(s&32){let a=Mg(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=xT(e,t);if(Array.isArray(a))r.push(...a);else{let c=mi(e[nn]);_l(c[he],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Lk(n,e){for(let t=qt;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&_l(r[he],r,i,e)}n[er]!==n[Ht]&&e.push(n[er])}var QT=[];function Vk(n){return n[tn]??jk(n)}function jk(n){let e=QT.pop()??Object.create(Bk);return e.lView=n,e}function Uk(n){n.lView[tn]!==n&&(n.lView=null,QT.push(n))}var Bk=xe(V({},$f),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Vl(n.lView)},consumerOnSignalRead(){this.lView[tn]=this}});function $k(n){let e=n[tn]??Object.create(qk);return e.lView=n,e}var qk=xe(V({},$f),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=mi(n.lView);for(;e&&!YT(e[he]);)e=mi(e);e&&CD(e)},consumerOnSignalRead(){this.lView[tn]=this}});function YT(n){return n.type!==2}var zk=100;function ZT(n,e=!0,t=0){let r=n[Mn],i=r.rendererFactory,o=!1;o||i.begin?.();try{Hk(n,t)}catch(s){throw e&&Mk(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function Hk(n,e){let t=MD();try{wE(!0),Kp(n,e);let r=0;for(;Ll(n);){if(r===zk)throw new J(103,!1);r++,Kp(n,1)}}finally{wE(t)}}function Gk(n,e,t,r){let i=e[ie];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Mn].inlineEffectRunner?.flush(),gg(e);let a=!0,c=null,l=null;o||(YT(n)?(l=Vk(e),c=qf(l)):NI()===null?(a=!1,l=$k(e),c=qf(l)):e[tn]&&(Hf(e[tn]),e[tn]=null));try{TD(e),PN(n.bindingStartIndex),t!==null&&LT(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Xu(e,v,null)}else{let v=n.preOrderHooks;v!==null&&el(e,v,0,null),gp(e,0)}if(s||Wk(e),JT(e,0),n.contentQueries!==null&&WT(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Xu(e,v)}else{let v=n.contentHooks;v!==null&&el(e,v,1),gp(e,1)}ak(n,e);let p=n.components;p!==null&&e0(e,p,0);let m=n.viewQuery;if(m!==null&&Wp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Xu(e,v)}else{let v=n.viewHooks;v!==null&&el(e,v,2),gp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[pp]){for(let v of e[pp])v();e[pp]=null}o||(e[ie]&=-73)}catch(h){throw o||Vl(e),h}finally{l!==null&&(PI(l,c),a&&Uk(l)),mg()}}function JT(n,e){for(let t=oT(n);t!==null;t=sT(t))for(let r=qt;r<t.length;r++){let i=t[r];XT(i,e)}}function Wk(n){for(let e=oT(n);e!==null;e=sT(e)){if(!(e[ie]&cl.HasTransplantedViews))continue;let t=e[al];for(let r=0;r<t.length;r++){let i=t[r];CD(i)}}}function Kk(n,e,t){let r=Oo(e,n);XT(r,t)}function XT(n,e){pg(n)&&Kp(n,e)}function Kp(n,e){let r=n[he],i=n[ie],o=n[tn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&zf(o)),s||=!1,o&&(o.dirty=!1),n[ie]&=-9217,s)Gk(r,n,r.template,n[Xn]);else if(i&8192){JT(n,1);let a=r.components;a!==null&&e0(n,a,1)}}function e0(n,e,t){for(let r=0;r<e.length;r++)Kk(n,e[r],t)}function t0(n,e){let t=MD()?64:1088;for(n[Mn].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=mi(n);if(ul(n)&&!r)return n;n=r}return null}var wi=class{get rootNodes(){let e=this._lView,t=e[he];return _l(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xn]}set context(e){this._lView[Xn]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(Pn(e)){let t=e[sl],r=t?t.indexOf(this):-1;r>-1&&(zp(e,r),il(t,r))}this._attachedToViewContainer=!1}bT(this._lView[he],this._lView)}onDestroy(e){bD(this._lView,e)}markForCheck(){t0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){Np(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,ZT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ul(this._lView),t=this._lView[So];t!==null&&!e&&Pg(t,this._lView),TT(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let t=ul(this._lView),r=this._lView[So];r!==null&&!t&&CT(r,this._lView),Np(this._lView)}},Kl=(()=>{class n{static{this.__NG_ELEMENT_ID__=Zk}}return n})(),Qk=Kl,Yk=class extends Qk{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Ok(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new wi(i)}};function Zk(){return Jk(kn(),st())}function Jk(n,e){return n.type&4?new Yk(e,n,Ul(n,e)):null}var Xk=new RegExp(`^(\\d+)*(${lT}|${uT})*(.*)`);function e1(n){let e=n.match(Xk),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,l,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(l,p)}return[s,...a]}function t1(n){return!n.prev&&n.parent?.type===8}function Ip(n){return n.index-Ot}function n1(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Ql(n,e,t,r){let i=Ip(r),o=n1(n,i);if(o===void 0){let s=n.data[bP];if(s?.[i])o=i1(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(t1(r)){let l=Ip(r.parent);o=qp(n,l)}else{let l=mn(c,t);if(a)o=l.firstChild;else{let h=Ip(c),p=qp(n,h);if(c.type===2&&p){let v=Ag(n,h)+1;o=Yl(v,p)}else o=l.nextSibling}}}}return o}function Yl(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function r1(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case $p.FirstChild:t=t.firstChild;break;case $p.NextSibling:t=t.nextSibling;break}}return t}function i1(n,e){let[t,...r]=e1(n),i;if(t===uT)i=e[nn][Ht];else if(t===lT)i=qP(e[nn][Ht]);else{let o=Number(t);i=Nn(e[o+Ot])}return r1(i,r)}var o1=!1;function s1(n){o1=n}function a1(n){let e=n[Rn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[ot];for(let o of r.values())c1(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function c1(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Ot);i&&Og(n,i,!1)}}function n0(n){let e=n[Sa]??[],r=n[vt][ot];for(let i of e)u1(i,r);n[Sa]=hn}function u1(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[yl];for(;t<i;){let o=r.nextSibling;Og(e,r,!1),r=o,t++}}}function r0(n){n0(n);let e=n[Ht];An(e)&&Il(e);for(let t=qt;t<n.length;t++)Il(n[t])}function Il(n){a1(n);let e=n[he];for(let t=Ot;t<e.bindingStartIndex;t++)if(Pn(n[t])){let r=n[t];r0(r)}else An(n[t])&&Il(n[t])}function l1(n){let e=n._views;for(let t of e){let r=MP(t);r!==null&&r[Ht]!==null&&(An(r)?Il(r):r0(r))}}function d1(n,e){let t=[];for(let r of e)for(let i=0;i<(r[dT]??1);i++){let o={data:r,firstChild:null};r[yl]>0&&(o.firstChild=n,n=Yl(r[yl],n)),t.push(o)}return[n,t]}var i0=()=>null;function h1(n,e){let t=n[Sa];return!e||t===null||t.length===0?null:t[0].data[CP]===e?t.shift():(n0(n),null)}function f1(){i0=h1}function kE(n,e){return i0(n,e)}var xo=class{},Ug=new H("",{providedIn:"root",factory:()=>!1});var o0=new H(""),s0=new H(""),Qp=class{},El=class{};function p1(n){let e=Error(`No component factory found for ${kt(n)}.`);return e[g1]=n,e}var g1="ngComponent";var Yp=class{resolveComponentFactory(e){throw p1(e)}},Ro=class{static{this.NULL=new Yp}},Mo=class{};var m1=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>null})}}return n})();function Zp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=sE(i,a);else if(o==2){let c=a,l=e[++s];r=sE(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Dl=class extends Ro{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Mr(e);return new No(t,this.ngModule)}};function OE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Rr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Rr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function y1(n){let e=n.toLowerCase();return e==="svg"?vN:e==="math"?wN:null}var No=class extends El{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=OE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return OE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Te(null);try{i=i||this.ngModule;let s=i instanceof zt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new kp(e,s):e,c=a.get(Mo,null);if(c===null)throw new J(407,!1);let l=a.get(m1,null),h=a.get(xo,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",C=r?lk(m,r,this.componentDef.encapsulation,a):Ng(m,v,y1(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let N=null;C!==null&&(N=Sg(C,a,!0));let j=Lg(0,null,null,1,0,null,null,null,null,null,null),z=Hl(null,j,null,M,null,null,p,m,a,null,N);gg(z);let L,Y,ne=null;try{let te=this.componentDef,I,y=null;te.findHostDirectiveDefs?(I=[],y=new Map,te.findHostDirectiveDefs(te,I,y),I.push(te)):I=[te];let _=v1(z,C);ne=w1(_,C,te,I,z,p,m),Y=DD(j,Ot),C&&E1(m,te,C,r),t!==void 0&&D1(Y,this.ngContentSelectors,t),L=I1(ne,te,I,y,z,[T1]),jg(j,z,null)}catch(te){throw ne!==null&&Up(ne),Up(z),te}finally{mg()}return new Jp(this.componentType,L,Ul(Y,z),z,Y)}finally{Te(o)}}},Jp=class extends Qp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new wi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Vg(o[he],o,i,e,t),this.previousInputValues.set(e,t);let s=Oo(this._tNode.index,o);t0(s,1)}}get injector(){return new pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function v1(n,e){let t=n[he],r=Ot;return n[r]=e,Gl(t,r,2,"#host",null)}function w1(n,e,t,r,i,o,s){let a=i[he];_1(r,n,e,s);let c=null;e!==null&&(c=Sg(e,i[bo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Hl(i,BT(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&Gp(a,n,r.length-1),Wl(i,p),i[n.index]=p}function _1(n,e,t,r){for(let i of n)e.mergedAttrs=lg(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Zp(e,e.mergedAttrs,!0),t!==null&&NT(r,t,e))}function I1(n,e,t,r,i,o){let s=kn(),a=i[he],c=mn(s,i);zT(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=xa(i,a,p,s);vi(m,i)}HT(a,i,s),c&&vi(c,i);let l=xa(i,a,s.directiveStart+s.componentOffset,s);if(n[Xn]=i[Xn]=l,o!==null)for(let h of o)h(l,e);return VT(a,s,i),l}function E1(n,e,t,r){if(r)bp(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=ZM(e.selectors[0]);i&&bp(n,t,i),o&&o.length>0&&MT(n,t,o.join(" "))}}function D1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function T1(){let n=kn();vg(st()[he],n)}var jo=(()=>{class n{static{this.__NG_ELEMENT_ID__=C1}}return n})();function C1(){let n=kn();return S1(n,st())}var b1=jo,a0=class extends b1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ul(this._hostTNode,this._hostLView)}get injector(){return new pi(this._hostTNode,this._hostLView)}get parentInjector(){let e=wg(this._hostTNode,this._hostLView);if($D(e)){let t=hl(e,this._hostLView),r=dl(e),i=t[he].data[r+8];return new pi(i,t)}else return new pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=FE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-qt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=kE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,PE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!pN(e),a;if(s)a=t;else{let C=t||{};a=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}let c=s?e:new No(Mr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let M=(s?l:this.parentInjector).get(zt,null);M&&(o=M)}let h=Mr(c.componentType??{}),p=kE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,o);return this.insertImpl(v.hostView,a,PE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(IN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[vt],l=new a0(c,c[gn],c[vt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Fk(s,i,o,r),e.attachToViewContainerRef(),eD(Ep(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=FE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=zp(this._lContainer,t);r&&(il(Ep(this._lContainer),t),bT(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=zp(this._lContainer,t);return r&&il(Ep(this._lContainer),t)!=null?new wi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function FE(n){return n[sl]}function Ep(n){return n[sl]||(n[sl]=[])}function S1(n,e){let t,r=e[n.index];return Pn(r)?t=r:(t=GT(r,e,null,n),e[n.index]=t,Wl(e,t)),c0(t,e,n,r),new a0(t,n,e)}function A1(n,e){let t=n[ot],r=t.createComment(""),i=mn(e,n),o=AT(t,i);return wl(t,o,r,ek(t,i),!1),r}var c0=u0,Bg=()=>!1;function x1(n,e,t){return Bg(n,e,t)}function u0(n,e,t,r){if(n[er])return;let i;t.type&8?i=Nn(r):i=A1(e,t),n[er]=i}function R1(n,e,t){if(n[er]&&n[Sa])return!0;let r=t[Rn],i=e.index-Ot;if(!r||mP(e)||ja(r,i))return!1;let s=qp(r,i),a=r.data[bg]?.[i],[c,l]=d1(s,a);return n[er]=c,n[Sa]=l,!0}function M1(n,e,t,r){Bg(n,t,e)||u0(n,e,t,r)}function N1(){c0=M1,Bg=R1}var LE=new Set;function Uo(n){LE.has(n)||(LE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function P1(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(L1))}return o}return Tl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>V1(o));e.push(c)}),O1(),Promise.all(e).then(()=>{})}var Tl=new Map,k1=new Set;function O1(){let n=Tl;return Tl=new Map,n}function F1(){return Tl.size===0}function L1(n){return typeof n=="string"?n:n.text()}function V1(n){k1.delete(n)}var Nr=class{},Ra=class{};var Cl=class extends Nr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dl(this);let o=cD(e);this._bootstrapComponents=IT(o.bootstrap),this._r3Injector=JD(e,t,[{provide:Nr,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver},...r],kt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bl=class extends Ra{constructor(e){super(),this.moduleType=e}create(e){return new Cl(this.moduleType,e,[])}};function j1(n,e,t){return new Cl(n,e,t,!1)}var Xp=class extends Nr{constructor(e){super(),this.componentFactoryResolver=new Dl(this),this.instance=null;let t=new Ca([...e.providers,{provide:Nr,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],e.parent||fg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Zl(n,e,t=null){return new Xp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function l0(n){return B1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function U1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function B1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Sl(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function $1(n,e,t,r){let i=Sl(n,e,t);return Sl(n,e+1,r)||i}function Ua(n){return(n.flags&32)===32}function q1(n,e,t,r,i,o,s,a,c){let l=e.consts,h=Gl(e,n,4,s||null,a||null);qT(e,t,h,ll(l,c)),vg(e,h);let p=h.tView=Lg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function z1(n,e,t,r,i,o,s,a,c,l){let h=t+Ot,p=e.firstCreatePass?q1(h,e,n,r,i,o,s,a,c):e.data[h];La(p,!1);let m=d0(e,n,p,t);yg()&&kg(e,n,m,p),vi(m,n);let v=GT(m,n,m,p);return n[h]=v,Wl(n,v),x1(v,p,n),vD(p)&&jT(e,n,p),c!=null&&UT(n,p,l),p}function Ft(n,e,t,r,i,o,s,a){let c=st(),l=Fo(),h=ll(l.consts,o);return z1(c,l,n,e,t,r,i,h,s,a),Ft}var d0=h0;function h0(n,e,t,r){return kr(!0),e[ot].createComment("")}function H1(n,e,t,r){let i=e[Rn],o=!i||Fa()||Ua(t)||ja(i,r);if(kr(o),o)return h0(n,e,t,r);let s=i.data[TP]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=Ql(i,n,e,t);ql(i,r,a);let c=Ag(i,r);return Yl(c,a)}function G1(){d0=H1}var Eo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Eo||{}),f0=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),eg=class n{constructor(){this.ngZone=F(ge),this.scheduler=F(xo),this.errorHandler=F(tr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Eo.EarlyRead,Eo.Write,Eo.MixedReadWrite,Eo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}},tg=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function $g(n,e){!e?.injector&&hN($g);let t=e?.injector??F(Gt);return va(t)?(Uo("NgAfterNextRender"),K1(n,t,e,!0)):Q1}function W1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function K1(n,e,t,r){let i=e.get(f0);i.impl??=e.get(eg);let o=t?.phase??Eo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Ig):null,a=new tg(i.impl,W1(n,o),r,s);return i.impl.register(a),a}var Q1={destroy(){}};function Y1(n,e,t,r){return Sl(n,ND(),t)?e+Ea(t)+r:Vo}function Z1(n,e,t,r,i,o){let s=NN(),a=$1(n,s,t,i);return kN(2),a?e+Ea(t)+r+Ea(i)+o:Vo}function At(n,e,t){let r=st(),i=ND();if(Sl(r,i,e)){let o=Fo(),s=UN();yk(o,s,r,n,e,r[ot],t,!1)}return At}function VE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Vg(n,t,o[s],s,r)}function J1(n,e,t,r,i,o){let s=e.consts,a=ll(s,i),c=Gl(e,n,2,r,a);return qT(e,t,c,ll(s,o)),c.attrs!==null&&Zp(c,c.attrs,!1),c.mergedAttrs!==null&&Zp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function X(n,e,t,r){let i=st(),o=Fo(),s=Ot+n,a=i[ot],c=o.firstCreatePass?J1(s,o,i,e,t,r):o.data[s],l=p0(o,i,c,a,e,n);i[s]=l;let h=vD(c);return La(c,!0),NT(a,l,c),!Ua(c)&&yg()&&kg(o,i,l,c),TN()===0&&vi(l,i),CN(),h&&(jT(o,i,c),VT(o,c,i)),r!==null&&UT(i,c),X}function Q(){let n=kn();RD()?MN():(n=n.parent,La(n,!1));let e=n;SN(e)&&xN(),bN();let t=Fo();return t.firstCreatePass&&(vg(t,n),yD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&zN(e)&&VE(t,e,st(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&HN(e)&&VE(t,e,st(),e.stylesWithoutHost,!1),Q}function Wt(n,e,t,r){return X(n,e,t,r),Q(),Wt}var p0=(n,e,t,r,i,o)=>(kr(!0),Ng(r,i,jD()));function X1(n,e,t,r,i,o){let s=e[Rn],a=!s||Fa()||Ua(t)||ja(s,o);if(kr(a),a)return Ng(r,i,jD());let c=Ql(s,n,e,t);return gT(s,o)&&ql(s,o,c.nextSibling),s&&(nT(t)||rT(c))&&ka(t)&&(AN(t),RT(c)),c}function eO(){p0=X1}var tO=(n,e,t,r)=>(kr(!0),DT(e[ot],""));function nO(n,e,t,r){let i,o=e[Rn],s=!o||Fa()||ja(o,r)||Ua(t);if(kr(s),s)return DT(e[ot],"");let a=Ql(o,n,e,t),c=kP(o,r);return ql(o,r,a),i=Yl(c,a),i}function rO(){tO=nO}var Al="en-US";var iO=Al;function oO(n){typeof n=="string"&&(iO=n.toLowerCase().replace(/_/g,"-"))}function Jl(n=1){return jN(n)}function oe(n,e=""){let t=st(),r=Fo(),i=n+Ot,o=r.firstCreatePass?Gl(r,i,1,e,null):r.data[i],s=g0(r,t,o,e,n);t[i]=s,yg()&&kg(r,t,s,o),La(o,!1)}var g0=(n,e,t,r,i)=>(kr(!0),ET(e[ot],r));function sO(n,e,t,r,i){let o=e[Rn],s=!o||Fa()||Ua(t)||ja(o,i);return kr(s),s?ET(e[ot],r):Ql(o,n,e,t)}function aO(){g0=sO}function Ne(n){return m0("",n,""),Ne}function m0(n,e,t){let r=st(),i=Y1(r,n,e,t);return i!==Vo&&KT(r,jl(),i),m0}function qg(n,e,t,r,i){let o=st(),s=Z1(o,n,e,t,r,i);return s!==Vo&&KT(o,jl(),s),qg}var cO=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=dD(!1,t.type),i=r.length>0?Zl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(O(zt))})}}return n})();function y0(n){Uo("NgStandalone"),n.getStandaloneInjector=e=>e.get(cO).getOrCreateStandaloneInjector(n)}var Qu=null;function uO(n){Qu!==null&&(n.defaultEncapsulation!==Qu.defaultEncapsulation||n.preserveWhitespaces!==Qu.preserveWhitespaces)||(Qu=n)}var Pr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},v0=new Pr("18.2.13");var Xl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var zg=new H(""),Ba=new H(""),ed=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Hg||(lO(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(ge),O(td),O(Ba))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),td=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Hg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function lO(n){Hg=n}var Hg;function $a(n){return!!n&&typeof n.then=="function"}function w0(n){return!!n&&typeof n.subscribe=="function"}var nd=new H(""),_0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=F(nd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if($a(o))t.push(o);else if(w0(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bo=new H("");function dO(){kI(()=>{throw new J(600,!1)})}function hO(n){return n.isBoundToModule}var fO=10;function pO(n,e,t){try{let r=t();return $a(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function I0(n,e){return Array.isArray(e)?e.reduce(I0,n):V(V({},n),e)}var yn=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(hP),this.afterRenderManager=F(f0),this.zonelessEnabled=F(Ug),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new He,this.afterTick=new He,this.componentTypes=[],this.components=[],this.isStable=F(_i).hasPendingTasks.pipe(W(t=>!t)),this._injector=F(zt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof El;if(!this._injector.get(_0).done){let m=!i&&aD(t),v=!1;throw new J(405,v)}let s;i?s=t:s=this._injector.get(Ro).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=hO(s)?void 0:this._injector.get(Nr),c=r||s.selector,l=s.create(Gt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(zg,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),tl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new J(101,!1);let t=Te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Mo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<fO;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)gO(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ll(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;tl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Bo,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>tl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new J(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Yu;function rd(n){Yu??=new WeakMap;let e=Yu.get(n);if(e)return e;let t=n.isStable.pipe($t(r=>r)).toPromise().then(()=>{});return Yu.set(n,t),n.onDestroy(()=>Yu?.delete(n)),t}function gO(n,e,t,r){if(!t&&!Ll(n))return;ZT(n,e,t&&!r?0:1)}var ng=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},id=(()=>{class n{compileModuleSync(t){return new bl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=cD(t),o=IT(i.declarations).reduce((s,a)=>{let c=Mr(a);return c&&s.push(new No(c)),s},[]);return new ng(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mO=new H("");function yO(n,e,t){let r=new bl(t);return Promise.resolve(r)}function jE(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var vO=(()=>{class n{constructor(){this.zone=F(ge),this.changeDetectionScheduler=F(xo),this.applicationRef=F(yn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wO({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ge(xe(V({},E0()),{scheduleInRootZone:t})),[{provide:ge,useFactory:n},{provide:gi,multi:!0,useFactory:()=>{let r=F(vO,{optional:!0});return()=>r.initialize()}},{provide:gi,multi:!0,useFactory:()=>{let r=F(_O);return()=>{r.initialize()}}},e===!0?{provide:o0,useValue:!0}:[],{provide:s0,useValue:t??XD}]}function E0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var _O=(()=>{class n{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=F(ge),this.pendingTasks=F(_i)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var IO=(()=>{class n{constructor(){this.appRef=F(yn),this.taskService=F(_i),this.ngZone=F(ge),this.zonelessEnabled=F(Ug),this.disableScheduling=F(o0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $e,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(pl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(s0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?CE:eT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(pl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,CE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function EO(){return typeof $localize<"u"&&$localize.locale||Al}var Gg=new H("",{providedIn:"root",factory:()=>F(Gg,le.Optional|le.SkipSelf)||EO()});var xl=new H("");function Zu(n){return!n.moduleRef}function DO(n){let e=Zu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ge);return t.run(()=>{Zu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(tr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Zu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(xl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(xl);s.add(o),n.moduleRef.onDestroy(()=>{tl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return pO(r,t,()=>{let o=e.get(_0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Gg,Al);if(oO(s||Al),Zu(n)){let a=e.get(yn);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return TO(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function TO(n,e){let t=n.injector.get(yn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new J(-403,!1);e.push(n)}var D0=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>dP(r?.ngZone,xe(V({},E0({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[wO({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:xo,useExisting:IO}],c=j1(t.moduleType,this.injector,a);return DO({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=I0({},r);return yO(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new J(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(xl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Gt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ia=null,T0=new H("");function CO(n){if(Ia&&!Ia.get(T0,!1))throw new J(400,!1);dO(),Ia=n;let e=n.get(D0);return AO(n),e}function Wg(n,e,t=[]){let r=`Platform: ${e}`,i=new H(r);return(o=[])=>{let s=C0();if(!s||s.injector.get(T0,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):CO(bO(a,r))}return SO(i)}}function bO(n=[],e){return Gt.create({name:e,providers:[{provide:kl,useValue:"platform"},{provide:xl,useValue:new Set([()=>Ia=null])},...n]})}function SO(n){let e=C0();if(!e)throw new J(401,!1);return e}function C0(){return Ia?.get(D0)??null}function AO(n){n.get(Tg,null)?.forEach(t=>t())}function Kg(){return!1}var qa=(()=>{class n{static{this.__NG_ELEMENT_ID__=xO}}return n})();function xO(n){return RO(kn(),st(),(n&16)===16)}function RO(n,e,t){if(ka(n)&&!t){let r=Oo(n.index,e);return new wi(r,r)}else if(n.type&175){let r=e[nn];return new wi(r,e)}return null}var rg=class{constructor(){}supports(e){return l0(e)}create(e){return new ig(e)}},MO=(n,e)=>e,ig=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||MO}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<UE(r,i,o)?t:r,a=UE(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,C=v+m;h<=C&&C<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!l0(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,U1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new og(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Rl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Rl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},og=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},sg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Rl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new sg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function UE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function BE(){return new Qg([new rg])}var Qg=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:BE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||BE()),deps:[[n,new cg,new Po]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new J(901,!1)}}return n})();var b0=Wg(null,"core",[]),S0=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(yn))}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({})}}return n})();var $E=!1;function NO(){$E||($E=!0,RP(),eO(),aO(),rO(),G1(),N1(),f1(),fk())}function PO(n,e){return rd(n)}function A0(){return Pa([{provide:Ku,useFactory:()=>{let n=!0;return va()&&(n=!!F(Lo,{optional:!0})?.get(fT,null)),n&&Uo("NgHydration"),n}},{provide:gi,useValue:()=>{s1(!1),va()&&F(Ku)&&(kO(),NO())},multi:!0},{provide:yT,useFactory:()=>va()&&F(Ku)},{provide:Bo,useFactory:()=>{if(va()&&F(Ku)){let n=F(yn),e=F(Gt);return()=>{PO(n,e).then(()=>{l1(n)})}}return()=>{}},multi:!0}])}function kO(){let n=$l(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===AP){e=t;break}if(!e)throw new J(-507,!1)}function x0(n){let e=Mr(n);if(!e)return null;let t=new No(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var O0=null;function Ei(){return O0}function F0(n){O0??=n}var od=class{};var xt=new H(""),em=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(VO),providedIn:"platform"})}}return n})(),L0=new H(""),VO=(()=>{class n extends em{constructor(){super(),this._doc=F(xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ei().getBaseHref(this._doc)}onPopState(t){let r=Ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function tm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function R0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function rr(n){return n&&n[0]!=="?"?"?"+n:n}var Di=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(nm),providedIn:"root"})}}return n})(),V0=new H(""),nm=(()=>{class n extends Di{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return tm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+rr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+rr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+rr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(em),O(V0,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),j0=(()=>{class n extends Di{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=tm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+rr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+rr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(em),O(V0,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),$o=(()=>{class n{constructor(t){this._subject=new Ct,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=BO(R0(M0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rr(r))}normalize(t){return n.stripTrailingSlash(UO(this._basePath,M0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=rr}static{this.joinWithSlash=tm}static{this.stripTrailingSlash=R0}static{this.\u0275fac=function(r){return new(r||n)(O(Di))}}static{this.\u0275prov=q({token:n,factory:()=>jO(),providedIn:"root"})}}return n})();function jO(){return new $o(O(Di))}function UO(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function M0(n){return n.replace(/\/index.html$/,"")}function BO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function rm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Yg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},On=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Yg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),N0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);N0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(qe(jo),qe(Kl),qe(Qg))}}static{this.\u0275dir=Na({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function N0(n,e){n.context.$implicit=e.item}var ad=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Zg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){P0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){P0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(qe(jo),qe(Kl))}}static{this.\u0275dir=Na({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Zg=class{constructor(){this.$implicit=null,this.ngIf=null}};function P0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${kt(e)}'.`)}var U0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({})}}return n})(),im="browser",$O="server";function qO(n){return n===im}function ir(n){return n===$O}var B0=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>qO(F(dt))?new Jg(F(xt),window):new Xg})}}return n})(),Jg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=zO(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function zO(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Xg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},sd=class{};var ud=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Q0=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Q0||{}),om=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new ud,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var ld=class n extends om{constructor(e={}){super(e),this.type=Q0.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var HO=new H("");var GO=new H(""),$0="b",q0="h",z0="s",H0="st",G0="u",W0="rt",cd=new H(""),WO=["GET","HEAD"];function KO(n,e){let v=F(cd),{isCacheActive:t}=v,r=II(v,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!WO.includes(o)||!r.includeRequestsWithAuthHeaders&&QO(n)||r.filter?.(n)===!1)return e(n);let s=F(Lo),a=F(GO,{optional:!0}),c=ir(F(dt));if(a&&!c)throw new J(2803,!1);let l=c&&a?XO(n.url,a):n.url,h=ZO(n,l),p=s.get(h,null),m=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(m=i.includeHeaders),p){let{[$0]:C,[W0]:M,[q0]:N,[z0]:j,[H0]:z,[G0]:L}=p,Y=C;switch(M){case"arraybuffer":Y=new TextEncoder().encode(C).buffer;break;case"blob":Y=new Blob([C]);break}let ne=new ud(N);return Z(new ld({body:Y,headers:ne,status:j,statusText:z,url:L}))}return e(n).pipe(Ge(C=>{C instanceof ld&&c&&s.set(h,{[$0]:C.body,[q0]:YO(C.headers,m),[z0]:C.status,[H0]:C.statusText,[G0]:l,[W0]:n.responseType})}))}function QO(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function YO(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function K0(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function ZO(n,e){let{params:t,method:r,responseType:i}=n,o=K0(t),s=n.serializeBody();s instanceof URLSearchParams?s=K0(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=JO(a);return c}function JO(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Y0(n){return[{provide:cd,useFactory:()=>(Uo("NgHttpTransferCache"),V({isCacheActive:!0},n))},{provide:HO,useValue:KO,multi:!0,deps:[Lo,cd]},{provide:Bo,multi:!0,useFactory:()=>{let e=F(yn),t=F(cd);return()=>{rd(e).then(()=>{t.isCacheActive=!1})}}}]}function XO(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var cm=class extends od{constructor(){super(...arguments),this.supportsDOMEvents=!0}},um=class n extends cm{static makeCurrent(){F0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=eF();return t==null?null:tF(t)}resetBaseElement(){za=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rm(document.cookie,e)}},za=null;function eF(){return za=za||document.querySelector("base"),za?za.getAttribute("href"):null}function tF(n){return new URL(n,document.baseURI).pathname}var lm=class{addToWindow(e){nr.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new J(5103,!1);return o},nr.getAllAngularTestabilities=()=>e.getAllTestabilities(),nr.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=nr.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};nr.frameworkStabilizers||(nr.frameworkStabilizers=[]),nr.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ei().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},nF=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),dm=new H(""),eC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(dm),O(ge))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),dd=class{constructor(e){this._doc=e}},sm="ng-app-id",tC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ir(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${sm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(sm),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(sm,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(xt),O(Va),O(Cg,8),O(dt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),am={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pm=/%COMP%/g,nC="%COMP%",rF=`_nghost-${nC}`,iF=`_ngcontent-${nC}`,oF=!0,sF=new H("",{providedIn:"root",factory:()=>oF});function aF(n){return iF.replace(pm,n)}function cF(n){return rF.replace(pm,n)}function rC(n,e){return e.map(t=>t.replace(pm,n))}var Z0=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ir(a),this.defaultRenderer=new Ha(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===xn.ShadowDom&&(r=xe(V({},r),{encapsulation:xn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof hd?i.applyToHost(t):i instanceof Ga&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case xn.Emulated:o=new hd(c,l,r,this.appId,h,s,a,p);break;case xn.ShadowDom:return new hm(c,l,t,r,s,a,this.nonce,p);default:o=new Ga(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(eC),O(tC),O(Va),O(sF),O(xt),O(dt),O(ge),O(Cg))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Ha=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(am[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(J0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(J0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=am[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=am[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ii.DashCase|Ii.Important)?e.style.setProperty(t,r,i&Ii.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ii.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ei().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function J0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hm=class extends Ha{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=rC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ga=class extends Ha{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?rC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},hd=class extends Ga{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=aF(l),this.hostAttr=cF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},uF=(()=>{class n extends dd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(xt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),X0=["alt","control","meta","shift"],lF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},hF=(()=>{class n extends dd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ei().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),X0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=lF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),X0.forEach(s=>{if(s!==i){let a=dF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(xt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function fF(){um.makeCurrent()}function pF(){return new tr}function gF(){return cT(document),document}var mF=[{provide:dt,useValue:im},{provide:Tg,useValue:fF,multi:!0},{provide:xt,useFactory:gF,deps:[]}],iC=Wg(b0,"browser",mF),yF=new H(""),vF=[{provide:Ba,useClass:lm,deps:[]},{provide:zg,useClass:ed,deps:[ge,td,Ba]},{provide:ed,useClass:ed,deps:[ge,td,Ba]}],wF=[{provide:kl,useValue:"root"},{provide:tr,useFactory:pF,deps:[]},{provide:dm,useClass:uF,multi:!0,deps:[xt,ge,dt]},{provide:dm,useClass:hF,multi:!0,deps:[xt]},Z0,tC,eC,{provide:Mo,useExisting:Z0},{provide:sd,useClass:nF,deps:[]},[]],oC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Va,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(yF,12))}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({providers:[...wF,...vF],imports:[U0,S0]})}}return n})();var sC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(xt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fm=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(fm||{});function aC(...n){let e=[],t=new Set,r=t.has(fm.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return Pa([[],A0(),t.has(fm.NoHttpTransferCache)||r?[]:Y0({}),e])}var ce="primary",ac=Symbol("RouteTitle"),wm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qo(n){return new wm(n)}function _F(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function IF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fn(n[t],e[t]))return!1;return!0}function Fn(n,e){let t=n?_m(n):void 0,r=e?_m(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!wC(n[i],e[i]))return!1;return!0}function _m(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function _C(n){return n.length>0?n[n.length-1]:null}function Fr(n){return sp(n)?n:$a(n)?Ie(Promise.resolve(n)):Z(n)}var EF={exact:EC,subset:DC},IC={exact:DF,subset:TF,ignored:()=>!0};function uC(n,e,t){return EF[t.paths](n.root,e.root,t.matrixParams)&&IC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function DF(n,e){return Fn(n,e)}function EC(n,e,t){if(!Ci(n.segments,e.segments)||!gd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!EC(n.children[r],e.children[r],t))return!1;return!0}function TF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wC(n[t],e[t]))}function DC(n,e,t){return TC(n,e,e.segments,t)}function TC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ci(i,t)||e.hasChildren()||!gd(i,t,r))}else if(n.segments.length===t.length){if(!Ci(n.segments,t)||!gd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!DC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ci(n.segments,i)||!gd(n.segments,i,r)||!n.children[ce]?!1:TC(n.children[ce],e,o,r)}}function gd(n,e,t){return e.every((r,i)=>IC[t](n[i].parameters,r.parameters))}var sr=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){return SF.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return md(this)}},Ti=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qo(this.parameters),this._parameterMap}toString(){return bC(this)}};function CF(n,e){return Ci(n,e)&&n.every((t,r)=>Fn(t.parameters,e[r].parameters))}function Ci(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function bF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var cc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new Yo,providedIn:"root"})}}return n})(),Yo=class{parse(e){let t=new Em(e);return new sr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Wa(e.root,!0)}`,r=RF(e.queryParams),i=typeof e.fragment=="string"?`#${AF(e.fragment)}`:"";return`${t}${r}${i}`}},SF=new Yo;function md(n){return n.segments.map(e=>bC(e)).join("/")}function Wa(n,e){if(!n.hasChildren())return md(n);if(e){let t=n.children[ce]?Wa(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ce&&r.push(`${i}:${Wa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=bF(n,(r,i)=>i===ce?[Wa(n.children[ce],!1)]:[`${i}:${Wa(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${md(n)}/${t[0]}`:`${md(n)}/(${t.join("//")})`}}function CC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fd(n){return CC(n).replace(/%3B/gi,";")}function AF(n){return encodeURI(n)}function Im(n){return CC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yd(n){return decodeURIComponent(n)}function lC(n){return yd(n.replace(/\+/g,"%20"))}function bC(n){return`${Im(n.path)}${xF(n.parameters)}`}function xF(n){return Object.entries(n).map(([e,t])=>`;${Im(e)}=${Im(t)}`).join("")}function RF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${fd(t)}=${fd(i)}`).join("&"):`${fd(t)}=${fd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var MF=/^[^\/()?;#]+/;function gm(n){let e=n.match(MF);return e?e[0]:""}var NF=/^[^\/()?;=#]+/;function PF(n){let e=n.match(NF);return e?e[0]:""}var kF=/^[^=?&#]+/;function OF(n){let e=n.match(kF);return e?e[0]:""}var FF=/^[^&#]+/;function LF(n){let e=n.match(FF);return e?e[0]:""}var Em=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new De(e,t)),r}parseSegment(){let e=gm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new Ti(yd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=PF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=gm(this.remaining);i&&(r=i,this.capture(r))}e[yd(t)]=yd(r)}parseQueryParam(e){let t=OF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=LF(this.remaining);s&&(r=s,this.capture(r))}let i=lC(t),o=lC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=gm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ce);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ce]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function SC(n){return n.segments.length>0?new De([],{[ce]:n}):n}function AC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=AC(i);if(r===ce&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return VF(t)}function VF(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new De(n.segments.concat(e.segments),e.children)}return n}function Xa(n){return n instanceof sr}function jF(n,e,t=null,r=null){let i=xC(n);return RC(i,e,t,r)}function xC(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=SC(r);return e??i}function RC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return mm(i,i,i,t,r);let o=UF(e);if(o.toRoot())return mm(i,i,new De([],{}),t,r);let s=BF(o,i,n),a=s.processChildren?Ya(s.segmentGroup,s.index,o.commands):NC(s.segmentGroup,s.index,o.commands);return mm(i,s.segmentGroup,a,t,r)}function vd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ec(n){return typeof n=="object"&&n!=null&&n.outlets}function mm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=MC(n,e,t);let a=SC(AC(s));return new sr(a,o,i)}function MC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=MC(o,e,t)}),new De(n.segments,r)}var wd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vd(r[0]))throw new J(4003,!1);let i=r.find(ec);if(i&&i!==_C(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function UF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new wd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new wd(t,e,r)}var Go=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function BF(n,e,t){if(n.isAbsolute)return new Go(e,!0,0);if(!t)return new Go(e,!1,NaN);if(t.parent===null)return new Go(t,!0,0);let r=vd(n.commands[0])?0:1,i=t.segments.length-1+r;return $F(t,i,n.numberOfDoubleDots)}function $F(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new Go(r,!1,i-o)}function qF(n){return ec(n[0])?n[0].outlets:{[ce]:n}}function NC(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return Ya(n,e,t);let r=zF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[ce]=new De(n.segments.slice(r.pathIndex),n.children),Ya(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?Dm(n,e,t):r.match?Ya(n,0,i):Dm(n,e,t)}function Ya(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=qF(t),i={};if(Object.keys(r).some(o=>o!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let o=Ya(n.children[ce],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=NC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function zF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ec(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!hC(c,l,s))return o;r+=2}else{if(!hC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Dm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ec(o)){let c=HF(o.outlets);return new De(r,c)}if(i===0&&vd(t[0])){let c=n.segments[e];r.push(new Ti(c.path,dC(t[0]))),i++;continue}let s=ec(o)?o.outlets[ce]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&vd(a)?(r.push(new Ti(s,dC(a))),i+=2):(r.push(new Ti(s,{})),i++)}return new De(r,{})}function HF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Dm(new De([],{}),0,r))}),e}function dC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function hC(n,e,t){return n==t.path&&Fn(e,t.parameters)}var Za="imperative",ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ct||{}),rn=class{constructor(e,t){this.id=e,this.url=t}},Zo=class extends rn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ar=class extends rn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qt||{}),_d=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(_d||{}),or=class extends rn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Or=class extends rn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationSkipped}},tc=class extends rn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Id=class extends rn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tm=class extends rn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cm=class extends rn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},bm=class extends rn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sm=class extends rn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Am=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xm=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Rm=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mm=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nm=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pm=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ed=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ct.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},nc=class{},Jo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function GF(n,e){return n.providers&&!n._injector&&(n._injector=Zl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function vn(n){return n.outlet||ce}function WF(n,e){let t=n.filter(r=>vn(r)===e);return t.push(...n.filter(r=>vn(r)!==e)),t}function uc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var km=class{get injector(){return uc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new lc(this.rootInjector),this.attachRef=null}},lc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new km(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Om(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Om(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Fm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Fm(e,this._root).map(t=>t.value)}};function Om(n,e){if(n===e.value)return e;for(let t of e.children){let r=Om(n,t);if(r)return r}return null}function Fm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Fm(n,t);if(r.length)return r.unshift(e),r}return[]}var Kt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ho(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Td=class extends Dd{constructor(e,t){super(e),this.snapshot=t,Hm(this,e)}toString(){return this.snapshot.toString()}};function PC(n){let e=KF(n),t=new lt([new Ti("",{})]),r=new lt({}),i=new lt({}),o=new lt({}),s=new lt(""),a=new Xo(t,r,o,s,i,ce,n,e.root);return a.snapshot=e.root,new Td(new Kt(a,[]),e)}function KF(n){let e={},t={},r={},i="",o=new Wo([],e,r,i,t,ce,n,null,{});return new bd("",new Kt(o,[]))}var Xo=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(W(l=>l[ac]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(e=>Qo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(e=>Qo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Cd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&OC(i)&&(r.resolve[ac]=i.title),r}var Wo=class{get title(){return this.data?.[ac]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},bd=class extends Dd{constructor(e,t){super(t),this.url=e,Hm(this,t)}toString(){return kC(this._root)}};function Hm(n,e){e.value._routerState=n,e.children.forEach(t=>Hm(n,t))}function kC(n){let e=n.children.length>0?` { ${n.children.map(kC).join(", ")} } `:"";return`${n.value}${e}`}function ym(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Fn(e.params,t.params)||n.paramsSubject.next(t.params),IF(e.url,t.url)||n.urlSubject.next(t.url),Fn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Lm(n,e){let t=Fn(n.params,e.params)&&CF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Lm(n.parent,e.parent))}function OC(n){return typeof n.title=="string"||n.title===null}var QF=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new Ct,this.deactivateEvents=new Ct,this.attachEvents=new Ct,this.detachEvents=new Ct,this.parentContexts=F(lc),this.location=F(jo),this.changeDetector=F(qa),this.inputBinder=F(Md,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Vm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Na({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fl]})}}return n})(),Vm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xo?this.route:e===lc?this.childContexts:this.parent.get(e,t)}},Md=new H(""),fC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ma([r.queryParams,r.params,r.data]).pipe(Ve(([o,s,a],c)=>(a=V(V(V({},o),s),a),c===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=x0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function YF(n,e,t){let r=rc(n,e._root,t?t._root:void 0);return new Td(r,e)}function rc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=ZF(n,e,t);return new Kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>rc(n,a)),s}}let r=JF(e.value),i=e.children.map(o=>rc(n,o));return new Kt(r,i)}}function ZF(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rc(n,r,i);return rc(n,r)})}function JF(n){return new Xo(new lt(n.url),new lt(n.params),new lt(n.queryParams),new lt(n.fragment),new lt(n.data),n.outlet,n.component,n)}var ic=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},FC="ngNavigationCancelingError";function Sd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Xa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=LC(!1,Qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function LC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[FC]=!0,t.cancellationCode=e,t}function XF(n){return VC(n)&&Xa(n.url)}function VC(n){return!!n&&n[FC]}var eL=(n,e,t,r)=>W(i=>(new jm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),jm=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ym(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ho(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ho(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ho(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ho(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Pm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Mm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(ym(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ym(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ad=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ko=class{constructor(e,t){this.component=e,this.route=t}};function tL(n,e,t){let r=n._root,i=e?e._root:null;return Ka(r,i,t,[r.value])}function nL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ts(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!WE(n)?n:e.get(n):r}function Ka(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ho(e);return n.children.forEach(s=>{rL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ja(a,t.getContext(s),i)),i}function rL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=iL(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ad(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ka(n,e,a?a.children:null,r,i):Ka(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ko(a.outlet.component,s))}else s&&Ja(e,a,i),i.canActivateChecks.push(new Ad(r)),o.component?Ka(n,null,a?a.children:null,r,i):Ka(n,null,t,r,i);return i}function iL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ci(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ci(n.url,e.url)||!Fn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lm(n,e)||!Fn(n.queryParams,e.queryParams);case"paramsChange":default:return!Lm(n,e)}}function Ja(n,e,t){let r=Ho(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ja(s,e.children.getContext(o),t):Ja(s,null,t):Ja(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ko(e.outlet.component,i)):t.canDeactivateChecks.push(new Ko(null,i)):t.canDeactivateChecks.push(new Ko(null,i))}function dc(n){return typeof n=="function"}function oL(n){return typeof n=="boolean"}function sL(n){return n&&dc(n.canLoad)}function aL(n){return n&&dc(n.canActivate)}function cL(n){return n&&dc(n.canActivateChild)}function uL(n){return n&&dc(n.canDeactivate)}function lL(n){return n&&dc(n.canMatch)}function jC(n){return n instanceof Zn||n?.name==="EmptyError"}var pd=Symbol("INITIAL_VALUE");function es(){return Ve(n=>ma(n.map(e=>e.pipe(Jn(1),fi(pd)))).pipe(W(e=>{for(let t of e)if(t!==!0){if(t===pd)return pd;if(t===!1||dL(t))return t}return!0}),it(e=>e!==pd),Jn(1)))}function dL(n){return Xa(n)||n instanceof ic}function hL(n,e){return Ze(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(xe(V({},t),{guardsResult:!0})):fL(s,r,i,n).pipe(Ze(a=>a&&oL(a)?pL(r,o,n,e):Z(a)),W(a=>xe(V({},t),{guardsResult:a})))})}function fL(n,e,t,r){return Ie(n).pipe(Ze(i=>wL(i.component,i.route,t,e,r)),$t(i=>i!==!0,!0))}function pL(n,e,t,r){return Ie(e).pipe(Cr(i=>mo(mL(i.route.parent,r),gL(i.route,r),vL(n,i.path,t),yL(n,i.route,t))),$t(i=>i!==!0,!0))}function gL(n,e){return n!==null&&e&&e(new Nm(n)),Z(!0)}function mL(n,e){return n!==null&&e&&e(new Rm(n)),Z(!0)}function yL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>qu(()=>{let s=uc(e)??t,a=ts(o,s),c=aL(a)?a.canActivate(e,n):pn(s,()=>a(e,n));return Fr(c).pipe($t())}));return Z(i).pipe(es())}function vL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>nL(s)).filter(s=>s!==null).map(s=>qu(()=>{let a=s.guards.map(c=>{let l=uc(s.node)??t,h=ts(c,l),p=cL(h)?h.canActivateChild(r,n):pn(l,()=>h(r,n));return Fr(p).pipe($t())});return Z(a).pipe(es())}));return Z(o).pipe(es())}function wL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let c=uc(e)??i,l=ts(a,c),h=uL(l)?l.canDeactivate(n,e,t,r):pn(c,()=>l(n,e,t,r));return Fr(h).pipe($t())});return Z(s).pipe(es())}function _L(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=ts(s,n),c=sL(a)?a.canLoad(e,t):pn(n,()=>a(e,t));return Fr(c)});return Z(o).pipe(es(),UC(r))}function UC(n){return ep(Ge(e=>{if(typeof e!="boolean")throw Sd(n,e)}),W(e=>e===!0))}function IL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=ts(s,n),c=lL(a)?a.canMatch(e,t):pn(n,()=>a(e,t));return Fr(c)});return Z(o).pipe(es(),UC(r))}var oc=class{constructor(e){this.segmentGroup=e||null}},sc=class extends Error{constructor(e){super(),this.urlTree=e}};function zo(n){return go(new oc(n))}function EL(n){return go(new J(4e3,!1))}function DL(n){return go(LC(!1,Qt.GuardRejected))}var Um=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ce])return EL(`${e.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:C,title:M}=i,N=pn(o,()=>a({params:v,data:C,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(N instanceof sr)throw new sc(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new sc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new sr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Bm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TL(n,e,t,r,i){let o=BC(n,e,t);return o.matched?(r=GF(e,r),IL(r,e,t,i).pipe(W(s=>s===!0?o:V({},Bm)))):Z(o)}function BC(n,e,t){if(e.path==="**")return CL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},Bm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||_F)(t,n,e);if(!i)return V({},Bm);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function CL(n){return{matched:!0,parameters:n.length>0?_C(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function pC(n,e,t,r){return t.length>0&&AL(n,t,r)?{segmentGroup:new De(e,SL(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&xL(n,t,r)?{segmentGroup:new De(n.segments,bL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function bL(n,e,t,r){let i={};for(let o of t)if(Nd(n,e,o)&&!r[vn(o)]){let s=new De([],{});i[vn(o)]=s}return V(V({},r),i)}function SL(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&vn(r)!==ce){let i=new De([],{});t[vn(r)]=i}return t}function AL(n,e,t){return t.some(r=>Nd(n,e,r)&&vn(r)!==ce)}function xL(n,e,t){return t.some(r=>Nd(n,e,r))}function Nd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function RL(n,e,t){return e.length===0&&!n.children[t]}var $m=class{};function ML(n,e,t,r,i,o,s="emptyOnly"){return new qm(n,e,t,r,i,s,o).recognize()}var NL=31,qm=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Um(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=pC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(({children:t,rootSnapshot:r})=>{let i=new Kt(r,t),o=new bd("",i),s=jF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Wo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(W(r=>({children:r,rootSnapshot:t})),Tr(r=>{if(r instanceof sc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof oc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(W(s=>s instanceof Kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ie(o).pipe(Cr(s=>{let a=r.children[s],c=WF(t,s);return this.processSegmentGroup(e,c,a,s,i)}),hi((s,a)=>(s.push(...a),s)),br(null),lp(),Ze(s=>{if(s===null)return zo(r);let a=$C(s);return PL(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return Ie(t).pipe(Cr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Tr(l=>{if(l instanceof oc)return Z(null);throw l}))),$t(c=>!!c),Tr(c=>{if(jC(c))return RL(r,i,o)?Z(new $m):zo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return vn(r)!==s&&(s===ce||!Nd(i,o,r))?zo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):zo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=BC(t,i,o);if(!c)return zo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>NL&&(this.allowRedirects=!1));let v=new Wo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,gC(i),vn(i),i.component??i._loadedComponent??null,i,mC(i)),C=Cd(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(C.params),v.data=Object.freeze(C.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Ze(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=TL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ve(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ve(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,C=new Wo(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,gC(r),vn(r),r.component??r._loadedComponent??null,r,mC(r)),M=Cd(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(M.params),C.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:j}=pC(t,m,v,l);if(j.length===0&&N.hasChildren())return this.processChildren(h,l,N,C).pipe(W(L=>new Kt(C,L)));if(l.length===0&&j.length===0)return Z(new Kt(C,[]));let z=vn(r)===o;return this.processSegment(h,l,N,j,z?ce:o,!0,C).pipe(W(L=>new Kt(C,L instanceof Kt?[L]:[])))}))):zo(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):_L(e,t,r,this.urlSerializer).pipe(Ze(i=>i?this.configLoader.loadChildren(e,t).pipe(Ge(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):DL(t))):Z({routes:[],injector:e})}};function PL(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function kL(n){let e=n.value.routeConfig;return e&&e.path===""}function $C(n){let e=[],t=new Set;for(let r of n){if(!kL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=$C(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!t.has(r))}function gC(n){return n.data||{}}function mC(n){return n.resolve||{}}function OL(n,e,t,r,i,o){return Ze(s=>ML(n,e,t,r,s.extractedUrl,i,o).pipe(W(({state:a,tree:c})=>xe(V({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function FL(n,e){return Ze(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of qC(c))s.add(l);let a=0;return Ie(s).pipe(Cr(c=>o.has(c)?LL(c,r,n,e):(c.data=Cd(c,c.parent,n).resolve,Z(void 0))),Ge(()=>a++),vo(1),Ze(c=>a===s.size?Z(t):Tt))})}function qC(n){let e=n.children.map(t=>qC(t)).flat();return[n,...e]}function LL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!OC(i)&&(o[ac]=i.title),VL(o,n,e,r).pipe(W(s=>(n._resolvedData=s,n.data=Cd(n,n.parent,t).resolve,null)))}function VL(n,e,t,r){let i=_m(n);if(i.length===0)return Z({});let o={};return Ie(i).pipe(Ze(s=>jL(n[s],e,t,r).pipe($t(),Ge(a=>{if(a instanceof ic)throw Sd(new Yo,a);o[s]=a}))),vo(1),cp(o),Tr(s=>jC(s)?Tt:go(s)))}function jL(n,e,t,r){let i=uc(e)??r,o=ts(n,i),s=o.resolve?o.resolve(e,t):pn(i,()=>o(e,t));return Fr(s)}function vm(n){return Ve(e=>{let t=n(e);return t?Ie(t).pipe(W(()=>e)):Z(e)})}var zC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[ac]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(UL),providedIn:"root"})}}return n})(),UL=(()=>{class n extends zC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(sC))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hc=new H("",{providedIn:"root",factory:()=>({})}),BL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["ng-component"]],standalone:!0,features:[y0],decls:1,vars:0,template:function(r,i){r&1&&Wt(0,"router-outlet")},dependencies:[QF],encapsulation:2})}}return n})();function Gm(n){let e=n.children&&n.children.map(Gm),t=e?xe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=BL),t}var xd=new H(""),Wm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(id)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Fr(t.loadComponent()).pipe(W(HC),Ge(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),yo(()=>{this.componentLoaders.delete(t)})),i=new lo(r,()=>new He).pipe(uo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=$L(r,this.compiler,t,this.onLoadEndListener).pipe(yo(()=>{this.childrenLoaders.delete(r)})),s=new lo(o,()=>new He).pipe(uo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $L(n,e,t,r){return Fr(n.loadChildren()).pipe(W(HC),Ze(i=>i instanceof Ra||Array.isArray(i)?Z(i):Ie(e.compileModuleAsync(i))),W(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(xd,[],{optional:!0,self:!0}).flat()),{routes:s.map(Gm),injector:o}}))}function qL(n){return n&&typeof n=="object"&&"default"in n}function HC(n){return qL(n)?n.default:n}var Km=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(zL),providedIn:"root"})}}return n})(),zL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GC=new H(""),WC=new H("");function HL(n,e,t){let r=n.get(WC),i=n.get(xt);return n.get(ge).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),GL(n))),{onViewTransitionCreated:c}=r;return c&&pn(n,()=>c({transition:a,from:e,to:t})),s})}function GL(n){return new Promise(e=>{$g({read:()=>setTimeout(e)},{injector:n})})}var WL=new H(""),Qm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new He,this.transitionAbortSubject=new He,this.configLoader=F(Wm),this.environmentInjector=F(zt),this.urlSerializer=F(cc),this.rootContexts=F(lc),this.location=F($o),this.inputBindingEnabled=F(Md,{optional:!0})!==null,this.titleStrategy=F(zC),this.options=F(hc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(Km),this.createViewTransition=F(GC,{optional:!0}),this.navigationErrorHandler=F(WL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Am(i)),r=i=>this.events.next(new xm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(xe(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new lt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Za,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(it(o=>o.id!==0),W(o=>xe(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ve(o=>{let s=!1,a=!1;return Z(o).pipe(Ve(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Qt.SupersededByNewNavigation),Tt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?xe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Or(c.id,this.urlSerializer.serialize(c.rawUrl),p,_d.IgnoredSameUrlNavigation)),c.resolve(!1),Tt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z(c).pipe(Ve(p=>{let m=this.transitions?.getValue();return this.events.next(new Zo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Tt:Promise.resolve(p)}),OL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=xe(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Id(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:C,extras:M}=c,N=new Zo(p,this.urlSerializer.serialize(m),v,C);this.events.next(N);let j=PC(this.rootComponentType).snapshot;return this.currentTransition=o=xe(V({},c),{targetSnapshot:j,urlAfterRedirects:m,extras:xe(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Z(o)}else{let p="";return this.events.next(new Or(c.id,this.urlSerializer.serialize(c.extractedUrl),p,_d.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Tt}}),Ge(c=>{let l=new Tm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),W(c=>(this.currentTransition=o=xe(V({},c),{guards:tL(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),hL(this.environmentInjector,c=>this.events.next(c)),Ge(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Sd(this.urlSerializer,c.guardsResult);let l=new Cm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),it(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Qt.GuardRejected),!1)),vm(c=>{if(c.guards.canActivateChecks.length)return Z(c).pipe(Ge(l=>{let h=new bm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ve(l=>{let h=!1;return Z(l).pipe(FL(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Qt.NoDataFromResolver)}}))}),Ge(l=>{let h=new Sm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),vm(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ge(m=>{h.component=m}),W(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ma(l(c.targetSnapshot.root)).pipe(br(null),Jn(1))}),vm(()=>this.afterPreactivation()),Ve(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ie(h).pipe(W(()=>o)):Z(o)}),W(c=>{let l=YF(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=xe(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ge(()=>{this.events.next(new nc)}),eL(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Jn(1),Ge({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ar(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),hp(this.transitionAbortSubject.pipe(Ge(c=>{throw c}))),yo(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tr(c=>{if(a=!0,VC(c))this.events.next(new or(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),XF(c)?this.events.next(new Jo(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new tc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=pn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof ic){let{message:p,cancellationCode:m}=Sd(this.urlSerializer,h);this.events.next(new or(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Jo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Tt}))}))}cancelNavigationTransition(t,r,i){let o=new or(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KL(n){return n!==Za}var QL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(YL),providedIn:"root"})}}return n})(),zm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},YL=(()=>{class n extends zm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_g(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),KC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(ZL),providedIn:"root"})}}return n})(),ZL=(()=>{class n extends KC{constructor(){super(...arguments),this.location=F($o),this.urlSerializer=F(cc),this.options=F(hc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(Km),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new sr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=PC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Zo)this.stateMemento=this.createStateMemento();else if(t instanceof Or)this.rawUrlTree=r.initialUrl;else if(t instanceof Id){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof nc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof or&&(t.code===Qt.GuardRejected||t.code===Qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof tc?this.restoreHistory(r,!0):t instanceof ar&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof sr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=_g(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Qa||{});function QC(n,e){n.events.pipe(it(t=>t instanceof ar||t instanceof or||t instanceof tc||t instanceof Or),W(t=>t instanceof ar||t instanceof Or?Qa.COMPLETE:(t instanceof or?t.code===Qt.Redirect||t.code===Qt.SupersededByNewNavigation:!1)?Qa.REDIRECTING:Qa.FAILED),it(t=>t!==Qa.REDIRECTING),Jn(1)).subscribe(()=>{e()})}function JL(n){throw n}var XL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(Xl),this.stateManager=F(KC),this.options=F(hc,{optional:!0})||{},this.pendingTasks=F(_i),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(Qm),this.urlSerializer=F(cc),this.location=F($o),this.urlHandlingStrategy=F(Km),this._events=new He,this.errorHandler=this.options.errorHandler||JL,this.navigated=!1,this.routeReuseStrategy=F(QL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(xd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(Md,{optional:!0}),this.eventsSubscription=new $e,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof or&&r.code!==Qt.Redirect&&r.code!==Qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ar)this.navigated=!0;else if(r instanceof Jo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||KL(i.source)},s);this.scheduleNavigation(a,Za,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}nV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Za,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Gm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=xC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return RC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Xa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Za,null,r)}navigate(t,r={skipLocationChange:!1}){return tV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},XL):r===!1?i=V({},eV):i=r,Xa(t))return uC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return uC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return QC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new J(4008,!1)}function nV(n){return!(n instanceof nc)&&!(n instanceof Jo)}var Rd=class{};var rV=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(it(t=>t instanceof ar),Cr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Zl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ie(i).pipe(Dr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(Ze(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ie([o,s]).pipe(Dr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(bi),O(id),O(zt),O(Rd),O(Wm))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),YC=new H(""),iV=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ar?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Or&&t.code===_d.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ed&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ed(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){kT()}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function oV(n){return n.routerState.root}function fc(n,e){return{\u0275kind:n,\u0275providers:e}}function sV(){let n=F(Gt);return e=>{let t=n.get(yn);if(e!==t.components[0])return;let r=n.get(bi),i=n.get(ZC);n.get(Ym)===1&&r.initialNavigation(),n.get(JC,null,le.Optional)?.setUpPreloading(),n.get(YC,null,le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ZC=new H("",{factory:()=>new He}),Ym=new H("",{providedIn:"root",factory:()=>1});function aV(){return fc(2,[{provide:Ym,useValue:0},{provide:nd,multi:!0,deps:[Gt],useFactory:e=>{let t=e.get(L0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(bi),o=e.get(ZC);QC(i,()=>{r(!0)}),e.get(Qm).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function cV(){return fc(3,[{provide:nd,multi:!0,useFactory:()=>{let e=F(bi);return()=>{e.setUpLocationChangeListener()}}},{provide:Ym,useValue:2}])}var JC=new H("");function uV(n){return fc(0,[{provide:JC,useExisting:rV},{provide:Rd,useExisting:n}])}function lV(){return fc(8,[fC,{provide:Md,useExisting:fC}])}function dV(n){let e=[{provide:GC,useValue:HL},{provide:WC,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return fc(9,e)}var yC=new H("ROUTER_FORROOT_GUARD"),hV=[$o,{provide:cc,useClass:Yo},bi,lc,{provide:Xo,useFactory:oV,deps:[bi]},Wm,[]],Zm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[hV,[],{provide:xd,multi:!0,useValue:t},{provide:yC,useFactory:mV,deps:[[bi,new Po,new cg]]},{provide:hc,useValue:r||{}},r?.useHash?pV():gV(),fV(),r?.preloadingStrategy?uV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?yV(r):[],r?.bindToComponentInputs?lV().\u0275providers:[],r?.enableViewTransitions?dV().\u0275providers:[],vV()]}}static forChild(t){return{ngModule:n,providers:[{provide:xd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(yC,8))}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({})}}return n})();function fV(){return{provide:YC,useFactory:()=>{let n=F(B0),e=F(ge),t=F(hc),r=F(Qm),i=F(cc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iV(i,r,n,e,t)}}}function pV(){return{provide:Di,useClass:j0}}function gV(){return{provide:Di,useClass:nm}}function mV(n){return"guarded"}function yV(n){return[n.initialNavigation==="disabled"?cV().\u0275providers:[],n.initialNavigation==="enabledBlocking"?aV().\u0275providers:[]]}var vC=new H("");function vV(){return[{provide:vC,useFactory:sV},{provide:Bo,multi:!0,useExisting:vC}]}var wV=[],XC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({imports:[Zm.forRoot(wV),Zm]})}}return n})();var Pd=class{constructor(){this.name="",this.email="",this.location="",this.goalLife="",this.phoneNumber="",this.photoUrl="",this.socialNetwork=""}};var _V="firebase",IV="10.14.1";Er(_V,IV,"app");var pc=new Pr("ANGULARFIRE2_VERSION");var EV=(n,e)=>{let t=e?[e]:RI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Si=class{constructor(){return EV(DV)}},DV="app-check";function Jm(){}var kd=class{zone;delegate;constructor(e,t=ip){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Xm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jm,{},Jm,Jm)),t.pipe(Ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Od=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new kd(Zone.current)),this.insideAngular=t.run(()=>new kd(Zone.current,ga)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(ge))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TV(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Lt(n){return CV(TV())(n)}function CV(n){return function(t){return t=t.lift(new Xm(n.ngZone)),t.pipe(ln(n.outsideAngular),Jt(n.insideAngular))}}var AV=new Map,xV={activated:!1,tokenObservers:[]},RV={initialized:!1,enabled:!1};function wn(n){return AV.get(n)||Object.assign({},xV)}function ob(){return RV}var MV="https://content-firebaseappcheck.googleapis.com/v1";var NV="exchangeDebugToken",tb={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},CG=24*60*60*1e3;var ty=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new Lf,this.pending.promise.catch(t=>{}),yield PV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Lf,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function PV(n){return new Promise(e=>{setTimeout(e,n)})}var kV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Lr=new AI("appCheck","AppCheck",kV);function sb(n){if(!wn(n).activated)throw Lr.create("use-before-activation",{appName:n.name})}function ab(r,i){return R(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw Lr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw Lr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(v){throw Lr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Lr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function cb(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${MV}/projects/${t}/apps/${r}:${NV}?key=${i}`,body:{debug_token:e}}}var OV="firebase-app-check-database",FV=1,ny="firebase-app-check-store";var Fd=null;function LV(){return Fd||(Fd=new Promise((n,e)=>{try{let t=indexedDB.open(OV,FV);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Lr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ny,{keyPath:"compositeKey"})}}}catch(t){e(Lr.create("storage-open",{originalErrorMessage:t?.message}))}}),Fd)}function VV(n,e){return jV(UV(n),e)}function jV(n,e){return R(this,null,function*(){let r=(yield LV()).transaction(ny,"readwrite"),o=r.objectStore(ny).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Lr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function UV(n){return`${n.options.appId}-${n.name}`}var ry=new Du("@firebase/app-check");function ey(n,e){return Eu()?VV(n,e).catch(t=>{ry.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ub(){return ob().enabled}function lb(){return R(this,null,function*(){let n=ob();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var BV={error:"UNKNOWN_ERROR"};function $V(n){return CI.encodeString(JSON.stringify(n),!1)}function iy(n,e=!1){return R(this,null,function*(){let t=n.app;sb(t);let r=wn(t),i=r.token,o;if(i&&!gc(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(gc(c)?i=c:yield ey(t,void 0))}if(!e&&i&&gc(i))return{token:i.token};let s=!1;if(ub()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ab(cb(t,yield lb()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield ey(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield wn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?ry.warn(c.message):ry.error(c),o=c}let a;return i?o?gc(i)?a={token:i.token,internalError:o}:a=rb(o):(a={token:i.token},r.token=i,yield ey(t,i)):a=rb(o),s&&GV(t,a),a})}function qV(n){return R(this,null,function*(){let e=n.app;sb(e);let{provider:t}=wn(e);if(ub()){let r=yield lb(),{token:i}=yield ab(cb(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function zV(n,e,t,r){let{app:i}=n,o=wn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&gc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),nb(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>nb(n))}function db(n,e){let t=wn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function nb(n){let{app:e}=n,t=wn(e),r=t.tokenRefresher;r||(r=HV(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function HV(n){let{app:e}=n;return new ty(()=>R(this,null,function*(){let t=wn(e),r;if(t.token?r=yield iy(n,!0):r=yield iy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=wn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},tb.RETRIAL_MIN_WAIT,tb.RETRIAL_MAX_WAIT)}function GV(n,e){let t=wn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function gc(n){return n.expireTimeMillis-Date.now()>0}function rb(n){return{token:$V(BV),error:n}}var oy=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=wn(this.app);for(let t of e)db(this.app,t.next);return Promise.resolve()}};function WV(n,e){return new oy(n,e)}function KV(n){return{getToken:e=>iy(n,e),getLimitedUseToken:()=>qV(n),addTokenListener:e=>zV(n,"INTERNAL",e),removeTokenListener:e=>db(n.app,e)}}var QV="@firebase/app-check",YV="0.8.8";var ZV="app-check",ib="app-check-internal";function JV(){da(new ci(ZV,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return WV(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ib).initialize()})),da(new ci(ib,n=>{let e=n.getProvider("app-check").getImmediate();return KV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Er(QV,YV)}JV();var XV=["localhost","0.0.0.0","127.0.0.1"],LG=typeof window<"u"&&XV.includes(window.location.hostname);var e2="firebase",t2="10.14.1";Bt.registerVersion(e2,t2,"app-compat");var n2=["ngOnDestroy"],pb=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(n2.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Ld=class{constructor(e){return e}},ns=new H("angularfire2.app.options"),rs=new H("angularfire2.app.name");function mc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Bt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Bt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;r2("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ld(s)}var r2=(n,...e)=>{Kg()&&typeof console<"u"&&console[n](...e)},i2={provide:Ld,useFactory:mc,deps:[ns,ge,[new Po,rs]]},gb=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ns,useValue:t},{provide:rs,useValue:r}]}}constructor(t){Bt.registerVersion("angularfire",pc.full,"core"),Bt.registerVersion("angularfire",pc.full,"app-compat"),Bt.registerVersion("angular",v0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(dt))};static \u0275mod=St({type:n});static \u0275inj=bt({providers:[i2]})}return n})();function Vd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return o2(i,s)||(fb("error",`${e} was already initialized on the ${t} Firebase App with different settings.${s2?" You may need to reload as Firebase is not HMR aware.":""}`),fb("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function o2(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var s2=typeof module<"u"&&!!module.hot,fb=(n,...e)=>{Kg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var sy=new H("angularfire2.auth.use-emulator"),ay=new H("angularfire2.auth.settings"),cy=new H("angularfire2.auth.tenant-id"),uy=new H("angularfire2.auth.langugage-code"),ly=new H("angularfire2.auth.use-device-language"),dy=new H("angularfire.auth.persistence"),hy=(n,e,t,r,i,o,s,a)=>Vd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),mb=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,v){let C=new He,M=Z(void 0).pipe(Jt(s.outsideAngular),Ve(()=>o.runOutsideAngular(()=>import("./chunk-IDFRXQP6.js"))),W(()=>mc(t,o,r)),W(N=>hy(N,o,a,l,h,p,c,m)),Hu({bufferSize:1,refCount:!1}));if(ir(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{M.pipe($t()).subscribe();let N=M.pipe(Ve(L=>L.getRedirectResult().then(Y=>Y,()=>null)),Lt,Hu({bufferSize:1,refCount:!1})),j=M.pipe(Ve(L=>new fe(Y=>({unsubscribe:o.runOutsideAngular(()=>L.onAuthStateChanged(ne=>Y.next(ne),ne=>Y.error(ne),()=>Y.complete()))})))),z=M.pipe(Ve(L=>new fe(Y=>({unsubscribe:o.runOutsideAngular(()=>L.onIdTokenChanged(ne=>Y.next(ne),ne=>Y.error(ne),()=>Y.complete()))}))));this.authState=N.pipe(Gu(j),ln(s.outsideAngular),Jt(s.insideAngular)),this.user=N.pipe(Gu(z),ln(s.outsideAngular),Jt(s.insideAngular)),this.idToken=this.user.pipe(Ve(L=>L?Ie(L.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(Ve(L=>L?Ie(L.getIdTokenResult()):Z(null))),this.credential=ap(N,C,this.authState.pipe(it(L=>!L))).pipe(W(L=>L?.user?L:null),ln(s.outsideAngular),Jt(s.insideAngular))}return pb(this,M,o,{spy:{apply:(N,j,z)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&z.then(L=>C.next(L))}}})}static \u0275fac=function(r){return new(r||n)(O(ns),O(rs,8),O(dt),O(ge),O(Od),O(sy,8),O(ay,8),O(cy,8),O(uy,8),O(ly,8),O(dy,8),O(Si,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vb={};var Vr,fy;(function(){var n;function e(I,y){function _(){}_.prototype=y.prototype,I.D=y.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(E,D,b){for(var w=Array(arguments.length-2),Wn=2;Wn<arguments.length;Wn++)w[Wn-2]=arguments[Wn];return y.prototype[D].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(D=0;16>D;++D)E[D]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=I.g[0],_=I.g[1],D=I.g[2];var b=I.g[3],w=y+(b^_&(D^b))+E[0]+3614090360&4294967295;y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[1]+3905402710&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[2]+606105819&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[3]+3250441966&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(b^_&(D^b))+E[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[5]+1200080426&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[6]+2821735955&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[7]+4249261313&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(b^_&(D^b))+E[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[9]+2336552879&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[10]+4294925233&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[11]+2304563134&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(b^_&(D^b))+E[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[13]+4254626195&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[14]+2792965006&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[15]+1236535329&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(D^b&(_^D))+E[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[6]+3225465664&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[11]+643717713&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[0]+3921069994&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^b&(_^D))+E[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[10]+38016083&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[15]+3634488961&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[4]+3889429448&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^b&(_^D))+E[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[14]+3275163606&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[3]+4107603335&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[8]+1163531501&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^b&(_^D))+E[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[2]+4243563512&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[7]+1735328473&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[12]+2368359562&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(_^D^b)+E[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[8]+2272392833&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[11]+1839030562&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[14]+4259657740&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^b)+E[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[4]+1272893353&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[7]+4139469664&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[10]+3200236656&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^b)+E[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[0]+3936430074&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[3]+3572445317&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[6]+76029189&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^b)+E[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[12]+3873151461&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[15]+530742520&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[2]+3299628645&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(D^(_|~b))+E[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[7]+1126891415&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[14]+2878612391&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[5]+4237533241&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~b))+E[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[3]+2399980690&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[10]+4293915773&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[1]+2240044497&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~b))+E[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[15]+4264355552&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[6]+2734768916&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[13]+1309151649&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~b))+E[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[11]+3174756917&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[2]+718787259&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var _=y-this.blockSize,E=this.B,D=this.h,b=0;b<y;){if(D==0)for(;b<=_;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<y;)if(E[D++]=I.charCodeAt(b++),D==this.blockSize){i(this,E),D=0;break}}else for(;b<y;)if(E[D++]=I[b++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var _=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=_&255,_/=256;for(this.u(I),I=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)I[_++]=this.g[y]>>>E&255;return I};function o(I,y){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=y(I)}function s(I,y){this.h=y;for(var _=[],E=!0,D=I.length-1;0<=D;D--){var b=I[D]|0;E&&b==y||(_[D]=b,E=!1)}this.g=_}var a={};function c(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],_=1,E=0;I>=_;E++)y[E]=I/_|0,_*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var b=Math.min(8,I.length-D),w=parseInt(I.substring(D,D+b),y);8>b?(b=l(Math.pow(y,b)),E=E.j(b).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var p=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var I=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(M(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),_=this,E="";;){var D=Y(_,y).g;_=j(_,D.j(y));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=D,C(_))return b+E;for(;6>b.length;)b="0"+b;E=b+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=j(this,I),M(I)?-1:C(I)?0:1};function N(I){for(var y=I.g.length,_=[],E=0;E<y;E++)_[E]=~I.g[E];return new s(_,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0,D=0;D<=y;D++){var b=E+(this.i(D)&65535)+(I.i(D)&65535),w=(b>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=w>>>16,b&=65535,w&=65535,_[D]=w<<16|b}return new s(_,_[_.length-1]&-2147483648?-1:0)};function j(I,y){return I.add(N(y))}n.j=function(I){if(C(this)||C(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var b=this.i(E)>>>16,w=this.i(E)&65535,Wn=I.i(D)>>>16,Hs=I.i(D)&65535;_[2*E+2*D]+=w*Hs,z(_,2*E+2*D),_[2*E+2*D+1]+=b*Hs,z(_,2*E+2*D+1),_[2*E+2*D+1]+=w*Wn,z(_,2*E+2*D+1),_[2*E+2*D+2]+=b*Wn,z(_,2*E+2*D+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new s(_,0)};function z(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function L(I,y){this.g=I,this.h=y}function Y(I,y){if(C(y))throw Error("division by zero");if(C(I))return new L(p,p);if(M(I))return y=Y(N(I),y),new L(N(y.g),N(y.h));if(M(y))return y=Y(I,N(y)),new L(N(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(I);)_=ne(_),E=ne(E);var D=te(_,1),b=te(E,1);for(E=te(E,2),_=te(_,2);!C(E);){var w=b.add(E);0>=w.l(I)&&(D=D.add(_),b=w),E=te(E,1),_=te(_,1)}return y=j(I,D.j(y)),new L(D,y)}for(D=p;0<=I.l(y);){for(_=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),b=l(_),w=b.j(y);M(w)||0<w.l(I);)_-=E,b=l(_),w=b.j(y);C(b)&&(b=m),D=D.add(b),I=j(I,w)}return new L(D,I)}n.A=function(I){return Y(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&I.i(E);return new s(_,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|I.i(E);return new s(_,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^I.i(E);return new s(_,this.h^I.h)};function ne(I){for(var y=I.g.length+1,_=[],E=0;E<y;E++)_[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(_,I.h)}function te(I,y){var _=y>>5;y%=32;for(var E=I.g.length-_,D=[],b=0;b<E;b++)D[b]=0<y?I.i(b+_)>>>y|I.i(b+_+1)<<32-y:I.i(b+_);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fy=vb.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Vr=vb.Integer=s}).apply(typeof yb<"u"?yb:typeof self<"u"?self:typeof window<"u"?window:{});var jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cr={};var py,c2,is,gy,yc,Ud,my,yy,vy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof jd=="object"&&jd];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var T=u[g];if(!(T in f))break e;f=f[T]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,T={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),u.apply(d,T)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function C(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,T,A){for(var U=Array(arguments.length-2),be=2;be<arguments.length;be++)U[be-2]=arguments[be];return d.prototype[T].apply(g,U)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let T=u.length||0,A=g.length||0;u.length=T+A;for(let U=0;U<A;U++)u[T+U]=g[U]}else u.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(u){return/^[\s\xa0]*$/.test(u)}function L(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var ne=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function te(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)u[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function b(u){a.setTimeout(()=>{throw u},0)}function w(){var u=df;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Wn{constructor(){this.h=this.g=null}add(d,f){let g=Hs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Hs=new j(()=>new fR,u=>u.reset());class fR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Gs,Ws=!1,df=new Wn,__=()=>{let u=a.Promise.resolve(void 0);Gs=()=>{u.then(pR)}};var pR=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){b(f)}var d=Hs;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Ws=!1};function vr(){this.s=this.s,this.C=this.C}vr.prototype.s=!1,vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var gR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Ks(u,d){if(pt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ne){e:{try{Y(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:mR[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ks.aa.h.call(this)}}C(Ks,pt);var mR={2:"touch",3:"pen",4:"mouse"};Ks.prototype.h=function(){Ks.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Qs="closure_listenable_"+(1e6*Math.random()|0),yR=0;function vR(u,d,f,g,T){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++yR,this.da=this.fa=!1}function iu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ou(u){this.src=u,this.g={},this.h=0}ou.prototype.add=function(u,d,f,g,T){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var U=ff(u,d,g,T);return-1<U?(d=u[U],f||(d.fa=!1)):(d=new vR(d,this.src,A,!!g,T),d.fa=f,u.push(d)),d};function hf(u,d){var f=d.type;if(f in u.g){var g=u.g[f],T=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=T)&&Array.prototype.splice.call(g,T,1),A&&(iu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function ff(u,d,f,g){for(var T=0;T<u.length;++T){var A=u[T];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return T}return-1}var pf="closure_lm_"+(1e6*Math.random()|0),gf={};function I_(u,d,f,g,T){if(g&&g.once)return D_(u,d,f,g,T);if(Array.isArray(d)){for(var A=0;A<d.length;A++)I_(u,d[A],f,g,T);return null}return f=wf(f),u&&u[Qs]?u.K(d,f,l(g)?!!g.capture:!!g,T):E_(u,d,f,!1,g,T)}function E_(u,d,f,g,T,A){if(!d)throw Error("Invalid event type");var U=l(T)?!!T.capture:!!T,be=yf(u);if(be||(u[pf]=be=new ou(u)),f=be.add(d,f,g,U,A),f.proxy)return f;if(g=wR(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)gR||(T=U),T===void 0&&(T=!1),u.addEventListener(d.toString(),g,T);else if(u.attachEvent)u.attachEvent(C_(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function wR(){function u(f){return d.call(u.src,u.listener,f)}let d=_R;return u}function D_(u,d,f,g,T){if(Array.isArray(d)){for(var A=0;A<d.length;A++)D_(u,d[A],f,g,T);return null}return f=wf(f),u&&u[Qs]?u.L(d,f,l(g)?!!g.capture:!!g,T):E_(u,d,f,!0,g,T)}function T_(u,d,f,g,T){if(Array.isArray(d))for(var A=0;A<d.length;A++)T_(u,d[A],f,g,T);else g=l(g)?!!g.capture:!!g,f=wf(f),u&&u[Qs]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=ff(A,f,g,T),-1<f&&(iu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=yf(u))&&(d=u.g[d.toString()],u=-1,d&&(u=ff(d,f,g,T)),(f=-1<u?d[u]:null)&&mf(f))}function mf(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Qs])hf(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(C_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=yf(d))?(hf(f,u),f.h==0&&(f.src=null,d[pf]=null)):iu(u)}}}function C_(u){return u in gf?gf[u]:gf[u]="on"+u}function _R(u,d){if(u.da)u=!0;else{d=new Ks(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&mf(u),u=f.call(g,d)}return u}function yf(u){return u=u[pf],u instanceof ou?u:null}var vf="__closure_events_fn_"+(1e9*Math.random()>>>0);function wf(u){return typeof u=="function"?u:(u[vf]||(u[vf]=function(d){return u.handleEvent(d)}),u[vf])}function gt(){vr.call(this),this.i=new ou(this),this.M=this,this.F=null}C(gt,vr),gt.prototype[Qs]=!0,gt.prototype.removeEventListener=function(u,d,f,g){T_(this,u,d,f,g)};function It(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new pt(d,u);else if(d instanceof pt)d.target=d.target||u;else{var T=d;d=new pt(g,u),E(d,T)}if(T=!0,f)for(var A=f.length-1;0<=A;A--){var U=d.g=f[A];T=su(U,g,!0,d)&&T}if(U=d.g=u,T=su(U,g,!0,d)&&T,T=su(U,g,!1,d)&&T,f)for(A=0;A<f.length;A++)U=d.g=f[A],T=su(U,g,!1,d)&&T}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)iu(f[g]);delete u.g[d],u.h--}}this.F=null},gt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},gt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function su(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,A=0;A<d.length;++A){var U=d[A];if(U&&!U.da&&U.capture==f){var be=U.listener,ut=U.ha||U.src;U.fa&&hf(u.i,U),T=be.call(ut,g)!==!1&&T}}return T&&!g.defaultPrevented}function b_(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function S_(u){u.g=b_(()=>{u.g=null,u.i&&(u.i=!1,S_(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class IR extends vr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:S_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ys(u){vr.call(this),this.h=u,this.g={}}C(Ys,vr);var A_=[];function x_(u){te(u.g,function(d,f){this.g.hasOwnProperty(f)&&mf(d)},u),u.g={}}Ys.prototype.N=function(){Ys.aa.N.call(this),x_(this)},Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _f=a.JSON.stringify,ER=a.JSON.parse,DR=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function If(){}If.prototype.h=null;function R_(u){return u.h||(u.h=u.i())}function M_(){}var Zs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ef(){pt.call(this,"d")}C(Ef,pt);function Df(){pt.call(this,"c")}C(Df,pt);var ii={},N_=null;function au(){return N_=N_||new gt}ii.La="serverreachability";function P_(u){pt.call(this,ii.La,u)}C(P_,pt);function Js(u){let d=au();It(d,new P_(d))}ii.STAT_EVENT="statevent";function k_(u,d){pt.call(this,ii.STAT_EVENT,u),this.stat=d}C(k_,pt);function Et(u){let d=au();It(d,new k_(d,u))}ii.Ma="timingevent";function O_(u,d){pt.call(this,ii.Ma,u),this.size=d}C(O_,pt);function Xs(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function ea(){this.g=!0}ea.prototype.xa=function(){this.g=!1};function TR(u,d,f,g,T,A){u.info(function(){if(u.g)if(A)for(var U="",be=A.split("&"),ut=0;ut<be.length;ut++){var _e=be[ut].split("=");if(1<_e.length){var mt=_e[0];_e=_e[1];var yt=mt.split("_");U=2<=yt.length&&yt[1]=="type"?U+(mt+"="+_e+"&"):U+(mt+"=redacted&")}}else U=null;else U=A;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+U})}function CR(u,d,f,g,T,A,U){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+A+" "+U})}function to(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+SR(u,f)+(g?" "+g:"")})}function bR(u,d){u.info(function(){return"TIMEOUT: "+d})}ea.prototype.info=function(){};function SR(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var U=1;U<T.length;U++)T[U]=""}}}}return _f(f)}catch{return d}}var cu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},F_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tf;function uu(){}C(uu,If),uu.prototype.g=function(){return new XMLHttpRequest},uu.prototype.i=function(){return{}},Tf=new uu;function wr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new L_}function L_(){this.i=null,this.g="",this.h=!1}var V_={},Cf={};function bf(u,d,f){u.L=1,u.v=fu(Kn(d)),u.m=f,u.P=!0,j_(u,null)}function j_(u,d){u.F=Date.now(),lu(u),u.A=Kn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),X_(f.i,"t",g),u.C=0,f=u.j.J,u.h=new L_,u.g=yI(u.j,f?d:null,!u.m),0<u.O&&(u.M=new IR(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var T="readystatechange";Array.isArray(T)||(T&&(A_[0]=T.toString()),T=A_);for(var A=0;A<T.length;A++){var U=I_(f,T[A],g||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Js(),TR(u.i,u.u,u.A,u.l,u.R,u.m)}wr.prototype.ca=function(u){u=u.target;let d=this.M;d&&Qn(u)==3?d.j():this.Y(u)},wr.prototype.Y=function(u){try{if(u==this.g)e:{let yt=Qn(this.g);var d=this.g.Ba();let io=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||sI(this.g)))){this.J||yt!=4||d==7||(d==8||0>=io?Js(3):Js(2)),Sf(this);var f=this.g.Z();this.X=f;t:if(U_(this)){var g=sI(this.g);u="";var T=g.length,A=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oi(this),ta(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==T-1)});g.length=0,this.h.g+=u,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,CR(this.i,this.u,this.A,this.l,this.R,yt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ut=this.g;if((be=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(be)){var _e=be;break t}}_e=null}if(f=_e)to(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Af(this,f);else{this.o=!1,this.s=3,Et(12),oi(this),ta(this);break e}}if(this.P){f=!0;let cn;for(;!this.J&&this.C<U.length;)if(cn=AR(this,U),cn==Cf){yt==4&&(this.s=4,Et(14),f=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==V_){this.s=4,Et(15),to(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else to(this.i,this.l,cn,null),Af(this,cn);if(U_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||U.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)to(this.i,this.l,U,"[Invalid Chunked Response]"),oi(this),ta(this);else if(0<U.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),kf(mt),mt.M=!0,Et(11))}}else to(this.i,this.l,U,null),Af(this,U);yt==4&&oi(this),this.o&&!this.J&&(yt==4?fI(this.j,this):(this.o=!1,lu(this)))}else HR(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),oi(this),ta(this)}}}catch{}finally{}};function U_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function AR(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Cf:(f=Number(d.substring(f,g)),isNaN(f)?V_:(g+=1,g+f>d.length?Cf:(d=d.slice(g,g+f),u.C=g+f,d)))}wr.prototype.cancel=function(){this.J=!0,oi(this)};function lu(u){u.S=Date.now()+u.I,B_(u,u.I)}function B_(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Xs(m(u.ba,u),d)}function Sf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}wr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(bR(this.i,this.A),this.L!=2&&(Js(),Et(17)),oi(this),this.s=2,ta(this)):B_(this,this.S-u)};function ta(u){u.j.G==0||u.J||fI(u.j,u)}function oi(u){Sf(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,x_(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Af(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||xf(f.h,u))){if(!u.K&&xf(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)vu(f),mu(f);else break e;Pf(f),Et(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Xs(m(f.Za,f),6e3));if(1>=z_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ai(f,11)}else if((u.K||f.g==u)&&vu(f),!z(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let _e=T[d];if(f.T=_e[0],_e=_e[1],f.G==2)if(_e[0]=="c"){f.K=_e[1],f.ia=_e[2];let mt=_e[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));let yt=_e[4];yt!=null&&(f.Aa=yt,f.j.info("SVER="+f.Aa));let io=_e[5];io!=null&&typeof io=="number"&&0<io&&(g=1.5*io,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let cn=u.g;if(cn){let _u=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_u){var A=g.h;A.g||_u.indexOf("spdy")==-1&&_u.indexOf("quic")==-1&&_u.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Rf(A,A.h),A.h=null))}if(g.D){let Of=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Of&&(g.ya=Of,Me(g.I,g.D,Of))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var U=u;if(g.qa=mI(g,g.J?g.ia:null,g.W),U.K){H_(g.h,U);var be=U,ut=g.L;ut&&(be.I=ut),be.B&&(Sf(be),lu(be)),g.g=U}else dI(g);0<f.i.length&&yu(f)}else _e[0]!="stop"&&_e[0]!="close"||ai(f,7);else f.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?ai(f,7):Nf(f):_e[0]!="noop"&&f.l&&f.l.ta(_e),f.v=0)}}Js(4)}catch{}}var xR=class{constructor(u,d){this.g=u,this.map=d}};function $_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function q_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function z_(u){return u.h?1:u.g?u.g.size:0}function xf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Rf(u,d){u.g?u.g.add(d):u.h=d}function H_(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}$_.prototype.cancel=function(){if(this.i=G_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function G_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function RR(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function MR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function W_(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=MR(u),g=RR(u),T=g.length,A=0;A<T;A++)d.call(void 0,g[A],f&&f[A],u)}var K_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NR(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),T=null;if(0<=g){var A=u[f].substring(0,g);T=u[f].substring(g+1)}else A=u[f];d(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function si(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof si){this.h=u.h,du(this,u.j),this.o=u.o,this.g=u.g,hu(this,u.s),this.l=u.l;var d=u.i,f=new ia;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Q_(this,f),this.m=u.m}else u&&(d=String(u).match(K_))?(this.h=!1,du(this,d[1]||"",!0),this.o=na(d[2]||""),this.g=na(d[3]||"",!0),hu(this,d[4]),this.l=na(d[5]||"",!0),Q_(this,d[6]||"",!0),this.m=na(d[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}si.prototype.toString=function(){var u=[],d=this.j;d&&u.push(ra(d,Y_,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(ra(d,Y_,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(ra(f,f.charAt(0)=="/"?OR:kR,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",ra(f,LR)),u.join("")};function Kn(u){return new si(u)}function du(u,d,f){u.j=f?na(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function hu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function Q_(u,d,f){d instanceof ia?(u.i=d,VR(u.i,u.h)):(f||(d=ra(d,FR)),u.i=new ia(d,u.h))}function Me(u,d,f){u.i.set(d,f)}function fu(u){return Me(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function na(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ra(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,PR),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function PR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Y_=/[#\/\?@]/g,kR=/[#\?:]/g,OR=/[#\?]/g,FR=/[#\?@]/g,LR=/#/g;function ia(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function _r(u){u.g||(u.g=new Map,u.h=0,u.i&&NR(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ia.prototype,n.add=function(u,d){_r(this),this.i=null,u=no(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function Z_(u,d){_r(u),d=no(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function J_(u,d){return _r(u),d=no(u,d),u.g.has(d)}n.forEach=function(u,d){_r(this),this.g.forEach(function(f,g){f.forEach(function(T){u.call(d,T,g,this)},this)},this)},n.na=function(){_r(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=u[g];for(let A=0;A<T.length;A++)f.push(d[g])}return f},n.V=function(u){_r(this);let d=[];if(typeof u=="string")J_(this,u)&&(d=d.concat(this.g.get(no(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return _r(this),this.i=null,u=no(this,u),J_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function X_(u,d,f){Z_(u,d),0<f.length&&(u.i=null,u.g.set(no(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var T=A;U[g]!==""&&(T+="="+encodeURIComponent(String(U[g]))),u.push(T)}}return this.i=u.join("&")};function no(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function VR(u,d){d&&!u.j&&(_r(u),u.i=null,u.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(Z_(this,g),X_(this,T,f))},u)),u.j=d}function jR(u,d){let f=new ea;if(a.Image){let g=new Image;g.onload=v(Ir,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(Ir,f,"TestLoadImage: error",!1,d,g),g.onabort=v(Ir,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(Ir,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function UR(u,d){let f=new ea,g=new AbortController,T=setTimeout(()=>{g.abort(),Ir(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(T),A.ok?Ir(f,"TestPingServer: ok",!0,d):Ir(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Ir(f,"TestPingServer: error",!1,d)})}function Ir(u,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function BR(){this.g=new DR}function $R(u,d,f){let g=f||"";try{W_(u,function(T,A){let U=T;l(T)&&(U=_f(T)),d.push(g+A+"="+encodeURIComponent(U))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function oa(u){this.l=u.Ub||null,this.j=u.eb||!1}C(oa,If),oa.prototype.g=function(){return new pu(this.l,this.j)},oa.prototype.i=function(u){return function(){return u}}({});function pu(u,d){gt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(pu,gt),n=pu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,aa(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sa(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function eI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?sa(this):aa(this),this.readyState==3&&eI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,sa(this))},n.Qa=function(u){this.g&&(this.response=u,sa(this))},n.ga=function(){this.g&&sa(this)};function sa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,aa(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function aa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(pu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function tI(u){let d="";return te(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Mf(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=tI(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Me(u,d,f))}function Be(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Be,gt);var qR=/^https?$/i,zR=["POST","PUT"];n=Be.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tf.g(),this.v=this.o?R_(this.o):R_(Tf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){nI(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),T=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zR,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,U]of f)this.g.setRequestHeader(A,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oI(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){nI(this,A)}};function nI(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,rI(u),gu(u)}function rI(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,It(this,"complete"),It(this,"abort"),gu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gu(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?iI(this):this.bb())},n.bb=function(){iI(this)};function iI(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Qn(u)!=4||u.Z()!=2)){if(u.u&&Qn(u)==4)b_(u.Ea,0,u);else if(It(u,"readystatechange"),Qn(u)==4){u.h=!1;try{let U=u.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=U===0){var T=String(u.D).match(K_)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!qR.test(T?T.toLowerCase():"")}f=g}if(f)It(u,"complete"),It(u,"success");else{u.m=6;try{var A=2<Qn(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",rI(u)}}finally{gu(u)}}}}function gu(u,d){if(u.g){oI(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||It(u,"ready");try{f.onreadystatechange=g}catch{}}}function oI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Qn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),ER(d)}};function sI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function HR(u){let d={};u=(u.g&&2<=Qn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(z(u[g]))continue;var f=D(u[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[T]||[];d[T]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ca(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function aI(u){this.Aa=0,this.i=[],this.j=new ea,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ca("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ca("baseRetryDelayMs",5e3,u),this.cb=ca("retryDelaySeedMs",1e4,u),this.Wa=ca("forwardChannelMaxRetries",2,u),this.wa=ca("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new $_(u&&u.concurrentRequestLimit),this.Da=new BR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=aI.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){Et(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=mI(this,null,this.W),yu(this)};function Nf(u){if(cI(u),u.G==3){var d=u.U++,f=Kn(u.I);if(Me(f,"SID",u.K),Me(f,"RID",d),Me(f,"TYPE","terminate"),ua(u,f),d=new wr(u,u.j,d),d.L=2,d.v=fu(Kn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=yI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),lu(d)}gI(u)}function mu(u){u.g&&(kf(u),u.g.cancel(),u.g=null)}function cI(u){mu(u),u.u&&(a.clearTimeout(u.u),u.u=null),vu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function yu(u){if(!q_(u.h)&&!u.s){u.s=!0;var d=u.Ga;Gs||__(),Ws||(Gs(),Ws=!0),df.add(d,u),u.B=0}}function GR(u,d){return z_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Xs(m(u.Ga,u,d),pI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let T=new wr(this,this.j,u),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=lI(this,T,d),f=Kn(this.I),Me(f,"RID",u),Me(f,"CVER",22),this.D&&Me(f,"X-HTTP-Session-Id",this.D),ua(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(tI(A)))+"&"+d:this.m&&Mf(f,this.m,A)),Rf(this.h,T),this.Ua&&Me(f,"TYPE","init"),this.P?(Me(f,"$req",d),Me(f,"SID","null"),T.T=!0,bf(T,f,null)):bf(T,f,d),this.G=2}}else this.G==3&&(u?uI(this,u):this.i.length==0||q_(this.h)||uI(this))};function uI(u,d){var f;d?f=d.l:f=u.U++;let g=Kn(u.I);Me(g,"SID",u.K),Me(g,"RID",f),Me(g,"AID",u.T),ua(u,g),u.m&&u.o&&Mf(g,u.m,u.o),f=new wr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=lI(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Rf(u.h,f),bf(f,g,d)}function ua(u,d){u.H&&te(u.H,function(f,g){Me(d,g,f)}),u.l&&W_({},function(f,g){Me(d,g,f)})}function lI(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var T=u.i;let A=-1;for(;;){let U=["count="+f];A==-1?0<f?(A=T[0].g,U.push("ofs="+A)):A=0:U.push("ofs="+A);let be=!0;for(let ut=0;ut<f;ut++){let _e=T[ut].g,mt=T[ut].map;if(_e-=A,0>_e)A=Math.max(0,T[ut].g-100),be=!1;else try{$R(mt,U,"req"+_e+"_")}catch{g&&g(mt)}}if(be){g=U.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function dI(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Gs||__(),Ws||(Gs(),Ws=!0),df.add(d,u),u.v=0}}function Pf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Xs(m(u.Fa,u),pI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,hI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Xs(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),mu(this),hI(this))};function kf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function hI(u){u.g=new wr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Kn(u.qa);Me(d,"RID","rpc"),Me(d,"SID",u.K),Me(d,"AID",u.T),Me(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Me(d,"TO",u.ja),Me(d,"TYPE","xmlhttp"),ua(u,d),u.m&&u.o&&Mf(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=fu(Kn(d)),f.m=null,f.P=!0,j_(f,u)}n.Za=function(){this.C!=null&&(this.C=null,mu(this),Pf(this),Et(19))};function vu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function fI(u,d){var f=null;if(u.g==d){vu(u),kf(u),u.g=null;var g=2}else if(xf(u.h,d))f=d.D,H_(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=u.B;g=au(),It(g,new O_(g,f)),yu(u)}else dI(u);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&GR(u,d)||g==2&&Pf(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),T){case 1:ai(u,5);break;case 4:ai(u,10);break;case 3:ai(u,6);break;default:ai(u,2)}}}function pI(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ai(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let T=!g;g=new si(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||du(g,"https"),fu(g),T?jR(g.toString(),f):UR(g.toString(),f)}else Et(2);u.G=0,u.l&&u.l.sa(d),gI(u),cI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function gI(u){if(u.G=0,u.ka=[],u.l){let d=G_(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function mI(u,d,f){var g=f instanceof si?Kn(f):new si(f);if(g.g!="")d&&(g.g=d+"."+g.g),hu(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var A=new si(null);g&&du(A,g),d&&(A.g=d),T&&hu(A,T),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Me(g,f,d),Me(g,"VER",u.la),ua(u,g),g}function yI(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Be(new oa({eb:f})):new Be(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vI(){}n=vI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function wu(){}wu.prototype.g=function(u,d){return new Ut(u,d)};function Ut(u,d){gt.call(this),this.g=new aI(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!z(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ro(this)}C(Ut,gt),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Nf(this.g)},Ut.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=_f(u),u=f);d.i.push(new xR(d.Ya++,u)),d.G==3&&yu(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Nf(this.g),delete this.g,Ut.aa.N.call(this)};function wI(u){Ef.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}C(wI,Ef);function _I(){Df.call(this),this.status=1}C(_I,Df);function ro(u){this.g=u}C(ro,vI),ro.prototype.ua=function(){It(this.g,"a")},ro.prototype.ta=function(u){It(this.g,new wI(u))},ro.prototype.sa=function(u){It(this.g,new _I)},ro.prototype.ra=function(){It(this.g,"b")},wu.prototype.createWebChannel=wu.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,vy=cr.createWebChannelTransport=function(){return new wu},yy=cr.getStatEventTarget=function(){return au()},my=cr.Event=ii,Ud=cr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cu.NO_ERROR=0,cu.TIMEOUT=8,cu.HTTP_ERROR=6,yc=cr.ErrorCode=cu,F_.COMPLETE="complete",gy=cr.EventType=F_,M_.EventType=Zs,Zs.OPEN="a",Zs.CLOSE="b",Zs.ERROR="c",Zs.MESSAGE="d",gt.prototype.listen=gt.prototype.K,is=cr.WebChannel=M_,c2=cr.FetchXmlHttpFactory=oa,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,py=cr.XhrIo=Be}).apply(typeof jd<"u"?jd:typeof self<"u"?self:typeof window<"u"?window:{});var wb="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Os="10.14.0";var Hr=new Du("@firebase/firestore");function us(){return Hr.logLevel}function ES(n){Hr.setLogLevel(n)}function k(n,...e){if(Hr.logLevel<=Cn.DEBUG){let t=e.map(Dw);Hr.debug(`Firestore (${Os}): ${n}`,...t)}}function We(n,...e){if(Hr.logLevel<=Cn.ERROR){let t=e.map(Dw);Hr.error(`Firestore (${Os}): ${n}`,...t)}}function _n(n,...e){if(Hr.logLevel<=Cn.WARN){let t=e.map(Dw);Hr.warn(`Firestore (${Os}): ${n}`,...t)}}function Dw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function G(n="Unexpected state"){let e=`FIRESTORE (${Os}) INTERNAL ASSERTION FAILED: `+n;throw We(e),new Error(e)}function K(n,e){n||G()}function DS(n,e){n||G()}function B(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends SI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Yd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ty=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},Cy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},by=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new nt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>R(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Yd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new et(e)}},Sy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ay=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Sy(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},xy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ry=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new xy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function u2(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Zd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=u2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function se(n,e){return n<e?-1:n>e?1:0}function vs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function TS(n){return n+"\0"}var je=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new je(0,0))}static max(){return new n(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Jd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(),r===void 0?r=e.length-t:r>e.length-t&&G(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends Jd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},l2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ke=class n extends Jd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return l2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var ws=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function My(n){return n.fields.find(e=>e.kind===2)}function xi(n){return n.fields.filter(e=>e.kind!==2)}ws.UNKNOWN_ID=-1;var gs=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var xc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,sn.min())}};function CS(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new je(t+1,0):new je(t,r));return new sn(i,$.empty(),e)}function bS(n){return new sn(n.readTime,n.key,-1)}var sn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),$.empty(),-1)}static max(){return new n(ee.max(),$.empty(),-1)}};function Tw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:se(n.largestBatchId,e.largestBatchId))}var SS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ti(n){return R(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==SS)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var eh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new nt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Oi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Cw(r.target.error);this.V.reject(new Oi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Oi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Py(t)}},Gr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(la())===12.2&&We("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Ri(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Eu())return!1;if(n.v())return!0;let e=la(),t=n.S(e),r=0<t&&t<10,i=AS(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Oi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Oi(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=eh.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function AS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Ny=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ri(this.B.delete())}},Oi=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ni(n){return n.name==="IndexedDbTransactionError"}var Py=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ri(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Ri(this.store.add(e))}get(e){return Ri(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Ri(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Ri(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Cw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Ny(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ri(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Cw(r.target.error);t(i)}})}var _b=!1;function Cw(n){let e=Gr.S(la());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _b||(_b=!0,setTimeout(()=>{throw r},0)),r}}return n}var ky=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){ni(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ti(t)}yield this.X(6e4)}))}},Oy=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=bS(o);Tw(s,r)>0&&(r=s)}),new sn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Yt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Yc(n){return n==null}function Rc(n){return n===0&&1/n==-1/0}function xS(n){return typeof n=="number"&&Number.isInteger(n)&&!Rc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Rt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ib(e)),e=d2(n.get(t),e);return Ib(e)}function d2(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function Ib(n){return n+""}function Ln(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),ve.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&G(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:G()}o=s+2}return new ve(r)}var Eb=["userId","batchId"];function Hd(n,e){return[n,Rt(e)]}function RS(n,e,t){return[n,Rt(e),t]}var h2={},f2=["prefixPath","collectionGroup","readTime","documentId"],p2=["prefixPath","collectionGroup","documentId"],g2=["collectionGroup","readTime","prefixPath","documentId"],m2=["canonicalId","targetId"],y2=["targetId","path"],v2=["path","targetId"],w2=["collectionId","parent"],_2=["indexId","uid"],I2=["uid","sequenceNumber"],E2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],D2=["indexId","uid","orderedDocumentKey"],T2=["userId","collectionPath","documentId"],C2=["userId","collectionPath","largestBatchId"],b2=["userId","collectionGroup","largestBatchId"],MS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],S2=[...MS,"documentOverlays"],NS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PS=NS,bw=[...PS,"indexConfiguration","indexState","indexEntries"],A2=bw,x2=[...bw,"globals"];var Mc=class extends Xd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function rt(n,e){let t=B(n);return Gr.F(t._e,e)}function Db(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pe=class n{constructor(e,t){this.comparator=e,this.root=t||jn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ps(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ps(this.root,e,this.comparator,!1)}getReverseIterator(){return new ps(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ps(this.root,e,this.comparator,!0)}},ps=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,t,r,i,o){return this}insert(e,t,r){return new jn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class n{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new th(this.data.getIterator())}getIteratorFrom(e){return new th(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},th=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function os(n){return n.hasNext()?n.getNext():void 0}var Zt=class n{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ae(Ke.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var nh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function OS(){return typeof atob<"u"}var Ye=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ye.EMPTY_BYTE_STRING=new Ye("");var R2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(n){if(K(!!n),typeof n=="string"){let e=0,t=R2.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wr(n){return typeof n=="string"?Ye.fromBase64String(n):Ye.fromUint8Array(n)}function Wh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Sw(n){let e=n.mapValue.fields.__previous_value__;return Wh(e)?Sw(e):e}function Nc(n){let e=dr(n.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}var Fy=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Kr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var qr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gd={nullValue:"NULL_VALUE"};function Fi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wh(n)?4:FS(n)?9007199254740991:Kh(n)?10:11:G()}function $n(n,e){if(n===e)return!0;let t=Fi(n);if(t!==Fi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nc(n).isEqual(Nc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=dr(i.timestampValue),a=dr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Wr(i.bytesValue).isEqual(Wr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?Rc(s)===Rc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return vs(n.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Db(s)!==Db(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!$n(s[c],a[c])))return!1;return!0}(n,e);default:return G()}}function Pc(n,e){return(n.values||[]).find(t=>$n(t,e))!==void 0}function Qr(n,e){if(n===e)return 0;let t=Fi(n),r=Fi(e);if(t!==r)return se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return se(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Oe(o.integerValue||o.doubleValue),c=Oe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Tb(n.timestampValue,e.timestampValue);case 4:return Tb(Nc(n),Nc(e));case 5:return se(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Wr(o),c=Wr(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=se(a[l],c[l]);if(h!==0)return h}return se(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=se(Oe(o.latitude),Oe(s.latitude));return a!==0?a:se(Oe(o.longitude),Oe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Cb(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=se(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:Cb(v,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===qr.mapValue&&s===qr.mapValue)return 0;if(o===qr.mapValue)return 1;if(s===qr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=se(c[p],h[p]);if(m!==0)return m;let v=Qr(a[c[p]],l[h[p]]);if(v!==0)return v}return se(c.length,h.length)}(n.mapValue,e.mapValue);default:throw G()}}function Tb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return se(n,e);let t=dr(n),r=dr(e),i=se(t.seconds,r.seconds);return i!==0?i:se(t.nanos,r.nanos)}function Cb(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Qr(t[i],r[i]);if(o)return o}return se(t.length,r.length)}function _s(n){return Ly(n)}function Ly(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=dr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Wr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Ly(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Ly(t.fields[s])}`;return i+"}"}(n.mapValue):G()}function Li(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vy(n){return!!n&&"integerValue"in n}function kc(n){return!!n&&"arrayValue"in n}function bb(n){return!!n&&"nullValue"in n}function Sb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wd(n){return!!n&&"mapValue"in n}function Kh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Tc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Wi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Tc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var LS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function M2(n){return"nullValue"in n?Gd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Li(Kr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Kh(n)?LS:{mapValue:{}}:G()}function N2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Li(Kr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?LS:"mapValue"in n?Kh(n)?{mapValue:{}}:qr:G()}function Ab(n,e){let t=Qr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xb(n,e){let t=Qr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var _t=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Wd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(t)}setAll(e){let t=Ke.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Tc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Wd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Wd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Tc(this.value))}};function VS(n){let e=[];return Wi(n.fields,(t,r)=>{let i=new Ke([t]);if(Wd(r)){let o=VS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Zt(e)}var tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),_t.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),_t.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),_t.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qn=class{constructor(e,t){this.position=e,this.inclusive=t}};function Rb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Qr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$n(n.position[t],e.position[t]))return!1;return!0}var Vi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function P2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var rh=class{},pe=class n extends rh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new By(e,t,r):t==="array-contains"?new zy(e,r):t==="in"?new ih(e,r):t==="not-in"?new Hy(e,r):t==="array-contains-any"?new Gy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $y(e,r):new qy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Qr(t,this.value)):t!==null&&Fi(this.value)===Fi(t)&&this.matchesComparison(Qr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ce=class n extends rh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Is(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Is(n){return n.op==="and"}function jy(n){return n.op==="or"}function Aw(n){return jS(n)&&Is(n)}function jS(n){for(let e of n.filters)if(e instanceof Ce)return!1;return!0}function Uy(n){if(n instanceof pe)return n.field.canonicalString()+n.op.toString()+_s(n.value);if(Aw(n))return n.filters.map(e=>Uy(e)).join(",");{let e=n.filters.map(t=>Uy(t)).join(",");return`${n.op}(${e})`}}function US(n,e){return n instanceof pe?function(r,i){return i instanceof pe&&r.op===i.op&&r.field.isEqual(i.field)&&$n(r.value,i.value)}(n,e):n instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&US(s,i.filters[a]),!0):!1}(n,e):void G()}function BS(n,e){let t=n.filters.concat(e);return Ce.create(t,n.op)}function $S(n){return n instanceof pe?function(t){return`${t.field.canonicalString()} ${t.op} ${_s(t.value)}`}(n):n instanceof Ce?function(t){return t.op.toString()+" {"+t.getFilters().map($S).join(" ,")+"}"}(n):"Filter"}var By=class extends pe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},$y=class extends pe{constructor(e,t){super(e,"in",t),this.keys=qS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},qy=class extends pe{constructor(e,t){super(e,"not-in",t),this.keys=qS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function qS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var zy=class extends pe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return kc(t)&&Pc(t.arrayValue,this.value)}},ih=class extends pe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Pc(this.value.arrayValue,t)}},Hy=class extends pe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Pc(this.value.arrayValue,t)}},Gy=class extends pe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!kc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pc(this.value.arrayValue,r))}};var Wy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Ky(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Wy(n,e,t,r,i,o,s)}function ji(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Uy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_s(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_s(r)).join(",")),e.ue=t}return e.ue}function Zc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!P2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!US(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mb(n.startAt,e.startAt)&&Mb(n.endAt,e.endAt)}function oh(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function sh(n,e){return n.filters.filter(t=>t instanceof pe&&t.field.isEqual(e))}function Nb(n,e,t){let r=Gd,i=!0;for(let o of sh(n,e)){let s=Gd,a=!0;switch(o.op){case"<":case"<=":s=M2(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Gd}Ab({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Ab({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function Pb(n,e,t){let r=qr,i=!0;for(let o of sh(n,e)){let s=qr,a=!0;switch(o.op){case">=":case">":s=N2(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=qr}xb({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];xb({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var In=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function zS(n,e,t,r,i,o,s,a){return new In(n,e,t,r,i,o,s,a)}function Fs(n){return new In(n)}function kb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function xw(n){return n.collectionGroup!==null}function ms(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ae(Ke.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Vi(o,r))}),t.has(Ke.keyField().canonicalString())||e.ce.push(new Vi(Ke.keyField(),r))}return e.ce}function Mt(n){let e=B(n);return e.le||(e.le=k2(e,ms(n))),e.le}function k2(n,e){if(n.limitType==="F")return Ky(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Vi(i.field,o)});let t=n.endAt?new qn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qn(n.startAt.position,n.startAt.inclusive):null;return Ky(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Qy(n,e){let t=n.filters.concat([e]);return new In(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ah(n,e,t){return new In(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jc(n,e){return Zc(Mt(n),Mt(e))&&n.limitType===e.limitType}function HS(n){return`${ji(Mt(n))}|lt:${n.limitType}`}function ls(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$S(i)).join(", ")}]`),Yc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_s(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_s(i)).join(",")),`Target(${r})`}(Mt(n))}; limitType=${n.limitType})`}function Xc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ms(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=Rb(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,ms(r),i)||r.endAt&&!function(s,a,c){let l=Rb(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,ms(r),i))}(n,e)}function GS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WS(n){return(e,t)=>{let r=!1;for(let i of ms(n)){let o=O2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function O2(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Qr(c,l):G()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}var zn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return kS(this.inner)}size(){return this.innerSize}};var F2=new Pe($.comparator);function Vt(){return F2}var KS=new Pe($.comparator);function Ec(...n){let e=KS;for(let t of n)e=e.insert(t.key,t);return e}function QS(n){let e=KS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vn(){return Cc()}function YS(){return Cc()}function Cc(){return new zn(n=>n.toString(),(n,e)=>n.isEqual(e))}var L2=new Pe($.comparator),V2=new Ae($.comparator);function ae(...n){let e=V2;for(let t of n)e=e.add(t);return e}var j2=new Ae(se);function Rw(){return j2}function Mw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(e)?"-0":e}}function ZS(n){return{integerValue:""+n}}function JS(n,e){return xS(e)?ZS(e):Mw(n,e)}var Es=class{constructor(){this._=void 0}};function U2(n,e,t){return n instanceof Yr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Wh(o)&&(o=Sw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof hr?eA(n,e):n instanceof fr?tA(n,e):function(i,o){let s=XS(i,o),a=Ob(s)+Ob(i.Pe);return Vy(s)&&Vy(i.Pe)?ZS(a):Mw(i.serializer,a)}(n,e)}function B2(n,e,t){return n instanceof hr?eA(n,e):n instanceof fr?tA(n,e):t}function XS(n,e){return n instanceof Zr?function(r){return Vy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Yr=class extends Es{},hr=class extends Es{constructor(e){super(),this.elements=e}};function eA(n,e){let t=nA(e);for(let r of n.elements)t.some(i=>$n(i,r))||t.push(r);return{arrayValue:{values:t}}}var fr=class extends Es{constructor(e){super(),this.elements=e}};function tA(n,e){let t=nA(e);for(let r of n.elements)t=t.filter(i=>!$n(i,r));return{arrayValue:{values:t}}}var Zr=class extends Es{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Ob(n){return Oe(n.integerValue||n.doubleValue)}function nA(n){return kc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ui=class{constructor(e,t){this.field=e,this.transform=t}};function $2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof hr&&i instanceof hr||r instanceof fr&&i instanceof fr?vs(r.elements,i.elements,$n):r instanceof Zr&&i instanceof Zr?$n(r.Pe,i.Pe):r instanceof Yr&&i instanceof Yr}(n.transform,e.transform)}var Yy=class{constructor(e,t){this.version=e,this.transformResults=t}},ze=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Kd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ds=class{};function rA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Xr(n.key,ze.none()):new Jr(n.key,n.data,ze.none());{let t=n.data,r=_t.empty(),i=new Ae(Ke.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new En(n.key,r,new Zt(i.toArray()),ze.none())}}function q2(n,e,t){n instanceof Jr?function(i,o,s){let a=i.value.clone(),c=Lb(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof En?function(i,o,s){if(!Kd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Lb(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(iA(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function bc(n,e,t,r){return n instanceof Jr?function(o,s,a,c){if(!Kd(o.precondition,s))return a;let l=o.value.clone(),h=Vb(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof En?function(o,s,a,c){if(!Kd(o.precondition,s))return a;let l=Vb(o.fieldTransforms,c,s),h=s.data;return h.setAll(iA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Kd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function z2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=XS(r.transform,i||null);o!=null&&(t===null&&(t=_t.empty()),t.set(r.field,o))}return t||null}function Fb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vs(r,i,(o,s)=>$2(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Jr=class extends Ds{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},En=class extends Ds{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function iA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Lb(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,B2(s,a,t[i]))}return r}function Vb(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,U2(o,s,e))}return r}var Xr=class extends Ds{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Oc=class extends Ds{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Fc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&q2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=bc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=bc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=YS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=rA(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ae())}isEqual(e){return this.batchId===e.batchId&&vs(this.mutations,e.mutations,(t,r)=>Fb(t,r))&&vs(this.baseMutations,e.baseMutations,(t,r)=>Fb(t,r))}},Zy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return L2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Lc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Jy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,ye;function oA(n){switch(n){default:return G();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function sA(n){if(n===void 0)return We("GRPC error has no .code"),x.UNKNOWN;switch(n){case Je.OK:return x.OK;case Je.CANCELLED:return x.CANCELLED;case Je.UNKNOWN:return x.UNKNOWN;case Je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Je.INTERNAL:return x.INTERNAL;case Je.UNAVAILABLE:return x.UNAVAILABLE;case Je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Je.NOT_FOUND:return x.NOT_FOUND;case Je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Je.ABORTED:return x.ABORTED;case Je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Je.DATA_LOSS:return x.DATA_LOSS;default:return G()}}(ye=Je||(Je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var jb=null;function aA(){return new TextEncoder}var H2=new Vr([4294967295,4294967295],0);function Ub(n){let e=aA().encode(n),t=new fy;return t.update(e),new Uint8Array(t.digest())}function Bb(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vr([t,r],0),new Vr([i,o],0)]}var Xy=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ki(`Invalid padding: ${t}`);if(r<0)throw new ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ki(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ki(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Vr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Vr.fromNumber(r)));return i.compare(H2)===1&&(i=new Vr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Ub(e),[r,i]=Bb(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=Ub(e),[r,i]=Bb(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ki=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new Pe(se),Vt(),ae())}},jc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ae(),ae(),ae())}};var ys=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},ch=class{constructor(e,t){this.targetId=e,this.me=t}},uh=class{constructor(e,t,r=Ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},lh=class{constructor(){this.fe=0,this.ge=qb(),this.pe=Ye.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),t=ae(),r=ae();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G()}}),new jc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=qb()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ev=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vt(),this.qe=$b(),this.Qe=new Pe(se)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(oh(o))if(r===0){let s=new $(o.path);this.Ue(t,s,tt.newNoDocument(s,ee.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}jb?.et(function(h,p,m,v,C){var M,N,j,z,L,Y;let ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},te=p.unchangedNames;return te&&(ne.bloomFilter={applied:C===0,hashCount:(M=te?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(z=(j=(N=te?.bits)===null||N===void 0?void 0:N.bitmap)===null||j===void 0?void 0:j.length)!==null&&z!==void 0?z:0,padding:(Y=(L=te?.bits)===null||L===void 0?void 0:L.padding)!==null&&Y!==void 0?Y:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ne}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Wr(r).toUint8Array()}catch(c){if(c instanceof nh)return _n("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Xy(s,i,o)}catch(c){return _n(c instanceof ki?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&oh(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,tt.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ae();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Vc(e,t,this.Qe,this.ke,r);return this.ke=Vt(),this.qe=$b(),this.Qe=new Pe(se),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new lh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ae(se),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function $b(){return new Pe($.comparator)}function qb(){return new Pe($.comparator)}var G2={asc:"ASCENDING",desc:"DESCENDING"},W2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K2={and:"AND",or:"OR"},tv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function nv(n,e){return n.useProto3Json||Yc(e)?e:{value:e}}function Ts(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Q2(n,e){return Ts(n,e.toTimestamp())}function Qe(n){return K(!!n),ee.fromTimestamp(function(t){let r=dr(t);return new je(r.seconds,r.nanos)}(n))}function Nw(n,e){return rv(n,e).canonicalString()}function rv(n,e){let t=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function uA(n){let e=ve.fromString(n);return K(wA(e)),e}function Uc(n,e){return Nw(n.databaseId,e.path)}function Un(n,e){let t=uA(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(hA(t))}function lA(n,e){return Nw(n.databaseId,e)}function dA(n){let e=uA(n);return e.length===4?ve.emptyPath():hA(e)}function iv(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hA(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function zb(n,e,t){return{name:Uc(n,e),fields:t.value.mapValue.fields}}function fA(n,e,t){let r=Un(n,e.name),i=Qe(e.updateTime),o=e.createTime?Qe(e.createTime):ee.min(),s=new _t({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Y2(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=Un(r,i.found.name),s=Qe(i.found.updateTime),a=i.found.createTime?Qe(i.found.createTime):ee.min(),c=new _t({mapValue:{fields:i.found.fields}});return tt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=Un(r,i.missing),s=Qe(i.readTime);return tt.newNoDocument(o,s)}(n,e):G()}function Z2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Ye.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ye.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:sA(l.code);return new P(h,l.message||"")}(s);t=new uh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Un(n,r.document.name),o=Qe(r.document.updateTime),s=r.document.createTime?Qe(r.document.createTime):ee.min(),a=new _t({mapValue:{fields:r.document.fields}}),c=tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ys(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Un(n,r.document),o=r.readTime?Qe(r.readTime):ee.min(),s=tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ys([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Un(n,r.document),o=r.removedTargetIds||[];t=new ys([],o,i,null)}else{if(!("filter"in e))return G();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Jy(i,o),a=r.targetId;t=new ch(a,s)}}return t}function Bc(n,e){let t;if(e instanceof Jr)t={update:zb(n,e.key,e.value)};else if(e instanceof Xr)t={delete:Uc(n,e.key)};else if(e instanceof En)t={update:zb(n,e.key,e.data),updateMask:rj(e.fieldMask)};else{if(!(e instanceof Oc))return G();t={verify:Uc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Yr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof hr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw G()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Q2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G()}(n,e.precondition)),t}function ov(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?ze.updateTime(Qe(o.updateTime)):o.exists!==void 0?ze.exists(o.exists):ze.none()}(e.currentDocument):ze.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),c=new Yr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new hr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new fr(h)}else"increment"in a?c=new Zr(s,a.increment):G();let l=Ke.fromServerFormat(a.fieldPath);return new Ui(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Un(n,e.update.name),o=new _t({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Zt(l.map(h=>Ke.fromServerFormat(h)))}(e.updateMask);return new En(i,o,s,t,r)}return new Jr(i,o,t,r)}if(e.delete){let i=Un(n,e.delete);return new Xr(i,t)}if(e.verify){let i=Un(n,e.verify);return new Oc(i,t)}return G()}function J2(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Qe(i.updateTime):Qe(o);return s.isEqual(ee.min())&&(s=Qe(o)),new Yy(s,i.transformResults||[])}(t,e))):[]}function pA(n,e){return{documents:[lA(n,e.path)]}}function gA(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lA(n,i);let o=function(l){if(l.length!==0)return vA(Ce.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ds(m.field),direction:ej(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=nv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function mA(n){let e=dA(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=yA(p);return m instanceof Ce&&Aw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(C){return new Vi(hs(C.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Yc(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new qn(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new qn(v,m)}(t.endAt)),zS(e,i,s,o,a,"F",c,l)}function X2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=hs(t.unaryFilter.field);return pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=hs(t.unaryFilter.field);return pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=hs(t.unaryFilter.field);return pe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=hs(t.unaryFilter.field);return pe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(n):n.fieldFilter!==void 0?function(t){return pe.create(hs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ce.create(t.compositeFilter.filters.map(r=>yA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(t.compositeFilter.op))}(n):G()}function ej(n){return G2[n]}function tj(n){return W2[n]}function nj(n){return K2[n]}function ds(n){return{fieldPath:n.canonicalString()}}function hs(n){return Ke.fromServerFormat(n.fieldPath)}function vA(n){return n instanceof pe?function(t){if(t.op==="=="){if(Sb(t.value))return{unaryFilter:{field:ds(t.field),op:"IS_NAN"}};if(bb(t.value))return{unaryFilter:{field:ds(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sb(t.value))return{unaryFilter:{field:ds(t.field),op:"IS_NOT_NAN"}};if(bb(t.value))return{unaryFilter:{field:ds(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ds(t.field),op:tj(t.op),value:t.value}}}(n):n instanceof Ce?function(t){let r=t.getFilters().map(i=>vA(i));return r.length===1?r[0]:{compositeFilter:{op:nj(t.op),filters:r}}}(n):G()}function rj(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Cs=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),a=Ye.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var dh=class{constructor(e){this.ct=e}};function ij(n,e){let t;if(e.document)t=fA(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=$i(e.noDocument.readTime);t=tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return G();{let r=$.fromSegments(e.unknownDocument.path),i=$i(e.unknownDocument.version);t=tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new je(i[0],i[1]);return ee.fromTimestamp(o)}(e.readTime)),t}function Hb(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Uc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ts(o,s.version.toTimestamp()),createTime:Ts(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bi(e.version)};else{if(!e.isUnknownDocument())return G();r.unknownDocument={path:t.path.toArray(),version:Bi(e.version)}}return r}function hh(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $i(n){let e=new je(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function Mi(n,e){let t=(e.baseMutations||[]).map(o=>ov(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>ov(n.ct,o)),i=je.fromMillis(e.localWriteTimeMs);return new Fc(e.batchId,i,t,r)}function Dc(n){let e=$i(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?$i(n.lastLimboFreeSnapshotVersion):ee.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),Mt(Fs(dA(o.documents[0])))}(n.query):function(o){return Mt(mA(o))}(n.query),new Cs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ye.fromBase64String(n.resumeToken))}function _A(n,e){let t=Bi(e.snapshotVersion),r=Bi(e.lastLimboFreeSnapshotVersion),i;i=oh(e.target)?pA(n.ct,e.target):gA(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ji(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Pw(n){let e=mA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ah(e,e.limit,"L"):e}function wy(n,e){return new Lc(e.largestBatchId,ov(n.ct,e.overlayMutation))}function Gb(n,e){let t=e.path.lastSegment();return[n,Rt(e.path.popLast()),t]}function Wb(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Bi(r.readTime),documentKey:Rt(r.documentKey.path),largestBatchId:r.largestBatchId}}var sv=class{getBundleMetadata(e,t){return Kb(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:$i(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return Kb(e).put(function(i){return{bundleId:i.id,createTime:Bi(Qe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Qb(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Pw(o.bundledQuery),readTime:$i(o.readTime)}}(r)})}saveNamedQuery(e,t){return Qb(e).put(function(i){return{name:i.name,readTime:Bi(Qe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function Kb(n){return rt(n,"bundles")}function Qb(n){return rt(n,"namedQueries")}var fh=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return vc(e).get(Gb(this.userId,t)).next(r=>r?wy(this.serializer,r):null)}getOverlays(e,t){let r=Vn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Lc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Rt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(vc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Vn(),o=Rt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return vc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=wy(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Vn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vc(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=wy(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return vc(e).put(function(i,o,s){let[a,c,l]=Gb(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Bc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function vc(n){return rt(n,"documentOverlays")}var av=class{Pt(e){return rt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ye.fromUint8Array(r):Ye.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ur=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Rc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=dr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Wr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?FS(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Kh(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):G()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ur.vt=new ur;function oj(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Yb(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=oj(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var cv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=Yb(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=Yb(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},uv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},lv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ni=class{constructor(){this.jt=new cv,this.Ht=new uv(this.jt),this.Jt=new lv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Pi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function jr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Zb(n.arrayValue,e.arrayValue),t!==0?t:(t=Zb(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function Zb(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var ph=class{constructor(e){this.Xt=new Ae((t,r)=>Ke.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=My(e);if(t!==void 0&&!this.sn(t))return!1;let r=xi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(Ke.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new gs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new gs(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new gs(r.field,r.dir==="asc"?0:1)));return new ws(ws.UNKNOWN_ID,this.collectionId,t,xc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function IA(n){var e,t;if(K(n instanceof pe||n instanceof Ce),n instanceof pe){if(n instanceof ih){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>pe.create(n.field,"==",o)))||[];return Ce.create(i,"or")}return n}let r=n.filters.map(i=>IA(i));return Ce.create(r,n.op)}function sj(n){if(n.getFilters().length===0)return[];let e=fv(IA(n));return K(EA(e)),dv(e)||hv(e)?[e]:e.getFilters()}function dv(n){return n instanceof pe}function hv(n){return n instanceof Ce&&Aw(n)}function EA(n){return dv(n)||hv(n)||function(t){if(t instanceof Ce&&jy(t)){for(let r of t.getFilters())if(!dv(r)&&!hv(r))return!1;return!0}return!1}(n)}function fv(n){if(K(n instanceof pe||n instanceof Ce),n instanceof pe)return n;if(n.filters.length===1)return fv(n.filters[0]);let e=n.filters.map(r=>fv(r)),t=Ce.create(e,n.op);return t=gh(t),EA(t)?t:(K(t instanceof Ce),K(Is(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>kw(r,i)))}function kw(n,e){let t;return K(n instanceof pe||n instanceof Ce),K(e instanceof pe||e instanceof Ce),t=n instanceof pe?e instanceof pe?function(i,o){return Ce.create([i,o],"and")}(n,e):Jb(n,e):e instanceof pe?Jb(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),Is(i)&&Is(o))return BS(i,o.getFilters());let s=jy(i)?i:o,a=jy(i)?o:i,c=s.filters.map(l=>kw(l,a));return Ce.create(c,"or")}(n,e),gh(t)}function Jb(n,e){if(Is(e))return BS(e,n.getFilters());{let t=e.filters.map(r=>kw(n,r));return Ce.create(t,"or")}}function gh(n){if(K(n instanceof pe||n instanceof Ce),n instanceof pe)return n;let e=n.getFilters();if(e.length===1)return gh(e[0]);if(jS(n))return n;let t=e.map(i=>gh(i)),r=[];return t.forEach(i=>{i instanceof pe?r.push(i):i instanceof Ce&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ce.create(r,n.op)}var pv=class{constructor(){this.un=new $c}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(sn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(sn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},$c=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ae(ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(ve.comparator)).toArray()}};var Bd=new Uint8Array(0),gv=class{constructor(e,t){this.databaseId=t,this.cn=new $c,this.ln=new zn(r=>ji(r),(r,i)=>Zc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Rt(i)};return Xb(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[TS(t),""],!1,!0);return Xb(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Ln(s.parent))}return r})}addFieldIndex(e,t){let r=wc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=as(e);return o.next(a=>{s.put(Wb(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=wc(e),i=as(e),o=ss(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=wc(e),r=ss(e),i=as(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new ph(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=ss(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ae(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(c)} to execute ${ji(t)}`);let h=function(L,Y){let ne=My(Y);if(ne===void 0)return null;for(let te of sh(L,ne.fieldPath))switch(te.op){case"array-contains-any":return te.value.arrayValue.values||[];case"array-contains":return[te.value]}return null}(l,c),p=function(L,Y){let ne=new Map;for(let te of xi(Y))for(let I of sh(L,te.fieldPath))switch(I.op){case"==":case"in":ne.set(te.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ne.set(te.fieldPath.canonicalString(),I.value),Array.from(ne.values())}return null}(l,c),m=function(L,Y){let ne=[],te=!0;for(let I of xi(Y)){let y=I.kind===0?Nb(L,I.fieldPath,L.startAt):Pb(L,I.fieldPath,L.startAt);ne.push(y.value),te&&(te=y.inclusive)}return new qn(ne,te)}(l,c),v=function(L,Y){let ne=[],te=!0;for(let I of xi(Y)){let y=I.kind===0?Pb(L,I.fieldPath,L.endAt):Nb(L,I.fieldPath,L.endAt);ne.push(y.value),te&&(te=y.inclusive)}return new qn(ne,te)}(l,c),C=this.In(c,l,m),M=this.In(c,l,v),N=this.Tn(c,l,p),j=this.En(c.indexId,h,C,m.inclusive,M,v.inclusive,N);return S.forEach(j,z=>r.G(z,t.limit).next(L=>{L.forEach(Y=>{let ne=$.fromSegments(Y.documentKey);s.has(ne)||(s=s.add(ne),a.push(ne))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=sj(Ce.create(e.filters,"and")).map(r=>Ky(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):Bd,v=this.An(e,m,r[p%l],i),C=this.Rn(e,m,o[p%l],s),M=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,C,M))}return h}An(e,t,r,i){let o=new Pi(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Pi(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new ph(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ae(Ke.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ni;for(let i of xi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);ur.vt.It(o,s)}return r.zt()}dn(e){let t=new Ni;return ur.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ni;return ur.vt.It(Li(this.databaseId,t),r.Yt(function(o){let s=xi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ni);let o=0;for(let s of xi(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&kc(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);ur.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Ni;c.seed(a.zt()),ur.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof pe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=wc(e),i=as(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new xc(p.sequenceNumber,new sn($i(p.readTime),new $(Ln(p.documentKey)),p.largestBatchId)):xc.empty(),v=h.fields.map(([C,M])=>new gs(Ke.fromServerFormat(C),M));return new ws(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:se(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=wc(e),o=as(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(Wb(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return ss(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ss(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=ss(e),o=new Ae(jr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Pi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ae(jr),i=this.Vn(t,e);if(i==null)return r;let o=My(t);if(o!=null){let s=e.data.field(o.fieldPath);if(kc(s))for(let a of s.arrayValue.values||[])r=r.add(new Pi(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Pi(t.indexId,e.key,Bd,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let v=c.getIterator(),C=l.getIterator(),M=os(v),N=os(C);for(;M||N;){let j=!1,z=!1;if(M&&N){let L=h(M,N);L<0?z=!0:L>0&&(j=!0)}else M!=null?z=!0:j=!0;j?(p(N),N=os(C)):z?(m(M),M=os(v)):(M=os(v),N=os(C))}}(i,o,jr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return as(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>jr(s,a)).filter((s,a,c)=>!a||jr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=jr(s,e),c=jr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Bd,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Bd,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return jr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(eS)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||G())).next(eS)}};function Xb(n){return rt(n,"collectionParents")}function ss(n){return rt(n,"indexEntries")}function wc(n){return rt(n,"indexConfiguration")}function as(n){return rt(n,"indexState")}function eS(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Tw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new sn(e.readTime,e.documentKey,t)}var tS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},on=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function DA(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=RS(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function mh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw G();e=n.noDocument}return JSON.stringify(e).length}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(41943040,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);var yh=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ur(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=fs(e),s=Ur(e);return s.add({}).next(a=>{K(typeof a=="number");let c=new Fc(a,t,r,i),l=function(v,C,M){let N=M.baseMutations.map(z=>Bc(v.ct,z)),j=M.mutations.map(z=>Bc(v.ct,z));return{userId:C,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:j}}(this.serializer,this.userId,c),h=[],p=new Ae((m,v)=>se(m.canonicalString(),v.canonicalString()));for(let m of i){let v=RS(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,h2))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Ur(e).get(t).next(r=>r?(K(r.userId===this.userId),Mi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ur(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Mi(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Ur(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ur(e).U("userMutationsIndex",t).next(r=>r.map(i=>Mi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Hd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return fs(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=Ln(h);if(l===this.userId&&t.path.isEqual(m))return Ur(e).get(p).next(v=>{if(!v)throw G();K(v.userId===this.userId),o.push(Mi(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(se),i=[];return t.forEach(o=>{let s=Hd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=fs(e).J({range:a},(l,h,p)=>{let[m,v,C]=l,M=Ln(v);m===this.userId&&o.path.isEqual(M)?r=r.add(C):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Hd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ae(se);return fs(e).J({range:s},(c,l,h)=>{let[p,m,v]=c,C=Ln(m);p===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Ur(e).get(o).next(s=>{if(s===null)throw G();K(s.userId===this.userId),r.push(Mi(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return DA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return fs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Ln(o[1]);i.push(c)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return TA(e,this.userId,t)}Nn(e){return CA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function TA(n,e,t){let r=Hd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return fs(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Ur(n){return rt(n,"mutations")}function fs(n){return rt(n,"documentMutations")}function CA(n){return rt(n,"mutationQueues")}var bs=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var mv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new bs(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ee.fromTimestamp(new je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return cs(e).J((s,a)=>{let c=Dc(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return cs(e).J((r,i)=>{let o=Dc(i);t(o)})}qn(e){return nS(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return nS(e).put("targetGlobalKey",t)}Kn(e,t){return cs(e).put(_A(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=ji(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return cs(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Dc(a);Zc(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Br(e);return t.forEach(s=>{let a=Rt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Br(e);return S.forEach(t,o=>{let s=Rt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Br(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Br(e),o=ae();return i.J({range:r,H:!0},(s,a,c)=>{let l=Ln(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Rt(t.path),i=IDBKeyRange.bound([r],[TS(r)],!1,!0),o=0;return Br(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return cs(e).get(t).next(r=>r?Dc(r):null)}};function cs(n){return rt(n,"targets")}function nS(n){return rt(n,"targetGlobal")}function Br(n){return rt(n,"targetDocuments")}function rS([n,e],[t,r]){let i=se(n,t);return i===0?se(e,r):i}var yv=class{constructor(e){this.Un=e,this.buffer=new Ae(rS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();rS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},vv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ni(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ti(t)}yield this.Hn(3e5)}))}},wv=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Yt.oe);let r=new yv(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(tS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),us()<=Cn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function aj(n,e){return new wv(n,e)}var _v=class{constructor(e,t){this.db=e,this.garbageCollector=aj(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return $d(e,r)}removeReference(e,t,r){return $d(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $d(e,t)}nr(e,t){return function(i,o){let s=!1;return CA(i).Y(a=>TA(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ee.min()),Br(e).delete(function(p){return[0,Rt(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $d(e,t)}tr(e,t){let r=Br(e),i,o=Yt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Yt.oe&&t(new $(Ln(i)),o),o=l,i=c):o=Yt.oe}).next(()=>{o!==Yt.oe&&t(new $(Ln(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function $d(n,e){return Br(n).put(function(r,i){return{targetId:0,path:Rt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var vh=class{constructor(){this.changes=new zn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Iv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ai(e).put(r)}removeEntry(e,t,r){return Ai(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],hh(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=tt.newInvalidDocument(t);return Ai(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_c(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:tt.newInvalidDocument(t)};return Ai(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_c(t))},(i,o)=>{r={document:this.ir(t,o),size:mh(o)}}).next(()=>r)}getEntries(e,t){let r=Vt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Vt(),i=new Pe($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,mh(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ae(sS);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(_c(i.first()),_c(i.last())),s=i.getIterator(),a=s.getNext();return Ai(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&sS(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(_c(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),hh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ai(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Vt();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Xc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Vt(),s=oS(t,r),a=oS(t,sn.max());return Ai(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Ev(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return iS(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return iS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=ij(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return tt.newInvalidDocument(e)}};function bA(n){return new Iv(n)}var Ev=class extends vh{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new zn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ae((o,s)=>se(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=Hb(this.cr.serializer,s);i=i.add(o.path.popLast());let l=mh(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=Hb(this.cr.serializer,s.convertToNoDocument(ee.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function iS(n){return rt(n,"remoteDocumentGlobal")}function Ai(n){return rt(n,"remoteDocumentsV14")}function _c(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oS(n,e){let t=e.documentKey.path.toArray();return[n,hh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=se(t[o],r[o]),i)return i;return i=se(t.length,r.length),i||(i=se(t[t.length-2],r[r.length-2]),i||se(t[t.length-1],r[r.length-1]))}var Dv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var wh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&bc(r.mutation,i,Zt.empty(),je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ae()){let i=Vn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Ec();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Vn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ae()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Vt(),s=Cc(),a=function(){return Cc()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof En)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),bc(h.mutation,l,h.mutation.getFieldMask(),je.now())):s.set(l.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Dv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Cc(),i=new Pe((s,a)=>s-a),o=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Zt.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ae()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=YS();h.forEach(m=>{if(!o.has(m)){let v=rA(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Vn()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ae())).next(h=>({batchId:a,changes:QS(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Ec();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new In(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,tt.newInvalidDocument(h)))});let a=Ec();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&bc(h.mutation,l,Zt.empty(),je.now()),Xc(t,l)&&(a=a.insert(c,l))}),a})}};var Tv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qe(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Pw(i.bundledQuery),readTime:Qe(i.readTime)}}(t)),S.resolve()}};var Cv=class{constructor(){this.overlays=new Pe($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Vn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Vn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Vn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Vn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Lc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ae(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var bv=class{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var qc=class{constructor(){this.Tr=new Ae(Xe.Er),this.dr=new Ae(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Xe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ve([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ve([])),r=new Xe(t,e),i=new Xe(t,e+1),o=ae();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||se(e.wr,t.wr)}static Ar(e,t){return se(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Sv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ae(Xe.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Fc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(se);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new $(o),0),a=new Ae(se);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Xe(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Av=class{constructor(e){this.Mr=e,this.docs=function(){return new Pe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(e,t){let r=Vt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vt(),s=t.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Tw(bS(h),r)<=0||(i.has(h.key)||Xc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){G()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xv(this)}getSize(e){return S.resolve(this.size)}},xv=class extends vh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Rv=class{constructor(e){this.persistence=e,this.Nr=new zn(t=>ji(t),Zc),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qc,this.targetCount=0,this.kr=bs.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new bs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var _h=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Yt(0),this.Kr=!1,this.Kr=!0,this.$r=new bv,this.referenceDelegate=e(this),this.Ur=new Rv(this),this.indexManager=new pv,this.remoteDocumentCache=function(i){return new Av(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new dh(t),this.Gr=new Tv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Cv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Sv(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Mv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Mv=class extends Xd{constructor(e){super(),this.currentSequenceNumber=e}},Ih=class n{constructor(e){this.persistence=e,this.Jr=new qc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Nv=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new eh("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Eb,{unique:!0}),c.createObjectStore("documentMutations")}(e),aS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),aS(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Eb,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:T2});l.createIndex("collectionPathOverlayIndex",C2,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",b2,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:f2});l.createIndex("documentKeyIndex",p2),l.createIndex("collectionGroupIndex",g2)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:_2}).createIndex("sequenceNumberIndex",I2,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:E2}).createIndex("documentKeyIndex",D2,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=mh(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{K(c.userId===o.userId);let l=Mi(this.serializer,c);return DA(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new ve(s),l=function(p){return[0,Rt(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Rt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:w2});let r=t.store("collectionParents"),i=new $c,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Rt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new ve(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=Ln(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Dc(i),s=_A(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new $(ve.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):G()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=bA(this.serializer),o=new _h(Ih.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ae();Mi(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new et(l),p=fh.lt(this.serializer,h),m=o.getIndexManager(h),v=yh.lt(h,this.serializer,m,o.referenceDelegate);return new wh(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Mc(t,Yt.oe),c).next()})})}};function aS(n){n.createObjectStore("targetDocuments",{keyPath:y2}).createIndex("documentTargetsIndex",v2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",m2,{unique:!0}),n.createObjectStore("targetGlobal")}var _y="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Pv=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _v(this,i),this.Ai=t+"main",this.serializer=new dh(c),this.Ri=new Gr(this.Ai,this.hi,new Nv(this.serializer)),this.$r=new av,this.Ur=new mv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bA(this.serializer),this.Gr=new sv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&We("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,_y);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Yt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ni(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ic(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return qd(e).delete(this.clientId)}Fi(){return R(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=rt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):Ic(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,_y);return!1}}return!(!this.networkEnabled||!this.inForeground)||qd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Mc(e,Yt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>qd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return yh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return fh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?x2:c===16?A2:c===15?bw:c===14?PS:c===13?NS:c===12?S2:c===11?MS:void G()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Mc(a,this.Qr?this.Qr.next():Yt.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw We(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,SS);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Ic(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,_y)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ic(e).put("owner",t)}static D(){return Gr.D()}bi(e){let t=Ic(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(We(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Vf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return We("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){We("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ic(n){return rt(n,"owner")}function qd(n){return rt(n,"clientMetadata")}function Ow(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var kv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ae(),i=ae();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Ov=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Eh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Vf()?8:AS(la())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Ov;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(us()<=Cn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",ls(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(us()<=Cn.DEBUG&&k("QueryEngine","Query:",ls(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(us()<=Cn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",ls(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mt(t))):S.resolve())}Yi(e,t){if(kb(t))return S.resolve(null);let r=Mt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ah(t,null,"F"),r=Mt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ae(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,ah(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return kb(t)||i.isEqual(ee.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(us()<=Cn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ls(t)),this.rs(e,s,t,CS(i,-1)).next(a=>a))})}ts(e,t){let r=new Ae(WS(e));return t.forEach((i,o)=>{Xc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return us()<=Cn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",ls(t)),this.Ji.getDocumentsMatchingQuery(e,t,sn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Fv=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Pe(se),this._s=new zn(o=>ji(o),Zc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function SA(n,e,t,r){return new Fv(n,e,t,r)}function AA(n,e){return R(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ae();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function cj(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(C=>{v=v.next(()=>h.getEntry(c,C)).next(M=>{let N=l.docVersions.get(C);K(N!==null),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function xA(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function uj(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ye.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,N,j){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let c=Vt(),l=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(RA(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function RA(n,e,t){let r=ae(),i=ae();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Vt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function lj(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ss(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Cs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function As(n,e,t){return R(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ni(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Dh(n,e,t){let r=B(n),i=ee.min(),o=ae();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=B(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Mt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:ae())).next(a=>(PA(r,GS(e),a),{documents:a,Ts:o})))}function MA(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function NA(n,e){let t=B(n),r=t.us.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,CS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(PA(t,e,i),i))}function PA(n,e,t){let r=n.us.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function dj(n,e,t,r){return R(this,null,function*(){let i=B(n),o=ae(),s=Vt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Ss(i,function(h){return Mt(Fs(ve.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>RA(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function hj(r,i){return R(this,arguments,function*(n,e,t=ae()){let o=yield Ss(n,Mt(Pw(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Qe(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ye.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function cS(n,e){return`firestore_clients_${n}_${e}`}function uS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Iy(n,e){return`firestore_targets_${n}_${e}`}var Th=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(We("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Sc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(We("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ch=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Rw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=xS(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(We("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Lv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(We("SharedClientState",`Failed to parse online state: ${e}`),null)}},zc=class{constructor(){this.activeTargetIds=Rw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Ac=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pe(se),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=cS(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new zc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(cS(this.persistenceKey,r));if(i){let o=Ch.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Iy(this.persistenceKey,e));if(i){let o=Sc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Iy(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void We("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Yt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){We("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Yt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Th(this.currentUser,e,t,r),o=uS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=uS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Iy(this.persistenceKey,e),o=new Sc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Ch.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Th.Rs(new et(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Sc.Rs(i,t)}Ls(e){return Lv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Rw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},bh=class{constructor(){this.so=new zc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Vv=class{_o(e){}shutdown(){}};var Sh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var zd=null;function Ey(){return zd===null?zd=function(){return 268435456+Math.round(2147483648*Math.random())}():zd++,"0x"+zd.toString(16)}var fj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var jv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var wt="WebChannelConnection",Uv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Ey(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw _n("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Os}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=fj[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Ey();return new Promise((s,a)=>{let c=new py;c.setWithCredentials(!0),c.listenOnce(gy.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case yc.NO_ERROR:let h=c.getResponseJson();k(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case yc.TIMEOUT:k(wt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:let p=c.getStatus();if(k(wt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let C=function(N){let j=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(j)>=0?j:x.UNKNOWN}(v.status);a(new P(C,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{k(wt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(wt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Ey(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vy(),a=yy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(wt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,v=!1,C=new jv({Io:N=>{v?k(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(wt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(wt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),M=(N,j,z)=>{N.listen(j,L=>{try{z(L)}catch(Y){setTimeout(()=>{throw Y},0)}})};return M(p,is.EventType.OPEN,()=>{v||(k(wt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),M(p,is.EventType.CLOSE,()=>{v||(v=!0,k(wt,`RPC '${e}' stream ${i} transport closed`),C.So())}),M(p,is.EventType.ERROR,N=>{v||(v=!0,_n(wt,`RPC '${e}' stream ${i} transport errored:`,N),C.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,is.EventType.MESSAGE,N=>{var j;if(!v){let z=N.data[0];K(!!z);let L=z,Y=L.error||((j=L[0])===null||j===void 0?void 0:j.error);if(Y){k(wt,`RPC '${e}' stream ${i} received error:`,Y);let ne=Y.status,te=function(_){let E=Je[_];if(E!==void 0)return sA(E)}(ne),I=Y.message;te===void 0&&(te=x.INTERNAL,I="Unknown error status: "+ne+" with message "+Y.message),v=!0,C.So(new P(te,I)),p.close()}else k(wt,`RPC '${e}' stream ${i} received:`,z),C.bo(z)}}),M(a,my.STAT_EVENT,N=>{N.stat===Ud.PROXY?k(wt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Ud.NOPROXY&&k(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function kA(){return typeof window<"u"?window:null}function Qd(){return typeof document<"u"?document:null}function eu(n){return new tv(n,!0)}var Hc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ah=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Hc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return R(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return R(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return R(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(We(t.toString()),We("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>R(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Bv=class extends Ah{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Z2(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Qe(s.readTime):ee.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=iv(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=oh(c)?{documents:pA(o,c)}:{query:gA(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=cA(o,s.resumeToken);let l=nv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=Ts(o,s.snapshotVersion.toTimestamp());let l=nv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=X2(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=iv(this.serializer),t.removeTarget=e,this.a_(t)}},$v=class extends Ah{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=J2(e.writeResults,e.commitTime),r=Qe(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=iv(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Bc(this.serializer,r))};this.a_(t)}};var qv=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,rv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,rv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},zv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(We(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Hv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>R(this,null,function*(){ri(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return R(this,null,function*(){let l=B(c);l.L_.add(4),yield Ls(l),l.q_.set("Unknown"),l.L_.delete(4),yield tu(l)})}(this))}))}),this.q_=new zv(r,i)}};function tu(n){return R(this,null,function*(){if(ri(n))for(let e of n.B_)yield e(!0)})}function Ls(n){return R(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Qh(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Vw(t)?Lw(t):js(t).r_()&&Fw(t,e))}function xs(n,e){let t=B(n),r=js(t);t.N_.delete(e),r.r_()&&OA(t,e),t.N_.size===0&&(r.r_()?r.o_():ri(t)&&t.q_.set("Unknown"))}function Fw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}js(n).A_(e)}function OA(n,e){n.Q_.xe(e),js(n).R_(e)}function Lw(n){n.Q_=new ev({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),js(n).start(),n.q_.v_()}function Vw(n){return ri(n)&&!js(n).n_()&&n.N_.size>0}function ri(n){return B(n).L_.size===0}function FA(n){n.Q_=void 0}function pj(n){return R(this,null,function*(){n.q_.set("Online")})}function gj(n){return R(this,null,function*(){n.N_.forEach((e,t)=>{Fw(n,e)})})}function mj(n,e){return R(this,null,function*(){FA(n),Vw(n)?(n.q_.M_(e),Lw(n)):n.q_.set("Unknown")})}function yj(n,e,t){return R(this,null,function*(){if(n.q_.set("Online"),e instanceof uh&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xh(n,r)}else if(e instanceof ys?n.Q_.Ke(e):e instanceof ch?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ee.min()))try{let r=yield xA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Ye.EMPTY_BYTE_STRING,h.snapshotVersion)),OA(o,c);let p=new Cs(h.target,c,l,h.sequenceNumber);Fw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield xh(n,r)}})}function xh(n,e,t){return R(this,null,function*(){if(!ni(e))throw e;n.L_.add(1),yield Ls(n),n.q_.set("Offline"),t||(t=()=>xA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield tu(n)}))})}function LA(n,e){return e().catch(t=>xh(n,t,e))}function Vs(n){return R(this,null,function*(){let e=B(n),t=ei(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;vj(e);)try{let i=yield lj(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,wj(e,i)}catch(i){yield xh(e,i)}VA(e)&&jA(e)})}function vj(n){return ri(n)&&n.O_.length<10}function wj(n,e){n.O_.push(e);let t=ei(n);t.r_()&&t.V_&&t.m_(e.mutations)}function VA(n){return ri(n)&&!ei(n).n_()&&n.O_.length>0}function jA(n){ei(n).start()}function _j(n){return R(this,null,function*(){ei(n).p_()})}function Ij(n){return R(this,null,function*(){let e=ei(n);for(let t of n.O_)e.m_(t.mutations)})}function Ej(n,e,t){return R(this,null,function*(){let r=n.O_.shift(),i=Zy.from(r,e,t);yield LA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Vs(n)})}function Dj(n,e){return R(this,null,function*(){e&&ei(n).V_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return oA(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();ei(r).s_(),yield LA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Vs(r)}})}(n,e)),VA(n)&&jA(n)})}function lS(n,e){return R(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ri(t);t.L_.add(3),yield Ls(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield tu(t)})}function Gv(n,e){return R(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield tu(t)):e||(t.L_.add(2),yield Ls(t),t.q_.set("Unknown"))})}function js(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new Bv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:pj.bind(null,n),Ro:gj.bind(null,n),mo:mj.bind(null,n),d_:yj.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.K_.s_(),Vw(n)?Lw(n):n.q_.set("Unknown")):(yield n.K_.stop(),FA(n))}))),n.K_}function ei(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new $v(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_j.bind(null,n),mo:Dj.bind(null,n),f_:Ij.bind(null,n),g_:Ej.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.U_.s_(),yield Vs(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Wv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Us(n,e){if(We("AsyncQueue",`${e}: ${n}`),ni(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var Rh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Ec(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Mh=class{constructor(){this.W_=new Pe($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Rs=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Rh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Kv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Qv=class{constructor(){this.queries=dS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=dS(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function dS(){return new zn(n=>HS(n),Jc)}function jw(n,e){return R(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Kv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Us(s,`Initialization of query '${ls(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Bw(t)})}function Uw(n,e){return R(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Tj(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Bw(t)}function Cj(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Bw(n){n.Y_.forEach(e=>{e.next()})}var Yv,hS;(hS=Yv||(Yv={})).ea="default",hS.Cache="cache";var Gc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yv.Cache}};var Zv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Nh=class{constructor(e){this.serializer=e}Es(e){return Un(this.serializer,e)}ds(e){return e.metadata.exists?fA(this.serializer,e.document,!1):tt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Qe(e)}},Jv=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UA(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Nh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ae()).add(o);t.set(s,a)}}return t}complete(){return R(this,null,function*(){let e=yield dj(this.localStore,new Nh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield hj(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function UA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Ph=class{constructor(e){this.key=e}},kh=class{constructor(e){this.key=e}},Oh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=WS(e),this.Ra=new Rh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Mh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Xc(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?C!==M&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(v?(s=s.add(v),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,C){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return M(v)-M(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new Rs(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Mh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new kh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Ph(r))}),t}ba(e){this.Ta=e.Ts,this.da=ae();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Rs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Xv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ew=class{constructor(e){this.key=e,this.va=!1}},tw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new zn(a=>HS(a),Jc),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe($.comparator),this.Na=new Map,this.La=new qc,this.Ba={},this.ka=new Map,this.qa=bs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function bj(n,e,t=!0){return R(this,null,function*(){let r=Yh(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield BA(r,e,t,!0),i})}function Sj(n,e){return R(this,null,function*(){let t=Yh(n);yield BA(t,e,!0,!1)})}function BA(n,e,t,r){return R(this,null,function*(){let i=yield Ss(n.localStore,Mt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield $w(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Qh(n.remoteStore,i),a})}function $w(n,e,t,r,i){return R(this,null,function*(){n.Ka=(p,m,v)=>function(M,N,j,z){return R(this,null,function*(){let L=N.view.ma(j);L.ns&&(L=yield Dh(M.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,L)));let Y=z&&z.targetChanges.get(N.targetId),ne=z&&z.targetMismatches.get(N.targetId)!=null,te=N.view.applyChanges(L,M.isPrimaryClient,Y,ne);return nw(M,N.targetId,te.wa),te.snapshot})}(n,p,m,v);let o=yield Dh(n.localStore,e,!0),s=new Oh(e,o.Ts),a=s.ma(o.documents),c=jc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);nw(n,t,l.wa);let h=new Xv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Aj(n,e,t){return R(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Jc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield As(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&xs(r.remoteStore,i.targetId),Ms(r,i.targetId)}).catch(ti))):(Ms(r,i.targetId),yield As(r.localStore,i.targetId,!0))})}function xj(n,e){return R(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xs(t.remoteStore,r.targetId))})}function Rj(n,e,t){return R(this,null,function*(){let r=Gw(n);try{let i=yield function(s,a){let c=B(s),l=je.now(),h=a.reduce((v,C)=>v.add(C.key),ae()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=Vt(),M=ae();return c.cs.getEntries(v,h).next(N=>{C=N,C.forEach((j,z)=>{z.isValidDocument()||(M=M.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,C)).next(N=>{p=N;let j=[];for(let z of a){let L=z2(z,p.get(z.key).overlayedDocument);L!=null&&j.push(new En(z.key,L,VS(L.value.mapValue),ze.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,j,a)}).next(N=>{m=N;let j=N.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,N.batchId,j)})}).then(()=>({batchId:m.batchId,changes:QS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Pe(se)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield mr(r,i.changes),yield Vs(r.remoteStore)}catch(i){let o=Us(i,"Failed to persist write");t.reject(o)}})}function $A(n,e){return R(this,null,function*(){let t=B(n);try{let r=yield uj(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield mr(t,r,e)}catch(r){yield ti(r)}})}function fS(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=B(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&Bw(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Mj(n,e,t){return R(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Pe($.comparator);s=s.insert(o,tt.newNoDocument(o,ee.min()));let a=ae().add(o),c=new Vc(ee.min(),new Map,new Pe(se),s,a);yield $A(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),Hw(r)}else yield As(r.localStore,e,!1).then(()=>Ms(r,e,t)).catch(ti)})}function Nj(n,e){return R(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield cj(t.localStore,e);zw(t,r,null),qw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield mr(t,i)}catch(i){yield ti(i)}})}function Pj(n,e,t){return R(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let c=B(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);zw(r,e,t),qw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield mr(r,i)}catch(i){yield ti(i)}})}function kj(n,e){return R(this,null,function*(){let t=B(n);ri(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Us(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function qw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function zw(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ms(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||qA(n,r)})}function qA(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(xs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Hw(n))}function nw(n,e,t){for(let r of t)r instanceof Ph?(n.La.addReference(r.key,e),Oj(n,r)):r instanceof kh?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||qA(n,r.key)):G()}function Oj(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),Hw(n))}function Hw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ve.fromString(e)),r=n.qa.next();n.Na.set(r,new ew(t)),n.Oa=n.Oa.insert(t,r),Qh(n.remoteStore,new Cs(Mt(Fs(t.path)),r,"TargetPurposeLimboResolution",Yt.oe))}}function mr(n,e,t){return R(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=kv.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return R(this,null,function*(){let h=B(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!ni(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),C=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function Fj(n,e){return R(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield AA(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield mr(t,r.hs)}})}function Lj(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return ae().add(r.key);{let i=ae(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function Vj(n,e){return R(this,null,function*(){let t=B(n),r=yield Dh(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&nw(t,e.targetId,i.wa),i})}function jj(n,e){return R(this,null,function*(){let t=B(n);return NA(t.localStore,e).then(r=>mr(t,r))})}function Uj(n,e,t,r){return R(this,null,function*(){let i=B(n),o=yield function(a,c){let l=B(a),h=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Vs(i.remoteStore):t==="acknowledged"||t==="rejected"?(zw(i,e,r||null),qw(i,e),function(a,c){B(B(a).mutationQueue).On(c)}(i.localStore,e)):G(),yield mr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Bj(n,e){return R(this,null,function*(){let t=B(n);if(Yh(t),Gw(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield pS(t,r.toArray());t.Qa=!0,yield Gv(t.remoteStore,!0);for(let o of i)Qh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ms(t,s),As(t.localStore,s,!0))),xs(t.remoteStore,s)}),yield i,yield pS(t,r),function(s){let a=B(s);a.Na.forEach((c,l)=>{xs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Pe($.comparator)}(t),t.Qa=!1,yield Gv(t.remoteStore,!1)}})}function pS(n,e,t){return R(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield Ss(r.localStore,Mt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield Vj(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield MA(r.localStore,s);a=yield Ss(r.localStore,l),yield $w(r,zA(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function zA(n){return zS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $j(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function qj(n,e,t,r){return R(this,null,function*(){let i=B(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield NA(i.localStore,GS(o[0])),a=Vc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ye.EMPTY_BYTE_STRING);yield mr(i,s,a);break}case"rejected":yield As(i.localStore,e,!0),Ms(i,e,r);break;default:G()}})}function zj(n,e,t){return R(this,null,function*(){let r=Yh(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield MA(r.localStore,i),s=yield Ss(r.localStore,o);yield $w(r,zA(o),s.targetId,!1,s.resumeToken),Qh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield As(r.localStore,i,!1).then(()=>{xs(r.remoteStore,i),Ms(r,i)}).catch(ti))}})}function Yh(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mj.bind(null,e),e.Ca.d_=Tj.bind(null,e.eventManager),e.Ca.$a=Cj.bind(null,e.eventManager),e}function Gw(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pj.bind(null,e),e}function Hj(n,e,t){let r=B(n);(function(o,s,a){return R(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(v,C){let M=B(v),N=Qe(C.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",j=>M.Gr.getBundleMetadata(j,C.id)).then(j=>!!j&&j.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(UA(c));let l=new Jv(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield mr(o,p.Ia,void 0),yield function(v,C){let M=B(v);return M.persistence.runTransaction("Save bundle","readwrite",N=>M.Gr.saveBundleMetadata(N,C))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return _n("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var rw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=eu(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return SA(this.persistence,new Eh,t.initialUser,this.serializer)}Ga(t){return new _h(Ih.Zr,this.serializer)}Wa(t){return new bh}terminate(){return R(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Fh=class n extends rw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield Ff(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Gw(this.Ja.syncEngine),yield Vs(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return SA(this.persistence,new Eh,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new vv(r,e.asyncQueue,t)}Ha(e,t){let r=new Oy(t,this.persistence);return new ky(e.asyncQueue,r)}Ga(e){let t=Ow(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Pv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kA(),Qd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bh}},iw=class n extends Fh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield Ff(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Ac&&(this.sharedClientState.syncEngine={no:Uj.bind(null,t),ro:qj.bind(null,t),io:zj.bind(null,t),Qi:$j.bind(null,t),eo:jj.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>R(this,null,function*(){yield Bj(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=kA();if(!Ac.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Ow(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ac(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Ww=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fj.bind(null,this.syncEngine),yield Gv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Qv}()}createDatastore(t){let r=eu(t.databaseInfo.databaseId),i=function(s){return new Uv(s)}(t.databaseInfo);return function(s,a,c,l){return new qv(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new Hv(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>fS(this.syncEngine,r,0),function(){return Sh.D()?new Sh:new Vv}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new tw(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){var t,r;yield function(o){return R(this,null,function*(){let s=B(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ls(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function gS(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ns=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):We("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ow=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new nt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}Ua(){return R(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return R(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Zv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return R(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return R(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var sw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return R(this,null,function*(){let s=B(i),a={documents:o.map(p=>Uc(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ve.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=Y2(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new Oc(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let o=B(r),s={writes:i.map(a=>Bc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ve.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw G();t=ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?ze.exists(!1):ze.updateTime(t):ze.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ze.updateTime(t)}return ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var aw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Hc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>R(this,null,function*(){let e=new sw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Yc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!oA(t)}return!1}};var cw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Zd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Us(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Dy(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield AA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function mS(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Kw(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>lS(e.remoteStore,i)),n._onlineComponents=e})}function Kw(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Dy(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;_n("Error using user provided cache. Falling back to memory cache: "+t),yield Dy(n,new rw)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Dy(n,new rw);return n._offlineComponents})}function Zh(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield mS(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield mS(n,new Ww))),n._onlineComponents})}function HA(n){return Kw(n).then(e=>e.persistence)}function Qw(n){return Kw(n).then(e=>e.localStore)}function GA(n){return Zh(n).then(e=>e.remoteStore)}function Yw(n){return Zh(n).then(e=>e.syncEngine)}function Gj(n){return Zh(n).then(e=>e.datastore)}function Ps(n){return R(this,null,function*(){let e=yield Zh(n),t=e.eventManager;return t.onListen=bj.bind(null,e.syncEngine),t.onUnlisten=Aj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Sj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xj.bind(null,e.syncEngine),t})}function Wj(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield HA(n),t=yield GA(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),tu(o)}(t)}))}function Kj(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield HA(n),t=yield GA(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=B(i);o.L_.add(0),yield Ls(o),o.q_.set("Offline")})}(t)}))}function Qj(n,e){let t=new nt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield function(l,h){let p=B(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Us(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Qw(n),e,t)})),t.promise}function WA(n,e,t={}){let r=new nt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new Ns({next:m=>{h.Za(),s.enqueueAndForget(()=>Uw(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Gc(Fs(a.path),h,{includeMetadataChanges:!0,_a:!0});return jw(o,p)}(yield Ps(n),n.asyncQueue,e,t,r)})),r.promise}function Yj(n,e){let t=new nt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield Dh(i,o,!0),c=new Oh(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Us(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Qw(n),e,t)})),t.promise}function KA(n,e,t={}){let r=new nt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new Ns({next:m=>{h.Za(),s.enqueueAndForget(()=>Uw(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Gc(a,h,{includeMetadataChanges:!0,_a:!0});return jw(o,p)}(yield Ps(n),n.asyncQueue,e,t,r)})),r.promise}function Zj(n,e){let t=new Ns(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield Ps(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield Ps(n),t)}))}}function Jj(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?aA().encode(s):s,function(h,p){return new ow(h,p)}(function(h,p){if(h instanceof Uint8Array)return gS(h,p);if(h instanceof ArrayBuffer)return gS(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,eu(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){Hj(yield Yw(n),i,r)}))}function Xj(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield Qw(n),e)}))}function QA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var yS=new Map;function Zw(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Jw(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vS(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wS(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G()}function we(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Jh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function YA(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Lh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ty;switch(r.type){case"firstParty":return new Ay(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=yS.get(t);r&&(k("ComponentProvider","Removing Datastore"),yS.delete(t),r.terminate())}(this),Promise.resolve()}};function ZA(n,e,t,r={}){var i;let o=(n=we(n,qi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&_n("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=et.MOCK_USER;else{a=bI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new et(l)}n._authCredentials=new Cy(new Yd(a,c))}}var ht=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Re=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Bn=class n extends ht{constructor(e,t,r){super(e,t,Fs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Xw(n,e,...t){if(n=Fe(n),Zw("collection","path",e),n instanceof qi){let r=ve.fromString(e,...t);return wS(r),new Bn(n,null,r)}{if(!(n instanceof Re||n instanceof Bn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return wS(r),new Bn(n.firestore,null,r)}}function JA(n,e){if(n=we(n,qi),Zw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ht(n,null,function(r){return new In(ve.emptyPath(),r)}(e))}function nu(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=Zd.newId()),Zw("doc","path",e),n instanceof qi){let r=ve.fromString(e,...t);return vS(r),new Re(n,null,new $(r))}{if(!(n instanceof Re||n instanceof Bn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return vS(r),new Re(n.firestore,n instanceof Bn?n.converter:null,new $(r))}}function e_(n,e){return n=Fe(n),e=Fe(e),(n instanceof Re||n instanceof Bn)&&(e instanceof Re||e instanceof Bn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function t_(n,e){return n=Fe(n),e=Fe(e),n instanceof ht&&e instanceof ht&&n.firestore===e.firestore&&Jc(n._query,e._query)&&n.converter===e.converter}var Vh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Hc(this,"async_queue_retry"),this.Vu=()=>{let r=Qd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Qd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Qd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new nt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ni(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw We("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Wv.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&G()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function uw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var lw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new nt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var XA=-1,Ue=class extends qi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Vh(e),this._firestoreClient=void 0,yield e}})}};function ft(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ex(n),n._firestoreClient}function ex(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new Fy(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,QA(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new cw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function tx(n,e){_n("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return rx(n,Ww.provider,{build:r=>new Fh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function nx(n){return R(this,null,function*(){_n("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();rx(n,Ww.provider,{build:t=>new iw(t,e.cacheSizeBytes)})})}function rx(n,e,t){if((n=we(n,Ue))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},ex(n)}function ix(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new nt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!Gr.D())return Promise.resolve();let i=r+"main";yield Gr.delete(i)})}(Ow(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function ox(n){return function(t){let r=new nt;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return kj(yield Yw(t),r)})),r.promise}(ft(n=we(n,Ue)))}function sx(n){return Wj(ft(n=we(n,Ue)))}function ax(n){return Kj(ft(n=we(n,Ue)))}function cx(n,e){let t=ft(n=we(n,Ue)),r=new lw;return Jj(t,n._databaseId,e,r),r}function ux(n,e){return Xj(ft(n=we(n,Ue)),e).then(t=>t?new ht(n,null,t.query):null)}var Hn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ye.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Dn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pr=class{constructor(e){this._methodName=e}};var zi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}};var Wc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var eU=/^__.*__$/,dw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new En(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jr(e,this.data,t,this.fieldTransforms)}},jh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new En(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function lx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var Uh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lx(this.Cu)&&eU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},hw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||eu(e)}Qu(e,t,r,i=!1){return new Uh({Cu:e,methodName:t,qu:r,path:Ke.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ki(n){let e=n._freezeSettings(),t=eu(n._databaseId);return new hw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xh(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);i_("Data must be an object, but it was:",s,r);let a=fx(r,s),c,l;if(o.merge)c=new Zt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=yw(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);gx(h,m)||h.push(m)}c=new Zt(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new dw(new _t(a),c,l)}var Kc=class n extends pr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function dx(n,e,t){return new Uh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var fw=class n extends pr{_toFieldTransform(e){return new Ui(e.path,new Yr)}isEqual(e){return e instanceof n}},pw=class n extends pr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=dx(this,e,!0),r=this.Ku.map(o=>Qi(o,t)),i=new hr(r);return new Ui(e.path,i)}isEqual(e){return e instanceof n&&jf(this.Ku,e.Ku)}},gw=class n extends pr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=dx(this,e,!0),r=this.Ku.map(o=>Qi(o,t)),i=new fr(r);return new Ui(e.path,i)}isEqual(e){return e instanceof n&&jf(this.Ku,e.Ku)}},mw=class n extends pr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Zr(e.serializer,JS(e.serializer,this.$u));return new Ui(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function n_(n,e,t,r){let i=n.Qu(1,e,t);i_("Data must be an object, but it was:",i,r);let o=[],s=_t.empty();Wi(r,(c,l)=>{let h=o_(e,c,t);l=Fe(l);let p=i.Nu(h);if(l instanceof Kc)o.push(h);else{let m=Qi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Zt(o);return new jh(s,a,i.fieldTransforms)}function r_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[yw(e,r,t)],c=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(yw(e,o[m])),c.push(o[m+1]);let l=[],h=_t.empty();for(let m=a.length-1;m>=0;--m)if(!gx(l,a[m])){let v=a[m],C=c[m];C=Fe(C);let M=s.Nu(v);if(C instanceof Kc)l.push(v);else{let N=Qi(C,M);N!=null&&(l.push(v),h.set(v,N))}}let p=new Zt(l);return new jh(h,p,s.fieldTransforms)}function hx(n,e,t,r=!1){return Qi(t,n.Qu(r?4:3,e))}function Qi(n,e){if(px(n=Fe(n)))return i_("Unsupported field value:",e,n),fx(n,e);if(n instanceof pr)return function(r,i){if(!lx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Qi(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=je.fromDate(r);return{timestampValue:Ts(i.serializer,o)}}if(r instanceof je){let o=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ts(i.serializer,o)}}if(r instanceof zi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hn)return{bytesValue:cA(i.serializer,r._byteString)};if(r instanceof Re){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Nw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Wc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Mw(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Jh(r)}`)}(n,e)}function fx(n,e){let t={};return kS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(n,(r,i)=>{let o=Qi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function px(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof zi||n instanceof Hn||n instanceof Re||n instanceof pr||n instanceof Wc)}function i_(n,e,t){if(!px(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Jh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function yw(n,e,t){if((e=Fe(e))instanceof Dn)return e._internalPath;if(typeof e=="string")return o_(n,e);throw Bh("Field path arguments must be of type string or ",n,!1,void 0,t)}var tU=new RegExp("[~\\*/\\[\\]]");function o_(n,e,t){if(e.search(tU)>=0)throw Bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dn(...e.split("."))._internalPath}catch{throw Bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(x.INVALID_ARGUMENT,a+n+c)}function gx(n,e){return n.some(t=>t.isEqual(e))}var Hi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new vw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ef("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},vw=class extends Hi{data(){return super.data()}};function ef(n,e){return typeof e=="string"?o_(n,e):e instanceof Dn?e._internalPath:e._delegate._internalPath}function mx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qc=class{},Gi=class extends Qc{};function yr(n,e,...t){let r=[];e instanceof Qc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof ww).length,a=o.filter(c=>c instanceof $h).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var $h=class n extends Gi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return bx(e._query,t),new ht(e.firestore,e.converter,Qy(e._query,t))}_parse(e){let t=Ki(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){IS(p,h);let v=[];for(let C of p)v.push(_S(c,o,C));m={arrayValue:{values:v}}}else m=_S(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||IS(p,h),m=hx(a,s,p,h==="in"||h==="not-in");return pe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function yx(n,e,t){let r=e,i=ef("where",n);return $h._create(i,r,t)}var ww=class n extends Qc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ce.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)bx(s,c),s=Qy(s,c)}(e._query,t),new ht(e.firestore,e.converter,Qy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var _w=class n extends Gi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vi(o,s)}(e._query,this._field,this._direction);return new ht(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new In(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function vx(n,e="asc"){let t=e,r=ef("orderBy",n);return _w._create(r,t)}var qh=class n extends Gi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ht(e.firestore,e.converter,ah(e._query,this._limit,this._limitType))}};function wx(n){return YA("limit",n),qh._create("limit",n,"F")}function _x(n){return YA("limitToLast",n),qh._create("limitToLast",n,"L")}var zh=class n extends Gi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Cx(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new In(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Ix(...n){return zh._create("startAt",n,!0)}function Ex(...n){return zh._create("startAfter",n,!1)}var Hh=class n extends Gi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Cx(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new In(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Dx(...n){return Hh._create("endBefore",n,!1)}function Tx(...n){return Hh._create("endAt",n,!0)}function Cx(n,e,t,r){if(t[0]=Fe(t[0]),t[0]instanceof Hi)return function(o,s,a,c,l){if(!c)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of ms(o))if(p.field.isKeyField())h.push(Li(s,c.key));else{let m=c.data.field(p.field);if(Wh(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new qn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ki(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let C=0;C<h.length;C++){let M=h[C];if(m[C].field.isKeyField()){if(typeof M!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!xw(s)&&M.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let N=s.path.child(ve.fromString(M));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let j=new $(N);v.push(Li(a,j))}else{let N=hx(c,l,M);v.push(N)}}return new qn(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _S(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xw(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ve.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Li(n,new $(r))}if(t instanceof Re)return Li(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jh(t)}.`)}function IS(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bx(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ks=class{convertValue(e,t="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Wi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Oe(s.doubleValue));return new Wc(o)}convertGeoPoint(e){return new zi(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Sw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){let t=dr(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);K(wA(r));let i=new Kr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||We(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function tf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Iw=class extends ks{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};var lr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},an=class extends Hi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new zr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ef("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},zr=class extends an{data(e={}){return super.data(e)}},Tn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zr(this._firestore,this._userDataWriter,r.key,r,new lr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new zr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new zr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:nU(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function nU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}function s_(n,e){return n instanceof an&&e instanceof an?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Tn&&e instanceof Tn&&n._firestore===e._firestore&&t_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Sx(n){n=we(n,Re);let e=we(n.firestore,Ue);return WA(ft(e),n._key).then(t=>l_(e,n,t))}var gr=class extends ks{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};function Ax(n){n=we(n,Re);let e=we(n.firestore,Ue),t=ft(e),r=new gr(e);return Qj(t,n._key).then(i=>new an(e,r,n._key,i,new lr(i!==null&&i.hasLocalMutations,!0),n.converter))}function xx(n){n=we(n,Re);let e=we(n.firestore,Ue);return WA(ft(e),n._key,{source:"server"}).then(t=>l_(e,n,t))}function Rx(n){n=we(n,ht);let e=we(n.firestore,Ue),t=ft(e),r=new gr(e);return mx(n._query),KA(t,n._query).then(i=>new Tn(e,r,n,i))}function Mx(n){n=we(n,ht);let e=we(n.firestore,Ue),t=ft(e),r=new gr(e);return Yj(t,n._query).then(i=>new Tn(e,r,n,i))}function Nx(n){n=we(n,ht);let e=we(n.firestore,Ue),t=ft(e),r=new gr(e);return KA(t,n._query,{source:"server"}).then(i=>new Tn(e,r,n,i))}function a_(n,e,t){n=we(n,Re);let r=we(n.firestore,Ue),i=tf(n.converter,e,t);return Bs(r,[Xh(Ki(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ze.none())])}function c_(n,e,t,...r){n=we(n,Re);let i=we(n.firestore,Ue),o=Ki(i),s;return s=typeof(e=Fe(e))=="string"||e instanceof Dn?r_(o,"updateDoc",n._key,e,t,r):n_(o,"updateDoc",n._key,e),Bs(i,[s.toMutation(n._key,ze.exists(!0))])}function Px(n){return Bs(we(n.firestore,Ue),[new Xr(n._key,ze.none())])}function kx(n,e){let t=we(n.firestore,Ue),r=nu(n),i=tf(n.converter,e);return Bs(t,[Xh(Ki(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ze.exists(!1))]).then(()=>r)}function u_(n,...e){var t,r,i;n=Fe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||uw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(uw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Re)l=we(n.firestore,Ue),h=Fs(n._key.path),c={next:p=>{e[s]&&e[s](l_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=we(n,ht);l=we(p.firestore,Ue),h=p._query;let m=new gr(l);c={next:v=>{e[s]&&e[s](new Tn(l,m,p,v))},error:e[s+1],complete:e[s+2]},mx(n._query)}return function(m,v,C,M){let N=new Ns(M),j=new Gc(v,N,C);return m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return jw(yield Ps(m),j)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Uw(yield Ps(m),j)}))}}(ft(l),h,a,c)}function Ox(n,e){return Zj(ft(n=we(n,Ue)),uw(e)?e:{next:e})}function Bs(n,e){return function(r,i){let o=new nt;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Rj(yield Yw(r),i,o)})),o.promise}(ft(n),e)}function l_(n,e,t){let r=t.docs.get(e._key),i=new gr(n);return new an(n,i,e._key,r,new lr(t.hasPendingWrites,t.fromCache),e.converter)}var rU={maxAttempts:5};var Gh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ki(e)}set(e,t,r){this._verifyNotCommitted();let i=$r(e,this._firestore),o=tf(i.converter,t,r),s=Xh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ze.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=$r(e,this._firestore),s;return s=typeof(t=Fe(t))=="string"||t instanceof Dn?r_(this._dataReader,"WriteBatch.update",o._key,t,r,i):n_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,ze.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=$r(e,this._firestore);return this._mutations=this._mutations.concat(new Xr(t._key,ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function $r(n,e){if((n=Fe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Ew=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ki(t)}get(t){let r=$r(t,this._firestore),i=new Iw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return G();let s=o[0];if(s.isFoundDocument())return new Hi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Hi(this._firestore,i,r._key,null,r.converter);throw G()})}set(t,r,i){let o=$r(t,this._firestore),s=tf(o.converter,r,i),a=Xh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=$r(t,this._firestore),a;return a=typeof(r=Fe(r))=="string"||r instanceof Dn?r_(this._dataReader,"Transaction.update",s._key,r,i,o):n_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=$r(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=$r(e,this._firestore),r=new gr(this._firestore);return super.get(e).then(i=>new an(this._firestore,r,t._key,i._document,new lr(!1,!1),t.converter))}};function Fx(n,e,t){n=we(n,Ue);let r=Object.assign(Object.assign({},rU),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new nt;return o.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield Gj(o);new aw(o.asyncQueue,l,a,s,c).au()})),c.promise}(ft(n),i=>e(new Ew(n,i)),r)}function Lx(){return new Kc("deleteField")}function Vx(){return new fw("serverTimestamp")}function jx(...n){return new pw("arrayUnion",n)}function Ux(...n){return new gw("arrayRemove",n)}function Bx(n){return new mw("increment",n)}(function(e,t=!0){(function(i){Os=i})(xI),da(new ci("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ue(new by(r.getProvider("auth-internal")),new Ry(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Er(wb,"4.7.3",e),Er(wb,"4.7.3","esm2017")})();var iU="@firebase/firestore-compat",oU="0.3.38";function m_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $x(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function qx(){if(!OS())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var nf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return qx(),new n(Hn.fromBase64String(e))}static fromUint8Array(e){return $x(),new n(Hn.fromUint8Array(e))}toBase64(){return qx(),this._delegate.toBase64()}toUint8Array(){return $x(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function d_(n){return sU(n,["next","error","complete"])}function sU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var h_=class{enableIndexedDbPersistence(e,t){return tx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return nx(e._delegate)}clearIndexedDbPersistence(e){return ix(e._delegate)}},rf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Kr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_n("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){ZA(this._delegate,e,t,r)}enableNetwork(){return sx(this._delegate)}disableNetwork(){return ax(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Jw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ox(this._delegate)}onSnapshotsInSync(e){return Ox(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zs(this,Xw(this._delegate,e))}catch(t){throw Nt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Gn(this,nu(this._delegate,e))}catch(t){throw Nt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xi(this,JA(this._delegate,e))}catch(t){throw Nt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Fx(this._delegate,t=>e(new of(this,t)))}batch(){return ft(this._delegate),new sf(new Gh(this._delegate,e=>Bs(this._delegate,e)))}loadBundle(e){return cx(this._delegate,e)}namedQuery(e){return ux(this._delegate,e).then(t=>t?new Xi(this,t):null)}},$s=class extends ks{constructor(e){super(),this.firestore=e}convertBytes(e){return new nf(new Hn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Gn.forKey(t,this.firestore,null)}};function aU(n){ES(n)}var of=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $s(e)}get(e){let t=Yi(e);return this._delegate.get(t).then(r=>new Zi(this._firestore,new an(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Yi(e);return r?(m_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Yi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Yi(e);return this._delegate.delete(t),this}},sf=class{constructor(e){this._delegate=e}set(e,t,r){let i=Yi(e);return r?(m_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Yi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Yi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},qs=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new zr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ji(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new $s(e),t),i.set(t,o)),o}};qs.INSTANCES=new WeakMap;var Gn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $s(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Re(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Re(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new zs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zs(this.firestore,Xw(this._delegate,e))}catch(t){throw Nt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof Re?e_(this._delegate,e):!1}set(e,t){t=m_("DocumentReference.set",t);try{return t?a_(this._delegate,e,t):a_(this._delegate,e)}catch(r){throw Nt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?c_(this._delegate,e):c_(this._delegate,e,t,...r)}catch(i){throw Nt(i,"updateDoc()","DocumentReference.update()")}}delete(){return Px(this._delegate)}onSnapshot(...e){let t=zx(e),r=Hx(e,i=>new Zi(this.firestore,new an(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return u_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=Ax(this._delegate):e?.source==="server"?t=xx(this._delegate):t=Sx(this._delegate),t.then(r=>new Zi(this.firestore,new an(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Nt(n,e,t){return n.message=n.message.replace(e,t),n}function zx(n){for(let e of n)if(typeof e=="object"&&!d_(e))return e;return{}}function Hx(n,e){var t,r;let i;return d_(n[0])?i=n[0]:d_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Zi=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return s_(this._delegate,e._delegate)}},Ji=class extends Zi{data(e){let t=this._delegate.data(e);return this._delegate._converter||DS(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Xi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $s(e)}where(e,t,r){try{return new n(this.firestore,yr(this._delegate,yx(e,t,r)))}catch(i){throw Nt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,yr(this._delegate,vx(e,t)))}catch(r){throw Nt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,yr(this._delegate,wx(e)))}catch(t){throw Nt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,yr(this._delegate,_x(e)))}catch(t){throw Nt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,yr(this._delegate,Ix(...e)))}catch(t){throw Nt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,yr(this._delegate,Ex(...e)))}catch(t){throw Nt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,yr(this._delegate,Dx(...e)))}catch(t){throw Nt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,yr(this._delegate,Tx(...e)))}catch(t){throw Nt(t,"endAt()","Query.endAt()")}}isEqual(e){return t_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Mx(this._delegate):e?.source==="server"?t=Nx(this._delegate):t=Rx(this._delegate),t.then(r=>new ru(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=zx(e),r=Hx(e,i=>new ru(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return u_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},f_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ji(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},ru=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ji(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new f_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ji(this._firestore,r))})}isEqual(e){return s_(this._delegate,e._delegate)}},zs=class n extends Xi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Gn(this.firestore,e):null}doc(e){try{return e===void 0?new Gn(this.firestore,nu(this._delegate)):new Gn(this.firestore,nu(this._delegate,e))}catch(t){throw Nt(t,"doc()","CollectionReference.doc()")}}add(e){return kx(this._delegate,e).then(t=>new Gn(this.firestore,t))}isEqual(e){return e_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Yi(n){return we(n,Re)}var p_=class n{constructor(...e){this._delegate=new Dn(...e)}static documentId(){return new n(Ke.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof Dn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var g_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=Vx();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Lx();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=jx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=Ux(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Bx(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var cU={Firestore:rf,GeoPoint:zi,Timestamp:je,Blob:nf,Transaction:of,WriteBatch:sf,DocumentReference:Gn,DocumentSnapshot:Zi,Query:Xi,QueryDocumentSnapshot:Ji,QuerySnapshot:ru,CollectionReference:zs,FieldPath:p_,FieldValue:g_,setLogLevel:aU,CACHE_SIZE_UNLIMITED:XA};function uU(n,e){n.INTERNAL.registerComponent(new ci("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},cU)))}function lU(n){uU(n,(e,t)=>new rf(e,t,new h_)),n.registerVersion(iU,oU)}lU(Bt);function dU(n,e=ga){return new fe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Gx(n,e){return dU(n,e)}function hU(n,e){return Gx(n,e).pipe(fi(void 0),ya(),W(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function w_(n,e){return Gx(n,e).pipe(W(t=>({payload:t,type:"query"})))}var af=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=Qx(r,t);return new uf(i,o,this.afs)}snapshotChanges(){return hU(this.ref,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return this.snapshotChanges().pipe(W(({payload:t})=>e.idField?xe(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ie(this.ref.get(e)).pipe(Lt)}};function cf(n,e){return w_(n,e).pipe(fi(void 0),ya(),W(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function Wx(n,e,t){return cf(n,t).pipe(hi((r,i)=>fU(r,i.map(o=>o.payload),e),[]),up(),W(r=>r.map(i=>({type:i.type,payload:i}))))}function fU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=pU(n,r))}),n}function y_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function pU(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return y_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return y_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return y_(n,e.oldIndex,1);break}return n}function Kx(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var uf=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=cf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(W(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(fi(void 0),ya(),it(([r,i])=>i.length>0||!r),W(([,r])=>r),Lt)}auditTrail(e){return this.stateChanges(e).pipe(hi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Kx(e);return Wx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return w_(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.payload.docs.map(r=>e.idField?xe(V({},r.data()),{[e.idField]:r.id}):r.data())),Lt)}get(e){return Ie(this.query.get(e)).pipe(Lt)}add(e){return this.ref.add(e)}doc(e){return new af(this.ref.doc(e),this.afs)}},v_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?cf(this.query,this.afs.schedulers.outsideAngular).pipe(Lt):cf(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.filter(r=>e.indexOf(r.type)>-1)),it(t=>t.length>0),Lt)}auditTrail(e){return this.stateChanges(e).pipe(hi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Kx(e);return Wx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return w_(this.query,this.afs.schedulers.outsideAngular).pipe(W(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Lt)}get(e){return Ie(this.query.get(e)).pipe(Lt)}},gU=new H("angularfire2.enableFirestorePersistence"),mU=new H("angularfire2.firestore.persistenceSettings"),yU=new H("angularfire2.firestore.settings"),vU=new H("angularfire2.firestore.use-emulator");function Qx(n,e=t=>t){return{query:e(n),ref:n}}var jt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,v,C,M,N,j,z){this.schedulers=c;let L=mc(t,a,r),Y=h;p&&hy(L,a,m,C,M,N,v,j),[this.firestore,this.persistenceEnabled$]=Vd(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{let ne=a.runOutsideAngular(()=>L.firestore());if(o&&ne.settings(o),Y&&ne.useEmulator(...Y),i&&!ir(s)){let te=()=>{try{return Ie(ne.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),Z(!1)}};return[ne,a.runOutsideAngular(te)]}else return[ne,Z(!1)]},[o,Y,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=Qx(i,r),a=this.schedulers.ngZone.run(()=>o);return new uf(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new v_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new af(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(ns),O(rs,8),O(gU,8),O(yU,8),O(dt),O(ge),O(Od),O(mU,8),O(vU,8),O(mb,8),O(sy,8),O(ay,8),O(cy,8),O(uy,8),O(ly,8),O(dy,8),O(Si,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Yx=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running...",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _U(n,e){if(n&1&&(X(0,"div",1)(1,"h2",2),oe(2,"Informaci\xF3n Personal"),Q(),X(3,"div",3)(4,"div",4)(5,"h4"),oe(6,"Nombre"),Q(),X(7,"p"),oe(8),Q(),X(9,"h4"),oe(10,"Logro de vida"),Q(),X(11,"p"),oe(12),Q()(),X(13,"div",5),Wt(14,"img",6),Q(),X(15,"div",7)(16,"h4"),oe(17,"Email"),Q(),X(18,"p"),oe(19),Q(),X(20,"h4"),oe(21,"Numero de telefono"),Q(),X(22,"p"),oe(23),Q(),X(24,"h4"),oe(25,"Localidad"),Q(),X(26,"p"),oe(27),Q(),X(28,"h4"),oe(29,"Redes socilaes"),Q(),X(30,"p"),oe(31),Q()()()()),n&2){let t=Jl();Ee(8),Ne(t.header.name),Ee(4),Ne(t.header.goalLife),Ee(2),At("src",t.header.photoUrl||"default.jpg",_T),Ee(5),Ne(t.header.email),Ee(4),Ne(t.header.phoneNumber),Ee(4),Ne(t.header.location),Ee(4),Ne(t.header.socialNetwork)}}var Zx=(()=>{class n{constructor(t){this.headerService=t,this.header=new Pd,this.headerService.getHeader().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0]})}static{this.\u0275fac=function(r){return new(r||n)(qe(Yx))}}static{this.\u0275cmp=at({type:n,selectors:[["app-header"]],decls:1,vars:1,consts:[["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"section-title"],[1,"personal-info"],[1,"left-info"],[1,"profile-photo"],["width","200","height","200","alt","Foto de perfil",3,"src"],[1,"right-info"]],template:function(r,i){r&1&&Ft(0,_U,32,7,"div",0),r&2&&At("ngIf",i.header&&i.header.name)},dependencies:[ad],styles:[".personal-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around}h4[_ngcontent-%COMP%]{margin:0;padding:0}"]})}}return n})();var Jx=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="work experience running...",this.dbPath="/Work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DU(n,e){if(n&1&&(X(0,"li",4)(1,"div",5)(2,"h4"),oe(3,"Fecha de Inicio - Fecha de Fin"),Q(),X(4,"p"),oe(5),Q()(),X(6,"div",5)(7,"h4"),oe(8,"Ubicaci\xF3n"),Q(),X(9,"p")(10,"em"),oe(11),Q()()(),X(12,"div",5)(13,"h4"),oe(14,"Posici\xF3n"),Q(),X(15,"p"),oe(16),Q()(),X(17,"div",5)(18,"h4"),oe(19,"Compa\xF1\xEDa"),Q(),X(20,"p"),oe(21),Q()(),X(22,"div",5)(23,"h4"),oe(24,"Logros"),Q(),X(25,"p"),oe(26),Q()()()),n&2){let t=e.$implicit;Ee(5),qg("",t.StartDate," \u2013 ",t.endDate,""),Ee(6),Ne(t.location),Ee(5),Ne(t.position),Ee(5),Ne(t.company),Ee(5),Ne(t.accomplishment)}}function TU(n,e){if(n&1&&(X(0,"section",1)(1,"h3"),oe(2,"Experiencia Laboral"),Q(),X(3,"ul",2),Ft(4,DU,27,6,"li",3),Q()()),n&2){let t=Jl();Ee(4),At("ngForOf",t.workExperience)}}var Xx=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[],console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r})}static{this.\u0275fac=function(r){return new(r||n)(qe(Jx))}}static{this.\u0275cmp=at({type:n,selectors:[["app-work-experience"]],decls:1,vars:1,consts:[["class","work-experience-section",4,"ngIf"],[1,"work-experience-section"],[1,"work-experience-list"],["class","work-experience-item",4,"ngFor","ngForOf"],[1,"work-experience-item"],[1,"job-field"]],template:function(r,i){r&1&&Ft(0,TU,5,1,"section",0),r&2&&At("ngIf",i.workExperience&&i.workExperience.length>0)},dependencies:[On,ad]})}}return n})();var eR=(()=>{class n{constructor(t){this.db=t,this.accesoEducationService="education service running",this.dbPath="/Education",this.EducationRef=t.collection(this.dbPath)}getEducation(){return this.EducationRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function SU(n,e){if(n&1&&(X(0,"li")(1,"p"),oe(2),Q(),X(3,"p"),oe(4),Q()()),n&2){let t=e.$implicit;Ee(2),Ne(t.Instituto),Ee(2),Ne(t.NivelAcademico)}}var tR=(()=>{class n{constructor(t){this.EducationService=t,this.educations=[],this.EducationService.getEducation().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.educations=r,console.log("Datos de educaci\xF3n:",this.educations)})}static{this.\u0275fac=function(r){return new(r||n)(qe(eR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-education"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(X(0,"ul")(1,"h3"),oe(2,"Eduacai\xF3n"),Q(),Ft(3,SU,5,2,"li",0),Q()),r&2&&(Ee(3),At("ngForOf",i.educations))},dependencies:[On]})}}return n})();var lf=class{constructor(){this.lenguajes="Java, C#, C++, Python, JavaScript, TypeScript",this.tecnologia="Angular, React, Node.js, Express.js, .NET, .NET Core"}};var nR=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="Skills running...",this.dbPath="/Skills",this.SkillsRef=t.collection(this.dbPath)}getSkills(){return this.SkillsRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rR=(()=>{class n{constructor(t){this.SkillsService=t,this.skills=new lf,this.SkillsService.getSkills().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r[0],console.log("Datos de skills:",this.skills)})}static{this.\u0275fac=function(r){return new(r||n)(qe(nR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-skills"]],decls:9,vars:2,template:function(r,i){r&1&&(X(0,"ul")(1,"h3"),oe(2,"Skills"),Q(),X(3,"li")(4,"p"),oe(5),Q()(),X(6,"li")(7,"p"),oe(8),Q()()()),r&2&&(Ee(5),Ne(i.skills.lenguajes),Ee(3),Ne(i.skills.tecnologia))}})}}return n})();var iR=(()=>{class n{constructor(t){this.db=t,this.accesoCertificates="certificates service running...",this.dbPath="/Certificates",this.certificateReg=t.collection(this.dbPath)}getCertificate(){return this.certificateReg}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NU(n,e){if(n&1&&(X(0,"li")(1,"p"),oe(2),Q()()),n&2){let t=e.$implicit;Ee(2),Ne(t.NombreCertificado)}}var oR=(()=>{class n{constructor(t){this.CertificatesService=t,this.certificates=[],this.CertificatesService.getCertificate().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log("Datos de educaci\xF3n:",this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)(qe(iR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-certificates"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(X(0,"ul")(1,"h3"),oe(2,"Certificados"),Q(),Ft(3,NU,3,1,"li",0),Q()),r&2&&(Ee(3),At("ngForOf",i.certificates))},dependencies:[On]})}}return n})();var sR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Languages",this.LanguageRef=t.collection(this.dbPath)}getLanguage(){return this.LanguageRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kU(n,e){if(n&1&&(X(0,"li")(1,"p"),oe(2),Q()()),n&2){let t=e.$implicit;Ee(2),Ne(t.Language)}}var aR=(()=>{class n{constructor(t){this.LanguagesService=t,this.languages=[],console.log(this.LanguagesService),this.LanguagesService.getLanguage().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r})}static{this.\u0275fac=function(r){return new(r||n)(qe(sR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-languages"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(X(0,"ul")(1,"h3"),oe(2,"Lenguajeso"),Q(),Ft(3,kU,3,1,"li",0),Q()),r&2&&(Ee(3),At("ngForOf",i.languages))},dependencies:[On]})}}return n})();var cR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Interest",this.InterestRef=t.collection(this.dbPath)}getInterest(){return this.InterestRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LU(n,e){if(n&1&&(X(0,"li")(1,"p"),oe(2),Q()()),n&2){let t=e.$implicit;Ee(2),Ne(t.Interest)}}var uR=(()=>{class n{constructor(t){this.InterestsService=t,this.interest=[],this.InterestsService.getInterest().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interest=r})}static{this.\u0275fac=function(r){return new(r||n)(qe(cR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-interests"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(X(0,"ul")(1,"h3"),oe(2,"Inter\xE9s"),Q(),Ft(3,LU,3,1,"li",0),Q()),r&2&&(Ee(3),At("ngForOf",i.interest))},dependencies:[On]})}}return n})();var lR=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["app-root"]],decls:22,vars:0,consts:[["border","1"],["colspan","2"]],template:function(r,i){r&1&&(X(0,"table",0)(1,"tr")(2,"th",1),oe(3,"Header"),Q()(),X(4,"tr")(5,"td",1),Wt(6,"app-header"),Q()(),X(7,"tr")(8,"td"),Wt(9,"app-work-experience"),Q(),X(10,"td"),Wt(11,"app-skills"),Q()(),X(12,"tr")(13,"td"),Wt(14,"app-education"),Q(),X(15,"td"),Wt(16,"app-certificates"),Q()(),X(17,"tr")(18,"td"),Wt(19,"app-languages"),Q(),X(20,"td"),Wt(21,"app-interests"),Q()()())},dependencies:[Zx,Xx,tR,rR,oR,aR,uR]})}}return n})();var dR={production:!1,firebase:{apiKey:"AIzaSyDmyAaf-6SvFynKBXcqfU3gxUjXBgwHz-M",authDomain:"wikiman-85253.firebaseapp.com",projectId:"wikiman-85253",storageBucket:"wikiman-85253.firebasestorage.app",messagingSenderId:"523325811673",appId:"1:523325811673:web:f1ca5dfcf39a70dd4087c8",measurementId:"G-TXDTV55QSB"}};var hR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=St({type:n,bootstrap:[lR]})}static{this.\u0275inj=bt({providers:[aC()],imports:[oC,XC,gb.initializeApp(dR.firebase)]})}}return n})();iC().bootstrapModule(hR,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
